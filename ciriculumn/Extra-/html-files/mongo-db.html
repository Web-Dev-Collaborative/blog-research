<h1 id="mongodb">MongoDB</h1>
<h3 id="projected-time">Projected Time</h3>
<p>About 4 - 5 hours</p>
<ul>
<li>20-30 minutes for Lesson</li>
<li>20 minutes for Guided Practice</li>
<li>120 - 180 min for Independent Practice</li>
<li>15 minutes for Challenge</li>
<li>15 minutes for Check for Understanding</li>
</ul>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li><a href="/javascript/javascript-6-object-literals.md">Object Literals</a></li>
<li><a href="../api/apis-and-json.md">JSON</a></li>
<li><a href="/databases/relational-databases.md">Relational Databases</a></li>
<li><a href="/command-line/env.md">.env</a></li>
</ul>
<h3 id="motivation">Motivation</h3>
<p>Not all data can be or should be stored in a relational way. In those cases, it is more efficient to use a NoSQL database. MongoDB is one of the most popular NoSQL databases. MongoDB stores data in JSON-like “documents,” which is familiar to folks who use JavaScript.</p>
<p><strong>Which companies use MongoDB?</strong></p>
<ul>
<li>Adobe: The <a href="https://www.mongodb.com/partners/adobe">link here</a> describes the use of MongoDB in Adobe.</li>
<li>eBay
<ul>
<li><a href="https://www.ebayinc.com/stories/blogs/tech/how-ebays-shopping-cart-used-compression-techniques-to-solve-network-io-bottlenecks/">How does eBay’s shopping cart use MongoDB?</a></li>
</ul></li>
</ul>
<h3 id="objectives">Objectives</h3>
<p><strong>Participants will be able to:</strong></p>
<ul>
<li>Set up MongoDB on their laptops</li>
<li>Create databases and collections in MongoDB</li>
<li>Add, query, and update documents</li>
</ul>
<h3 id="materials">Materials</h3>
<ul>
<li><a href="https://docs.google.com/presentation/d/1BvO6PrSpulHVSDNOkMaDZM-V7McmheLgm0Lg2PFae7k/edit#slide=id.p">MongoDB slides</a></li>
<li><a href="https://drive.google.com/file/d/1022MSkPjfRyGAUQa2I-pQltpUn4Q1NJc/view">MongoDB slides video (15 mins watch)</a></li>
<li><a href="https://www.tutorialspoint.com/mongodb/mongodb_data_modeling.htm">MongoDB data Modelling (Tutorialspoint)</a></li>
<li><a href="https://www.tutorialspoint.com/mongodb/mongodb_relationships.htm">MongoDB relationships (Tutorialspoint)</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/mongo-shell/">MongoDB Shell commands reference</a></li>
<li><a href="https://brew.sh/">Homebrew</a></li>
<li><a href="https://medium.freecodecamp.org/building-a-simple-node-js-api-in-under-30-minutes-a07ea9e390d2">Build a simple nodejs api using NodeJs, ExpressJs and MongoDb.</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/query/">Query and Projection Operators in mongoDB</a></li>
</ul>
<h3 id="lesson">Lesson</h3>
<ul>
<li>Video walkthrough of lesson slides <a href="https://drive.google.com/file/d/1022MSkPjfRyGAUQa2I-pQltpUn4Q1NJc/view">MongoDB (15 mins watch)</a></li>
<li>Read through lesson slides <a href="https://docs.google.com/presentation/d/1BvO6PrSpulHVSDNOkMaDZM-V7McmheLgm0Lg2PFae7k/edit#slide=id.p">MongoDB</a></li>
</ul>
<h3 id="common-mistakes-misconceptions">Common Mistakes / Misconceptions</h3>
<ul>
<li><strong>“I already learned how to use relational databases. I’ll just stick with that. They both store data anyway.”</strong> The structure of relational databases is set up for relational data. Using a relational database for non-relational data results in reduced scalability and added cost.</li>
</ul>
<h3 id="guided-practice">Guided Practice</h3>
<p>Techtonica staff will assign pairs.</p>
<p><strong>Activity 1: Installation</strong></p>
<ol type="1">
<li>Check to see if you have Homebrew installed on your laptop. From your Terminal, run the <code>brew help</code> command. If you have Homebrew installed, you’ll see the output from Homebrew appear in your Terminal.</li>
<li>If no Homebrew-related text appears, you’ll need to install Homebrew. Go to the <a href="https://brew.sh/">Homebrew website</a> and follow the installation instructions. Ask for help if needed.</li>
<li>Mongo DB is no longer in the main Homebrew repo. You need to register an add-on using <code>brew tap mongodb/brew</code></li>
<li>Install MongoDB using <code>brew install mongodb-community@4.2</code> in the Terminal</li>
<li>Start it up as a service with <code>brew services start mongodb-community@4.2</code></li>
<li>From a terminal run <code>mongo</code> to connect</li>
<li>If there is an error, troubleshoot using the <a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-os-x/">Mongo Community on Mac docs</a></li>
</ol>
<p><strong>Activity 2: Working with Database</strong></p>
<ul>
<li><p>The command <code>use &lt;db&gt;</code> sets the current database you’ll be working with. In the shell, run <code>use techtonica</code>. Then run <code>show dbs</code>, which will list out the list of databases. What database is there? What is missing?</p></li>
<li><p>The newly created database, “techtonica”, should be missing. This is because the <code>techtonica</code> database is empty. Let’s insert some data storing people’s name (as a string) and birth month (as an integer). Insert a document by running <code>db.classmates.insert({"name": "your_name", "month": your_birthmonth})</code>. Do it at least two more times with a friend’s name. Remember not to double-quote the birth month to keep it as a digit instead of a string.</p></li>
<li><p>Type <code>show dbs</code> again and see that the <code>techtonica</code> database now shows up.</p></li>
<li><p>MongoDB stores documents in collections. Run <code>show collections</code>. What is already there? Where did it come from?</p></li>
<li><p>Run <code>db.createCollection("volunteers")</code>.</p></li>
<li><p>View what’s in each collection by running <code>db.classmates.find()</code> and <code>db.volunteers.find()</code>. What’s the difference?</p></li>
<li><p>Fix the empty volunteer collection by entering a document: <code>db.volunteers.insert({"volunteer": "Adrien"})</code> and <code>db.volunteers.insert({"volunteer": "Jamie"})</code>.</p></li>
<li><p>Now we’ll try out the <code>remove</code> command. Select a number between your birth month and your pair’s birth month inside the classmates collection. Run <code>db.classmates.remove({"month": {$lt: the_number_your_selected}})</code>. The “$lt” means “less than.” What do you think happened to the collections?</p></li>
<li><p>Run <code>db.classmates.find()</code>. Were you correct?</p></li>
<li><p>Run <code>db.volunteers.remove({})</code>, then <code>db.volunteers.find()</code>. What happened?</p></li>
<li><p>Make sure you are in the techtonica database by running <code>use techtonica</code>. Make sure the output is <code>switched to db techtonica</code>. Then, you will delete the techtonica database by running <code>db.dropDatabase()</code>. The output should be <code>{ "dropped" : "techtonica", "ok" : 1 }</code>.</p></li>
<li><p>Exit the shell by running <code>exit</code>. Next, go to the Terminal window running the Mongo Daemon, monogod. Exit the daemon by entering Ctrl C.</p></li>
</ul>
<h3 id="independent-practice">Independent Practice</h3>
<ol type="1">
<li>Read through these MongoDB docs from TutorialsPoint. You don’t have to memorize it, but think about how MongoDB compares to SQL as you read.</li>
</ol>
<ul>
<li><a href="https://www.tutorialspoint.com/mongodb/mongodb_data_modeling.htm">Start here and read until the Deployment section.</a></li>
<li><a href="https://www.tutorialspoint.com/mongodb/mongodb_relationships.htm">Start here and read until the Regex section.</a></li>
</ul>
<ol start="2" type="1">
<li>Go through the following tutorial and follow the steps to build a basic API:</li>
</ol>
<ul>
<li><a href="https://medium.freecodecamp.org/building-a-simple-node-js-api-in-under-30-minutes-a07ea9e390d2">Build a simple nodejs API using NodeJs, ExpressJs, and MongoDb.</a></li>
<li><p>Part of the tutorial requires a mLab account. You can create one <a href="https://docs.mlab.com/">by following these directions.</a></p>
<ul>
<li>You can also check out this <a href="https://www.youtube.com/watch?v=ZnOko_y1CfI">intro to mLab video</a> as an alternative.</li>
</ul></li>
<li><p>Optionally, you can reference <a href="https://youtu.be/4yqu8YF29cU">this video</a> which uses the same technologies to build an API.</p></li>
</ul>
<h3 id="challenge">Challenge</h3>
<p>“<span class="math inline">$lt" was used earlier to filter out which documents you deleted. MongoDB's documentation has a page on [Operators](https://docs.mongodb.com/manual/reference/operator/query/). What type of operator is "$</span>lt”?</p>
<p>Operators can be used to filter what you want to include and what you want to exclude. For example, <code>db.classmated.find({"month": {$lt: 6}})</code> will output anyone born before July (if you set your_birthmonth “July” as 6; because January is 0 in DateTime). You will be testing some of it next.</p>
<p>Open up the MongoDB daemon and shell again, create a database named “filterData”. Create a collection named “zoo”. Create at least 3 documents in the following format: <code>{"type": "lion", "name": "Suzy", "age": 10}</code>. Look at MongoDB’s Operator page and find at least one operator other than Comparison Operator (which $lt was), and then test it out in the zoo collection.</p>
<h3 id="check-for-understanding">Check for Understanding</h3>
<p>List out the steps to store data in MongoDB. Find a classmate. One of you will try to explain the steps by comparing it to organizing books, and the other will compare it to organizing kitchen utensils.</p>
<h3 id="a-note-about-mongoose">A Note About Mongoose</h3>
<p>Further practice with Mongoose (one <a href="https://blog.bitsrc.io/what-is-an-orm-and-why-you-should-use-it-b2b6f75f5e2a">ORM</a> for Mongo) is highly encouraged if you plan on creating a project that includes a Mongo database. If that’s the case, be sure to check out the Mongoose materials below.</p>
<h3 id="supplemental-materials">Supplemental Materials</h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/mongoose">Mongoose docs on MDN</a></li>
<li><a href="https://youtu.be/4yqu8YF29cU">MongoDB Full Tutorial w/ Node.js, Express, and Mongoose</a></li>
</ul>
