<h1 id="sql-2-multiple-tables">SQL 2 (Multiple Tables)</h1>
<h3 id="projected-time">Projected Time</h3>
<p>3 hours</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li><a href="./data-modeling-1.md">Data Modeling 1</a></li>
<li><a href="./sql-1.md">SQL 1</a></li>
<li><a href="./data-modeling-2.md">Data Modeling 2</a></li>
</ul>
<h3 id="objectives">Objectives</h3>
<ul>
<li>Learn how to create multiple SQL tables that are related</li>
<li>Learn how to query multiple tables using joins</li>
</ul>
<h3 id="specific-things-to-learn">Specific Things to Learn</h3>
<ul>
<li>Joins</li>
<li>Junction tables</li>
</ul>
<h3 id="materials">Materials</h3>
<p><a href="https://www.codecademy.com/learn/learn-sql">Codecademy SQL Tutorial</a></p>
<h3 id="lesson">Lesson</h3>
<ol type="1">
<li><p>Go through the “Joining Table Data with SQL” section of https://teamtreehouse.com/library/querying-relational-databases</p></li>
<li><p>Work through the <a href="https://www.codecademy.com/learn/learn-sql">Codecademy SQL Tutorial</a> <strong>Section 4 (Multiple Tables)</strong></p></li>
</ol>
<h3 id="independent-practice">Independent practice</h3>
<p>In SQLite on your own machine, you are going to create the tables for a microblogging platform (an app similar to Twitter). Your database should be able to store user information and posts by specific users. One post must <em>belong to</em> exactly one user. One user can have many posts. Later, we’ll add the ability for users to follow each other, but not now.</p>
<ol type="1">
<li>With pencil/pen and paper, write out the data for a database with the following spec. Fill in the fields with fake data that you make up. Be sure to link posts to a certain existing user!</li>
</ol>
<p>Here’s a sample schema:</p>
<pre><code>- a table named: `users`
    - which has a text field named: `name`
    - and a text field named: `email`
- a table named: `posts`
    - which has an integer field named: `user_id`
    - and a text field named: `content`</code></pre>
<ol start="2" type="1">
<li><p>Enter the SQLite command line program using the terminal commad <code>sqlite3 twitter.sqlite3</code>. (This will save your database to a file called <code>twitter.sqlite3</code>). Once there, use SQL statements to create two tables according to the spec for the two tables in step 1.</p></li>
<li><p>Once you have your two tables set up, compare your table set-up with another apprentice’s.</p></li>
<li><p>Add sample data to the tables yourself (make up some users and posts).</p></li>
<li><p>Try writing queries that get data such as:</p>
<ul>
<li>All the tweets by a given user</li>
<li>The 10 most recent tweets by any user</li>
<li>Use a join to get a user’s info along with their tweets</li>
<li>Make up your own!</li>
</ul></li>
<li><p>Now let’s perform a database migration. We will add a new column to an existing table in our database. Add a text field named: <code>bio</code> to your existing <code>users</code> table!</p></li>
<li><p>Add some sample data to your new <code>bio</code> fields, but not for every user (leave some of their bios blank).</p></li>
<li>Try writing queries that get data such as:
<ul>
<li>Just the bios of all users in the databases</li>
<li>A list of users that have no bio</li>
<li>Just the names of those users that have no bio</li>
<li>Make up your own!</li>
</ul></li>
</ol>
<h3 id="extra-challenge">Extra Challenge</h3>
<p>If you complete the above, we’ll move on to creating a join table.</p>
<ol type="1">
<li><p>Add a new table named <code>follows</code> that has an int field <code>follower_id</code> and an int field <code>followed_id</code>. Draw a picture for this table.</p></li>
<li>Write some queries that get data such as:
<ul>
<li>All users that user 2 is following
<ul>
<li>Hint: in <code>follows</code>, look for <code>follower_id</code> 2, and get all of the user IDs that are in those rows’ <code>followed_id</code> fields. Then get the users by that set of user IDs.</li>
</ul></li>
<li>All users that follow user 2 (users that have 2 as the <code>followed_id</code>)
<ul>
<li>Hint: in <code>follows</code>, look for <code>followed_id</code> 2, and get all of the user IDs that are in those rows’ <code>follower_id</code> fields. Then get those users.</li>
</ul></li>
<li>Find which user has the most followers</li>
</ul></li>
</ol>
<h3 id="supplemental-materials">Supplemental Materials</h3>
<ul>
<li>Another good SQL tutorial: <a href="https://www.sqlteaching.com">SQL Teaching</a></li>
<li>Free SQL Cloud DBs can be created at https://www.elephantsql.com/ (this services uses postgres, not SQLite)</li>
<li><a href="https://www.codecademy.com/learn/learn-sql">SQL Codecademy Tutorial (interactive)</a></li>
<li><a href="https://sqlitebrowser.org/">DB Browser for SQLite</a></li>
<li><a href="https://www.khanacademy.org/computing/computer-programming/sql/sql-basics/v/welcome-to-sql">Khan Academy’s introductory SQL(videos)</a></li>
<li><a href="https://www.tutorialspoint.com/sql/">TutorialsPoint (detailed)</a></li>
<li><a href="https://learncodethehardway.org/sql/">Learn SQL the hard way, textbook</a></li>
<li><a href="http://sol.gfxile.net/galaxql.html">GalaXQL (interactive, graphical)</a></li>
<li><a href="https://www.postgresql.org/docs/current/static/sql.html">PostgreSQL SQL, technical reference manual</a></li>
<li><a href="https://sqlzoo.net/wiki/SQL_Tutorial">SQLZoo</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/sqlite-vs-mysql-vs-postgresql-a-comparison-of-relational-database-management-systems">A RDBMS Comparison</a></li>
</ul>
