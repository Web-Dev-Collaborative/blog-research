<hr />
<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->
<hr />
<h1 id="react-and-redux-to-do-list-project">React and Redux To-Do List Project</h1>
<p>Today you’ll be building a to-do list application with React and local storage. Instead of using Context to manage and update your application’s state, you’ll set up a Redux store and interact with it using the store’s <code>getState</code>, <code>dispatch</code>, and <code>subscribe</code> methods.</p>
<p>This project will also give you a better understanding of how to share and update “global” data across a React application by using Redux. You’ll use Redux to dispatch action POJOs through a reducer function, and have your component access an updated version of the Redux store’s state.</p>
<p>In this project, you will:</p>
<ul>
<li>Generate a Redux store to manage your application’s global information</li>
<li>Define functions to save and load the Redux store’s state with local storage</li>
<li>Generate a Redux <strong>store</strong> with a preloaded state from local storage by using the <code>createStore</code> method from the Redux library</li>
<li>Set up a <strong>reducer</strong> to direct different action types to interact with the Redux store in different ways</li>
<li>Set up <strong>actions</strong> to create a task and delete a task</li>
<li>Use a <code>debugger</code> to investigate the state from within a component</li>
</ul>
<h2 id="phase-1-set-up-project-and-redux-store">Phase 1: Set up project and Redux store</h2>
<p>Begin by cloning the starter project from https://github.com/appacademy-starters/react-redux-todo-list-starter.</p>
<p>Take a moment to examine the project’s file tree below. In the next few phases, you’ll follow the <code>TODO</code> notes in each file to implement Redux into your React project.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">├── <span class="ex">package-lock.json</span></a>
<a class="sourceLine" id="cb1-2" title="2">├── <span class="ex">package.json</span></a>
<a class="sourceLine" id="cb1-3" title="3">├── <span class="ex">public</span></a>
<a class="sourceLine" id="cb1-4" title="4">│   └── <span class="ex">index.html</span></a>
<a class="sourceLine" id="cb1-5" title="5">└── <span class="ex">src</span></a>
<a class="sourceLine" id="cb1-6" title="6">    ├── <span class="ex">App.js</span></a>
<a class="sourceLine" id="cb1-7" title="7">    ├── <span class="ex">actions</span></a>
<a class="sourceLine" id="cb1-8" title="8">    │   └── <span class="ex">taskActions.js</span></a>
<a class="sourceLine" id="cb1-9" title="9">    ├── <span class="ex">components</span></a>
<a class="sourceLine" id="cb1-10" title="10">    │   ├── <span class="ex">Task.js</span></a>
<a class="sourceLine" id="cb1-11" title="11">    │   ├── <span class="ex">TodoForm.js</span></a>
<a class="sourceLine" id="cb1-12" title="12">    │   └── <span class="ex">TodoList.js</span></a>
<a class="sourceLine" id="cb1-13" title="13">    ├── <span class="ex">index.js</span></a>
<a class="sourceLine" id="cb1-14" title="14">    ├── <span class="ex">localStorage.js</span></a>
<a class="sourceLine" id="cb1-15" title="15">    ├── <span class="ex">reducers</span></a>
<a class="sourceLine" id="cb1-16" title="16">    │   └── <span class="ex">tasksReducer.js</span></a>
<a class="sourceLine" id="cb1-17" title="17">    └── <span class="ex">store.js</span></a></code></pre></div>
<h3 id="local-storage">Local storage</h3>
<p>Let’s start by setting up some functions in the <code>localStorage.js</code> file to save and load the Redux store’s state with local storage!</p>
<p>In the <code>loadState</code> function, you’ll want to access the stored tasks state from local storage by using the <code>localStorage.getItem</code> method. If there is no state found, return <code>undefined</code>. However, if the state was found, parse the state from JSON into JavaScript and return the parsed state. If any errors were caught, log the errors with a <code>console.warn</code> statement and have the function return <code>undefined</code>.</p>
<p>In the <code>saveState</code> function, you’ll want to parse the <code>state</code> input from JavaScript into a JSON string. When you call the <code>saveState</code> function, you’ll invoke the function with the Redux store’s state accessed with the <code>store.getState</code> method. After parsing the state from JavaScript into a JSON string, set the string into local storage. Lastly, you’ll want to catch any errors with a <code>console.warn</code> statement.</p>
<h3 id="generate-applications-redux-store">Generate application’s Redux store</h3>
<p>Now that you’ve set up some functions to handle accessing and storing the data with local storage, you’ll want to use those functions in the <code>store.js</code> file. In this file, you’ll use Redux’s <code>createStore</code> function to set up your application’s Redux <code>store</code>. As a reminder, the <code>createStore</code> function takes in a reducer as its first argument, and an optional preloaded state, also referred to as <em>initial</em> state, as its second argument.</p>
<p>Use the <code>loadState</code> function you just defined to access the <code>preloadedState</code>. Now you’ll invoke the <code>createStore</code> function with the <code>tasksReducer</code> and the <code>preloadedState</code> to generate the application’s Redux store.</p>
<p>You’ll want your application to update local storage and log the state whenever there an update to the store - this means you’ll want your application to listen for changes to the store with the <code>store.subscribe</code> method and then update local storage with the <code>saveState</code> function and <code>console.log</code> the state upon any change.</p>
<h2 id="phase-2-actions-and-reducers">Phase 2: Actions and reducers</h2>
<p>Now that you have your application’s Redux store set up, it’s time to define some action creator functions and reducers! You’ll define action creator functions in the <code>taskActions.js</code> file and set up corresponding case statements for each action type in the <code>tasksReducer.js</code> file.</p>
<h3 id="define-action-creator-functions">Define action creator functions</h3>
<p>As a reminder, it is best practice to use constants for action types, instead of string literals, to ensure that errors will be thrown for typos. Start by defining constants for your action types: <code>CREATE_TASK</code> and <code>DELETE_TASK</code>.</p>
<p>Once you have the constants set up, it’s time to define an action creator function for each action type! Start by thinking of what payload information you want your action POJOs to pass into the reducer function.</p>
<p>Define a <code>createTask</code> action creator function that returns actions of type <code>CREATE_TASK</code>. You’ll want <code>type</code>, <code>taskId</code>, and <code>taskMessage</code> payload keys for each <code>CREATE_TASK</code> action POJO. Have the action creator function take in a <code>taskMessage</code> and auto-generate the <code>taskId</code>. You can set the <code>taskId</code> to a time-string that is set when the action creator function is invoked. Generate a new <code>Date</code> object and get its time-string with <code>new Date().getTime()</code>. Set the time-string to the <code>taskId</code> payload key and the <code>taskMessage</code> input to the <code>taskMessage</code> payload key.</p>
<p>Now you’ll want to define the <code>deleteTask</code> action creator function to return actions of type <code>DELETE_TASK</code>. You’ll want the action creator function to take in a <code>taskId</code>. Each <code>DELETE_TASK</code> action POJO should have a <code>type</code> property and a <code>taskId</code> payload key.</p>
<h3 id="define-tasks-reducer-function">Define tasks reducer function</h3>
<p>The next step is to finish implementing the <code>tasksReducer</code>! Begin by freezing the <code>state</code> with <code>Object.freeze(state);</code> so that you won’t accidentally mutate the state. As a reminder, Redux follows the immutable state pattern, meaning that a reducer function should never directly mutate state. After freezing the state, import <code>CREATE_TASK</code> and <code>DELETE_TASK</code> string literal constants and set up a switch statement to evaluate a case statement based on each <code>action.type</code>.</p>
<p>In the <code>CREATE_TASK</code> case, you’ll want to make a copy of the state, structure a <code>newTask</code> POJO, and add the <code>newTask</code> into the copy of the state before returning the copy. Define a <code>nextState</code> variable and use spread syntax (<code>...</code>) to make a copy of the state (<code>{ ...state }</code>). Next, you’ll want to structure the <code>newTask</code> POJO to have an <code>id</code> property set to the action’s <code>taskId</code> payload and a <code>message</code> property set to the action’s <code>taskMessage</code> payload.</p>
<p>Once you have finished structuring the <code>newTask</code> POJO, key into the <code>nextState</code> with the new task ID and set the value of <code>nextState[newTask.id]</code> to the <code>newTask</code>. Alternatively, you could use the <code>taskId</code> payload and set the value of <code>nextState[action.taskId]</code> to the <code>newTask</code> (this will also accomplish what we want, which is to set up a <code>nextState</code> with keys that are task IDs and values that are task POJOs). At the end of the <code>CREATE_TASK</code> case statement, return the updated <code>nextState</code>.</p>
<p>In the <code>DELETE_TASK</code> case, you’ll also want to make a copy of the state (<code>{...state }</code>). Set the copy of the state to a <code>stateWithDeletion</code> variable. Since your <code>DELETE_TASK</code> actions have a <code>taskId</code> payload, you can use JavaScript’s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete">delete</a> operator to delete a specific key-value pair from the <code>stateWithDeletion</code> object, based on the <code>taskId</code> payload:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">delete</span> stateWithDeletion[<span class="va">action</span>.<span class="at">taskId</span>]<span class="op">;</span></a></code></pre></div>
<p>The last thing left in your <code>DELETE_TASK</code> statement is to return the updated <code>stateWithDeletion</code>! If you compare your initial definition of the <code>nextState</code> and <code>stateWithDeletion</code> variables, you’ll see that they are both copies of the <code>state</code> made with spread syntax. Move the <code>nextState</code> variable outside of the <code>switch</code> statement so that both <code>case</code> statements can reference and update the <code>nextState</code>, instead of the <code>DELETE_TASK</code> case statement creating a new copy of the state and updating it.</p>
<h2 id="phase-3-dispatch-actions-from-the-devtools-console">Phase 3: Dispatch actions from the DevTools console</h2>
<p>Now you can test whether you can actually create a task by using the <code>store.dispatch</code> method to dispatch the <code>CREATE_TASK</code> action. As a reminder, dispatching the action will “send” it through the reducer to determine what operation to perform based on the action’s <code>type</code> property. Take a moment to go into your <code>index.js</code> file and import your application’s Redux <code>store</code> and action creator functions:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="im">import</span> <span class="op">{</span> store <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./store&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="im">import</span> <span class="op">{</span> createTask<span class="op">,</span> deleteTask <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./actions/taskActions&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Now that you’ve had the store and actions imported into the file, you can set them as properties to the <code>window</code> object, so that you can access the <code>store</code> and actions from the developer tools console.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">window</span>.<span class="at">store</span> <span class="op">=</span> store<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="va">window</span>.<span class="at">createTask</span> <span class="op">=</span> createTask<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="va">window</span>.<span class="at">deleteTask</span> <span class="op">=</span> deleteTask<span class="op">;</span></a></code></pre></div>
<p>At this point, your <code>index.js</code> file should look something like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="im">import</span> App <span class="im">from</span> <span class="st">&#39;./App&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="im">import</span> <span class="op">{</span> store <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./store&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="im">import</span> <span class="op">{</span> createTask<span class="op">,</span> deleteTask <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./actions/taskActions&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="va">window</span>.<span class="at">store</span> <span class="op">=</span> store<span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="va">window</span>.<span class="at">createTask</span> <span class="op">=</span> createTask<span class="op">;</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="va">window</span>.<span class="at">deleteTask</span> <span class="op">=</span> deleteTask<span class="op">;</span></a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-13" title="13">    <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-14" title="14">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb5-15" title="15">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb5-16" title="16">)<span class="op">;</span></a></code></pre></div>
<p>Open up your browser’s DevTools console and type <code>window.store</code>. Now you should see the <code>store</code> object and its methods: <code>{dispatch: ƒ, subscribe: ƒ, getState: ƒ, replaceReducer: ƒ, Symbol(observable): ƒ}</code>,</p>
<p>Now type <code>window.store.getState()</code>. You should see an empty object - this is the default state (<code>state = {}</code>) that you set up in the <code>tasksReducer</code>.</p>
<p>Since you can access your application’s state from the DevTools console, that means you can also dispatch actions by invoking the <code>window.store.dispatch</code> method with an action:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="va">window</span>.<span class="va">store</span>.<span class="at">dispatch</span>(<span class="va">window</span>.<span class="at">createTask</span>(<span class="st">&#39;learn redux&#39;</span>))<span class="op">;</span></a></code></pre></div>
<p>You just dispatched a <code>CREATE_TASK</code> action! You’ll see that your updated state was logged - this is because of the <code>console.log</code> statement in the <code>store.subscribe</code> invocation in your <code>index.js</code> file (as you might remember, the <code>store.subscribe</code> method listens for any updates to the store, i.e. dispatch calls). Dispatch another <code>CREATE_TASK</code> action:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">window</span>.<span class="va">store</span>.<span class="at">dispatch</span>(<span class="va">window</span>.<span class="at">createTask</span>(<span class="st">&#39;learn react hooks&#39;</span>))<span class="op">;</span></a></code></pre></div>
<p>Now if you type <code>window.store.getState()</code> again, you’ll see that the state return from the <code>store.getState</code> method is the same plain old JavaScript object as the state that was logged within the <code>store.subscribe</code> invocation.</p>
<p>Now let’s place some <code>debugger</code> statements in the <code>tasksReducer</code> and <code>createTask</code> action creator function! Remember to make sure the <code>debugger</code> statement in your <code>tasksReducer</code> is <strong>inside</strong> a case statement. If the <code>debugger</code> is between the switch statement and a case statement, you will never hit that breakpoint!</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> tasksReducer <span class="op">=</span> (state <span class="op">=</span> <span class="op">{},</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="va">Object</span>.<span class="at">freeze</span>(state)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-4" title="4">    <span class="cf">case</span> <span class="dt">CREATE_TASK</span><span class="op">:</span></a>
<a class="sourceLine" id="cb8-5" title="5">      <span class="cf">debugger</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-6" title="6">    <span class="co">// CODE SHORTENED FOR BREVITY</span></a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="im">export</span> <span class="kw">const</span> createTask <span class="op">=</span> (taskMessage) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="cf">debugger</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="cf">return</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="dt">type</span><span class="op">:</span> CREATE_TASK<span class="op">,</span></a>
<a class="sourceLine" id="cb9-5" title="5">    <span class="dt">taskId</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>().<span class="at">getTime</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb9-6" title="6">    taskMessage<span class="op">,</span></a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="op">};</span></a></code></pre></div>
<p>Now dispatch another <code>CREATE_TASK</code> action to hit the two <code>debugger</code> statements you just set:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="va">window</span>.<span class="va">store</span>.<span class="at">dispatch</span>(<span class="va">window</span>.<span class="at">createTask</span>(<span class="st">&#39;work on self-care&#39;</span>))<span class="op">;</span></a></code></pre></div>
<p>Notice how you are now in the <code>Sources</code> tab of your DevTools looking at the <code>taskActions.js</code> file in your project. You can view the value of the <code>taskMessage</code> argument by hovering over the variable or looking at the local scope variables in the DevTools’ right window.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/redux/assets/react-redux-to-do-list-devtools-1.png" alt="devtools-taskActions" /><figcaption>devtools-taskActions</figcaption>
</figure>
<p>If you click the blue play button to continue to the next <code>debugger</code> statement, you’ll land in your <code>tasksReducer.js</code> file and be able to hover over the <code>state</code> to view the value of the Redux store’s previous state <strong>before</strong> the dispatching of the <code>CREATE_TASK</code> action.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/redux/assets/react-redux-to-do-list-devtools-2.png" alt="devtools-tasksReducer" /><figcaption>devtools-tasksReducer</figcaption>
</figure>
<p>Now if you click the blue play button to continue, you’ll exit out of debug mode and your updated state will be logged in the console.</p>
<p>Congratulations! You just used a <code>debugger</code> to follow the Redux flow of dispatching a <code>CREATE_TASK</code> action! Comment out your <code>debugger</code> statements for now. In the next phase, you’ll work on dispatching actions through a user interface.</p>
<h2 id="phase-4-dispatch-actions-from-components">Phase 4: Dispatch actions from components</h2>
<p>Now it’s time to set up a user interface that allows for intuitive dispatching of actions. In the <code>TodoForm</code> component, you’ll set up a button that invokes the <code>createTask</code> action creator function with the <code>inputValue</code> state to dispatch a <code>CREATE_TASK</code> action based on the form input! For each <code>Task</code> component, you’ll set up a button to dispatch a <code>DELETE_TASK</code> action for that task.</p>
<h3 id="todoform">TodoForm</h3>
<p>In the <code>TodoForm.js</code> file, import your application’s Redux <code>store</code> instance and the <code>createTask</code> action creator function. Now you’ll want to finish the <code>handleSubmit</code> method so that it dispatches a <code>CREATE_TASK</code> action. Invoke the <code>createTask</code> action creator function with the <code>inputValue</code> state and the <code>store.dispatch</code> method with the invoked action creator function.</p>
<p>Take a moment to test out the dispatch call generated by your form submission. Type a task in the input field - when you submit, you should see an updated state logged in the DevTools console with your new task!</p>
<h3 id="todolist">TodoList</h3>
<p>In the <code>TodoList.js</code> file, import the application’s Redux <code>store</code> instance and the <code>deleteTask</code> action creator function. Now you’ll set up the component’s <code>componentDidMount</code> and <code>componentDidUnmount</code> life-cycle methods.</p>
<p>In the <code>componentDidMount</code> method, use the store’s <code>subscribe</code> method to force a component to update whenever the state changes:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="at">componentDidMount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="kw">this</span>.<span class="at">unsubscribe</span> <span class="op">=</span> <span class="va">store</span>.<span class="at">subscribe</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="kw">this</span>.<span class="at">forceUpdate</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>You want to name the subscription as <code>this.unsubscribe</code>, so that you can unsubscribe upon the unmounting of a component. When the <code>componentDidMount</code> life-cycle method is invoked upon the mounting of a component, it will invoke the <code>store.subscribe</code> method to force the component to update whenever the store’s state changes. It will also set a <code>this.unsubscribe</code> variable to the <code>TodoList</code> class, so that <code>this.unsubscribe</code> is accessible from other parts of the component’s code.</p>
<p>In the <code>componentDidUnmount</code> method, you’ll want to check if the component has mounted by checking if <code>this.unsubscribe</code> has been defined. Whenever a component mounts, the <code>this.unsubscribe</code> variable set in the <code>componentDidMount</code> method will become initialize. If <code>this.unsubscribe</code> is undefined, that means that the component has not invoked the <code>componentDidMount</code> method and has therefore not been mounted yet. If <code>this.unsubscribe</code> is defined, you’ll want to invoke <code>this.unsubscribe</code> to have the component unsubscribe from changes once component unmounts:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="at">componentWillUnmount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="cf">if</span> (<span class="kw">this</span>.<span class="at">unsubscribe</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-3" title="3">    <span class="kw">this</span>.<span class="at">unsubscribe</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>In the <code>deleteTask</code> method, you’ll want to wrap the invocation of the <code>deleteTask</code> action creator function with the <code>store.dispatch</code> method. The <code>deleteTask</code> action creator function will be invoked based on the <code>this.deleteTask</code> method’s <code>id</code> input. Later in this phase, you’ll pass the <code>TodoList</code> component’s <code>this.deleteTask</code> method as a <code>deleteTask</code> prop into each <code>Task</code> component. Then, whenever the <code>deleteTask</code> prop is invoked from within a <code>Task</code> component, it can simply be invoked with a task ID to dispatch a <code>DELETE_TASK</code> action without needing to import the <code>store</code> into each <code>Task</code> component to invoke <code>store.dispatch</code></p>
<p>In the component’s <code>render</code> method, access the tasks stored in the Redux store’s state by invoking the <code>store.getState</code> method and saving its return value to a <code>tasksState</code> variable. Now that you can use a <code>debugger</code> statement to view the state and check out what data you are working with!</p>
<p>If there are no tasks stored in state, you’ll want to have the <code>TodoList</code> component return <code>null</code>. Otherwise if there are tasks stored in state, render a <code>Task</code> component for each of the tasks. For each <code>Task</code> component, you’ll want to use the task’s ID as the <code>key</code> and pass two props: the <code>task</code> object and the <code>this.deleteTask</code> method as a <code>deleteTask</code> prop.</p>
<h3 id="task">Task</h3>
<p>Have the <code>Task</code> function component destructure and take in the <code>deleteTask</code> method and <code>task</code> object props. Invoke the <code>deleteTask</code> function passed as a prop in the <code>Task</code> component’s <code>handleClick</code> method and replace the <code>Hi, I'm a task in your to-do list!</code> placeholder text with the <code>task.message</code>.</p>
<p>As a reminder, the <code>deleteTask</code> action creator function was already wrapped with a <code>store.dispatch</code> call in the <code>TodoList</code> component - this is why the <code>handleClick</code> function in the <code>Task</code> component does not include a <code>store.dispatch</code> invocation. The <code>TodoList</code> component passed the wrapped function as a prop named <code>deleteTask</code> to each <code>Task</code> component. The <code>deleteTask</code> function invoked in the <code>Task</code> component’s <code>handleClick</code> function is the <code>TodoList</code> component’s <code>deleteTask</code> <strong>method</strong>, not the <code>deleteTask</code> <strong>action creator function</strong>.</p>
<h2 id="phase-5-implement-a-full-redux-cycle">Phase 5: Implement a full Redux cycle</h2>
<p>In this phase, you’ll implement a full Redux cycle without the guidance of <code>TODO</code> notes or specific, written instructions. Remember, the <code>debugger</code> statement is your friend! If you get stuck, think of where you can place <code>debugger</code> statements to gain more context about your code. As a general guideline, feel free to follow the steps below:</p>
<ul>
<li>Set up an action creator function for a <code>RESET_TASK_LIST</code> action</li>
<li>Set up a reducer case statement for the <code>RESET_TASK_LIST</code> action type</li>
<li>Create a user interface (button) to dispatch the <code>RESET_TASK_LIST</code> action</li>
</ul>
<p>Congratulations! You have just created an application that uses Redux to manage the application’s information. Give yourself a pat on the back! As a reminder, the Redux library is a highly conceptual library to pick up, and when learning anything new practice always makes perfect! If the implementation of Redux feels confusing, always feel free to step back and use a <code>debugger</code> statement to follow the Redux flow: an action is generated, then the action is dispatched to go through a reducer, and then the store is updated.</p>
