<h1 id="connect">Connect</h1>
<p>Using <code>connect</code>, you can pass specific slices of the <code>Redux store's state</code> and specific <code>action-dispatches</code> to a React component as <code>props</code>.</p>
<p>The React-Redux <code>connect</code> function is a <code>higher-order function</code>:</p>
<ul>
<li><code>connect</code> takes two arguments (<code>mapStateToProps</code> and <code>mapDispatchToProps</code>) and returns a function.</li>
</ul>
<p>The returned function will take a React component as an argument and return a new React component.</p>
<p>Ex:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1">  <span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="im">import</span> <span class="op">{</span> connect <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="im">import</span> MyComponent <span class="im">from</span> <span class="st">&#39;./MyComponent&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="kw">const</span> mapStateToProps <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">    <span class="co">// we&#39;ll go over this soon</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="op">};</span></a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="kw">const</span> mapDispatchToProps <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="co">// we&#39;ll go over this soon</span></a>
<a class="sourceLine" id="cb1-11" title="11">  <span class="op">};</span></a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="kw">const</span> createConnectedComponent <span class="op">=</span> <span class="at">connect</span>(</a>
<a class="sourceLine" id="cb1-14" title="14">    mapStateToProps<span class="op">,</span></a>
<a class="sourceLine" id="cb1-15" title="15">    mapDispatchToProps</a>
<a class="sourceLine" id="cb1-16" title="16">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb1-17" title="17"></a>
<a class="sourceLine" id="cb1-18" title="18">  <span class="kw">const</span> ConnectedComponent <span class="op">=</span> <span class="at">createConnectedComponent</span>(MyComponent)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-19" title="19"></a>
<a class="sourceLine" id="cb1-20" title="20">  <span class="im">export</span> <span class="im">default</span> ConnectedComponent<span class="op">;</span></a></code></pre></div>
<p>Typically, to keep things concise, the <code>ConnectedComponent</code> variable is omitted:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1">  <span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="im">import</span> <span class="op">{</span> connect <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="im">import</span> MyComponent <span class="im">from</span> <span class="st">&#39;./MyComponent&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="kw">const</span> mapStateToProps <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="co">// we&#39;ll go over this soon</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-8" title="8"></a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="kw">const</span> mapDispatchToProps <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-10" title="10">    <span class="co">// we&#39;ll go over this soon</span></a>
<a class="sourceLine" id="cb2-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="im">export</span> <span class="im">default</span> <span class="at">connect</span>(mapStateToProps<span class="op">,</span> mapDispatchToProps)(MyComponent)<span class="op">;</span></a></code></pre></div>
<h2 id="defining-mapstatetopropsstate-ownprops">Defining mapStateToProps(state, <a href="#ownprops">ownProps</a>)</h2>
<p>The first argument to <code>connect</code> is a function, <code>mapStateToProps</code> (or <code>msp</code> for short).</p>
<p>The first argument to <code>connect</code>, <code>mapStateToProps</code>, is mandatory.</p>
<p>It tells <code>connect</code> how to map the <code>Redux store's state</code> into your componentâ€™s <code>props</code>.</p>
<p><code>mapStateToProps</code> must take a first argument, the <code>Redux store's state</code>.</p>
<p><code>mapStateToProps</code> will return an object containing the relevant slice of the <code>Redux store's state</code> as <code>props</code> for your component.</p>
<p>Ex:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1">  <span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="im">import</span> <span class="op">{</span> connect <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">  <span class="kw">const</span> MyComponent <span class="op">=</span> (props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="kw">const</span> name <span class="op">=</span> <span class="va">props</span>.<span class="at">name</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb3-7" title="7">      <span class="op">&lt;</span>div<span class="op">&gt;{</span>name<span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb3-8" title="8">    )</a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="op">};</span></a>
<a class="sourceLine" id="cb3-10" title="10"></a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="kw">const</span> mapStateToProps <span class="op">=</span> (state) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb3-12" title="12">    <span class="dt">name</span><span class="op">:</span> <span class="va">state</span>.<span class="at">name</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-13" title="13">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-14" title="14"></a>
<a class="sourceLine" id="cb3-15" title="15">  <span class="im">export</span> <span class="im">default</span> <span class="at">connect</span>(mapStateToProps)(MyComponent)<span class="op">;</span></a></code></pre></div>
<h3 id="ownprops">ownProps</h3>
<p>ownProps is an optional 2nd argument to <code>mapStateToProps</code>.</p>
<ol type="1">
<li>ownProps can match the props passed to React component, and include those in <code>mapStateToProps</code>.</li>
</ol>
<p>Ex:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="co">// Some file</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="op">&lt;</span>ConnectedComponent lastName<span class="op">={</span><span class="st">&#39;Wozniak&#39;</span><span class="op">}</span>/&gt;</a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="op">----------------------------------------------</span></a>
<a class="sourceLine" id="cb4-6" title="6"></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="co">// /src/components/MyComponentConnected</span></a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9">  <span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-10" title="10">  <span class="im">import</span> <span class="op">{</span> connect <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-11" title="11"></a>
<a class="sourceLine" id="cb4-12" title="12">  <span class="kw">const</span> MyComponent <span class="op">=</span> (<span class="op">{</span> firstName<span class="op">,</span> initials <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-13" title="13">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb4-14" title="14">      <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb4-15" title="15">        <span class="op">&lt;</span>h2<span class="op">&gt;{</span>initials<span class="op">}</span>&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb4-16" title="16">        <span class="op">&lt;</span>div<span class="op">&gt;{</span>firstName<span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb4-17" title="17">      &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb4-18" title="18">    )</a>
<a class="sourceLine" id="cb4-19" title="19">  <span class="op">};</span></a>
<a class="sourceLine" id="cb4-20" title="20"></a>
<a class="sourceLine" id="cb4-21" title="21">  <span class="kw">const</span> mapStateToProps <span class="op">=</span> (state<span class="op">,</span> ownProps) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb4-22" title="22">    <span class="dt">firstName</span><span class="op">:</span> <span class="va">state</span>.<span class="at">name</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-23" title="23">    <span class="dt">initials</span><span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="va">state</span>.<span class="at">name</span>[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">. </span><span class="sc">${</span><span class="va">ownProps</span>.<span class="at">lastName</span>[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">.`</span></a>
<a class="sourceLine" id="cb4-24" title="24">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-25" title="25"></a>
<a class="sourceLine" id="cb4-26" title="26">  <span class="im">export</span> <span class="im">default</span> <span class="at">connect</span>(mapStateToProps)(MyComponent)<span class="op">;</span></a></code></pre></div>
<ol start="2" type="1">
<li>You can also access <code>React Router props</code>, such <code>match</code> and <code>history</code> through <code>ownProps</code></li>
</ol>
<p>Ex:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1">  <span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="im">import</span> <span class="op">{</span> connect <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="kw">const</span> MyComponent <span class="op">=</span> (props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="kw">const</span> name <span class="op">=</span> <span class="va">props</span>.<span class="at">name</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb5-7" title="7">      <span class="op">&lt;</span>div<span class="op">&gt;{</span>name<span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-8" title="8">    )</a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="op">};</span></a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11">  <span class="kw">const</span> mapStateToProps <span class="op">=</span> (state<span class="op">,</span> ownProps) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb5-12" title="12">    <span class="dt">name</span><span class="op">:</span> <span class="va">state</span>.<span class="at">users</span>[<span class="va">ownProps</span>.<span class="va">match</span>.<span class="va">params</span>.<span class="at">userId</span>].<span class="at">name</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-13" title="13">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-14" title="14"></a>
<a class="sourceLine" id="cb5-15" title="15">  <span class="im">export</span> <span class="im">default</span> <span class="at">connect</span>(mapStateToProps)(MyComponent)<span class="op">;</span></a></code></pre></div>
<h2 id="defining-mapdispatchtoprops">Defining mapDispatchToProps</h2>
<p><code>mapDispatchToProps</code> is an optional second argument to <code>connect</code>.</p>
<p><code>mapDispatchToProps</code> is a function that accepts the storeâ€™s <code>dispatch</code> method.</p>
<p>It returns an object containing functions that can be called to <code>dispatch actions</code> to the <code>store</code>.</p>
<p>These <code>action dispatchers</code> are then passed as <code>props</code> to the <code>component</code>.</p>
<p>Ex:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1">  <span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="im">import</span> <span class="op">{</span> connect <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="kw">const</span> MyComponent <span class="op">=</span> (props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="kw">const</span> handleDelete <span class="op">=</span> <span class="va">props</span>.<span class="at">handleDelete</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="kw">const</span> handleClick <span class="op">=</span> ()<span class="op">{</span></a>
<a class="sourceLine" id="cb6-8" title="8">      <span class="co">// logic getting an id for a todo</span></a>
<a class="sourceLine" id="cb6-9" title="9">      <span class="at">handleDelete</span>(id)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-10" title="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb6-11" title="11"></a>
<a class="sourceLine" id="cb6-12" title="12">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb6-13" title="13">      <span class="op">&lt;</span>div onClick<span class="op">={</span>handleClick<span class="op">}&gt;</span>I<span class="st">&#39;m a todo!&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb6-14" title="14">    )</a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="op">};</span></a>
<a class="sourceLine" id="cb6-16" title="16"></a>
<a class="sourceLine" id="cb6-17" title="17"></a>
<a class="sourceLine" id="cb6-18" title="18">  <span class="kw">const</span> deleteTodo <span class="op">=</span> (id) <span class="kw">=&gt;</span> (<span class="op">{</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;DELETE_TODO&#39;</span><span class="op">,</span> id <span class="op">}</span>)<span class="op">;</span> <span class="co">// action creators</span></a>
<a class="sourceLine" id="cb6-19" title="19">  <span class="kw">const</span> addTodo <span class="op">=</span> (msg) <span class="kw">=&gt;</span> (<span class="op">{</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_TODO&#39;</span><span class="op">,</span> msg <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-20" title="20"></a>
<a class="sourceLine" id="cb6-21" title="21">  <span class="kw">const</span> mapDispatchToProps <span class="op">=</span> (dispatch) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb6-22" title="22">    <span class="dt">handleDelete</span><span class="op">:</span> (id) <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="at">deleteTodo</span>(id))<span class="op">,</span></a>
<a class="sourceLine" id="cb6-23" title="23">    <span class="dt">handleAdd</span><span class="op">:</span> (msg) <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="at">addTodo</span>(msg))</a>
<a class="sourceLine" id="cb6-24" title="24">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-25" title="25"></a>
<a class="sourceLine" id="cb6-26" title="26">  <span class="kw">const</span> ConnectedComponent <span class="op">=</span> <span class="at">connect</span>(<span class="kw">null</span><span class="op">,</span> mapDispatchToProps)(MyComponent)<span class="op">;</span></a></code></pre></div>
<p>Note: * The <code>connect</code> function is invoked with <code>null</code> as a placeholder for the <code>mapStateToProps</code> function. The <code>connect</code> function expects <code>mapStateToProps</code> as its first argument and <code>mapDispatchToProps</code> as its second argument.</p>
<h2 id="example-with-msp-and-mdp">Example with msp and mdp</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1">  <span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="im">import</span> <span class="op">{</span> connect <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="im">import</span> <span class="op">{</span> deleteTodo<span class="op">,</span> addTodo <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;../actions/todoActions&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5">  <span class="kw">const</span> MyComponent <span class="op">=</span> (<span class="op">{</span> firstName<span class="op">,</span> initials<span class="op">,</span> handleAdd<span class="op">,</span> handleDelete <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-6" title="6">    <span class="cf">return</span> <span class="op">&lt;</span>div<span class="op">&gt;</span>...&lt;/div<span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb7-7" title="7">  <span class="op">};</span></a>
<a class="sourceLine" id="cb7-8" title="8"></a>
<a class="sourceLine" id="cb7-9" title="9">  <span class="kw">const</span> mapStateToProps <span class="op">=</span> (state<span class="op">,</span> ownProps) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb7-10" title="10">    <span class="dt">firstName</span><span class="op">:</span> <span class="va">state</span>.<span class="at">name</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-11" title="11">    <span class="dt">initials</span><span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="va">state</span>.<span class="at">name</span>[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">. </span><span class="sc">${</span><span class="va">ownProps</span>.<span class="at">lastName</span>[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">.`</span></a>
<a class="sourceLine" id="cb7-12" title="12">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-13" title="13"></a>
<a class="sourceLine" id="cb7-14" title="14">  <span class="kw">const</span> mapDispatchToProps <span class="op">=</span> (dispatch) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb7-15" title="15">    <span class="dt">handleDelete</span><span class="op">:</span> (id) <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="at">deleteTodo</span>(id))<span class="op">,</span></a>
<a class="sourceLine" id="cb7-16" title="16">    <span class="dt">handleAdd</span><span class="op">:</span> (msg) <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="at">addTodo</span>(msg))</a>
<a class="sourceLine" id="cb7-17" title="17">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-18" title="18"></a>
<a class="sourceLine" id="cb7-19" title="19">  <span class="im">export</span> <span class="im">default</span> <span class="at">connect</span>(</a>
<a class="sourceLine" id="cb7-20" title="20">    mapStateToProps<span class="op">,</span></a>
<a class="sourceLine" id="cb7-21" title="21">    mapDispatchToProps</a>
<a class="sourceLine" id="cb7-22" title="22">  )(MyComponent)<span class="op">;</span></a></code></pre></div>
