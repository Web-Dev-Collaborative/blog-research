<h1 id="week-14-react" data-ignore="true">WEEK 14<br><em>React</em></h1>
<hr />
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=2 orderedList=false} -->
<hr />
<hr />
<h1 id="week-14-day-1-group-projects" data-ignore="true">WEEK-14 DAY-1<br><em>Group Projects</em></h1>
<hr />
<h1 id="react">React</h1>
<p>You’ve been using what we call <em>vanilla JavaScript</em> (often referred to as <em>Vanilla.js</em>) to build your front-end applications. And, you may have noticed that it’s <em>hard</em>. Creating strings to put new DOM into the page <em>should</em> be easier.</p>
<p>In this article, you will find out more about React and why you should consider using it as a way to build separate front-end apps.</p>
<h2 id="a-front-end-timeline">A front-end timeline</h2>
<p>Lots of JavaScript/CSS libraries and frameworks have been invented to ease the pain of front-end development. Here’s an abbreviated list of some of the more noteworthy ones in chronological order. Please click on each of the links and just quickly browse each of these libraries’ Web sites to get a feel for the functionality each provides you.</p>
<ul>
<li>[script.aculo.us]: (2005) This is one of the first libraries that started easing this by adding special effects and dynamic content for client-side development.</li>
<li>[dojo]: (2005) This toolkit added a log of non-visual and visual components that allowed developers to rapidly develop AJAX-enabled applications.</li>
<li>[YUI]: (2006) A full framework that provided dynamic loading of scripts, events, visual components, data binding, and a philosophy on how to build client-side applications.</li>
<li>[Knockout]: (2010) This is a standalone JavaScript implementation of the [Model-View-ViewModel] pattern used to build very fast dynamic components for client-side applications. It is the progenitor of many other libraries, include React.</li>
<li>[AngularJS]: (2011) This framework from Google built on the success of Knockout and introduced a full set of utilities and philosophies to build modular client-side applications. (The current version has been branded [Angular].) In the rewrite of Angular to make the idea of a component a first-order concept, many developers left and joined the React community.</li>
<li>[Elm]: (2012) This is an entirely new <em>language</em> used to build front-end applications. You write your front-end application in Elm. Then, you “compile” it. The Elm “compiler” translates all of the source code written in Elm to highly-tuned JavaScript so that it runs really fast in your Web browser. It claims that by using Elm that your front-end code will have “no runtime exceptions” which is a bold (and mostly true) claim.</li>
</ul>
<h2 id="react-2013">React (2013)</h2>
<p>In an effort to make its own Web front-end more maintainable, Facebook decided to build its own JavaScript-based library to create fast and functional front-end Web applications. Thus, React was born.</p>
<p>React manages the <strong>creation and updating of DOM nodes in your Web page</strong>. It does not do AJAX. It does not do services. It does not do local storage. It does not provide a pretty CSS framework for you. It just dynamically renders stuff into the DOM</p>
<p>Because of Facebook’s immense popularity as a developer-centric organization, React was quickly adopted across the software-development industry, eclipsing the use of all other front-end libraries and frameworks for many years. React is still considered the <em>standard</em> front-end library to use to build modern Web applications.</p>
<p>React is <em>unopinionated</em> about many aspects of front-end development. It doesn’t care how you make AJAX calls. It doesn’t really care about how your page is laid out. It has a few simple rules that you must follow, and <em>It Just Works</em>. You’ll learn about those in the next article, <em>React Concepts and Features</em>.</p>
<p>Working with plain old React became a real chore for anything non-trivial, so they invented a new language to help write React applications. That language is called JSX, or JavaScript eXtension. It looks like a mixture of JavaScript and HTML (technically, XML).</p>
<p>Instead of writing Vanilla.js like this to create some DOM elements based on some data that comes back from an API call. Don’t worry about understanding what you see. You will get the opportunity to learn more about all of this in later articles, lectures, and projects.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">fetch</span>(<span class="st">&#39;https://example.com/api/people&#39;</span>)</a>
<a class="sourceLine" id="cb1-2" title="2">  .<span class="at">then</span>(response <span class="kw">=&gt;</span> <span class="va">response</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb1-3" title="3">  .<span class="at">then</span>(people <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="kw">const</span> html <span class="op">=</span> <span class="st">&#39;&lt;ul&gt;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="cf">for</span> (<span class="kw">let</span> person <span class="kw">of</span> people) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">      html <span class="op">+=</span> <span class="vs">`&lt;li&gt;</span><span class="sc">${</span><span class="va">person</span>.<span class="at">lastName</span><span class="sc">}</span><span class="vs">, </span><span class="sc">${</span><span class="va">person</span>.<span class="at">firstName</span><span class="sc">}</span><span class="vs">&lt;/li&gt;`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-8" title="8">    html <span class="op">+=</span> <span class="st">&#39;&lt;/ul&gt;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;#people-list&#39;</span>).<span class="at">innerHTML</span> <span class="op">=</span> html<span class="op">;</span></a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>You would write something like this using JSX.</p>
<pre class="jsx"><code>function PeopleList(props) {
  return (
    &lt;ul&gt;
      {props.people.map(person =&gt; (
        &lt;li&gt;{person.lastName}, {person.firstName}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
}

const peopleListElement = document.querySelector(&#39;#people-list&#39;);
fetch(&#39;https://example.com/api/people&#39;)
  .then(response =&gt; response.json())
  .then(people =&gt; {
    const props = { people };
    ReactDOM.render(&lt;PeopleList props={props}/&gt;, peopleListElement);
  });</code></pre>
<p>In this “simple” example, you may think, “Well, that’s like twice the code! Why would I do that?” Great question! When you start building <em>lots of components</em>, lots of different pieces of visual widgets to put together to manage a complex graphical human interface, it becomes really nice to put each of those functions (or classes) into their own files and <em>organize</em> the code so you know where everything is.</p>
<h2 id="using-tools-with-react">Using tools with React</h2>
<p>Oh, and the tools! Because software developers constantly look for ways to make things easier, the tools that have grown up around React are amazing. You’ll install React DevTools, a new tab in the Developer Tools that lets you see how React actually works in the browser, much like the <em>Elements</em> tab does for just HTML elements.</p>
<p>[React DevTools]</p>
<p>There is <code>create-react-app</code>, an extensible command-line tool that helps you generate standard React applications. We’ll show you how to use it with custom templates, too, to help remove some of the over-engineered stuff that comes with the standard template.</p>
<p>Because browsers only understand JavaScript and not JSX, there is an extra “build step” involved with creating React-based front-end applications. There are a variety of tools that software developers use to make this happen. The most popular, right now, is to use a tool called <a href="https://webpack.js.org/">Webpack</a>. Later this week, you’ll get into some of the details about how that works.</p>
<p>[Webpack.js]</p>
<p>A really popular feature of modern React development is the concept of <em>hot module replacement</em> (HMR). When you make changes to your source code, right now, you must refresh your browser to see the changes. HMR sense what has changed and send the change to the browser without you having to refresh it. The changes are delivered in <em>real-time</em>, updating the UI for you as you make changes to the source code. It is almost magic what happens.</p>
<p>After using React on their own massively complex Web interface, React developers decided they did need to have an opinion about how to architect the state of their application, that is, how to allow discretely different parts of their Web page to consume and modify data received from back-end APIs. This introduced the <em>Flux architecture</em> which you will learn about next week.</p>
<p>[Flux]</p>
<h2 id="choosing-react">Choosing React</h2>
<p>Because of the tools, because of the popularity, because (seemingly) <em>everyone</em> knows React, choosing React to power your front-end is an easy choice. Hundreds of thousands of other software developes know and love React. Tens of thousands of companies use React on their Web sites and to power their Web applications. App Academy’s own learning platform that you’re reading this on uses React as the way to render content.</p>
<p>There are other viable modern alternatives to React. However, they are almost all heavily influenced by React’s design and implementation. Learning them is like learning React and different parts of its vibrant ecosystem. React has really become the stick by which all other front-end libraries are measured. And will likely continue to hold that position for the near future.</p>
<h2 id="what-youve-just-seen">What you’ve just seen</h2>
<p>In this article, you’ve discovered that React is one of many front-end libraries that you can use to build dynamic data-driven front-end JavaScript-based modern Web applications. You’ve seen that React has its own language, JSX, to easily write React applications. In addition to an easy-to-use language to write in, the React team and community have created a bunch of tools and utilities for you to use and add to your React application; these will help you inspect and debug your application as you build it. React is a <em>safe</em> choice because you learn about it here and in hundreds of other places. ________________________________________________________________________________ # React Concepts And Features</p>
<p>In this article, you will gain insight into why you may want to use React for the front-end portion of your application, the part that runs in the browser, as opposed to using plain-old vanilla JavaScript, that is, just the JavaScript found in the browser.</p>
<h2 id="modularity">Modularity</h2>
<p>Unlike the mess of code that you can create with event listeners and template strings in your JavaScript code to manipulate the DOM by adding, updating, and removing elements from it, React provides modularity from the ground up. If you see modularity, understanding where code is that’s running, then React is for you.</p>
<h2 id="easy-to-start">Easy to start</h2>
<p>You don’t need any special tools to use basic React. You can just import some files and get to work using the <code>createElement</code> method that React provides to define reusable “components” for what appears in the browser. They can be as simple as a really cool button, or as complex as Facebook’s Web UI.</p>
<p>For more complex applications, there are may tools available to you to get a fully-functioning React application running from a single command on the command line, tools such as <em>Create React App</em>. This handy tools will create a full React application with live reload, testing, and support for things like advanced CSS manipulation.</p>
<h2 id="declarative-programming">Declarative programming</h2>
<p>In the same way that you use HTML to <em>declare</em> what the user interface should look like, React provides the same mechanism in its element-based programming API, either through the <code>createElement</code> method or the higher-level language known as JSX.</p>
<h2 id="reusability">Reusability</h2>
<p>React encourages you to think in terms of reusability as you construct the user interface from elements and components that you create. It works best when you think of the page as pieces of UI working in harmony with one another. When you make a list or a button or a product card, you can then reuse those components to show different data that your UI demands to show.</p>
<h2 id="one-flow-of-data">One-flow of data</h2>
<p>React applications are built as a combination of parent and child components. As the names suggest, each child component has a parent and a parent component will have one or more child components. Components receive data via an argument traditionally named <code>props</code>. Parent components can decide the data that its children should show by passing only a subset of what it has to its children. Data is never passed up from the child to the parent. Because you always know which way data flows, you can more easily debug your application to determine where the data display or event handling code is.</p>
<h2 id="the-virtual-dom">The “virtual DOM”</h2>
<p>You may have come to the conclusion that writing things like</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">el</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="vs">  &lt;table&gt;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="vs">    &lt;tbody&gt;`</span> <span class="op">+</span></a>
<a class="sourceLine" id="cb3-4" title="4">      <span class="va">arr</span>.<span class="at">map</span>(item <span class="kw">=&gt;</span> <span class="vs">`&lt;tr&gt;&lt;td&gt;</span><span class="sc">${</span><span class="va">item</span>.<span class="at">name</span><span class="sc">}</span><span class="vs">&lt;/td&gt;&lt;/tr&gt;`</span>)</a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="op">+</span> <span class="vs">`&lt;/tbody&gt;</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="vs">  &lt;/table&gt;</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="vs">`</span><span class="op">;</span></a></code></pre></div>
<p>is hard to debug, maintain, and use in the long run. React solves this problem by providing a virtual DOM (in memory) that acts as an agent between the developer and the real DOM. The virtual DOM is a lot more user-friendly for developers.</p>
<h2 id="speed">Speed</h2>
<p>Due to the use of a virtual DOM, React handles changes to a Web page more intelligently than just string manipulation. It is constantly monitors the virtual DOM for changes. It very efficiently reconciles changes in the virtual DOM with what it has already produced in the real DOM. This is what makes React one of the speediest front-end libraries available.</p>
<h2 id="what-you-learned">What you learned</h2>
<p>You’ll learn more about these in the upcoming videos and over the next couple of days. Happy Reacting!</p>
<p>You found out that React has a variety of good points that encourage you to choose it as the means to build your front-end:</p>
<ul>
<li>React encourages modular development</li>
<li>React is easy to use, easy to start with, and has some great tools</li>
<li>React follows the declarative programming style</li>
<li>React encourages reusability in your code</li>
<li>React has one way that data flows, which makes it much easier to reason about the code</li>
<li>React uses a “virtual DOM” to make changes to the real DOM very fast and efficient</li>
</ul>
<hr />
<h1 id="intro-to-es6-modules">Intro to ES6 Modules</h1>
<p>Now, you will learn more about ES6 module syntax and how it is used to export and import items between different files. You’ll compare the differences between managing exports with ES6 module syntax vs CommonJS module syntax. At the end of this article, you will understand how to manage your exports and imports with ES6’s:</p>
<ul>
<li><code>export default</code> statement to export one item per file</li>
<li><code>export</code> keyword to export multiple items per file</li>
<li><code>import ... from</code> statement to import items from one file to another</li>
<li><code>export default</code> statement to export an unnamed item and rename the item in an import statement</li>
<li><code>as</code> keyword (in an <code>import ... from</code> statement) to <em>alias</em> and <em>namespace</em> all of a file’s exported items</li>
</ul>
<h2 id="exporting-one-item-per-file">Exporting one item per file</h2>
<p>You cannot export multiple items per file by using an <code>export default</code> statement with ES6 module syntax. For instance, the example below will only export the <code>Wallet</code> class from the file.</p>
<p><strong>ES6 modules</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="im">export</span> <span class="im">default</span> <span class="kw">class</span> Wallet <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">// sayHello will not be exported</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="kw">function</span> <span class="at">sayHello</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="op">}</span></a></code></pre></div>
<p>The <code>export default</code> statement is equivalent to using <code>module.exports</code> to directly export <strong>one</strong> item from a file using (instead of an object).</p>
<p><strong>CommonJS modules</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">class</span> Wallet <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb5-4" title="4"></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">// sayHello will not be exported</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="kw">function</span> <span class="at">sayHello</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="op">}</span></a>
<a class="sourceLine" id="cb5-9" title="9"></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> Wallet<span class="op">;</span></a></code></pre></div>
<h2 id="exporting-multiple-items-per-file">Exporting multiple items per file</h2>
<p>You can export multiple items per file by using the <code>export</code> keyword (<strong>without</strong> the <code>default</code> keyword) with ES6 module syntax. Using ES6’s export, you have two options for exporting items. You can export each item as you define it. With ES6 modules, the preferred method to export multiple functions or classes from a single file is to export each function or class as it’s defined.</p>
<p><strong>ES6 modules (parts of an export)</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="im">export</span> <span class="kw">class</span> Wallet <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="im">export</span> <span class="kw">function</span> <span class="at">sayHello</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="im">export</span> <span class="kw">const</span> sayHi <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hi!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="op">};</span></a></code></pre></div>
<p>Alternatively, you can refer to each item by name and export them all within an object. This is the unpreferred method to export multiple functions or classes.</p>
<p><strong>ES6 modules (export object)</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">class</span> Wallet <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="kw">function</span> <span class="at">sayHello</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb7-8" title="8"></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="kw">const</span> sayHi <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-10" title="10">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hi!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="op">};</span></a>
<a class="sourceLine" id="cb7-12" title="12"></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="im">export</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-14" title="14">  Wallet<span class="op">,</span></a>
<a class="sourceLine" id="cb7-15" title="15">  sayHello<span class="op">,</span></a>
<a class="sourceLine" id="cb7-16" title="16">  sayHi<span class="op">,</span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="op">};</span></a></code></pre></div>
<p>Using ES6’s <code>export</code> keyword is similar to how you can export classes and functions as individual parts of an export or an export object with CommonJS module syntax. Unlike with ES6 modules, the preferred method to export multiple items from a single file with CommonJS modules is to export an object with <code>module.exports</code>.</p>
<p><strong>CommonJS modules (export object)</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">class</span> Wallet <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw">function</span> <span class="at">sayHello</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb8-8" title="8"></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="kw">const</span> sayHi <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-10" title="10">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hi!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="op">};</span></a>
<a class="sourceLine" id="cb8-12" title="12"></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-14" title="14">  Wallet<span class="op">,</span></a>
<a class="sourceLine" id="cb8-15" title="15">  sayHello<span class="op">,</span></a>
<a class="sourceLine" id="cb8-16" title="16">  sayHi<span class="op">,</span></a>
<a class="sourceLine" id="cb8-17" title="17"><span class="op">};</span></a></code></pre></div>
<h2 id="importing-with-es6-vs-commonjs">Importing with ES6 vs CommonJS</h2>
<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="header">
<th>ES6 modules</th>
<th>CommonJS modules</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>import { Wallet } from './wallet';</code></td>
<td><code>const { Wallet } = require('./wallet');</code></td>
</tr>
<tr class="even">
<td><code>import * as fs from 'fs';</code></td>
<td><code>const fs = require('fs');</code></td>
</tr>
</tbody>
</table>
<p>Although calls to the <code>require</code> method can be anywhere in a JavaScript file using CommonJS modules, this is not the case for ES6 modules. For ES6 modules, the <code>import</code> statements must always be at the top of the file because imports have to occur before the rest of the file’s code runs.</p>
<p><strong>CommonJS modules</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">let</span> <span class="op">{</span> Wallet <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./wallet&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="kw">const</span> wallet <span class="op">=</span> <span class="kw">new</span> <span class="at">Wallet</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4"></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="kw">let</span> fs <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p><strong>ES6 modules</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="im">import</span> <span class="op">{</span> Wallet <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./wallet&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> fs <span class="im">from</span> <span class="st">&#39;fs&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="kw">const</span> wallet <span class="op">=</span> <span class="kw">new</span> <span class="at">Wallet</span>()<span class="op">;</span></a></code></pre></div>
<h2 id="unnamed-default-imports">Unnamed default imports</h2>
<p>You can give unnamed items that are exported with <code>export default</code> any name you want when importing them. For example, imagine if you <code>export default</code> a <code>Wallet</code> class from a file name <code>wallet.js</code>. When you import the <code>Wallet</code> class into <code>newFile.js</code>, you can rename the <code>Wallet</code> class because of how you used <code>export default</code> to export the class from the <code>wallet.js</code> file.</p>
<p><strong>wallet.js</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="im">export</span> <span class="im">default</span> <span class="kw">class</span> Wallet <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="op">}</span></a></code></pre></div>
<p><strong>newFile.js</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="im">import</span> Money <span class="im">from</span> <span class="st">&#39;wallet.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="kw">const</span> wallet <span class="op">=</span> <span class="kw">new</span> <span class="at">Money</span>()<span class="op">;</span></a></code></pre></div>
<p>However, if you used the <code>export</code> instead of <code>export default</code>, you are using a named export. With named exports, the import names have to exactly match.</p>
<p><strong>wallet.js</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="im">export</span> <span class="kw">class</span> Wallet <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="op">}</span></a></code></pre></div>
<p><strong>newFile.js</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="im">import</span> <span class="op">{</span> Wallet <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;wallet.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-2" title="2"></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">const</span> wallet <span class="op">=</span> <span class="kw">new</span> <span class="at">Wallet</span>()<span class="op">;</span></a></code></pre></div>
<h2 id="aliasing-imports">Aliasing imports</h2>
<p>You can use an asterisk (<code>*</code>) to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#Import_an_entire_modules_contents">import an entire module’s contents</a>. Note that you must alias your imported object using the <code>as</code> keyword to be able to refer to it later. Aliasing can be used to namespace all the exported functions, constants, etc. from a file to wrap them into a single, easily referenced object.</p>
<p><strong>greetings.js</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="im">export</span> <span class="kw">function</span> <span class="at">sayHello</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hello!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb15-4" title="4"></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="im">export</span> <span class="kw">const</span> sayHi <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Hi!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="op">};</span></a></code></pre></div>
<p><strong>newFile.js</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> Greetings <span class="im">from</span> <span class="st">&#39;greetings.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="va">Greetings</span>.<span class="at">sayHello</span>()<span class="op">;</span> <span class="co">// Hello!</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="va">Greetings</span>.<span class="at">sayHi</span>()<span class="op">;</span>    <span class="co">// Hi!</span></a></code></pre></div>
<p>You can also use aliasing to rename identically named functions or items from different files. For example, take the two <code>Wallet</code> classes below. Both classes are named <code>Wallet</code>, but they come from different files. The <code>Wallet</code> from the <code>wallet1</code> file is aliased as <code>W1</code> while the <code>Wallet</code> from the <code>wallet2</code> file is aliased as <code>W2</code> to differentiate between the two <code>Wallet</code> classes.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="im">import</span> <span class="op">{</span> Wallet <span class="im">as</span> W1 <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./wallet1&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="im">import</span> <span class="op">{</span> Wallet <span class="im">as</span> W2 <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./wallet2&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb17-3" title="3"></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="kw">const</span> w1 <span class="op">=</span> <span class="kw">new</span> <span class="at">W1</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="kw">const</span> w2 <span class="op">=</span> <span class="kw">new</span> <span class="at">W2</span>()<span class="op">;</span></a></code></pre></div>
<h2 id="browser-support-for-es6-modules">Browser support for ES6 Modules</h2>
<p>ES6 modules can only be used when a file is specified as a <code>module</code>. You can use an HTTP server to serve an HTML file with a <code>&lt;script&gt;</code> tag of <code>type="module"</code>. By running a local web server, you gain browser support for ES6 module syntax by using a <code>&lt;script&gt;</code> tag in an HTML file to specify a JavaScript file as an ES6 module (not just a normal JavaScript file). Note the <code>&lt;script&gt;</code> tag of <code>type="module"</code> below:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;module&quot;</span><span class="ot"> src=</span><span class="st">&quot;./wallet.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></a></code></pre></div>
<h3 id="mini-project">Mini-project</h3>
<p>Follow the guidelines below to use an HTTP server and import JavaScript files with ES6 module syntax:</p>
<ol type="1">
<li>Create a folder with an <code>index.html</code> file. Fill in the file with the contents below. Note the use of the <code>type="module"</code> attribute in the <code>&lt;script&gt;</code> tag. You must include the <code>.js</code> file extension in the name of the module (<code>./program.js</code>). The browser needs to know the entire name of the JavaScript file it will be loading from a server. <code>html  &lt;html&gt;  &lt;head&gt;    &lt;meta charset="UTF-8"&gt;    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;    &lt;title&gt;Browser&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;button id="button"&gt;Start Game&lt;/button&gt;    &lt;div id="message"&gt;&lt;/div&gt;    &lt;script type="module" src="./program.js"&gt;&lt;/script&gt;  &lt;/body&gt;  &lt;/html&gt;</code></li>
<li><p>Create a <code>game.js</code> file with the contents below: ```js export class Game { constructor() { this.gameStartMessage = “Hello! Do you want to play a game?”; }</p>
start() { document .getElementById(‘button’) .addEventListener(‘click’, () =&gt; { const messageContainer = document.getElementById(‘message’); messageContainer.innerText = this.gameStartMessage; }); } } ```</li>
<li><p>Create a <code>program.js</code> file with the contents below: ```js import { Game } from ‘./game.js’;</p>
window.addEventListener(‘DOMContentLoaded’, () =&gt; { const game = new Game(); game.start(); }); ```</li>
<li>Make sure you are in the directory of your HTML and JavaScript files set up an HTTP server with <code>python3 -m http.server</code> to serve the <code>index.html</code> file to the browser.</li>
<li>When the browser reads the <code>index.html</code> file, it will read the <code>&lt;script&gt;</code> tag and know that the JavaScript file is using ES6 module syntax (<code>type="module"</code>) to load the <code>program.js</code> file.</li>
<li>The browser will start reading the <code>program.js</code> file from top to bottom, reading the <code>import { Game } from './game.js';</code> statement first. Note that the <code>.js</code> file extension must be present for the browser to know the entire name of the JavaScript file to load from the server.</li>
<li><p>The browser will then load the <code>game.js</code> file and all the code in the loaded JavaScript files will run!</p></li>
</ol>
<h2 id="what-youve-learned">What you’ve learned</h2>
<p>In this reading, you learned about managing exports and imports with ES6 modules and how using ES6 modules compares to using CommonJS modules. You learned that:</p>
<ul>
<li>ES6 has <code>import</code> and <code>export</code> keywords (instead of <code>require</code> and <code>module.exports</code>)</li>
<li>ES6 <code>import</code> statements are always at the top of the file</li>
<li>The <code>export</code> keyword to exports multiple items from a file while the <code>export default</code> phrase exports <strong>one</strong> item from a file</li>
<li>You can rename an item that is exported with <code>export default</code></li>
<li>The <code>as</code> keyword can be used to alias an imported item</li>
<li>The <code>*</code> character can be used to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#Import_an_entire_modules_contents">import an entire module’s contents</a> with a namespace (<code>import * as Namespace from 'fileName.js';</code>)</li>
<li>ES6 modules can only be used when a file is explicitly specified as a <code>module</code>, either through an HTML file with a <code>&lt;script&gt;</code> tag of <code>type="module"</code> or a <code>package.json</code> file with a <code>"type": "module"</code> field</li>
</ul>
<hr />
<h1 id="show-and-tell">Show And Tell</h1>
<p>It’s time to show off all of the hard work that you’ve done! Great job! You worked as a team, pushed hard through the project, coordinated, collaborated, communicated.</p>
<p>You are a real software development team!</p>
<p>Each presentation should last around 15 minutes. Some things that you may want to highlight:</p>
<ul>
<li>The way that you integrated front- and back-ends</li>
<li>Anything that you added that went beyond the bound of what you learned in class and how that went</li>
<li>Reflect on the goods and bads of the experience <em>as a team</em>, talk about what you would do differently if you could start over with all the knowledge you have, right now</li>
</ul>
<hr />
<h1 id="week-14-day-2-react" data-ignore="true">WEEK-14 DAY-2<br><em>React!</em></h1>
<hr />
<h1 id="basic-react-objectives">Basic React Objectives</h1>
<p>Learning React can seem daunting. The documentation available on the main site is geared toward people who have a lot of experience creating front-end applications. The basic React objectives gets you over that hump. At the end of the lessons, you should be able to:</p>
<ul>
<li>Explain how React uses a tree data structure called the “virtual DOM” to model the DOM</li>
<li>Use <code>React.createElement</code> to create virtual DOM nodes</li>
<li>Use <code>ReactDOM.render</code> to have React render your virtual DOM nodes into the actual Web page</li>
<li>Use JSX to create virtual DOM nodes</li>
<li>Describe how JSX transforms into <code>React.createElement</code> calls</li>
<li>Use <code>Array#map</code> to create an array of virtual DOM nodes while specifying a unique key for each created virtual DOM node</li>
</ul>
<hr />
<h1 id="from-javascript-to-dom">From JavaScript To DOM</h1>
<p>The path from JavaScript to actual DOM elements appearing in your HTML document is not complex thanks to React. However, it is worth reviewing so that there is no mystery about it.</p>
<p>In this article, you will review how to use <code>React.createElement</code> to get what you want into React’s virtual DOM so that React will convert into real DOM. There are three steps:</p>
<ul>
<li>Invoking <code>createElement</code> to build the “element tree”</li>
<li>Invoking <code>render</code> to let React build its virtual DOM</li>
<li>“Waiting” for React to convert its virtual DOM into real DOM</li>
</ul>
<p>This article’s goal is for React to create the following HTML in the DOM.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">&lt;ul&gt;</span></a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;selected&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb19-3" title="3">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/pets&quot;</span><span class="kw">&gt;</span>Pets<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb19-4" title="4">  <span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb19-5" title="5">  <span class="kw">&lt;li&gt;</span></a>
<a class="sourceLine" id="cb19-6" title="6">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/owners&quot;</span><span class="kw">&gt;</span>Owners<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb19-7" title="7">  <span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="kw">&lt;/ul&gt;</span></a></code></pre></div>
<h2 id="using-react">Using React</h2>
<p>There is one method to consider when building interfaces using low-level React. From the <a href="https://reactjs.org/docs/react-api.html#createelement">documentation</a>, the <code>React.createElement</code> function has the following form:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb20-2" title="2">  type<span class="op">,</span></a>
<a class="sourceLine" id="cb20-3" title="3">  [props]<span class="op">,</span></a>
<a class="sourceLine" id="cb20-4" title="4">  [...<span class="at">children</span>]</a>
<a class="sourceLine" id="cb20-5" title="5">)</a></code></pre></div>
<p>The arguments for it are</p>
<ul>
<li><strong>type</strong>: the type of element to create, either a string for an HTML element, or a reference to a function or class that is a React component</li>
<li><strong>props</strong>: an object that contains data to render the element, either data to dynamically show or attributes to put on the element in the HTML</li>
<li><strong>children</strong>: the children of the element, as many as you want</li>
</ul>
<h2 id="creating-elements">Creating elements</h2>
<p>For each tag that you want to create with React, you will make a call to <code>React.createElement</code>. In the HTML above, there are five tags to create:</p>
<ul>
<li>One <code>ul</code> element</li>
<li>Two <code>li</code> elements</li>
<li>Two <code>a</code> elements</li>
</ul>
<p>Three of those tags have attributes that you want to have appear in the DOM:</p>
<ul>
<li>One <code>li</code> element has a “class” attribute (which you <em>must</em> translate to “className” when using in React)</li>
<li>Both <code>a</code> elements have “href” attributes</li>
</ul>
<p>Finally, there is a parent-child relationship between the elements.</p>
<ul>
<li>The <code>ul</code> element is the parent of both <code>li</code> elements</li>
<li>Both <code>li</code> elements have a single <code>a</code> element child</li>
<li>Both <code>a</code> elements have “child” text content</li>
</ul>
<p>To summarize, here are the elements and how you would translate them to their respective arguments for <code>React.createElement</code>.</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 6%" />
<col style="width: 22%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>HTML snippet</th>
<th>type</th>
<th>props</th>
<th>children</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;ul&gt;...&lt;/ul&gt;</code></td>
<td><code>'ul'</code></td>
<td><code>null</code></td>
<td>Two calls to <code>React.createElement</code>, one for each <code>li</code> child</td>
</tr>
<tr class="even">
<td><code>&lt;li class="selected"&gt;...&lt;/li&gt;</code></td>
<td><code>'li'</code></td>
<td><code>{ className: 'selected' }</code></td>
<td>One call to <code>React.createElement</code> for the <code>a</code> child</td>
</tr>
<tr class="odd">
<td><code>&lt;li&gt;...&lt;/li&gt;</code></td>
<td><code>'li'</code></td>
<td><code>null</code></td>
<td>One call to <code>React.createElement</code> for the <code>a</code> child</td>
</tr>
<tr class="even">
<td><code>&lt;a href="/pets"&gt;Pets&lt;/a&gt;</code></td>
<td><code>'a'</code></td>
<td><code>{ href: '/pets' }</code></td>
<td>The string <code>'Pets'</code></td>
</tr>
<tr class="odd">
<td><code>&lt;a href="/owners"&gt;Owners&lt;/a&gt;</code></td>
<td><code>'a'</code></td>
<td><code>{ href: '/owners' }</code></td>
<td>The string <code>'Owners'</code></td>
</tr>
</tbody>
</table>
<p>To create this tree of elements, you will use nested calls to <code>React.createElement</code>. The standard formatting for this is for elements to have children, put each argument on its own line, and for elements that have no children or just text content, put all arguments on a single line.</p>
<p>Since the <code>ul</code> has children, it will have its arguments on separate lines. Referring to the table above gives you:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb21-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-4" title="4">  <span class="co">// First li child,</span></a>
<a class="sourceLine" id="cb21-5" title="5">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb21-6" title="6">)<span class="op">;</span></a></code></pre></div>
<p>The first <code>li</code> element has a child. Its call to <code>React.createElement</code> will have its arguments each go on their own separate lines:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb22-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb22-7" title="7">    <span class="co">// a child</span></a>
<a class="sourceLine" id="cb22-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb22-9" title="9">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb22-10" title="10">)<span class="op">;</span></a></code></pre></div>
<p>The anchor element for “Pets” has only one text child. Its call to <code>React.createElement</code> will have its arguments on one line:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb23-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb23-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb23-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb23-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb23-9" title="9">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb23-10" title="10">)<span class="op">;</span></a></code></pre></div>
<p>The second <code>li</code> element has a child. Its call to <code>React.createElement</code> will have its arguments each go on their own separate lines:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb24-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb24-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb24-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb24-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb24-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb24-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb24-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb24-9" title="9">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb24-10" title="10">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb24-11" title="11">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb24-12" title="12">    <span class="co">// a child</span></a>
<a class="sourceLine" id="cb24-13" title="13">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb24-14" title="14">)<span class="op">;</span></a></code></pre></div>
<p>The other anchor element, the one for “Owners” has only one text child. Its call to <code>React.createElement</code> will have its arguments on one line:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb25-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb25-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb25-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb25-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb25-9" title="9">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb25-10" title="10">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-11" title="11">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-12" title="12">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/owners&#39;</span><span class="op">},</span> <span class="st">&#39;Owners&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb25-13" title="13">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb25-14" title="14">)<span class="op">;</span></a></code></pre></div>
<p>That’s how you translate what you want from simple HTML into well-formatted calls to <code>React.createElement</code>. That will build the “element tree” for React to use.</p>
<h2 id="converting-to-virtual-dom">Converting to virtual DOM</h2>
<p>To tell React to start the conversion process, you have to use the <code>React.render</code> method which takes a value returned from <code>React.createElement</code> and a DOM node in the actual document where React will insert the result of the conversion into real DOM.</p>
<p>If you wanted to insert what was created in the last section into the <code>main</code> tag, the most forward way of doing that is like this.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="co">// Put the element tree in a variable</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">const</span> navList <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb26-3" title="3">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb26-4" title="4">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb26-5" title="5">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb26-6" title="6">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb26-7" title="7">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb26-8" title="8">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb26-9" title="9">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb26-10" title="10">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb26-11" title="11">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb26-12" title="12">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb26-13" title="13">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/owners&#39;</span><span class="op">},</span> <span class="st">&#39;Owners&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb26-14" title="14">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb26-15" title="15">)<span class="op">;</span></a>
<a class="sourceLine" id="cb26-16" title="16"></a>
<a class="sourceLine" id="cb26-17" title="17"><span class="co">// Get a DOM node for React to render to</span></a>
<a class="sourceLine" id="cb26-18" title="18"><span class="kw">const</span> mainElement <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb26-19" title="19"></a>
<a class="sourceLine" id="cb26-20" title="20"><span class="co">// Give React the element tree and the target</span></a>
<a class="sourceLine" id="cb26-21" title="21"><span class="va">ReactDOM</span>.<span class="at">render</span>(navList<span class="op">,</span> mainElement)<span class="op">;</span></a></code></pre></div>
<p>At this point, you have given the element tree that you want created to React. It will then take that and construct its virtual DOM from it.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-example-conversion-virtual-dom.svg" alt="Convert element tree to virtual DOM" /><figcaption>Convert element tree to virtual DOM</figcaption>
</figure>
<p>Now that it has built it’s own model of the virtual DOM using the elements that you created, it can now take that and turn that into real DOM.</p>
<figure>
<img src="images/react-example-conversion-real-dom.svg" alt="Convert virtual DOM to real DOM" /><figcaption>Convert virtual DOM to real DOM</figcaption>
</figure>
<p>It takes that real DOM and inserts it as the content of the target that you gave it which, in this case, is the <code>main</code> element in the body of the document.</p>
<h2 id="updates">Updates</h2>
<p>When you call <code>React.render</code> again for the same component and target, React takes the existing virtual DOM it knows about last time it rendered the element tree, compares it to whatever new thing you want to render, and determines which (if any) of the living DOM needs to change.</p>
<p>For example, let’s say you constructed the same element tree but left off the “selected” class for the first list element. Then, when you rendered it, again, by calling <code>React.render</code>, React would compare the new element tree with the old element tree, figure out that one class was missing on that one <code>li</code> element, and remove that and only that from the real DOM.</p>
<figure>
<img src="images/react-example-virtual-dom-diff.svg" alt="Virtual DOM diff" /><figcaption>Virtual DOM diff</figcaption>
</figure>
<h2 id="what-youve-learned-1">What you’ve learned</h2>
<p>In this article, you learned</p>
<ul>
<li>To convert desired HTML into properly-formatted nested calls of <code>React.createElement</code></li>
<li>How React takes your element tree and builds its virtual DOM from the elements that you created</li>
<li>How React takes that virtual DOM and inserts it into the living HTML document</li>
<li>How React will compare an old virtual DOM tree with a new virtual DOM tree, figure out what changed, and then change that and only that in the real DOM</li>
</ul>
<hr />
<h1 id="javascript-extension">JavaScript eXtension</h1>
<p>Using <code>React.createElement</code> is a bore and a chore when creating React-powered applications. The developers that used React, both inside and outside of Facebook, wanted an easier way to interact with the React API and hide all of the minutiae that comes with using <code>React.createElement</code>. They invented a new language that sits on top of JavaScript called <em>JavaScript eXtension</em>, or JSX.</p>
<p>In this article, you will learn</p>
<ul>
<li>How to use JSX in your application</li>
<li>The syntax of JSX, and</li>
<li>How JSX transforms into <code>React.createElement</code> calls</li>
</ul>
<h2 id="how-to-use-jsx">How to use JSX</h2>
<p>Because browsers don’t understand JSX, you have to use some tools to translate JSX into just plain old JavaScript. The main tool that you will use in almost every case is one called <a href="https://babeljs.io/">Babel</a>. It is a tool that can convert versions of modern JavaScript into old version of JavaScript. It can convert <em>future</em> features of JavaScript into modern JavaScript. It can convert JSX into modern (or old) JavaScript.</p>
<p>However, using Babel by itself is like building a house with just a hammer. It’d be nice to have fancier tools to help you build that house. That’s where tools like <a href="https://github.com/facebook/create-react-app">Create React App</a> come into play. <strong>Create React App</strong> uses Babel underneath and, then, adds a whole lot more. You’ll see more of **Create React App* as you progress through the course.</p>
<h2 id="jsx-syntax">JSX Syntax</h2>
<p>Here’s a function-based component using <code>React.createElement</code> that has an <code>h1</code> element with the content “Hello!”, a placeholder image, and a link to some search engine passed in through props.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">const</span> ExampleComponent <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb27-2" title="2">  <span class="va">React</span>.<span class="at">Fragment</span><span class="op">,</span></a>
<a class="sourceLine" id="cb27-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb27-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;h1&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;Hello!&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb27-5" title="5">  <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;img&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">src</span><span class="op">:</span> <span class="st">&#39;images/150&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb27-6" title="6">  <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="va">props</span>.<span class="at">searchUrl</span> <span class="op">},</span> <span class="va">props</span>.<span class="at">searchText</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb27-7" title="7">)<span class="op">;</span></a></code></pre></div>
<p>You’ve likely seen that before. JSX allows you to get rid of all of the calls to <code>React.createElement</code> and replace them with almost HTML-looking tags. Here’s what the above content looks like in JSX.</p>
<pre class="jsx"><code>const ExampleComponent = props =&gt;
  &lt;React.Fragment&gt;
    &lt;h1&gt;Hello!&lt;/h1&gt;
    &lt;img src=&quot;images/150&quot; /&gt;
    &lt;a href={props.searchUrl}&gt;{props.searchText}&lt;/a&gt;
  &lt;/React.Fragment&gt;
;</code></pre>
<p>You can see Babel in action converting that JSX code above. Here’s a <a href="https://babeljs.io/en/repl#?babili=false&amp;browsers=&amp;build=&amp;builtIns=false&amp;spec=false&amp;loose=false&amp;code_lz=DwIwrgLhD2B2AEcDCAbAlgYwNYF4DeAFAJTw4B88EAFmgM4B0tAphAMoQCGETBe86WJgBMAXJQBOYJvAC-RGWQBQ8FfAAyaQYuAB6cFDhkgA&amp;debug=false&amp;forceAllTransforms=false&amp;shippedProposals=false&amp;circleciRepo=&amp;evaluate=false&amp;fileSize=false&amp;timeTravel=false&amp;sourceType=module&amp;lineWrap=true&amp;presets=es2015%2Creact%2Cstage-2&amp;prettier=false&amp;targets=&amp;version=7.4.3">link to Babel</a> already configured for you. Copy and paste that code above to see it transform back into <code>React.createElement</code> invocations.</p>
<h3 id="html-like-tags-but">HTML-like tags, but…</h3>
<p>The <code>React.Fragment</code> element <em>contains</em> the <code>h1</code>, <code>img</code>, and <code>a</code>, just like it does in the <code>React.createElement</code> version, except instead of using a method call to do it, it uses more familiar HTML-like tags. There’s one super big difference between the HTML that you know and what JSX expects. Can you see it?</p>
<p>Look at the end of the <code>img</code> tag. See that “/” before the closing angle bracket? You <em>must</em> include that if the tag that you’re using doesn’t have a close tag. If you want to use those HTML element in your JSX, then you have to put the slash. The following table shows some common tags that you’d use and their JSX equivalent.</p>
<table>
<thead>
<tr class="header">
<th>HTML self-closing tag</th>
<th>JSX equivalent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;br&gt;</code></td>
<td><code>&lt;br /&gt;</code></td>
</tr>
<tr class="even">
<td><code>&lt;hr&gt;</code></td>
<td><code>&lt;hr /&gt;</code></td>
</tr>
<tr class="odd">
<td><code>&lt;img&gt;</code></td>
<td><code>&lt;img /&gt;</code></td>
</tr>
<tr class="even">
<td><code>&lt;input&gt;</code></td>
<td><code>&lt;input /&gt;</code></td>
</tr>
<tr class="odd">
<td><code>&lt;link&gt;</code></td>
<td><code>&lt;link /&gt;</code></td>
</tr>
</tbody>
</table>
<h3 id="properties-and-data">Properties and data</h3>
<p>When you use the low-level <code>React.createElement</code> function call, you pass the properties in as an object as the second argument. In JSX, you pass in properties as if they were attributes on the tag.</p>
<p>When you want to use a static value, just use a string literal like this.</p>
<pre class="jsx"><code>&lt;img src=&quot;https://via.placeholder.com/150&quot; /&gt;</code></pre>
<p>becomes</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb30-2" title="2">  <span class="st">&#39;img&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-3" title="3">  <span class="op">{</span> <span class="dt">src</span><span class="op">:</span> <span class="st">&quot;https://via.placeholder.com/150&quot;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb30-4" title="4">)</a></code></pre></div>
<p>And, when you want to pass in some data rather than a sting literal like above, you use curly braces to turn</p>
<pre class="jsx"><code>&lt;a href={props.searchUrl}&gt;{props.searchText}&lt;/a&gt;</code></pre>
<p>into</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb32-2" title="2">  <span class="st">&#39;a&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb32-3" title="3">  <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="va">props</span>.<span class="at">searchUrl</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb32-4" title="4">  <span class="va">props</span>.<span class="at">searchText</span></a>
<a class="sourceLine" id="cb32-5" title="5">)</a></code></pre></div>
<p>The stuff inside the curly braces is just a JavaScript expression, so you could do something like this, if you wanted, to make the search text uppercase:</p>
<pre class="jsx"><code>&lt;a href={props.searchUrl}&gt;
  {props.searchText.toUpperCase()}
&lt;/a&gt;</code></pre>
<h3 id="comments">Comments</h3>
<p>To use comments in JSX, you use curly braces (because that means its just a normal JavaScript expression) and block-level JavaScript comments.</p>
<pre class="jsx"><code>&lt;div&gt;
  &lt;h2&gt;This is JSX&lt;/h2&gt;
  {/* This is a comment in JSX */}
&lt;/div&gt;</code></pre>
<h3 id="property-names">Property names</h3>
<p>Please read <a href="https://reactjs.org/docs/dom-elements.html">DOM Elements</a> in the React documentation to understand how property names work, as well as the special property names that React supports. You can be assessed on the following special attributes:</p>
<ul>
<li><code>checked</code></li>
<li><code>className</code></li>
<li><code>dangerouslySetInnerHTML</code></li>
<li><code>htmlFor</code></li>
<li><code>onChange</code></li>
<li><code>style</code></li>
<li><code>value</code></li>
</ul>
<p>Also, you can be assessed on knowing that React uses camel-case for its attribute names so attributes like <code>maxlength</code> in HTML are <code>maxLength</code> in React.</p>
<h2 id="the-jsx-semicolon-gotcha">The JSX semicolon gotcha</h2>
<p>You will also see code like this in other React projects, as well as in code generated by tools. It is a function-based component that uses the <code>function</code> keyword rather than an arrow function. Note the <code>return</code> statement.</p>
<pre class="jsx"><code>function App() {
  return (
    &lt;div&gt;
      &lt;h1&gt;Hello!&lt;/h1&gt;
      &lt;div&gt;Welcome to JSX.&lt;/div&gt;
    &lt;/div&gt;
  );
}</code></pre>
<p>You’ll see that the JSX block is wrapped in parentheses. This is due to the way that JavaScript handles something called <a href="https://www.ecma-international.org/ecma-262/#sec-rules-of-automatic-semicolon-insertion">“automatic semicolon insertion”</a>. Here’s a simple example. What do you think the function returns? (Yes, this <em>is</em> a “trick question”.)</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">function</span> <span class="at">sum</span>(i<span class="op">,</span> j) <span class="op">{</span></a>
<a class="sourceLine" id="cb36-2" title="2">  <span class="cf">return</span></a>
<a class="sourceLine" id="cb36-3" title="3">    i <span class="op">+</span> j<span class="op">;</span></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>If the answer isn’t obvious, start Node on the command line, type it in exactly the way it is there, and try calling it with <code>sum(1, 2)</code>.</p>
<p>You may be surprised to see that it returns <code>undefined</code>. Here’s why: when JavaScript reads your source code, it tries to be “helpful”. When it reads the lines of your code, it asks, is each line a “complete” line? Is it and the following lines valid JavaScript expressions? If the answer is “yes”, then it will add a semicolon at the end of the line <em>for you</em>. When it reads the above “sum” function, the JavaScript runner “thinks” to itself:</p>
<ul>
<li>Ok, I have two lines:
<ul>
<li><code>return</code></li>
<li><code>i + j;</code></li>
</ul></li>
<li>Are each of those valid JavaScript expressions? Yes!</li>
<li>Now, I will put semicolons at the end of the lines that don’t have any
<ul>
<li><code>return;</code></li>
<li><code>i + j;</code></li>
</ul></li>
</ul>
<p>Now, your function, in the eyes of JavaScript, looks like this.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">function</span> <span class="at">sum</span>(i<span class="op">,</span> j) <span class="op">{</span></a>
<a class="sourceLine" id="cb37-2" title="2">  <span class="cf">return</span><span class="op">;</span> <span class="co">// &lt;- There&#39;s a new semicolon!</span></a>
<a class="sourceLine" id="cb37-3" title="3">    i <span class="op">+</span> j<span class="op">;</span></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>That function never gets to <code>i + j</code> because it always returns “no value” on the first line. Yikes!</p>
<p>To get around that, you can add parentheses to tell JavaScript that “more is coming”.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">function</span> <span class="at">sum</span>(i<span class="op">,</span> j) <span class="op">{</span></a>
<a class="sourceLine" id="cb38-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb38-3" title="3">    i <span class="op">+</span> j</a>
<a class="sourceLine" id="cb38-4" title="4">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb38-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>Now, when JavaScript reads the line <code>return (</code>, it “thinks” to itself, “Well, that’s not a complete expression. There must be more coming. I will <em>not</em> put a semicolon there.”</p>
<p>The same is true for functions containing JSX. The above code</p>
<pre class="jsx"><code>function App() {
  return (
    &lt;div&gt;
      &lt;h1&gt;Hello!&lt;/h1&gt;
      &lt;div&gt;Welcome to JSX.&lt;/div&gt;
    &lt;/div&gt;
  );
}</code></pre>
<p>is equivalent to</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb40-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb40-3" title="3">    <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb40-4" title="4">      <span class="st">&#39;div&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb40-5" title="5">      <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb40-6" title="6">      <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;h1&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;Hello!&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb40-7" title="7">      <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;div&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;Welcome to JSX.&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb40-8" title="8">    )</a>
<a class="sourceLine" id="cb40-9" title="9">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb40-10" title="10"><span class="op">}</span></a></code></pre></div>
<p>Without the parentheses starting right after the <code>return</code> keyword and ending after the outer call of <code>React.createElement</code>, JavaScript would just stick a semicolon after the <code>return</code> keyword and all of the fancy React stuff would get ignored.</p>
<p>The message is clear: if you use the <code>return</code> keyword in a function to “return some JSX”, then make sure you wrap the JSX in parentheses.</p>
<h2 id="what-youve-learned-2">What you’ve learned</h2>
<p>That’s really all there is to JSX. You combine your knowledge of HTML and your knowledge of <code>React.createElement</code> to allow the Babel tool to turn your code into plain old JavaScript for you. Specifically, you have seen the following conversions:</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 26%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="header">
<th>Conversion type</th>
<th>JSX</th>
<th>JavaScript</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tags</td>
<td><code>&lt;h1&gt;&lt;/h1&gt;</code></td>
<td><code>React.createElement('h1', null)</code></td>
</tr>
<tr class="even">
<td>attributes</td>
<td><code>&lt;img src="images/foo.png"/&gt;</code></td>
<td><code>React.createElement('img', { src: "foo.png" })</code></td>
</tr>
<tr class="odd">
<td>variables</td>
<td><code>&lt;h1&gt;{message}&lt;/h1&gt;</code></td>
<td><code>React.createElement('h1', null, message)</code></td>
</tr>
</tbody>
</table>
<p>You’ve also read about the special property names that React supports.</p>
<p>Finally, you learned about the frustrating side effect of “automatic semicolon insertion” and, if you do use the <code>return</code> keyword in your functions, that you should wrap the JSX in parentheses to prevent JavaScript from <em>not</em> returning your code.</p>
<hr />
<h1 id="walk-through-creating-elements-in-react">Walk-Through: Creating Elements In React</h1>
<p>To start your React journey, you will build your foundational knowledge by starting out with the basic <code>React.createElement</code> and <code>ReactDOM.render</code>. One of the compelling features of this type of solution is that you do not need <em>any</em> extra tools to get your app running in the browser. In the next walk-through, you will have to <em>install</em> a ton of packages just to get React to properly work. This project will walk you through how to use a pure JavaScript version of React. Everything will work right out of the box.</p>
<h2 id="getting-started">Getting started</h2>
<p>Install the <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi">React DevTools for Google Chrome</a>.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-devtools.png" alt="React DevTools for Google Chrome screenshot" /><figcaption>React DevTools for Google Chrome screenshot</figcaption>
</figure>
<p>Create a new directory to contain this new project. In that directory, create two files: an <strong>index.html</strong> file and an <strong>app.js</strong> file. In the <strong>index.html</strong> file, create a standard HTML 5 document. In the HTML <code>body</code> (in this order), create a <code>main</code> element and a <code>script</code> element for your <strong>app.js</strong> file with <code>type="module"</code> so you can use ES6 modules.</p>
<p>Serve your files with a local Python server by running the <code>python3 -m http.server</code> command in your terminal. Make sure you are running the command from within your project directory. You should be able to open http://localhost:8000 to see the page, empty as it is.</p>
<h2 id="test-that-things-are-working">Test that things are working</h2>
<p>Get ready! You’re going to do the first React thing! You’re going to create a React element that will display “Hello, programmers!”. You will then have React render it to the DOM.</p>
<p>Copy and paste the following JavaScript code into your <strong>app.js</strong>, refresh your page, look at the code to get a feel for what it does, try to come up with explanations on your own, and then continue reading.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb41-1" title="1"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react@16/umd/react.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb41-2" title="2"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react-dom@16/umd/react-dom.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb41-3" title="3"></a>
<a class="sourceLine" id="cb41-4" title="4"><span class="kw">const</span> HelloWorld <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb41-5" title="5">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb41-6" title="6">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb41-7" title="7">  <span class="st">&#39;Hello, programmers&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb41-8" title="8">)<span class="op">;</span></a>
<a class="sourceLine" id="cb41-9" title="9"></a>
<a class="sourceLine" id="cb41-10" title="10"><span class="kw">const</span> target <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb41-11" title="11"><span class="kw">const</span> app <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(HelloWorld<span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb41-12" title="12"><span class="va">ReactDOM</span>.<span class="at">render</span>(app<span class="op">,</span> target)<span class="op">;</span></a></code></pre></div>
<p><strong>Note</strong>: You may want to turn on “Disable cache” on the <em>Network</em> tab of your DevTools and keep the DevTools open while you’re doing this to make sure you always have the newest version of the files.</p>
<p>You should now have <em>Components</em> and <em>Profiler</em> tabs in your DevTools. If you click on the <code>HelloWorld</code> component in the <em>Components</em> tab, you can see that it has no <em>props</em>. You’ll learn much more about props later. For now, just remember that the React DevTools extension is a helpful tool for you to view information about your components and their props.</p>
<h2 id="walking-through-the-code">Walking through the code</h2>
<p>Even though there are only five statements in that code block, a lot is going on. This section carefully walks through each of the statements to help you get a deeper understanding.</p>
<h3 id="those-wacky-import-statements">Those wacky import statements</h3>
<p>Consider those <code>import</code> statements. These differ in two ways from what you’ve seen with ES modules to date.</p>
<ol type="1">
<li>They come from another website altogether. When you use <code>import</code> to bring in modules from another domain, that request is governed by CORS; that means the other server <em>must</em> have CORS configured to let you import their code. Luckily, unpkg.com configures CORS to allow any authority to import their script files.</li>
<li>They don’t seem to import anything. There is no <code>import { React } from</code> there. It’s just <code>import 'url'</code>. This is called a <em>side effect</em> import and is generally frowned upon in modern Web development. But, React does not package their code in ES6 format. What those <code>import</code> statements do is <em>add variables in the global scope</em>. The two variables they add are <code>React</code> from the first import, and <code>ReactDOM</code> from the second import. Those global variables can then be used by your code, which happens with <code>React.createElement</code> and <code>ReactDOM.render</code>.</li>
</ol>
<p>If you were going to move these into production, you would change the URLs that you import from</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb42-1" title="1"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react@16/umd/react.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb42-2" title="2"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react-dom@16/umd/react-dom.development.js&#39;</span><span class="op">;</span></a></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb43-1" title="1"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react@16/umd/react.production.min.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb43-2" title="2"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react-dom@16.13.1/umd/react-dom.production.min.js&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Those files contain the minified “production” version of the code, which is just a smaller version of the “development” versions. If you open up the links to the <a href="https://unpkg.com/react@16/umd/react.development.js">react.development.js</a> and <a href="https://unpkg.com/react@16/umd/react.production.min.js">react-production.min.js</a> files in your browser, you’ll see JavaScript in both files. Notice how the non-minified version (<a href="https://unpkg.com/react@16/umd/react.development.js">react.development.js</a>) includes plain JavaScript you’re used to seeing. The minified version simply compresses that JavaScript.</p>
<h3 id="the-odd-looking-function">The odd-looking function</h3>
<p>Turn your attention to this statement.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb44-1" title="1"><span class="kw">const</span> HelloWorld <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb44-2" title="2">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb44-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb44-4" title="4">  <span class="st">&#39;Hello, programmers!&#39;</span></a>
<a class="sourceLine" id="cb44-5" title="5">)<span class="op">;</span></a></code></pre></div>
<p>The statement declares the <code>HelloWorld</code> variable and stores a function in it. This is the way that components look in React. It is a function-based component because it’s a function. It returns the value returned from <code>React.createElement</code>. If that syntax is weird, it is functionally the same as this code.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">const</span> HelloWorld <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb45-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;h1&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;Hello, programmers!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb45-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Because there are a lot of die-hard functional programmers (as opposed to object-oriented programmers) that like that kind of syntax (arrow functions without curly braces that span multiple lines), you will see it in a lot of places while learning React.</p>
<p>The arguments passed to <code>React.createElement</code> are:</p>
<ol type="1">
<li>What to create in the DOM.</li>
</ol>
<ul>
<li>If it is a string, it needs to be all lowercase and the name of the HTML element to create. This example passes in <code>'h1'</code> as the tag to create in the DOM.</li>
<li>Otherwise, it should be the variable that holds another component. You can see it being used that way in the later code.</li>
</ul>
<ol start="2" type="1">
<li>Any properties/attributes to put on the generated element. This example passes in <code>null</code> because there are no attributes needed. You will see some, soon.</li>
<li>The child content of the element. The third (and fourth and fifth and…) arguments contains what React should put as the children of the content of the element. In this case, the content is <code>'Hello, programmers!'</code>.</li>
</ol>
<p><strong>Important</strong>: Every time this walk-through asks you to create a function-based component, this is what it will mostly look like. It will look like this <em>or</em> it will look like this and have a single parameter named <code>props</code> like this.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb46-1" title="1"><span class="co">// Without the need for data</span></a>
<a class="sourceLine" id="cb46-2" title="2"><span class="kw">const</span> HelloWorldNoData <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb46-3" title="3">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb46-4" title="4">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb46-5" title="5">  <span class="st">&#39;Hello, programmers!&#39;</span></a>
<a class="sourceLine" id="cb46-6" title="6">)<span class="op">;</span></a>
<a class="sourceLine" id="cb46-7" title="7"></a>
<a class="sourceLine" id="cb46-8" title="8"><span class="co">// With the need for data has the</span></a>
<a class="sourceLine" id="cb46-9" title="9"><span class="co">// props parameter.</span></a>
<a class="sourceLine" id="cb46-10" title="10"><span class="kw">const</span> HelloWorldWithData <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb46-11" title="11">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb46-12" title="12">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb46-13" title="13">  <span class="st">&#39;Hello, programmers!&#39;</span></a>
<a class="sourceLine" id="cb46-14" title="14">)<span class="op">;</span></a></code></pre></div>
<h3 id="putting-it-in-the-page">Putting it in the page</h3>
<p>The last three statements in the code block are these.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">const</span> target <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-2" title="2"><span class="kw">const</span> app <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(HelloWorld<span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-3" title="3"><span class="va">ReactDOM</span>.<span class="at">render</span>(app<span class="op">,</span> target)<span class="op">;</span></a></code></pre></div>
<p>The first line is something you should be really familiar with. You are selecting the <code>&lt;main&gt;</code> element and referencing it as <code>target</code>.</p>
<p>The second line is using <code>React.createElement</code> to create an element from the <code>HelloWorld</code> function-based component discussed in the last section. It has <code>null</code> properties.</p>
<p>The third line <em>renders</em> the component into the actual Web page, the component specified by the first argument, which is the one created from the <code>HelloWorld</code> component. Remember that you can open your DevTools, find the <em>Components</em> tab, and click it to see the React DevTools show you the “HelloWorld” component rendered by React.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-hello-programmers-create-element-with-react-tools.png" alt="Hello programmers with dev tools" /><figcaption>Hello programmers with dev tools</figcaption>
</figure>
<p>Before moving on, add some more to that, so you get a feel for how it works. Replace the content of your <strong>app.js</strong> with this stuff. The comments to the right of each line shows what React will do with the stuff only after you call <code>ReactDOM.render</code> with it.</p>
<blockquote>
<p><strong>Note:</strong> since you have not included a CSS file to style <code>#nav-links</code> and <code>.is-selected</code> in your project, the <code>id</code> and <code>className</code> aren’t actually being used for any styling purpose. The code below includes an <code>id</code> and <code>className</code> to shows an example of setting <code>id</code> and <code>className</code> with <code>React.createElement</code> and how it translates to HTML.</p>
</blockquote>
<div class="sourceCode" id="cb48"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb48-1" title="1"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react@16/umd/react.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb48-2" title="2"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react-dom@16/umd/react-dom.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb48-3" title="3"></a>
<a class="sourceLine" id="cb48-4" title="4"><span class="kw">const</span> Links <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb48-5" title="5">  <span class="st">&#39;ul&#39;</span><span class="op">,</span>                                  <span class="co">// &lt;ul</span></a>
<a class="sourceLine" id="cb48-6" title="6">  <span class="op">{</span> <span class="dt">id</span><span class="op">:</span> <span class="st">&#39;nav-links&#39;</span> <span class="op">},</span>                   <span class="co">//  id=&quot;nav-links&quot;&gt;</span></a>
<a class="sourceLine" id="cb48-7" title="7">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb48-8" title="8">    <span class="st">&#39;li&#39;</span><span class="op">,</span>                                <span class="co">// &lt;li</span></a>
<a class="sourceLine" id="cb48-9" title="9">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;is-selected&#39;</span> <span class="op">},</span>        <span class="co">//  class=&quot;is-selected&quot;&gt;</span></a>
<a class="sourceLine" id="cb48-10" title="10">    <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb48-11" title="11">      <span class="st">&#39;a&#39;</span><span class="op">,</span>                               <span class="co">// &lt;a</span></a>
<a class="sourceLine" id="cb48-12" title="12">      <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;https://appacademy.io&#39;</span> <span class="op">},</span> <span class="co">//  href=&quot;...&quot;&gt;</span></a>
<a class="sourceLine" id="cb48-13" title="13">      <span class="st">&#39;App Academy&#39;</span>                      <span class="co">//    App Academy</span></a>
<a class="sourceLine" id="cb48-14" title="14">    )<span class="op">,</span>                                   <span class="co">// &lt;/a&gt;</span></a>
<a class="sourceLine" id="cb48-15" title="15">  )<span class="op">,</span>                                     <span class="co">// &lt;/li&gt;</span></a>
<a class="sourceLine" id="cb48-16" title="16">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb48-17" title="17">    <span class="st">&#39;li&#39;</span><span class="op">,</span>                                <span class="co">// &lt;li&gt;</span></a>
<a class="sourceLine" id="cb48-18" title="18">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb48-19" title="19">    <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb48-20" title="20">      <span class="st">&#39;a&#39;</span><span class="op">,</span>                               <span class="co">// &lt;a</span></a>
<a class="sourceLine" id="cb48-21" title="21">      <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;https://aaonline.io&#39;</span> <span class="op">},</span>   <span class="co">//  href=&quot;...&quot;&gt;</span></a>
<a class="sourceLine" id="cb48-22" title="22">      <span class="st">&#39;a/A Open&#39;</span><span class="op">,</span>                        <span class="co">//  a/A Open</span></a>
<a class="sourceLine" id="cb48-23" title="23">    )<span class="op">,</span>                                   <span class="co">// &lt;/a&gt;</span></a>
<a class="sourceLine" id="cb48-24" title="24">  )<span class="op">,</span>                                     <span class="co">// &lt;/li&gt;</span></a>
<a class="sourceLine" id="cb48-25" title="25">)<span class="op">;</span>                                       <span class="co">// &lt;/ul&gt;</span></a>
<a class="sourceLine" id="cb48-26" title="26"></a>
<a class="sourceLine" id="cb48-27" title="27"><span class="kw">const</span> HelloWorld <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb48-28" title="28">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb48-29" title="29">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb48-30" title="30">  <span class="st">&#39;Hello, programmers&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb48-31" title="31">)<span class="op">;</span></a>
<a class="sourceLine" id="cb48-32" title="32"></a>
<a class="sourceLine" id="cb48-33" title="33"><span class="co">// Creates the HelloWorld first and, then, creates</span></a>
<a class="sourceLine" id="cb48-34" title="34"><span class="co">// the Links</span></a>
<a class="sourceLine" id="cb48-35" title="35"><span class="kw">const</span> AllTogether <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb48-36" title="36">  <span class="st">&#39;div&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb48-37" title="37">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb48-38" title="38">  <span class="va">React</span>.<span class="at">createElement</span>(HelloWorld<span class="op">,</span> <span class="kw">null</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb48-39" title="39">  <span class="va">React</span>.<span class="at">createElement</span>(Links<span class="op">,</span> <span class="kw">null</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb48-40" title="40">)<span class="op">;</span></a>
<a class="sourceLine" id="cb48-41" title="41"></a>
<a class="sourceLine" id="cb48-42" title="42"><span class="kw">const</span> target <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb48-43" title="43"><span class="kw">const</span> app <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(AllTogether<span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb48-44" title="44"><span class="va">ReactDOM</span>.<span class="at">render</span>(app<span class="op">,</span> target)<span class="op">;</span></a></code></pre></div>
<p>Look at what gets produced in the <em>Elements</em> tab of your DevTools. Look at what gets produced in the <em>Components</em> tab of your DevTools for all three of your components. Play around with it: change tags, replace some of those <code>null</code> second arguments with objects to see what gets presented. Give it a whirl. From this point on, you’ll be working with JavaScript code known as <strong>JSX</strong> in your React projects. JSX is just syntactic sugar that translates to creating React element objects. Although you won’t be creating full-scale projects with <code>React.createElement</code>, it’s important to remember that React is actually using <code>React.createElement</code> under the hood.</p>
<hr />
<h1 id="thinking-in-components">Thinking In Components</h1>
<p>For the next couple of walk through articles, you will be reproducing a page from Petrack. Please go to <a href="https://polar-beach-08187.herokuapp.com/">Petrack</a> and click around it so you can see how it works. Pay special attention to the detail page for the pets. This article will analyze it so that it can introduce you into how to “think in React”.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/pettrack-pet-detail.png" alt="Petrack pet detail page" /><figcaption>Petrack pet detail page</figcaption>
</figure>
<p>When you “think in React”, you are supposed to “think in components”. A component in React is usually a JavaScript function or a class that returns a special React object called an “element”. There is a <em>very</em> vocal community that believes that function-based components are far superior than class-based components because they’re easier to understand. You will have the opportunity to use both in this class and make up your mind which you like better.</p>
<p>In this article, you will gain insight into how to break a UI down into portions of functionality that React calls “components”. The way this article presents the components is only one way to do it. Other developers may choose to do it differently. There is usually no wrong way to do it.</p>
<h2 id="components">Components</h2>
<p>In React-speak, a “component” is a chunk of the user interface that can (or should) be treated as a unit because it may (or likely will) be used more than once or used to structure a page. That’s not a very satisfying definition. This article will walk you through breaking down the page using the practical example of the Petrack pet detail page.</p>
<p>When you think of components, it’s good to think in terms of the Single Responsibility Principle. Remember that? It’s good to have a component do one thing and one thing well. In this analysis, it will identify how it fits (or doesn’t fit) in with the Single Responsibility Principle.</p>
<p>If you think in terms of Pug, then a component is kind of like an <code>include</code>, a big or small amount of code that you could use over and over in your UI. The main difference is that React is <em>in the browser</em> and handles user events and HTML generation for you so that you’re not creating template strings and adding them via the <code>innerHTML</code> property or <code>appendChild</code> method. Pug is just on the server generating HTML.</p>
<h2 id="the-navigation-component">The navigation component</h2>
<p>On all of the pages, there is the same navigation at the top of the page.</p>
<figure>
<img src="images/pettrack-pet-detail-static-content.png" alt="Petrack navigation" /><figcaption>Petrack navigation</figcaption>
</figure>
<p>If you were working in Pug, that would be in your <strong>layout.pug</strong> because you would want it to appear in every page. In React, you will create a reusable component, maybe call it <code>Navigation</code>, and use it on all of your React-enabled pages.</p>
<p>This does one thing and one thing well: it shows the static content of the navigation. There’s nothing else it needs to do. Good job, <code>Navigation</code> component!</p>
<p>What this means is that the code that will create the heading “Petrack”, the links “Pets” and “Owners”, and the “Back” link will all be in their own component, which is just a JavaScript function or class. It could look something like this, but with real code where it reads “some cool React code here”. This is the skeleton of the code.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb49-1" title="1"><span class="co">// Navigation.js</span></a>
<a class="sourceLine" id="cb49-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb49-3" title="3"></a>
<a class="sourceLine" id="cb49-4" title="4"><span class="kw">const</span> Navigation <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb49-5" title="5">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb49-6" title="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb49-7" title="7"></a>
<a class="sourceLine" id="cb49-8" title="8"><span class="im">export</span> <span class="im">default</span> Navigation<span class="op">;</span></a></code></pre></div>
<p>You would put that in a file named <strong>Navigation.js</strong>. It’s capitalized because, in React world, the names of your custom components are <em>always</em> capitalized.</p>
<p>Don’t worry if that doesn’t make complete sense, yet. You will be making these components and their files <em>for the rest of your lives</em>. Or, at least, for the rest of this course. And, definitely, for the remainder of this module.</p>
<p>The walk through articles that follow this will explain what’s going on as well as what that <code>props</code> parameter is.</p>
<h2 id="the-details-components">The details components</h2>
<p>Now, for the remainder of the page.</p>
<figure>
<img src="images/pettrack-pet-detail-component.png" alt="Petrack detail" /><figcaption>Petrack detail</figcaption>
</figure>
<p>This could be another component. It would create the “Details” headline, show the individual details of the pet, create the “Owners” headline, and then create the links to the owners. It could look something like this.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb50-1" title="1"><span class="co">// PetDetail.js</span></a>
<a class="sourceLine" id="cb50-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb50-3" title="3"></a>
<a class="sourceLine" id="cb50-4" title="4"><span class="kw">const</span> PetDetail <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb50-5" title="5">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb50-6" title="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb50-7" title="7"></a>
<a class="sourceLine" id="cb50-8" title="8"><span class="im">export</span> <span class="im">default</span> PetDetail<span class="op">;</span></a></code></pre></div>
<p>This component, the <code>PetDetail</code> component, does too much. It’s in charge of showing two different kinds of information, the details of the pet <em>and</em> the owners links. That means there’s probably an opportunity to create more components that this component can then use. This is called <em>component composition</em>.</p>
<h3 id="breaking-it-down-further">Breaking it down further</h3>
<p>Now, please think like a Pug developer for just a moment. How would you create this page in Pug? The code for this from the project looks like this.</p>
<pre class="pug"><code>extends ../layout

block content
  h1 Details
  dl
    dt Name
    dd= pet.name
    dt Age
    dd= pet.age
    dt Type
    dd= pet.PetType.type

  h2 Owners
  ul
    each owner in pet.Owners
      li: a(href=&quot;/owners/&quot; + owner.id) #{owner.lastName}, #{owner.firstName}</code></pre>
<p>To start thinking in components, ask yourself</p>
<ul>
<li>What parts of that page are repeated?</li>
<li>What parts have the same structure?</li>
</ul>
<p>You can see that in the <em>Details</em> section of the page, there are repeated structures of <code>dt</code> and <code>dd</code> elements. You can see in the <em>Owners</em> section, there is a loop that creates a link to the owners based on the owner information. Those types of reusable chunks of content are good candidates for being their own components.</p>
<h3 id="the-pet-information-item-component">The pet information item component</h3>
<p>You can extract the creation of the <code>dt</code> and <code>dd</code> elements into its own component.</p>
<figure>
<img src="images/pettrack-pet-detail-information-item-component.png" alt="Petrack pet information item" /><figcaption>Petrack pet information item</figcaption>
</figure>
<p>That could look something like this.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb52-1" title="1"><span class="co">// PetInformationItem.js</span></a>
<a class="sourceLine" id="cb52-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb52-3" title="3"></a>
<a class="sourceLine" id="cb52-4" title="4"><span class="kw">const</span> PetInformationItem <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb52-5" title="5">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb52-6" title="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb52-7" title="7"></a>
<a class="sourceLine" id="cb52-8" title="8"><span class="im">export</span> <span class="im">default</span> PetInformationItem<span class="op">;</span></a></code></pre></div>
<p>It would be responsible for making that portion of the Web page appear. And, you would use it over and over for each of the different pieces of data you wanted to show. As you add more data about pets, you could use that <code>PetInformationItem</code> to maintain the visual consistency of the Web page, as well as allowing you to write less code. This component does one thing and does it well.</p>
<h3 id="the-owner-link-component">The owner link component</h3>
<p>Just like extracting the pet information item, you can extract that owner link into its own component. It would generate the the <code>a</code> and format the person’s name.</p>
<figure>
<img src="images/pettrack-pet-detail-owner-link-component.png" alt="Petrack owner link" /><figcaption>Petrack owner link</figcaption>
</figure>
<p>Again, the skeleton code would look something like this.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb53-1" title="1"><span class="co">// OwnerLink.js</span></a>
<a class="sourceLine" id="cb53-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb53-3" title="3"></a>
<a class="sourceLine" id="cb53-4" title="4"><span class="kw">const</span> OwnerLink <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb53-5" title="5">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb53-6" title="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb53-7" title="7"></a>
<a class="sourceLine" id="cb53-8" title="8"><span class="im">export</span> <span class="im">default</span> OwnerLink<span class="op">;</span></a></code></pre></div>
<p>This component also does one thing and does it well. If you ever need to change the way owner names appear in lists of links in the application, you can come to this one component and change it. It would then take effect everywhere! Single Responsibility Principle for the win!</p>
<h3 id="the-owners-list-component">The owners list component</h3>
<p>Now, the thing that manages the list itself and the use of the <code>OwnerLink</code> component is eligible for being its own component, too.</p>
<figure>
<img src="images/pettrack-pet-detail-owners-list-component.png" alt="Petrack owners list" /><figcaption>Petrack owners list</figcaption>
</figure>
<p>It’s single responsibility is to manage creating the “Owners” header and the unordered list. It will use the <code>OwnerLink</code> component to do that! Again, this is called <em>component composition</em>.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb54-1" title="1"><span class="co">// OwnersList.js</span></a>
<a class="sourceLine" id="cb54-2" title="2"><span class="im">import</span> OwnerLink <span class="im">from</span> <span class="st">&#39;./OwnerLink&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb54-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb54-4" title="4"></a>
<a class="sourceLine" id="cb54-5" title="5"><span class="kw">const</span> OwnersList <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb54-6" title="6">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb54-7" title="7"></a>
<a class="sourceLine" id="cb54-8" title="8">  <span class="co">/**</span></a>
<a class="sourceLine" id="cb54-9" title="9"><span class="co">   * Use the OwnerLink component, too!</span></a>
<a class="sourceLine" id="cb54-10" title="10"><span class="co">   */</span></a>
<a class="sourceLine" id="cb54-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb54-12" title="12"></a>
<a class="sourceLine" id="cb54-13" title="13"><span class="im">export</span> <span class="im">default</span> OwnersList<span class="op">;</span></a></code></pre></div>
<h3 id="putting-the-list-and-details-together">Putting the list and details together</h3>
<p>If you create the <code>PetInformationItem</code> and the <code>OwnerLink</code> component, then you will want to use them in your <code>PetDetail</code> component. That is as easy as using the <code>import</code> statement to allow them to be used by that code.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb55-1" title="1"><span class="co">// PetDetail.js</span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="im">import</span> OwnersList <span class="im">from</span> <span class="st">&#39;./OwnersList&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb55-3" title="3"><span class="im">import</span> PetInformationItem <span class="im">from</span> <span class="st">&#39;./PetInformationItem&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb55-4" title="4"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb55-5" title="5"></a>
<a class="sourceLine" id="cb55-6" title="6"><span class="kw">const</span> PetDetail <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb55-7" title="7">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb55-8" title="8"></a>
<a class="sourceLine" id="cb55-9" title="9">  <span class="co">/**</span></a>
<a class="sourceLine" id="cb55-10" title="10"><span class="co">   * Use the OwnersList and PetInformationItem</span></a>
<a class="sourceLine" id="cb55-11" title="11"><span class="co">   * components, too!</span></a>
<a class="sourceLine" id="cb55-12" title="12"><span class="co">   */</span></a>
<a class="sourceLine" id="cb55-13" title="13"><span class="op">}</span></a>
<a class="sourceLine" id="cb55-14" title="14"></a>
<a class="sourceLine" id="cb55-15" title="15"><span class="im">export</span> <span class="im">default</span> PetDetail<span class="op">;</span></a></code></pre></div>
<h2 id="putting-it-all-together">Putting it all together</h2>
<p>Once you have all of those components, you would create one more component, the top-level “page” component, that would render the <code>Navigation</code> and <code>PetDetail</code> components.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb56-1" title="1"><span class="co">// PetDetailPage.js</span></a>
<a class="sourceLine" id="cb56-2" title="2"><span class="im">import</span> Navigation <span class="im">from</span> <span class="st">&#39;./Navigation&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb56-3" title="3"><span class="im">import</span> PetDetail <span class="im">from</span> <span class="st">&#39;./PetDetail&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb56-4" title="4"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb56-5" title="5"></a>
<a class="sourceLine" id="cb56-6" title="6"><span class="kw">const</span> PetDetailPage <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb56-7" title="7">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb56-8" title="8"></a>
<a class="sourceLine" id="cb56-9" title="9">  <span class="co">/**</span></a>
<a class="sourceLine" id="cb56-10" title="10"><span class="co">   * Use the Navigation and PetDetail</span></a>
<a class="sourceLine" id="cb56-11" title="11"><span class="co">   * components, too!</span></a>
<a class="sourceLine" id="cb56-12" title="12"><span class="co">   */</span></a>
<a class="sourceLine" id="cb56-13" title="13"><span class="op">}</span></a>
<a class="sourceLine" id="cb56-14" title="14"></a>
<a class="sourceLine" id="cb56-15" title="15"><span class="im">export</span> <span class="im">default</span> PetDetailPage<span class="op">;</span></a></code></pre></div>
<p>The final analysis in this breakdown of “components” to “think in React” looks like this.</p>
<figure>
<img src="images/pettrack-pet-detail-all-components.png" alt="Petrack final analysis" /><figcaption>Petrack final analysis</figcaption>
</figure>
<p>You can see each of the components that were described in this article. You can also see how the <code>PetInformationItem</code> and <code>OwnerLink</code> components get used multiple times on the page.</p>
<h2 id="there-is-probably-more">There is probably more</h2>
<p>Take a look at this, again, and think about if there is any “missing” component before continuing.</p>
<figure>
<img src="images/pettrack-pet-detail-all-components.png" alt="Petrack final analysis" /><figcaption>Petrack final analysis</figcaption>
</figure>
<p>You could also create a <code>PetDetailList</code> component, if you want, that would manage the “Details” header and the definition list. That would reflect the same structure that the <code>OwnersList</code> has, a component responsible for generating a header and a list. In the following walk through articles, the <code>PetDetailList</code> component will also be included in the development.</p>
<h2 id="what-youve-seen">What you’ve seen</h2>
<p>This is thinking in React. Looking at a Web page and deciding what parts of it belong in sections, what parts are repeated, and how to group them all together. The React documentation calls this <a href="https://reactjs.org/docs/thinking-in-react.html#step-1-break-the-ui-into-a-component-hierarchy">breaking the UI into a component hierarchy</a>. That link is to a section in the React documentation entitled <em>Thinking in React</em>. That section performs the same exercise that this article performed, but with a lot fewer words and pictures.</p>
<p>In the upcoming exercises, you will create these components in a couple of ways. The first way is the hard way, but shows you how React works under the covers. The second way uses the fancy JSX language to make it easier for you.</p>
<hr />
<h1 id="jsx-walk-through-navigation-component">JSX Walk-Through: Navigation Component</h1>
<p>You will now work on creating the PetTrack page.</p>
<ul>
<li><code>PetDetailPage</code>: Created in this step</li>
<li><code>Navigation</code>: Created in this step</li>
<li><code>PetDetails</code></li>
<li><code>PetDetailList</code></li>
<li><code>PetInformationItem</code></li>
<li><code>OwnersList</code></li>
<li><code>OwnerLink</code></li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<h2 id="the-strategy">The strategy</h2>
<p>This guide will work top-down, in that it will start with the top-most (or outer-most) component, the <code>PetDetailPage</code> component. Then, it will move to a next level component, like <code>Navigation</code>. It will just keep adding components and getting them to work with the data from the AJAX call.</p>
<h2 id="the-pet-detail-page-component">The pet detail page component</h2>
<p>The <code>PetDetailPage</code> component will be responsible for showing the navigation component, the details list component, and the owners list component. None of those exist, yet, so just stub out a new component to hold the source.</p>
<p>Create a new file named <strong>PetDetailPage.js</strong> in the <strong>src</strong> directory. In that file, type this content into it.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const PetDetailPage = () =&gt;
  &lt;div&gt;PetDetailPage component&lt;/div&gt; // Temporary so it builds
;

export default PetDetailPage;</code></pre>
<p>Here’s some analysis.</p>
<h3 id="the-import-statement">The import statement</h3>
<p>You will notice that the top of the file imports the <code>React</code> object, but you do not use it anywhere in the file! You have to do this because, remember, each JSX element, like <code>&lt;header&gt;...&lt;/header&gt;</code>, ends up getting translated to <code>React.createElement</code> calls. Without the <code>import</code> statement, the <code>React</code> object would not exist and compiling would fail.</p>
<h3 id="the-component">The component</h3>
<p>The <code>const PetDetailPage = () =&gt; ...</code> is just a normal arrow function.</p>
<p>The body of the component is a JSX expression <code>&lt;div&gt;&lt;/div&gt;</code> which Babel will translate into an invocation of <code>React.createElement</code>. Here’s what it looks like after passing through Babel.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb58-1" title="1"><span class="kw">var</span> PetDetailPage <span class="op">=</span> <span class="kw">function</span> <span class="at">PetDetailPage</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb58-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;div&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&quot;PetDetailPage component&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb58-3" title="3"><span class="op">}</span> <span class="co">// Temporary so it builds</span></a>
<a class="sourceLine" id="cb58-4" title="4"><span class="op">;</span></a></code></pre></div>
<h3 id="the-export-statement">The export statement</h3>
<p>This is just so you can import it into other components for use, which you will do now.</p>
<h2 id="using-the-pet-detail-page-component">Using the pet detail page component</h2>
<p>Open up <strong>src/App.js</strong>. Import the newly-created <code>PetDetailPage</code> component. Remember that this is Webpack that’s doing this for you, so you <em>do not</em> need to put the <strong>.js</strong> extension on the name of the module that you import.</p>
<p>Replace the <code>&lt;h1&gt;Hello&lt;/h1&gt;</code> with <code>&lt;PetDetailPage&gt;&lt;/PetDetailPage&gt;</code>. Save all of your files. You should now see this content in your browser and <em>Components</em> tab.</p>
<figure>
<img src="images/create-react-app-with-default-pet-detail-page.png" alt="Petrack with default PetDetailPage" /><figcaption>Petrack with default PetDetailPage</figcaption>
</figure>
<p>The content of the <strong>src/App.js</strong> should look similar to this.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import PetDetailPage from &#39;./PetDetailPage&#39;;

function App() {
  return (
    &lt;PetDetailPage&gt;&lt;/PetDetailPage&gt;
  );
}

export default App;</code></pre>
<p>Since <code>PetDetailPage</code> has no child content, you could also write that code like this, with the ending slash.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import PetDetailPage from &#39;./PetDetailPage&#39;;

function App() {
  return (
    &lt;PetDetailPage /&gt;
  );
}

export default App;</code></pre>
<h2 id="the-navigation-component-1">The navigation component</h2>
<p>Create a new file named <strong>Navigation.js</strong> in the <strong>src</strong> directory of your application. Put this content in there. Please type it rather than copy and paste it.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const Navigation = () =&gt;
  &lt;header&gt;
    &lt;h1&gt;Petrack&lt;/h1&gt;
    &lt;nav&gt;
      &lt;ul&gt;
        &lt;li&gt;
          &lt;a href=&quot;/pets&quot;&gt;Pets&lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
          &lt;a href=&quot;/owners&quot;&gt;Owners&lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  &lt;/header&gt;
;

export default Navigation;</code></pre>
<p>All of the JSX, the html-looking tags, those get converted into the calls to <code>React.createElement</code>. When Babel gets done with it, it looks like this, which is just an ugly version of one call to <code>React.createElement</code> for each of the elements in the JSX.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb62-1" title="1"><span class="kw">var</span> Navigation <span class="op">=</span> <span class="kw">function</span> <span class="at">Navigation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb62-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;header&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;h1&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&quot;Petrack&quot;</span>)<span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;nav&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;ul&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;li&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb62-3" title="3">    <span class="dt">href</span><span class="op">:</span> <span class="st">&quot;/pets&quot;</span></a>
<a class="sourceLine" id="cb62-4" title="4">  <span class="op">},</span> <span class="st">&quot;Pets&quot;</span>))<span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;li&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb62-5" title="5">    <span class="dt">href</span><span class="op">:</span> <span class="st">&quot;/owners&quot;</span></a>
<a class="sourceLine" id="cb62-6" title="6">  <span class="op">},</span> <span class="st">&quot;Owners&quot;</span>)))))<span class="op">;</span></a>
<a class="sourceLine" id="cb62-7" title="7"><span class="op">};</span></a></code></pre></div>
<h2 id="using-the-navigation-component">Using the navigation component</h2>
<p>Back in the <strong>src/PetDetailPage.js</strong> file, import the <code>Navigation</code> component and replace the <code>&lt;div&gt;PetDetailPage component&lt;/div&gt;</code> with the <code>Navigation</code> component much like you did in the <code>App</code> component with <code>PetDetailPage</code>.</p>
<p>Once you save your files, you should see the navigation.</p>
<figure>
<img src="images/react-pet-detail-page-nav-complete.png" alt="PetDetailPage navigation complete" /><figcaption>PetDetailPage navigation complete</figcaption>
</figure>
<h2 id="what-just-happened">What just happened?</h2>
<p>You created two new components and added them to the <strong>src</strong> directory. You imported them so that other components could use them. It was fast and easy and (hopefully) painless. JSX is lovely to work with, far easier than the calls to <code>React.createElement</code> if that didn’t exist.</p>
<hr />
<p>You will now work on creating the PetTrack page.</p>
<ul>
<li><code>PetDetailPage</code>: Created in this step</li>
<li><code>Navigation</code>: Created in this step</li>
<li><code>PetDetails</code></li>
<li><code>PetDetailList</code></li>
<li><code>PetInformationItem</code></li>
<li><code>OwnersList</code></li>
<li><code>OwnerLink</code></li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<h2 id="the-strategy-1">The strategy</h2>
<p>This guide will work top-down, in that it will start with the top-most (or outer-most) component, the <code>PetDetailPage</code> component. Then, it will move to a next level component, like <code>Navigation</code>. It will just keep adding components and getting them to work with the data from the AJAX call.</p>
<h2 id="the-pet-detail-page-component-1">The pet detail page component</h2>
<p>The <code>PetDetailPage</code> component will be responsible for showing the navigation component, the details list component, and the owners list component. None of those exist, yet, so just stub out a new component to hold the source.</p>
<p>Create a new file named <strong>PetDetailPage.js</strong> in the <strong>src</strong> directory. In that file, type this content into it.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const PetDetailPage = () =&gt;
  &lt;div&gt;PetDetailPage component&lt;/div&gt; // Temporary so it builds
;

export default PetDetailPage;</code></pre>
<p>Here’s some analysis.</p>
<h3 id="the-import-statement-1">The import statement</h3>
<p>You will notice that the top of the file imports the <code>React</code> object, but you do not use it anywhere in the file! You have to do this because, remember, each JSX element, like <code>&lt;header&gt;...&lt;/header&gt;</code>, ends up getting translated to <code>React.createElement</code> calls. Without the <code>import</code> statement, the <code>React</code> object would not exist and compiling would fail.</p>
<h3 id="the-component-1">The component</h3>
<p>The <code>const PetDetailPage = () =&gt; ...</code> is just a normal arrow function.</p>
<p>The body of the component is a JSX expression <code>&lt;div&gt;&lt;/div&gt;</code> which Babel will translate into an invocation of <code>React.createElement</code>. Here’s what it looks like after passing through Babel.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb64-1" title="1"><span class="kw">var</span> PetDetailPage <span class="op">=</span> <span class="kw">function</span> <span class="at">PetDetailPage</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb64-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;div&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&quot;PetDetailPage component&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb64-3" title="3"><span class="op">}</span> <span class="co">// Temporary so it builds</span></a>
<a class="sourceLine" id="cb64-4" title="4"><span class="op">;</span></a></code></pre></div>
<h3 id="the-export-statement-1">The export statement</h3>
<p>This is just so you can import it into other components for use, which you will do now.</p>
<h2 id="using-the-pet-detail-page-component-1">Using the pet detail page component</h2>
<p>Open up <strong>src/App.js</strong>. Import the newly-created <code>PetDetailPage</code> component. Remember that this is Webpack that’s doing this for you, so you <em>do not</em> need to put the <strong>.js</strong> extension on the name of the module that you import.</p>
<p>Replace the <code>&lt;h1&gt;Hello&lt;/h1&gt;</code> with <code>&lt;PetDetailPage&gt;&lt;/PetDetailPage&gt;</code>. Save all of your files. You should now see this content in your browser and <em>Components</em> tab.</p>
<figure>
<img src="images/create-react-app-with-default-pet-detail-page.png" alt="Petrack with default PetDetailPage" /><figcaption>Petrack with default PetDetailPage</figcaption>
</figure>
<p>The content of the <strong>src/App.js</strong> should look similar to this.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import PetDetailPage from &#39;./PetDetailPage&#39;;

function App() {
  return (
    &lt;PetDetailPage&gt;&lt;/PetDetailPage&gt;
  );
}

export default App;</code></pre>
<p>Since <code>PetDetailPage</code> has no child content, you could also write that code like this, with the ending slash.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import PetDetailPage from &#39;./PetDetailPage&#39;;

function App() {
  return (
    &lt;PetDetailPage /&gt;
  );
}

export default App;</code></pre>
<h2 id="the-navigation-component-2">The navigation component</h2>
<p>Create a new file named <strong>Navigation.js</strong> in the <strong>src</strong> directory of your application. Put this content in there. Please type it rather than copy and paste it.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const Navigation = () =&gt;
  &lt;header&gt;
    &lt;h1&gt;Petrack&lt;/h1&gt;
    &lt;nav&gt;
      &lt;ul&gt;
        &lt;li&gt;
          &lt;a href=&quot;/pets&quot;&gt;Pets&lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
          &lt;a href=&quot;/owners&quot;&gt;Owners&lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  &lt;/header&gt;
;

export default Navigation;</code></pre>
<p>All of the JSX, the html-looking tags, those get converted into the calls to <code>React.createElement</code>. When Babel gets done with it, it looks like this, which is just an ugly version of one call to <code>React.createElement</code> for each of the elements in the JSX.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb68-1" title="1"><span class="kw">var</span> Navigation <span class="op">=</span> <span class="kw">function</span> <span class="at">Navigation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb68-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;header&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;h1&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&quot;Petrack&quot;</span>)<span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;nav&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;ul&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;li&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb68-3" title="3">    <span class="dt">href</span><span class="op">:</span> <span class="st">&quot;/pets&quot;</span></a>
<a class="sourceLine" id="cb68-4" title="4">  <span class="op">},</span> <span class="st">&quot;Pets&quot;</span>))<span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;li&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb68-5" title="5">    <span class="dt">href</span><span class="op">:</span> <span class="st">&quot;/owners&quot;</span></a>
<a class="sourceLine" id="cb68-6" title="6">  <span class="op">},</span> <span class="st">&quot;Owners&quot;</span>)))))<span class="op">;</span></a>
<a class="sourceLine" id="cb68-7" title="7"><span class="op">};</span></a></code></pre></div>
<h2 id="using-the-navigation-component-1">Using the navigation component</h2>
<p>Back in the <strong>src/PetDetailPage.js</strong> file, import the <code>Navigation</code> component and replace the <code>&lt;div&gt;PetDetailPage component&lt;/div&gt;</code> with the <code>Navigation</code> component much like you did in the <code>App</code> component with <code>PetDetailPage</code>.</p>
<p>Once you save your files, you should see the navigation.</p>
<figure>
<img src="images/react-pet-detail-page-nav-complete.png" alt="PetDetailPage navigation complete" /><figcaption>PetDetailPage navigation complete</figcaption>
</figure>
<h2 id="what-just-happened-1">What just happened?</h2>
<p>You created two new components and added them to the <strong>src</strong> directory. You imported them so that other components could use them. It was fast and easy and (hopefully) painless. JSX is lovely to work with, far easier than the calls to <code>React.createElement</code> if that didn’t exist.</p>
<hr />
<h1 id="jsx-walk-through-pet-details-part-1">JSX Walk-Through: Pet Details, Part 1</h1>
<p>You will now start adding data rendering to the page with the components created and modified in this step.</p>
<ul>
<li><code>PetDetailPage</code>: Modified in this step</li>
<li><code>Navigation</code>: Done</li>
<li><code>PetDetails</code>: Created in this step</li>
<li><code>PetDetailList</code>: Created in this step</li>
<li><code>PetInformationItem</code>: Created in this step</li>
<li><code>OwnersList</code></li>
<li><code>OwnerLink</code></li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<h2 id="getting-some-data">Getting some data</h2>
<p>Open the <strong>src/index.js</strong> file. In it, after the call to <code>ReactDOM.render</code>, create a fetch call for the RESTful endpoint https://polar-beach-08187.herokuapp.com/api/pets/2. (You can click on the link to see the data. That’s “Mog”, the cat. She is forgetful.) Do all of the normal stuff that you would do with <code>async</code> functions and what not.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb69-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb69-2" title="2">  <span class="kw">const</span> url <span class="op">=</span> <span class="st">&#39;https://polar-beach-08187.herokuapp.com/api/pets/2&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb69-3" title="3">  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb69-4" title="4">  <span class="cf">if</span> (<span class="va">response</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb69-5" title="5">    <span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb69-6" title="6">    <span class="va">console</span>.<span class="at">log</span>(pet)<span class="op">;</span></a>
<a class="sourceLine" id="cb69-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb69-8" title="8"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<figure>
<img src="images/react-mog-data-pull.png" alt="Petrack Mog data fetch" /><figcaption>Petrack Mog data fetch</figcaption>
</figure>
<p>Now, to pass that data into your React components, you will pass it as a property. You have to pass it on the element getting rendered. React is all about rendering things. You can just call another render from inside your <code>async</code> function. But, this time, you will pass the pet data in as an attribute of the <code>App</code> component with curly braces to indicate to JSX that it is a data value and not a string.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb70-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb70-2" title="2">  <span class="kw">const</span> url <span class="op">=</span> <span class="st">&#39;https://polar-beach-08187.herokuapp.com/api/pets/2&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb70-3" title="3">  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb70-4" title="4">  <span class="cf">if</span> (<span class="va">response</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb70-5" title="5">    <span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb70-6" title="6">    <span class="va">console</span>.<span class="at">log</span>(pet)<span class="op">;</span></a>
<a class="sourceLine" id="cb70-7" title="7"></a>
<a class="sourceLine" id="cb70-8" title="8">    <span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb70-9" title="9">      <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb70-10" title="10">        <span class="op">&lt;</span>App pet<span class="op">={</span>pet<span class="op">}</span> /&gt;   <span class="op">{</span><span class="co">/* Now, with data */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb70-11" title="11">      &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb70-12" title="12">      <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb70-13" title="13">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb70-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb70-15" title="15"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>This has changed everything! You don’t see it, yet, but once the AJAX call completes, go look at the <em>Components</em> tab of your DevTools. Click on the <code>App</code> component and look at the values in the right pane. React now knows about the data that you passed in!</p>
<p>Now, you need to pass that to the <code>PetDetailPage</code> component. In the <strong>src/App.js</strong> file, change the function’s parameter list to have a single parameter named “props”. Then, pass the value of <code>props.pet</code> into the pet attribute of the <code>PetDetailPage</code> component, similar to what you did in <strong>src/index.js</strong> for the <code>App</code> component. You should be able to see the props in the <em>Components</em> tab for both the <code>App</code> and <code>PetDetailPage</code> components.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/create-react-app-passing-data-into-pet-detail-page.gif" alt="Data passed down to PetDetailPage" /><figcaption>Data passed down to PetDetailPage</figcaption>
</figure>
<p>You will use that data to pass down into the detail components that you will now create.</p>
<h2 id="the-pet-details-component">The pet details component</h2>
<p><strong>Note</strong>: This section introduces an error that you will fix. It is a common error, so knowing how to fix it when you see it is good information to have.</p>
<p>The <code>PetDetails</code> component is in charge of rendering the <code>PetDetailList</code> and the <code>OwnersList</code> components. For now, get a new component working.</p>
<p>Create a new file named <strong>src/PetDetails.js</strong>. Import the <code>React</code> object. Create a function-based <code>PetDetails</code> component that has a <code>props</code> parameter, and have it render an empty <code>div</code>. Export the component as the default export for the module.</p>
<p>In the <strong>PetDetailPage.js</strong> file, import the new <code>PetDetails</code> component. Change the <code>PetDetailPage</code> component to accept a <code>props</code> parameter rather then an empty parameter list. Then, use the <code>PetDetails</code> component in the body of the <code>PetDetailPage</code> as a sibling to the <code>Navigation</code> component. You need to pass the pet data into it. Your code should look like this. (You may have empty tags rather than the self-closing slash tags. That’s fine.)</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import Navigation from &#39;./Navigation&#39;;
import PetDetails from &#39;./PetDetails&#39;;

const PetDetailPage = props =&gt;
  &lt;Navigation /&gt;
  &lt;PetDetails pet={props.pet} /&gt;
;

export default PetDetailPage;</code></pre>
<p>Save all of your files. Look at your browser. There is an error.</p>
<figure>
<img src="images/create-react-app-pet-detail-page-without-single-root-error.png" alt="PetDetailPage with adjacent element error" /><figcaption>PetDetailPage with adjacent element error</figcaption>
</figure>
<p>This happens because components <em>must</em> have a single top-level element. You can see that <code>PetDetailPage</code> now has two because both <code>Navigation</code> and <code>PetDetails</code> are at the top level.</p>
<p>To solve this, you need the two elements in a single element. You could do that with a <code>div</code>, for example.</p>
<pre class="jsx"><code>const PetDetailPage = props =&gt;
  &lt;div&gt;
    &lt;Navigation /&gt;
    &lt;PetDetails pet={props.pet} /&gt;
  &lt;/div&gt;
;</code></pre>
<p>This is fine, except for when you don’t want to introduce extra tags for no reason in your HTML. That is why, in React 16, the developers introduced the idea of a <code>Fragment</code>. The <code>Fragment</code> is a special placeholder that groups together JSX elements in the virtual DOM, but does not creating any tags in the real DOM. You can wrap those two elements (or any number of elements) in a <code>React.Fragment</code> JSX element like this.</p>
<pre class="jsx"><code>const PetDetailPage = props =&gt;
  &lt;React.Fragment&gt;
    &lt;Navigation /&gt;
    &lt;PetDetails pet={props.pet} /&gt;
  &lt;/React.Fragment&gt;
;</code></pre>
<p>If you do that and save the file, the compile error goes away and you see the content as it should be.</p>
<p>Wrapping things in <code>Fragment</code> elements like that is such a common thing, that there is a shortcut syntax for it. Since the <code>Fragment</code> does not represent any real tag, you write it like an HTML tag that <em>has no name</em>.</p>
<pre class="jsx"><code>const PetDetailPage = props =&gt;
  &lt;&gt;
    &lt;Navigation /&gt;
    &lt;PetDetails pet={props.pet} /&gt;
  &lt;/&gt;
;</code></pre>
<p>It’s pretty weird. But, it’s a very <em>React</em> way of doing things.</p>
<h2 id="create-the-pet-detail-list-component">Create the pet detail list component</h2>
<p>Here’s some code for you that you can use for your <code>PetDetailList</code> component. Create a file named <strong>src/PetDetailList.js</strong> and put it in there. Feel free to copy and paste it so that you can get on to the neat-o data stuff.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const PetDetailList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Details&lt;/h2&gt;
    &lt;dl&gt;

    &lt;/dl&gt;
  &lt;/&gt;
;

export default PetDetailList;</code></pre>
<p>Back in <strong>PetDetails.js</strong>, import this new <code>PetDetailList</code> component, and replace the empty <code>div</code> with it.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb76-1" title="1"><span class="co">// Add the import line</span></a>
<a class="sourceLine" id="cb76-2" title="2"><span class="im">import</span> PetDetailList <span class="im">from</span> <span class="st">&#39;./PetDetailList.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb76-3" title="3"></a>
<a class="sourceLine" id="cb76-4" title="4"><span class="kw">const</span> PetDetails <span class="op">=</span> props <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb76-5" title="5">  <span class="op">&lt;</span>PetDetailList pet<span class="op">={</span><span class="va">props</span>.<span class="at">pet</span><span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb76-6" title="6"><span class="op">;</span></a>
<a class="sourceLine" id="cb76-7" title="7"></a>
<a class="sourceLine" id="cb76-8" title="8"><span class="im">export</span> <span class="im">default</span> PetDetails<span class="op">;</span></a></code></pre></div>
<p>Refresh your page. You should now see the <code>PetDetailList</code> in the <em>Components</em> tab. It’s props should have all of data for the pet on it. You should also see the “Details” headline in the rendered HTML, too.</p>
<p>The next step is to create the <code>PetInformationItem</code> component to fill out that <code>dl</code> just yearning for content in the <code>PetDetailList</code> component.</p>
<h2 id="the-pet-information-item-component-1">The pet information item component</h2>
<p><strong>Note</strong>: The following steps will introduce an error that you will fix. This is so you can get a feel for what kind of errors you will see when working with React.</p>
<p><strong>Mira’s Note</strong>: The following will not actually introduce an error for the reason provided, because there is no missing pass-down of props in the chain of nested components if you follow the instructions. The error described after it, however, will show.</p>
<p>Create a new file, <strong>src/PetInformationItem.js</strong>. It will contain a function-based component that needs data to render, so stub out the function with the “props” parameter. Don’t forget to import the React. Then, it needs to render two elements, the <code>dt</code> element and the <code>dd</code> element. Do that by wrapping a fragment around them.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb77-1" title="1"><span class="kw">&lt;dt&gt;</span>Name of property<span class="kw">&lt;/dt&gt;</span></a>
<a class="sourceLine" id="cb77-2" title="2"><span class="kw">&lt;dd&gt;</span>Value of property<span class="kw">&lt;/dd&gt;</span></a></code></pre></div>
<p>So, the code will look something like this.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const PetInformationItem = props =&gt;
  &lt;&gt;
    &lt;dt&gt;{props.name}&lt;/dt&gt;
    {/* Replace this with the dd element and value */}
  &lt;/&gt;
;

export default PetInformationItem;</code></pre>
<p>Replace the comment with a <code>dd</code> JSX element that has <code>props.value</code> as its content, similar to how the <code>dt</code> has <code>props.name</code> as its content.</p>
<p>That implies an expectation that this component <em>needs</em> a property named “name” that will be used to render the <code>dt</code> element, and it <em>needs</em> a property named “value” to render the <code>dd</code> element.</p>
<p>Once you have that done, it’s time to use it in the <code>PetDetailList</code> components. Go back to <strong>src/PetDetailList.js</strong>. Import the <code>PetInformationItem</code> component. You will use it three times, to show the name, age, and pet type of the pet. Here’s the first one. Just put it in there and save it because you have to investigate an error.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb79-1" title="1"><span class="kw">const</span> PetDetailList <span class="op">=</span> props <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb79-2" title="2">  <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb79-3" title="3">    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Details&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb79-4" title="4">    <span class="op">&lt;</span>dl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb79-5" title="5">      <span class="op">&lt;</span>PetInformationItem name<span class="op">=</span><span class="st">&quot;Name&quot;</span> value<span class="op">={</span><span class="va">props</span>.<span class="va">pet</span>.<span class="at">name</span><span class="op">}</span>/&gt;</a>
<a class="sourceLine" id="cb79-6" title="6">    &lt;/dl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb79-7" title="7">  &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb79-8" title="8"><span class="op">;</span></a></code></pre></div>
<p>This shows that <code>PetDetailList</code> now has an expectation that <code>props</code> will have a “name” property, an “age” property, and a “PetType” property that will have a “type” property on it! That’s a lot of expectations…</p>
<p>If you refresh your page, an error might occur.</p>
<figure>
<img src="images/create-react-app-with-property-error.png" alt="Petrack PetDetails with error" /><figcaption>Petrack PetDetails with error</figcaption>
</figure>
<p>The <em>Create React App</em> reports the error for you in the browser’s main window. This is nice so that you don’t have to go mucking about the console to try to determine what went wrong.</p>
<p>In the above screen shot, it complains that it cannot get the “property ‘name’ of undefined”. If you get this error, make sure you are passing down the <code>pet</code> prop from the <code>App</code> component all the way down to the <code>PetDetailList</code> component. You can see all the props for each component in the Chrome dev tools Component tab.</p>
<p>The following conditions trigger that same error but for a different reason.</p>
<p>In the <code>src/index.js</code> file, you render <code>App</code> twice. Once before the fetch call, and once after the fetch response comes back. <strong>NOTE: This is NOT the normal way to render the App after a fetch call. You will be learning a better way to use fetch calls with React tomorrow.</strong></p>
<p>Your <code>src/index.js</code> should now look like this:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb80-1" title="1"><span class="co">// ... imports</span></a>
<a class="sourceLine" id="cb80-2" title="2"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb80-3" title="3">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb80-4" title="4">    <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb80-5" title="5">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb80-6" title="6">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb80-7" title="7">)<span class="op">;</span></a>
<a class="sourceLine" id="cb80-8" title="8"></a>
<a class="sourceLine" id="cb80-9" title="9">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb80-10" title="10">  <span class="kw">const</span> url <span class="op">=</span> <span class="st">&#39;https://polar-beach-08187.herokuapp.com/api/pets/2&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb80-11" title="11">  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb80-12" title="12">  <span class="cf">if</span> (<span class="va">response</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb80-13" title="13">    <span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb80-14" title="14">    <span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb80-15" title="15">      <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb80-16" title="16">        <span class="op">&lt;</span>App pet<span class="op">={</span>pet<span class="op">}</span> /&gt;   <span class="op">{</span><span class="co">/* Now, with data */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb80-17" title="17">      &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb80-18" title="18">      <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb80-19" title="19">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb80-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb80-21" title="21"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>If you refresh your page, you should see the following error.</p>
<figure>
<img src="images/create-react-app-with-property-error.png" alt="Petrack PetDetails with error" /><figcaption>Petrack PetDetails with error</figcaption>
</figure>
<p>Can you see where that’s happening in the <strong>PetDetailList.js</strong> file? Take a moment to figure out where the error is being thrown.</p>
<p>If you identified the expression <code>props.pet.name</code>, then you got it! Remember that when the React first renders the virtual DOM, it has <em>no data</em>. That doesn’t come until later, after the AJAX call completes. There are <em>so many</em> ways to fix this but <strong>only one</strong> is idiomatic React. That is the use of <code>defaultProps</code>.</p>
<p>Recall that the <code>PetDetailList</code> component has an expectation that the <code>props</code> value should have a “pet” property that is an object. You can specify a default value for the “pet” property for the <code>PetDetails</code> component by putting the following code <em>after</em> the function declaration.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb81-1" title="1"><span class="va">PetDetailList</span>.<span class="at">defaultProps</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb81-2" title="2">  <span class="dt">pet</span><span class="op">:</span> <span class="op">{},</span></a>
<a class="sourceLine" id="cb81-3" title="3"><span class="op">};</span></a></code></pre></div>
<p>This tells React that, when the <code>PetDetailList</code> renders, if the “pet” property of <code>props</code> is undefined, then it should use the default value specified in the assignment. This is a built-in React feature and fixes the problem.</p>
<p>Refresh the page. You should now see the page render and, when the AJAX call completes, the name “Mog” to appear.</p>
<p>Now, add the other two <code>PetInformationItem</code> calls. One should have the name “Age” and the value of <code>props.pet.age</code>. The second should have the name “Type” and the value of <code>props.pet.PetType.type</code>. That will cause another error, so take care of it in the <code>defaultProps</code>.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-information-data-load.gif" alt="Petrack PetDetails before and after load" /><figcaption>Petrack PetDetails before and after load</figcaption>
</figure>
<p>If it’s hard to see the before load, comment out the async function in the <code>src/index.js</code> to see what the page looks like before the fetch call is made.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb82-1" title="1"><span class="co">// ... src/index.js</span></a>
<a class="sourceLine" id="cb82-2" title="2"></a>
<a class="sourceLine" id="cb82-3" title="3"><span class="co">// (async () =&gt; {</span></a>
<a class="sourceLine" id="cb82-4" title="4"><span class="co">//   const url = &#39;https://polar-beach-08187.herokuapp.com/api/pets/2&#39;;</span></a>
<a class="sourceLine" id="cb82-5" title="5"><span class="co">//   const response = await fetch(url);</span></a>
<a class="sourceLine" id="cb82-6" title="6"><span class="co">//   if (response.ok) {</span></a>
<a class="sourceLine" id="cb82-7" title="7"><span class="co">//     const pet = await response.json();</span></a>
<a class="sourceLine" id="cb82-8" title="8"><span class="co">//     ReactDOM.render(</span></a>
<a class="sourceLine" id="cb82-9" title="9"><span class="co">//       &lt;React.StrictMode&gt;</span></a>
<a class="sourceLine" id="cb82-10" title="10"><span class="co">//         &lt;App pet={pet} /&gt;   {/* Now, with data */}</span></a>
<a class="sourceLine" id="cb82-11" title="11"><span class="co">//       &lt;/React.StrictMode&gt;,</span></a>
<a class="sourceLine" id="cb82-12" title="12"><span class="co">//       document.getElementById(&#39;root&#39;)</span></a>
<a class="sourceLine" id="cb82-13" title="13"><span class="co">//     );</span></a>
<a class="sourceLine" id="cb82-14" title="14"><span class="co">//   }</span></a>
<a class="sourceLine" id="cb82-15" title="15"><span class="co">// })();</span></a></code></pre></div>
<p>If you want that yucky bumpy load to not happen, consider creating a default value for the “value” property in <code>PetInformationItem</code>. In the following screenshot, you can see what happens when you set a default value of “loading…” for the “value” property in <code>PetInformationItem</code>.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-information-with-loading-message-data-load.gif" alt="Petrack PetDetails with loading message" /><figcaption>Petrack PetDetails with loading message</figcaption>
</figure>
<h2 id="what-youve-seen-1">What you’ve seen</h2>
<p>In this part of building a React application, you have</p>
<ul>
<li>Passed data from an AJAX call (or really wherever) into a React component</li>
<li>Accessed data using the conventionally-named <code>props</code> parameter in your function-based components</li>
<li>Passed data from a “parent” component to a “child” component</li>
<li>Used default values to prevent errors and improve the aesthetic experience of using your application</li>
</ul>
<p>Just one more step and you’re done!</p>
<hr />
<h1 id="jsx-walk-through-pet-details-part-2">JSX Walk-Through: Pet Details, Part 2</h1>
<p>All you have left is to create a list of owners with links.</p>
<ul>
<li><code>PetDetailPage</code>: Done</li>
<li><code>Navigation</code>: Done</li>
<li><code>PetDetails</code>: Modified in this step</li>
<li><code>PetDetailList</code>: Done</li>
<li><code>PetInformationItem</code>: Done</li>
<li><code>OwnersList</code>: Created in this step</li>
<li><code>OwnerLink</code>Created in this step</li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<p>You’re almost done. Now, you get to handle a collection of data from the owners.</p>
<h2 id="stub-out-the-owners-list-component">Stub out the owners list component</h2>
<p>You’ve done this four other times, so it’s pretty straight forward.</p>
<ul>
<li>Create the <strong>src/OwnersList.js</strong> file. In it,
<ul>
<li>Import the React object</li>
<li>Create the function-based component named <code>OwnersList</code> with a <code>props</code> argument that uses a <code>React.Fragment</code> as its element</li>
<li>Add a child that is an ‘h2’ with the content “Owners”</li>
<li>Using <code>defaultProps</code>, add a default property value for “owners” and set it to an empty array because this component will expect an array of owner data</li>
<li>Export the <code>OwnersList</code> as the default export</li>
</ul></li>
<li>In the <strong>PetDetails.js</strong> file,
<ul>
<li>Import the <code>OwnersList</code> component</li>
<li>Add it as another child element of the <code>PetDetailPage</code> component after the <code>PetDetailList</code></li>
<li>Wrap both the <code>PetDetailList</code> and <code>OwnersList</code> in a <code>Fragment</code>.</li>
<li>Pass in the owners to the <code>OwnersList</code> component in a property named “owners” like this <code>{props.pet.Owners}</code> which will pass in the array of owners for the pet</li>
<li>Fix the error with a default value for the “pet” property</li>
</ul></li>
</ul>
<pre class="jsx"><code>// src/PetDetails.js
import React from &#39;react&#39;;

import OwnersList from &#39;./OwnersList&#39;;
import PetDetailList from &#39;./PetDetailList&#39;;

const PetDetails = props =&gt;
  &lt;&gt;
    &lt;PetDetailList pet={props.pet} /&gt;
    &lt;OwnersList owners={props.pet.Owners} /&gt;
  &lt;/&gt;
;

PetDetails.defaultProps = {
  pet: {
    PetType: {},
  },
};

export default PetDetails;</code></pre>
<p>Refresh the page and make sure everything still works.</p>
<figure>
<img src="images/react-pet-detail-with-owners-headline.png" alt="Petrack with owners headline" /><figcaption>Petrack with owners headline</figcaption>
</figure>
<h2 id="dealing-with-the-list">Dealing with the list</h2>
<p><strong>Note</strong>: This section introduces an error that you will fix. It is a common error about how to create React elements from lists. You may see it often. This way, you will know how to fix it, too.</p>
<p>Back in <strong>OwnersList.js</strong>, you want a <code>ul</code> to follow the <code>h2</code>.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb84-1" title="1"><span class="kw">const</span> OwnersList <span class="op">=</span> props <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb84-2" title="2">  <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb84-3" title="3">    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Owners&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb84-4" title="4">    <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb84-5" title="5">      <span class="op">{</span><span class="co">/* Create li elements here */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb84-6" title="6">    &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb84-7" title="7">  &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb84-8" title="8"><span class="op">;</span></a></code></pre></div>
<p>Here’s the thing. You have an array of owners. You want to turn them into some list items. For each owner, you want to <em>map</em> that to a list item. And, therein lies the hint. Since the value in <code>props.owners</code> is an array, you can use the <code>map</code> function to generate another array of React elements and plop them in there! Give it a go with this code. Replace the comment about where list items go above with this line of code.</p>
<pre class="jsx"><code>{ props.owners.map(owner =&gt;
  &lt;li&gt;{owner.firstName}&lt;/li&gt;
)}</code></pre>
<p>Refresh the page. What happens? You should now see “Human” for each of the list items. That’s great! In the console, there’s an error. That’s sad!</p>
<figure>
<img src="images/react-pet-detail-owners-list-with-key-error.png" alt="Petrack with owners list and key error" /><figcaption>Petrack with owners list and key error</figcaption>
</figure>
<p>In this last step, you’ve changed the way you’re passing children into the <code>React.createElement</code>. Up until now, you’ve had discrete single elements as children, like in <strong>PetDetailList.js</strong> where you have this code.</p>
<pre class="jsx"><code>const PetDetailList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Details&lt;/h2&gt;
    &lt;dl&gt;
      &lt;PetInformationItem name=&quot;Name&quot; value={props.pet.name}/&gt;
      &lt;PetInformationItem name=&quot;Age&quot; value={props.pet.age}/&gt;
      &lt;PetInformationItem name=&quot;Type&quot; value={props.pet.PetType.type}/&gt;
    &lt;/dl&gt;
  &lt;/&gt;
;</code></pre>
<p>Each of <code>PetInformationItem</code> elements is a different, discrete, and separate child for the <code>dl</code> element.</p>
<p>The code in <strong>OwnersList.js</strong>, this code,</p>
<pre class="jsx"><code>const OwnersList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Owners&lt;/h2&gt;
    &lt;ul&gt;
      {props.owners.map(owner =&gt;
        &lt;li&gt;{owner.firstName}&lt;/li&gt;
      )}
    &lt;/ul&gt;
  &lt;/&gt;
;</code></pre>
<p>in that, you have created an <em>array</em> of objects. Recall that when you call the <code>map</code> function on an array, it returns <em>another array</em>. React doesn’t care about this, but it would like a little help in tracking each of those entries in the virtual DOM that it builds. That’s what the error message is about, giving React a little help by providing a “key” property for each of the elements that you’re creating in the array. The value of the “key” property must be unique and stable, that is, for a given object (like an owner named “Human One” with an id of 7), the value returned must always be the same. Luckily, because you have the id of the owner, you can use that because that id value is tied to a primary key, somewhere, and should never change for this object. The name can change, of course. But, the id will likely never change.</p>
<p>Add a “key” property to the <code>li</code> element and set it equal to the id of the owner object, like this.</p>
<pre class="jsx"><code>&lt;li key={owner.id}&gt;{owner.firstName}&lt;/li&gt;</code></pre>
<p>Now, the error in the console goes away.</p>
<p>Back to the <code>OwnersList</code> component, look at the formatting, the indentation that you see in the code.</p>
<pre class="jsx"><code>const OwnersList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Owners&lt;/h2&gt;
    &lt;ul&gt;
      {props.owners.map(owner =&gt;
        &lt;li key={owner.id}&gt;
          {owner.firstName}
        &lt;/li&gt;
      )}
    &lt;/ul&gt;
  &lt;/&gt;
;</code></pre>
<p>That, too, is idiomatic React, the <em>React</em> way of doing things. You’ll see that kind of code all over the React world.</p>
<h2 id="the-owner-link-component-1">The owner link component</h2>
<p>While it’s nice, and all, to see the owner’s first name in the list, the actual page has a link to the owner page with the format “last name, first name”. Time to create the (last!) component of this walk-through.</p>
<p>Create a new file named <strong>src/OwnerLink.js</strong>. In it, do the following:</p>
<ul>
<li>Import the React object</li>
<li>Create a new function-based component named <code>OwnerLink</code> that accepts data that has
<ul>
<li><code>a</code> as its element</li>
<li>An object literal with the property name “href” and the value of the “href” property passed in through the <code>props</code></li>
<li>A string as its child which contains the last name and the first name</li>
</ul></li>
<li>Export the component as the default export</li>
</ul>
<p>Once you have that, import the <code>OwnerLink</code> component into the <strong>src/OwnersList.js</strong> file. Now, replace this line in <code>OwnersList</code></p>
<pre class="jsx"><code>{owner.firstName}</code></pre>
<p>with an <code>OwnerLink</code> component with <em>three</em> attributes: “href”, “firstName”, and “lastName”. Those are the three properties expected inside the component. Use the curly brace syntax to pass in the appropriate values of the <code>owner</code>. This is something you haven’t done, yet. Try to think through the problem of how to pass in <em>multiple</em> property values. If you get stuck and can’t get it after about ten minutes, ask for help!</p>
<p>Refresh the page. If everything works, you’re done!</p>
<h2 id="what-youve-done-here">What you’ve done, here</h2>
<p>In this part of the walk-through, you used a collection to render a collection of React elements. You found out that using a collection like that requires you to provide a “key” property that has a stable, unique value. Once you had that, React would gladly manage that collection of objects in its virtual DOM.</p>
<h2 id="what-youve-done-overall">What you’ve done, overall</h2>
<p>You have used JSX to do some amazing things, here.</p>
<ul>
<li>You reinforced the best practice of putting one React component in its own file (module) and exporting it as the default value of the module</li>
<li>You learned that JSX compiles to <code>React.createElement</code></li>
<li>You learned that <code>&lt;&gt;</code> and <code>&lt;/&gt;</code> are shorthand literal for the often-used <code>React.Fragment</code> element</li>
<li>You used <code>defaultProps</code> to make sure that components always had some valid values to work with</li>
<li>You used <em>pure functional components</em> all the way through this, which means that none of the components used any other data than what was given to it</li>
<li>You are intimately familiar with how React creates its elements, now, which means there will be no magical thinking about JSX when you use it</li>
</ul>
<hr />
<p>All you have left is to create a list of owners with links.</p>
<ul>
<li><code>PetDetailPage</code>: Done</li>
<li><code>Navigation</code>: Done</li>
<li><code>PetDetails</code>: Modified in this step</li>
<li><code>PetDetailList</code>: Done</li>
<li><code>PetInformationItem</code>: Done</li>
<li><code>OwnersList</code>: Created in this step</li>
<li><code>OwnerLink</code>Created in this step</li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<p>You’re almost done. Now, you get to handle a collection of data from the owners.</p>
<h2 id="stub-out-the-owners-list-component-1">Stub out the owners list component</h2>
<p>You’ve done this four other times, so it’s pretty straight forward.</p>
<ul>
<li>Create the <strong>src/OwnersList.js</strong> file. In it,
<ul>
<li>Import the React object</li>
<li>Create the function-based component named <code>OwnersList</code> with a <code>props</code> argument that uses a <code>React.Fragment</code> as its element</li>
<li>Add a child that is an ‘h2’ with the content “Owners”</li>
<li>Using <code>defaultProps</code>, add a default property value for “owners” and set it to an empty array because this component will expect an array of owner data</li>
<li>Export the <code>OwnersList</code> as the default export</li>
</ul></li>
<li>In the <strong>PetDetails.js</strong> file,
<ul>
<li>Import the <code>OwnersList</code> component</li>
<li>Add it as another child element of the <code>PetDetailPage</code> component after the <code>PetDetailList</code></li>
<li>Wrap both the <code>PetDetailList</code> and <code>OwnersList</code> in a <code>Fragment</code>.</li>
<li>Pass in the owners to the <code>OwnersList</code> component in a property named “owners” like this <code>{props.pet.Owners}</code> which will pass in the array of owners for the pet</li>
<li>Fix the error with a default value for the “pet” property</li>
</ul></li>
</ul>
<pre class="jsx"><code>// src/PetDetails.js
import React from &#39;react&#39;;

import OwnersList from &#39;./OwnersList&#39;;
import PetDetailList from &#39;./PetDetailList&#39;;

const PetDetails = props =&gt;
  &lt;&gt;
    &lt;PetDetailList pet={props.pet} /&gt;
    &lt;OwnersList owners={props.pet.Owners} /&gt;
  &lt;/&gt;
;

PetDetails.defaultProps = {
  pet: {
    PetType: {},
  },
};

export default PetDetails;</code></pre>
<p>Refresh the page and make sure everything still works.</p>
<figure>
<img src="images/react-pet-detail-with-owners-headline.png" alt="Petrack with owners headline" /><figcaption>Petrack with owners headline</figcaption>
</figure>
<h2 id="dealing-with-the-list-1">Dealing with the list</h2>
<p><strong>Note</strong>: This section introduces an error that you will fix. It is a common error about how to create React elements from lists. You may see it often. This way, you will know how to fix it, too.</p>
<p>Back in <strong>OwnersList.js</strong>, you want a <code>ul</code> to follow the <code>h2</code>.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb92-1" title="1"><span class="kw">const</span> OwnersList <span class="op">=</span> props <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb92-2" title="2">  <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb92-3" title="3">    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Owners&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb92-4" title="4">    <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb92-5" title="5">      <span class="op">{</span><span class="co">/* Create li elements here */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb92-6" title="6">    &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb92-7" title="7">  &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb92-8" title="8"><span class="op">;</span></a></code></pre></div>
<p>Here’s the thing. You have an array of owners. You want to turn them into some list items. For each owner, you want to <em>map</em> that to a list item. And, therein lies the hint. Since the value in <code>props.owners</code> is an array, you can use the <code>map</code> function to generate another array of React elements and plop them in there! Give it a go with this code. Replace the comment about where list items go above with this line of code.</p>
<pre class="jsx"><code>{ props.owners.map(owner =&gt;
  &lt;li&gt;{owner.firstName}&lt;/li&gt;
)}</code></pre>
<p>Refresh the page. What happens? You should now see “Human” for each of the list items. That’s great! In the console, there’s an error. That’s sad!</p>
<figure>
<img src="images/react-pet-detail-owners-list-with-key-error.png" alt="Petrack with owners list and key error" /><figcaption>Petrack with owners list and key error</figcaption>
</figure>
<p>In this last step, you’ve changed the way you’re passing children into the <code>React.createElement</code>. Up until now, you’ve had discrete single elements as children, like in <strong>PetDetailList.js</strong> where you have this code.</p>
<pre class="jsx"><code>const PetDetailList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Details&lt;/h2&gt;
    &lt;dl&gt;
      &lt;PetInformationItem name=&quot;Name&quot; value={props.pet.name}/&gt;
      &lt;PetInformationItem name=&quot;Age&quot; value={props.pet.age}/&gt;
      &lt;PetInformationItem name=&quot;Type&quot; value={props.pet.PetType.type}/&gt;
    &lt;/dl&gt;
  &lt;/&gt;
;</code></pre>
<p>Each of <code>PetInformationItem</code> elements is a different, discrete, and separate child for the <code>dl</code> element.</p>
<p>The code in <strong>OwnersList.js</strong>, this code,</p>
<pre class="jsx"><code>const OwnersList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Owners&lt;/h2&gt;
    &lt;ul&gt;
      {props.owners.map(owner =&gt;
        &lt;li&gt;{owner.firstName}&lt;/li&gt;
      )}
    &lt;/ul&gt;
  &lt;/&gt;
;</code></pre>
<p>in that, you have created an <em>array</em> of objects. Recall that when you call the <code>map</code> function on an array, it returns <em>another array</em>. React doesn’t care about this, but it would like a little help in tracking each of those entries in the virtual DOM that it builds. That’s what the error message is about, giving React a little help by providing a “key” property for each of the elements that you’re creating in the array. The value of the “key” property must be unique and stable, that is, for a given object (like an owner named “Human One” with an id of 7), the value returned must always be the same. Luckily, because you have the id of the owner, you can use that because that id value is tied to a primary key, somewhere, and should never change for this object. The name can change, of course. But, the id will likely never change.</p>
<p>Add a “key” property to the <code>li</code> element and set it equal to the id of the owner object, like this.</p>
<pre class="jsx"><code>&lt;li key={owner.id}&gt;{owner.firstName}&lt;/li&gt;</code></pre>
<p>Now, the error in the console goes away.</p>
<p>Back to the <code>OwnersList</code> component, look at the formatting, the indentation that you see in the code.</p>
<pre class="jsx"><code>const OwnersList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Owners&lt;/h2&gt;
    &lt;ul&gt;
      {props.owners.map(owner =&gt;
        &lt;li key={owner.id}&gt;
          {owner.firstName}
        &lt;/li&gt;
      )}
    &lt;/ul&gt;
  &lt;/&gt;
;</code></pre>
<p>That, too, is idiomatic React, the <em>React</em> way of doing things. You’ll see that kind of code all over the React world.</p>
<h2 id="the-owner-link-component-2">The owner link component</h2>
<p>While it’s nice, and all, to see the owner’s first name in the list, the actual page has a link to the owner page with the format “last name, first name”. Time to create the (last!) component of this walk-through.</p>
<p>Create a new file named <strong>src/OwnerLink.js</strong>. In it, do the following:</p>
<ul>
<li>Import the React object</li>
<li>Create a new function-based component named <code>OwnerLink</code> that accepts data that has
<ul>
<li><code>a</code> as its element</li>
<li>An object literal with the property name “href” and the value of the “href” property passed in through the <code>props</code></li>
<li>A string as its child which contains the last name and the first name</li>
</ul></li>
<li>Export the component as the default export</li>
</ul>
<p>Once you have that, import the <code>OwnerLink</code> component into the <strong>src/OwnersList.js</strong> file. Now, replace this line in <code>OwnersList</code></p>
<pre class="jsx"><code>{owner.firstName}</code></pre>
<p>with an <code>OwnerLink</code> component with <em>three</em> attributes: “href”, “firstName”, and “lastName”. Those are the three properties expected inside the component. Use the curly brace syntax to pass in the appropriate values of the <code>owner</code>. This is something you haven’t done, yet. Try to think through the problem of how to pass in <em>multiple</em> property values. If you get stuck and can’t get it after about ten minutes, ask for help!</p>
<p>Refresh the page. If everything works, you’re done!</p>
<h2 id="what-youve-done-here-1">What you’ve done, here</h2>
<p>In this part of the walk-through, you used a collection to render a collection of React elements. You found out that using a collection like that requires you to provide a “key” property that has a stable, unique value. Once you had that, React would gladly manage that collection of objects in its virtual DOM.</p>
<h2 id="what-youve-done-overall-1">What you’ve done, overall</h2>
<p>You have used JSX to do some amazing things, here.</p>
<ul>
<li>You reinforced the best practice of putting one React component in its own file (module) and exporting it as the default value of the module</li>
<li>You learned that JSX compiles to <code>React.createElement</code></li>
<li>You learned that <code>&lt;&gt;</code> and <code>&lt;/&gt;</code> are shorthand literal for the often-used <code>React.Fragment</code> element</li>
<li>You used <code>defaultProps</code> to make sure that components always had some valid values to work with</li>
<li>You used <em>pure functional components</em> all the way through this, which means that none of the components used any other data than what was given to it</li>
<li>You are intimately familiar with how React creates its elements, now, which means there will be no magical thinking about JSX when you use it</li>
</ul>
<hr />
<h1 id="week-14-day-2-react-1" data-ignore="true">WEEK-14 DAY-2<br><em>React!</em></h1>
<hr />
<h1 id="basic-react-objectives-1">Basic React Objectives</h1>
<p>Learning React can seem daunting. The documentation available on the main site is geared toward people who have a lot of experience creating front-end applications. The basic React objectives gets you over that hump. At the end of the lessons, you should be able to:</p>
<ul>
<li>Explain how React uses a tree data structure called the “virtual DOM” to model the DOM</li>
<li>Use <code>React.createElement</code> to create virtual DOM nodes</li>
<li>Use <code>ReactDOM.render</code> to have React render your virtual DOM nodes into the actual Web page</li>
<li>Use JSX to create virtual DOM nodes</li>
<li>Describe how JSX transforms into <code>React.createElement</code> calls</li>
<li>Use <code>Array#map</code> to create an array of virtual DOM nodes while specifying a unique key for each created virtual DOM node</li>
</ul>
<hr />
<h1 id="from-javascript-to-dom-1">From JavaScript To DOM</h1>
<p>The path from JavaScript to actual DOM elements appearing in your HTML document is not complex thanks to React. However, it is worth reviewing so that there is no mystery about it.</p>
<p>In this article, you will review how to use <code>React.createElement</code> to get what you want into React’s virtual DOM so that React will convert into real DOM. There are three steps:</p>
<ul>
<li>Invoking <code>createElement</code> to build the “element tree”</li>
<li>Invoking <code>render</code> to let React build its virtual DOM</li>
<li>“Waiting” for React to convert its virtual DOM into real DOM</li>
</ul>
<p>This article’s goal is for React to create the following HTML in the DOM.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb99-1" title="1"><span class="kw">&lt;ul&gt;</span></a>
<a class="sourceLine" id="cb99-2" title="2">  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;selected&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb99-3" title="3">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/pets&quot;</span><span class="kw">&gt;</span>Pets<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb99-4" title="4">  <span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb99-5" title="5">  <span class="kw">&lt;li&gt;</span></a>
<a class="sourceLine" id="cb99-6" title="6">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/owners&quot;</span><span class="kw">&gt;</span>Owners<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb99-7" title="7">  <span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb99-8" title="8"><span class="kw">&lt;/ul&gt;</span></a></code></pre></div>
<h2 id="using-react-1">Using React</h2>
<p>There is one method to consider when building interfaces using low-level React. From the <a href="https://reactjs.org/docs/react-api.html#createelement">documentation</a>, the <code>React.createElement</code> function has the following form:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb100-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb100-2" title="2">  type<span class="op">,</span></a>
<a class="sourceLine" id="cb100-3" title="3">  [props]<span class="op">,</span></a>
<a class="sourceLine" id="cb100-4" title="4">  [...<span class="at">children</span>]</a>
<a class="sourceLine" id="cb100-5" title="5">)</a></code></pre></div>
<p>The arguments for it are</p>
<ul>
<li><strong>type</strong>: the type of element to create, either a string for an HTML element, or a reference to a function or class that is a React component</li>
<li><strong>props</strong>: an object that contains data to render the element, either data to dynamically show or attributes to put on the element in the HTML</li>
<li><strong>children</strong>: the children of the element, as many as you want</li>
</ul>
<h2 id="creating-elements-1">Creating elements</h2>
<p>For each tag that you want to create with React, you will make a call to <code>React.createElement</code>. In the HTML above, there are five tags to create:</p>
<ul>
<li>One <code>ul</code> element</li>
<li>Two <code>li</code> elements</li>
<li>Two <code>a</code> elements</li>
</ul>
<p>Three of those tags have attributes that you want to have appear in the DOM:</p>
<ul>
<li>One <code>li</code> element has a “class” attribute (which you <em>must</em> translate to “className” when using in React)</li>
<li>Both <code>a</code> elements have “href” attributes</li>
</ul>
<p>Finally, there is a parent-child relationship between the elements.</p>
<ul>
<li>The <code>ul</code> element is the parent of both <code>li</code> elements</li>
<li>Both <code>li</code> elements have a single <code>a</code> element child</li>
<li>Both <code>a</code> elements have “child” text content</li>
</ul>
<p>To summarize, here are the elements and how you would translate them to their respective arguments for <code>React.createElement</code>.</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 6%" />
<col style="width: 22%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>HTML snippet</th>
<th>type</th>
<th>props</th>
<th>children</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;ul&gt;...&lt;/ul&gt;</code></td>
<td><code>'ul'</code></td>
<td><code>null</code></td>
<td>Two calls to <code>React.createElement</code>, one for each <code>li</code> child</td>
</tr>
<tr class="even">
<td><code>&lt;li class="selected"&gt;...&lt;/li&gt;</code></td>
<td><code>'li'</code></td>
<td><code>{ className: 'selected' }</code></td>
<td>One call to <code>React.createElement</code> for the <code>a</code> child</td>
</tr>
<tr class="odd">
<td><code>&lt;li&gt;...&lt;/li&gt;</code></td>
<td><code>'li'</code></td>
<td><code>null</code></td>
<td>One call to <code>React.createElement</code> for the <code>a</code> child</td>
</tr>
<tr class="even">
<td><code>&lt;a href="/pets"&gt;Pets&lt;/a&gt;</code></td>
<td><code>'a'</code></td>
<td><code>{ href: '/pets' }</code></td>
<td>The string <code>'Pets'</code></td>
</tr>
<tr class="odd">
<td><code>&lt;a href="/owners"&gt;Owners&lt;/a&gt;</code></td>
<td><code>'a'</code></td>
<td><code>{ href: '/owners' }</code></td>
<td>The string <code>'Owners'</code></td>
</tr>
</tbody>
</table>
<p>To create this tree of elements, you will use nested calls to <code>React.createElement</code>. The standard formatting for this is for elements to have children, put each argument on its own line, and for elements that have no children or just text content, put all arguments on a single line.</p>
<p>Since the <code>ul</code> has children, it will have its arguments on separate lines. Referring to the table above gives you:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb101-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb101-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb101-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb101-4" title="4">  <span class="co">// First li child,</span></a>
<a class="sourceLine" id="cb101-5" title="5">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb101-6" title="6">)<span class="op">;</span></a></code></pre></div>
<p>The first <code>li</code> element has a child. Its call to <code>React.createElement</code> will have its arguments each go on their own separate lines:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb102-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb102-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb102-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb102-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb102-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb102-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb102-7" title="7">    <span class="co">// a child</span></a>
<a class="sourceLine" id="cb102-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb102-9" title="9">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb102-10" title="10">)<span class="op">;</span></a></code></pre></div>
<p>The anchor element for “Pets” has only one text child. Its call to <code>React.createElement</code> will have its arguments on one line:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb103-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb103-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb103-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb103-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb103-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb103-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb103-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb103-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb103-9" title="9">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb103-10" title="10">)<span class="op">;</span></a></code></pre></div>
<p>The second <code>li</code> element has a child. Its call to <code>React.createElement</code> will have its arguments each go on their own separate lines:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb104-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb104-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb104-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb104-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb104-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb104-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb104-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb104-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb104-9" title="9">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb104-10" title="10">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb104-11" title="11">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb104-12" title="12">    <span class="co">// a child</span></a>
<a class="sourceLine" id="cb104-13" title="13">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb104-14" title="14">)<span class="op">;</span></a></code></pre></div>
<p>The other anchor element, the one for “Owners” has only one text child. Its call to <code>React.createElement</code> will have its arguments on one line:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb105-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb105-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb105-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb105-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb105-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb105-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb105-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb105-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb105-9" title="9">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb105-10" title="10">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb105-11" title="11">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb105-12" title="12">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/owners&#39;</span><span class="op">},</span> <span class="st">&#39;Owners&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb105-13" title="13">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb105-14" title="14">)<span class="op">;</span></a></code></pre></div>
<p>That’s how you translate what you want from simple HTML into well-formatted calls to <code>React.createElement</code>. That will build the “element tree” for React to use.</p>
<h2 id="converting-to-virtual-dom-1">Converting to virtual DOM</h2>
<p>To tell React to start the conversion process, you have to use the <code>React.render</code> method which takes a value returned from <code>React.createElement</code> and a DOM node in the actual document where React will insert the result of the conversion into real DOM.</p>
<p>If you wanted to insert what was created in the last section into the <code>main</code> tag, the most forward way of doing that is like this.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb106-1" title="1"><span class="co">// Put the element tree in a variable</span></a>
<a class="sourceLine" id="cb106-2" title="2"><span class="kw">const</span> navList <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb106-3" title="3">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb106-4" title="4">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb106-5" title="5">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb106-6" title="6">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb106-7" title="7">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb106-8" title="8">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb106-9" title="9">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb106-10" title="10">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb106-11" title="11">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb106-12" title="12">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb106-13" title="13">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/owners&#39;</span><span class="op">},</span> <span class="st">&#39;Owners&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb106-14" title="14">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb106-15" title="15">)<span class="op">;</span></a>
<a class="sourceLine" id="cb106-16" title="16"></a>
<a class="sourceLine" id="cb106-17" title="17"><span class="co">// Get a DOM node for React to render to</span></a>
<a class="sourceLine" id="cb106-18" title="18"><span class="kw">const</span> mainElement <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb106-19" title="19"></a>
<a class="sourceLine" id="cb106-20" title="20"><span class="co">// Give React the element tree and the target</span></a>
<a class="sourceLine" id="cb106-21" title="21"><span class="va">ReactDOM</span>.<span class="at">render</span>(navList<span class="op">,</span> mainElement)<span class="op">;</span></a></code></pre></div>
<p>At this point, you have given the element tree that you want created to React. It will then take that and construct its virtual DOM from it.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-example-conversion-virtual-dom.svg" alt="Convert element tree to virtual DOM" /><figcaption>Convert element tree to virtual DOM</figcaption>
</figure>
<p>Now that it has built it’s own model of the virtual DOM using the elements that you created, it can now take that and turn that into real DOM.</p>
<figure>
<img src="images/react-example-conversion-real-dom.svg" alt="Convert virtual DOM to real DOM" /><figcaption>Convert virtual DOM to real DOM</figcaption>
</figure>
<p>It takes that real DOM and inserts it as the content of the target that you gave it which, in this case, is the <code>main</code> element in the body of the document.</p>
<h2 id="updates-1">Updates</h2>
<p>When you call <code>React.render</code> again for the same component and target, React takes the existing virtual DOM it knows about last time it rendered the element tree, compares it to whatever new thing you want to render, and determines which (if any) of the living DOM needs to change.</p>
<p>For example, let’s say you constructed the same element tree but left off the “selected” class for the first list element. Then, when you rendered it, again, by calling <code>React.render</code>, React would compare the new element tree with the old element tree, figure out that one class was missing on that one <code>li</code> element, and remove that and only that from the real DOM.</p>
<figure>
<img src="images/react-example-virtual-dom-diff.svg" alt="Virtual DOM diff" /><figcaption>Virtual DOM diff</figcaption>
</figure>
<h2 id="what-youve-learned-3">What you’ve learned</h2>
<p>In this article, you learned</p>
<ul>
<li>To convert desired HTML into properly-formatted nested calls of <code>React.createElement</code></li>
<li>How React takes your element tree and builds its virtual DOM from the elements that you created</li>
<li>How React takes that virtual DOM and inserts it into the living HTML document</li>
<li>How React will compare an old virtual DOM tree with a new virtual DOM tree, figure out what changed, and then change that and only that in the real DOM</li>
</ul>
<hr />
<p>The path from JavaScript to actual DOM elements appearing in your HTML document is not complex thanks to React. However, it is worth reviewing so that there is no mystery about it.</p>
<p>In this article, you will review how to use <code>React.createElement</code> to get what you want into React’s virtual DOM so that React will convert into real DOM. There are three steps:</p>
<ul>
<li>Invoking <code>createElement</code> to build the “element tree”</li>
<li>Invoking <code>render</code> to let React build its virtual DOM</li>
<li>“Waiting” for React to convert its virtual DOM into real DOM</li>
</ul>
<p>This article’s goal is for React to create the following HTML in the DOM.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb107-1" title="1"><span class="kw">&lt;ul&gt;</span></a>
<a class="sourceLine" id="cb107-2" title="2">  <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;selected&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb107-3" title="3">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/pets&quot;</span><span class="kw">&gt;</span>Pets<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb107-4" title="4">  <span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb107-5" title="5">  <span class="kw">&lt;li&gt;</span></a>
<a class="sourceLine" id="cb107-6" title="6">    <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/owners&quot;</span><span class="kw">&gt;</span>Owners<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb107-7" title="7">  <span class="kw">&lt;/li&gt;</span></a>
<a class="sourceLine" id="cb107-8" title="8"><span class="kw">&lt;/ul&gt;</span></a></code></pre></div>
<h2 id="using-react-2">Using React</h2>
<p>There is one method to consider when building interfaces using low-level React. From the <a href="https://reactjs.org/docs/react-api.html#createelement">documentation</a>, the <code>React.createElement</code> function has the following form:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb108-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb108-2" title="2">  type<span class="op">,</span></a>
<a class="sourceLine" id="cb108-3" title="3">  [props]<span class="op">,</span></a>
<a class="sourceLine" id="cb108-4" title="4">  [...<span class="at">children</span>]</a>
<a class="sourceLine" id="cb108-5" title="5">)</a></code></pre></div>
<p>The arguments for it are</p>
<ul>
<li><strong>type</strong>: the type of element to create, either a string for an HTML element, or a reference to a function or class that is a React component</li>
<li><strong>props</strong>: an object that contains data to render the element, either data to dynamically show or attributes to put on the element in the HTML</li>
<li><strong>children</strong>: the children of the element, as many as you want</li>
</ul>
<h2 id="creating-elements-2">Creating elements</h2>
<p>For each tag that you want to create with React, you will make a call to <code>React.createElement</code>. In the HTML above, there are five tags to create:</p>
<ul>
<li>One <code>ul</code> element</li>
<li>Two <code>li</code> elements</li>
<li>Two <code>a</code> elements</li>
</ul>
<p>Three of those tags have attributes that you want to have appear in the DOM:</p>
<ul>
<li>One <code>li</code> element has a “class” attribute (which you <em>must</em> translate to “className” when using in React)</li>
<li>Both <code>a</code> elements have “href” attributes</li>
</ul>
<p>Finally, there is a parent-child relationship between the elements.</p>
<ul>
<li>The <code>ul</code> element is the parent of both <code>li</code> elements</li>
<li>Both <code>li</code> elements have a single <code>a</code> element child</li>
<li>Both <code>a</code> elements have “child” text content</li>
</ul>
<p>To summarize, here are the elements and how you would translate them to their respective arguments for <code>React.createElement</code>.</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 6%" />
<col style="width: 22%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>HTML snippet</th>
<th>type</th>
<th>props</th>
<th>children</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;ul&gt;...&lt;/ul&gt;</code></td>
<td><code>'ul'</code></td>
<td><code>null</code></td>
<td>Two calls to <code>React.createElement</code>, one for each <code>li</code> child</td>
</tr>
<tr class="even">
<td><code>&lt;li class="selected"&gt;...&lt;/li&gt;</code></td>
<td><code>'li'</code></td>
<td><code>{ className: 'selected' }</code></td>
<td>One call to <code>React.createElement</code> for the <code>a</code> child</td>
</tr>
<tr class="odd">
<td><code>&lt;li&gt;...&lt;/li&gt;</code></td>
<td><code>'li'</code></td>
<td><code>null</code></td>
<td>One call to <code>React.createElement</code> for the <code>a</code> child</td>
</tr>
<tr class="even">
<td><code>&lt;a href="/pets"&gt;Pets&lt;/a&gt;</code></td>
<td><code>'a'</code></td>
<td><code>{ href: '/pets' }</code></td>
<td>The string <code>'Pets'</code></td>
</tr>
<tr class="odd">
<td><code>&lt;a href="/owners"&gt;Owners&lt;/a&gt;</code></td>
<td><code>'a'</code></td>
<td><code>{ href: '/owners' }</code></td>
<td>The string <code>'Owners'</code></td>
</tr>
</tbody>
</table>
<p>To create this tree of elements, you will use nested calls to <code>React.createElement</code>. The standard formatting for this is for elements to have children, put each argument on its own line, and for elements that have no children or just text content, put all arguments on a single line.</p>
<p>Since the <code>ul</code> has children, it will have its arguments on separate lines. Referring to the table above gives you:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb109-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb109-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb109-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb109-4" title="4">  <span class="co">// First li child,</span></a>
<a class="sourceLine" id="cb109-5" title="5">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb109-6" title="6">)<span class="op">;</span></a></code></pre></div>
<p>The first <code>li</code> element has a child. Its call to <code>React.createElement</code> will have its arguments each go on their own separate lines:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb110-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb110-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb110-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb110-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb110-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb110-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb110-7" title="7">    <span class="co">// a child</span></a>
<a class="sourceLine" id="cb110-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb110-9" title="9">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb110-10" title="10">)<span class="op">;</span></a></code></pre></div>
<p>The anchor element for “Pets” has only one text child. Its call to <code>React.createElement</code> will have its arguments on one line:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb111-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb111-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb111-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb111-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb111-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb111-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb111-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb111-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb111-9" title="9">  <span class="co">// Second li child,</span></a>
<a class="sourceLine" id="cb111-10" title="10">)<span class="op">;</span></a></code></pre></div>
<p>The second <code>li</code> element has a child. Its call to <code>React.createElement</code> will have its arguments each go on their own separate lines:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb112-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb112-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb112-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb112-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb112-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb112-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb112-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb112-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb112-9" title="9">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb112-10" title="10">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb112-11" title="11">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb112-12" title="12">    <span class="co">// a child</span></a>
<a class="sourceLine" id="cb112-13" title="13">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb112-14" title="14">)<span class="op">;</span></a></code></pre></div>
<p>The other anchor element, the one for “Owners” has only one text child. Its call to <code>React.createElement</code> will have its arguments on one line:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb113-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb113-2" title="2">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb113-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb113-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb113-5" title="5">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb113-6" title="6">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb113-7" title="7">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb113-8" title="8">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb113-9" title="9">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb113-10" title="10">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb113-11" title="11">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb113-12" title="12">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/owners&#39;</span><span class="op">},</span> <span class="st">&#39;Owners&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb113-13" title="13">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb113-14" title="14">)<span class="op">;</span></a></code></pre></div>
<p>That’s how you translate what you want from simple HTML into well-formatted calls to <code>React.createElement</code>. That will build the “element tree” for React to use.</p>
<h2 id="converting-to-virtual-dom-2">Converting to virtual DOM</h2>
<p>To tell React to start the conversion process, you have to use the <code>React.render</code> method which takes a value returned from <code>React.createElement</code> and a DOM node in the actual document where React will insert the result of the conversion into real DOM.</p>
<p>If you wanted to insert what was created in the last section into the <code>main</code> tag, the most forward way of doing that is like this.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb114-1" title="1"><span class="co">// Put the element tree in a variable</span></a>
<a class="sourceLine" id="cb114-2" title="2"><span class="kw">const</span> navList <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb114-3" title="3">  <span class="st">&#39;ul&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb114-4" title="4">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb114-5" title="5">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb114-6" title="6">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb114-7" title="7">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;selected&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb114-8" title="8">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/pets&#39;</span><span class="op">},</span> <span class="st">&#39;Pets&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb114-9" title="9">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb114-10" title="10">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb114-11" title="11">    <span class="st">&#39;li&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb114-12" title="12">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb114-13" title="13">    <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;/owners&#39;</span><span class="op">},</span> <span class="st">&#39;Owners&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb114-14" title="14">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb114-15" title="15">)<span class="op">;</span></a>
<a class="sourceLine" id="cb114-16" title="16"></a>
<a class="sourceLine" id="cb114-17" title="17"><span class="co">// Get a DOM node for React to render to</span></a>
<a class="sourceLine" id="cb114-18" title="18"><span class="kw">const</span> mainElement <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb114-19" title="19"></a>
<a class="sourceLine" id="cb114-20" title="20"><span class="co">// Give React the element tree and the target</span></a>
<a class="sourceLine" id="cb114-21" title="21"><span class="va">ReactDOM</span>.<span class="at">render</span>(navList<span class="op">,</span> mainElement)<span class="op">;</span></a></code></pre></div>
<p>At this point, you have given the element tree that you want created to React. It will then take that and construct its virtual DOM from it.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-example-conversion-virtual-dom.svg" alt="Convert element tree to virtual DOM" /><figcaption>Convert element tree to virtual DOM</figcaption>
</figure>
<p>Now that it has built it’s own model of the virtual DOM using the elements that you created, it can now take that and turn that into real DOM.</p>
<figure>
<img src="images/react-example-conversion-real-dom.svg" alt="Convert virtual DOM to real DOM" /><figcaption>Convert virtual DOM to real DOM</figcaption>
</figure>
<p>It takes that real DOM and inserts it as the content of the target that you gave it which, in this case, is the <code>main</code> element in the body of the document.</p>
<h2 id="updates-2">Updates</h2>
<p>When you call <code>React.render</code> again for the same component and target, React takes the existing virtual DOM it knows about last time it rendered the element tree, compares it to whatever new thing you want to render, and determines which (if any) of the living DOM needs to change.</p>
<p>For example, let’s say you constructed the same element tree but left off the “selected” class for the first list element. Then, when you rendered it, again, by calling <code>React.render</code>, React would compare the new element tree with the old element tree, figure out that one class was missing on that one <code>li</code> element, and remove that and only that from the real DOM.</p>
<figure>
<img src="images/react-example-virtual-dom-diff.svg" alt="Virtual DOM diff" /><figcaption>Virtual DOM diff</figcaption>
</figure>
<h2 id="what-youve-learned-4">What you’ve learned</h2>
<p>In this article, you learned</p>
<ul>
<li>To convert desired HTML into properly-formatted nested calls of <code>React.createElement</code></li>
<li>How React takes your element tree and builds its virtual DOM from the elements that you created</li>
<li>How React takes that virtual DOM and inserts it into the living HTML document</li>
<li>How React will compare an old virtual DOM tree with a new virtual DOM tree, figure out what changed, and then change that and only that in the real DOM</li>
</ul>
<hr />
<h1 id="javascript-extension-1">JavaScript eXtension</h1>
<p>Using <code>React.createElement</code> is a bore and a chore when creating React-powered applications. The developers that used React, both inside and outside of Facebook, wanted an easier way to interact with the React API and hide all of the minutiae that comes with using <code>React.createElement</code>. They invented a new language that sits on top of JavaScript called <em>JavaScript eXtension</em>, or JSX.</p>
<p>In this article, you will learn</p>
<ul>
<li>How to use JSX in your application</li>
<li>The syntax of JSX, and</li>
<li>How JSX transforms into <code>React.createElement</code> calls</li>
</ul>
<h2 id="how-to-use-jsx-1">How to use JSX</h2>
<p>Because browsers don’t understand JSX, you have to use some tools to translate JSX into just plain old JavaScript. The main tool that you will use in almost every case is one called <a href="https://babeljs.io/">Babel</a>. It is a tool that can convert versions of modern JavaScript into old version of JavaScript. It can convert <em>future</em> features of JavaScript into modern JavaScript. It can convert JSX into modern (or old) JavaScript.</p>
<p>However, using Babel by itself is like building a house with just a hammer. It’d be nice to have fancier tools to help you build that house. That’s where tools like <a href="https://github.com/facebook/create-react-app">Create React App</a> come into play. <strong>Create React App</strong> uses Babel underneath and, then, adds a whole lot more. You’ll see more of **Create React App* as you progress through the course.</p>
<h2 id="jsx-syntax-1">JSX Syntax</h2>
<p>Here’s a function-based component using <code>React.createElement</code> that has an <code>h1</code> element with the content “Hello!”, a placeholder image, and a link to some search engine passed in through props.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb115-1" title="1"><span class="kw">const</span> ExampleComponent <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb115-2" title="2">  <span class="va">React</span>.<span class="at">Fragment</span><span class="op">,</span></a>
<a class="sourceLine" id="cb115-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb115-4" title="4">  <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;h1&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;Hello!&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb115-5" title="5">  <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;img&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">src</span><span class="op">:</span> <span class="st">&#39;images/150&#39;</span> <span class="op">}</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb115-6" title="6">  <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="va">props</span>.<span class="at">searchUrl</span> <span class="op">},</span> <span class="va">props</span>.<span class="at">searchText</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb115-7" title="7">)<span class="op">;</span></a></code></pre></div>
<p>You’ve likely seen that before. JSX allows you to get rid of all of the calls to <code>React.createElement</code> and replace them with almost HTML-looking tags. Here’s what the above content looks like in JSX.</p>
<pre class="jsx"><code>const ExampleComponent = props =&gt;
  &lt;React.Fragment&gt;
    &lt;h1&gt;Hello!&lt;/h1&gt;
    &lt;img src=&quot;images/150&quot; /&gt;
    &lt;a href={props.searchUrl}&gt;{props.searchText}&lt;/a&gt;
  &lt;/React.Fragment&gt;
;</code></pre>
<p>You can see Babel in action converting that JSX code above. Here’s a <a href="https://babeljs.io/en/repl#?babili=false&amp;browsers=&amp;build=&amp;builtIns=false&amp;spec=false&amp;loose=false&amp;code_lz=DwIwrgLhD2B2AEcDCAbAlgYwNYF4DeAFAJTw4B88EAFmgM4B0tAphAMoQCGETBe86WJgBMAXJQBOYJvAC-RGWQBQ8FfAAyaQYuAB6cFDhkgA&amp;debug=false&amp;forceAllTransforms=false&amp;shippedProposals=false&amp;circleciRepo=&amp;evaluate=false&amp;fileSize=false&amp;timeTravel=false&amp;sourceType=module&amp;lineWrap=true&amp;presets=es2015%2Creact%2Cstage-2&amp;prettier=false&amp;targets=&amp;version=7.4.3">link to Babel</a> already configured for you. Copy and paste that code above to see it transform back into <code>React.createElement</code> invocations.</p>
<h3 id="html-like-tags-but-1">HTML-like tags, but…</h3>
<p>The <code>React.Fragment</code> element <em>contains</em> the <code>h1</code>, <code>img</code>, and <code>a</code>, just like it does in the <code>React.createElement</code> version, except instead of using a method call to do it, it uses more familiar HTML-like tags. There’s one super big difference between the HTML that you know and what JSX expects. Can you see it?</p>
<p>Look at the end of the <code>img</code> tag. See that “/” before the closing angle bracket? You <em>must</em> include that if the tag that you’re using doesn’t have a close tag. If you want to use those HTML element in your JSX, then you have to put the slash. The following table shows some common tags that you’d use and their JSX equivalent.</p>
<table>
<thead>
<tr class="header">
<th>HTML self-closing tag</th>
<th>JSX equivalent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;br&gt;</code></td>
<td><code>&lt;br /&gt;</code></td>
</tr>
<tr class="even">
<td><code>&lt;hr&gt;</code></td>
<td><code>&lt;hr /&gt;</code></td>
</tr>
<tr class="odd">
<td><code>&lt;img&gt;</code></td>
<td><code>&lt;img /&gt;</code></td>
</tr>
<tr class="even">
<td><code>&lt;input&gt;</code></td>
<td><code>&lt;input /&gt;</code></td>
</tr>
<tr class="odd">
<td><code>&lt;link&gt;</code></td>
<td><code>&lt;link /&gt;</code></td>
</tr>
</tbody>
</table>
<h3 id="properties-and-data-1">Properties and data</h3>
<p>When you use the low-level <code>React.createElement</code> function call, you pass the properties in as an object as the second argument. In JSX, you pass in properties as if they were attributes on the tag.</p>
<p>When you want to use a static value, just use a string literal like this.</p>
<pre class="jsx"><code>&lt;img src=&quot;https://via.placeholder.com/150&quot; /&gt;</code></pre>
<p>becomes</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb118-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb118-2" title="2">  <span class="st">&#39;img&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb118-3" title="3">  <span class="op">{</span> <span class="dt">src</span><span class="op">:</span> <span class="st">&quot;https://via.placeholder.com/150&quot;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb118-4" title="4">)</a></code></pre></div>
<p>And, when you want to pass in some data rather than a sting literal like above, you use curly braces to turn</p>
<pre class="jsx"><code>&lt;a href={props.searchUrl}&gt;{props.searchText}&lt;/a&gt;</code></pre>
<p>into</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb120-1" title="1"><span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb120-2" title="2">  <span class="st">&#39;a&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb120-3" title="3">  <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="va">props</span>.<span class="at">searchUrl</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb120-4" title="4">  <span class="va">props</span>.<span class="at">searchText</span></a>
<a class="sourceLine" id="cb120-5" title="5">)</a></code></pre></div>
<p>The stuff inside the curly braces is just a JavaScript expression, so you could do something like this, if you wanted, to make the search text uppercase:</p>
<pre class="jsx"><code>&lt;a href={props.searchUrl}&gt;
  {props.searchText.toUpperCase()}
&lt;/a&gt;</code></pre>
<h3 id="comments-1">Comments</h3>
<p>To use comments in JSX, you use curly braces (because that means its just a normal JavaScript expression) and block-level JavaScript comments.</p>
<pre class="jsx"><code>&lt;div&gt;
  &lt;h2&gt;This is JSX&lt;/h2&gt;
  {/* This is a comment in JSX */}
&lt;/div&gt;</code></pre>
<h3 id="property-names-1">Property names</h3>
<p>Please read <a href="https://reactjs.org/docs/dom-elements.html">DOM Elements</a> in the React documentation to understand how property names work, as well as the special property names that React supports. You can be assessed on the following special attributes:</p>
<ul>
<li><code>checked</code></li>
<li><code>className</code></li>
<li><code>dangerouslySetInnerHTML</code></li>
<li><code>htmlFor</code></li>
<li><code>onChange</code></li>
<li><code>style</code></li>
<li><code>value</code></li>
</ul>
<p>Also, you can be assessed on knowing that React uses camel-case for its attribute names so attributes like <code>maxlength</code> in HTML are <code>maxLength</code> in React.</p>
<h2 id="the-jsx-semicolon-gotcha-1">The JSX semicolon gotcha</h2>
<p>You will also see code like this in other React projects, as well as in code generated by tools. It is a function-based component that uses the <code>function</code> keyword rather than an arrow function. Note the <code>return</code> statement.</p>
<pre class="jsx"><code>function App() {
  return (
    &lt;div&gt;
      &lt;h1&gt;Hello!&lt;/h1&gt;
      &lt;div&gt;Welcome to JSX.&lt;/div&gt;
    &lt;/div&gt;
  );
}</code></pre>
<p>You’ll see that the JSX block is wrapped in parentheses. This is due to the way that JavaScript handles something called <a href="https://www.ecma-international.org/ecma-262/#sec-rules-of-automatic-semicolon-insertion">“automatic semicolon insertion”</a>. Here’s a simple example. What do you think the function returns? (Yes, this <em>is</em> a “trick question”.)</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb124-1" title="1"><span class="kw">function</span> <span class="at">sum</span>(i<span class="op">,</span> j) <span class="op">{</span></a>
<a class="sourceLine" id="cb124-2" title="2">  <span class="cf">return</span></a>
<a class="sourceLine" id="cb124-3" title="3">    i <span class="op">+</span> j<span class="op">;</span></a>
<a class="sourceLine" id="cb124-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>If the answer isn’t obvious, start Node on the command line, type it in exactly the way it is there, and try calling it with <code>sum(1, 2)</code>.</p>
<p>You may be surprised to see that it returns <code>undefined</code>. Here’s why: when JavaScript reads your source code, it tries to be “helpful”. When it reads the lines of your code, it asks, is each line a “complete” line? Is it and the following lines valid JavaScript expressions? If the answer is “yes”, then it will add a semicolon at the end of the line <em>for you</em>. When it reads the above “sum” function, the JavaScript runner “thinks” to itself:</p>
<ul>
<li>Ok, I have two lines:
<ul>
<li><code>return</code></li>
<li><code>i + j;</code></li>
</ul></li>
<li>Are each of those valid JavaScript expressions? Yes!</li>
<li>Now, I will put semicolons at the end of the lines that don’t have any
<ul>
<li><code>return;</code></li>
<li><code>i + j;</code></li>
</ul></li>
</ul>
<p>Now, your function, in the eyes of JavaScript, looks like this.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb125-1" title="1"><span class="kw">function</span> <span class="at">sum</span>(i<span class="op">,</span> j) <span class="op">{</span></a>
<a class="sourceLine" id="cb125-2" title="2">  <span class="cf">return</span><span class="op">;</span> <span class="co">// &lt;- There&#39;s a new semicolon!</span></a>
<a class="sourceLine" id="cb125-3" title="3">    i <span class="op">+</span> j<span class="op">;</span></a>
<a class="sourceLine" id="cb125-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>That function never gets to <code>i + j</code> because it always returns “no value” on the first line. Yikes!</p>
<p>To get around that, you can add parentheses to tell JavaScript that “more is coming”.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb126-1" title="1"><span class="kw">function</span> <span class="at">sum</span>(i<span class="op">,</span> j) <span class="op">{</span></a>
<a class="sourceLine" id="cb126-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb126-3" title="3">    i <span class="op">+</span> j</a>
<a class="sourceLine" id="cb126-4" title="4">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb126-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>Now, when JavaScript reads the line <code>return (</code>, it “thinks” to itself, “Well, that’s not a complete expression. There must be more coming. I will <em>not</em> put a semicolon there.”</p>
<p>The same is true for functions containing JSX. The above code</p>
<pre class="jsx"><code>function App() {
  return (
    &lt;div&gt;
      &lt;h1&gt;Hello!&lt;/h1&gt;
      &lt;div&gt;Welcome to JSX.&lt;/div&gt;
    &lt;/div&gt;
  );
}</code></pre>
<p>is equivalent to</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb128-1" title="1"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb128-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb128-3" title="3">    <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb128-4" title="4">      <span class="st">&#39;div&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb128-5" title="5">      <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb128-6" title="6">      <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;h1&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;Hello!&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb128-7" title="7">      <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;div&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;Welcome to JSX.&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb128-8" title="8">    )</a>
<a class="sourceLine" id="cb128-9" title="9">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb128-10" title="10"><span class="op">}</span></a></code></pre></div>
<p>Without the parentheses starting right after the <code>return</code> keyword and ending after the outer call of <code>React.createElement</code>, JavaScript would just stick a semicolon after the <code>return</code> keyword and all of the fancy React stuff would get ignored.</p>
<p>The message is clear: if you use the <code>return</code> keyword in a function to “return some JSX”, then make sure you wrap the JSX in parentheses.</p>
<h2 id="what-youve-learned-5">What you’ve learned</h2>
<p>That’s really all there is to JSX. You combine your knowledge of HTML and your knowledge of <code>React.createElement</code> to allow the Babel tool to turn your code into plain old JavaScript for you. Specifically, you have seen the following conversions:</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 26%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="header">
<th>Conversion type</th>
<th>JSX</th>
<th>JavaScript</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tags</td>
<td><code>&lt;h1&gt;&lt;/h1&gt;</code></td>
<td><code>React.createElement('h1', null)</code></td>
</tr>
<tr class="even">
<td>attributes</td>
<td><code>&lt;img src="images/foo.png"/&gt;</code></td>
<td><code>React.createElement('img', { src: "foo.png" })</code></td>
</tr>
<tr class="odd">
<td>variables</td>
<td><code>&lt;h1&gt;{message}&lt;/h1&gt;</code></td>
<td><code>React.createElement('h1', null, message)</code></td>
</tr>
</tbody>
</table>
<p>You’ve also read about the special property names that React supports.</p>
<p>Finally, you learned about the frustrating side effect of “automatic semicolon insertion” and, if you do use the <code>return</code> keyword in your functions, that you should wrap the JSX in parentheses to prevent JavaScript from <em>not</em> returning your code.</p>
<hr />
<h1 id="walk-through-creating-elements-in-react-1">Walk-Through: Creating Elements In React</h1>
<p>To start your React journey, you will build your foundational knowledge by starting out with the basic <code>React.createElement</code> and <code>ReactDOM.render</code>. One of the compelling features of this type of solution is that you do not need <em>any</em> extra tools to get your app running in the browser. In the next walk-through, you will have to <em>install</em> a ton of packages just to get React to properly work. This project will walk you through how to use a pure JavaScript version of React. Everything will work right out of the box.</p>
<h2 id="getting-started-1">Getting started</h2>
<p>Install the <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi">React DevTools for Google Chrome</a>.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-devtools.png" alt="React DevTools for Google Chrome screenshot" /><figcaption>React DevTools for Google Chrome screenshot</figcaption>
</figure>
<p>Create a new directory to contain this new project. In that directory, create two files: an <strong>index.html</strong> file and an <strong>app.js</strong> file. In the <strong>index.html</strong> file, create a standard HTML 5 document. In the HTML <code>body</code> (in this order), create a <code>main</code> element and a <code>script</code> element for your <strong>app.js</strong> file with <code>type="module"</code> so you can use ES6 modules.</p>
<p>Serve your files with a local Python server by running the <code>python3 -m http.server</code> command in your terminal. Make sure you are running the command from within your project directory. You should be able to open http://localhost:8000 to see the page, empty as it is.</p>
<h2 id="test-that-things-are-working-1">Test that things are working</h2>
<p>Get ready! You’re going to do the first React thing! You’re going to create a React element that will display “Hello, programmers!”. You will then have React render it to the DOM.</p>
<p>Copy and paste the following JavaScript code into your <strong>app.js</strong>, refresh your page, look at the code to get a feel for what it does, try to come up with explanations on your own, and then continue reading.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb129-1" title="1"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react@16/umd/react.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb129-2" title="2"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react-dom@16/umd/react-dom.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb129-3" title="3"></a>
<a class="sourceLine" id="cb129-4" title="4"><span class="kw">const</span> HelloWorld <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb129-5" title="5">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb129-6" title="6">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb129-7" title="7">  <span class="st">&#39;Hello, programmers&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb129-8" title="8">)<span class="op">;</span></a>
<a class="sourceLine" id="cb129-9" title="9"></a>
<a class="sourceLine" id="cb129-10" title="10"><span class="kw">const</span> target <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb129-11" title="11"><span class="kw">const</span> app <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(HelloWorld<span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb129-12" title="12"><span class="va">ReactDOM</span>.<span class="at">render</span>(app<span class="op">,</span> target)<span class="op">;</span></a></code></pre></div>
<p><strong>Note</strong>: You may want to turn on “Disable cache” on the <em>Network</em> tab of your DevTools and keep the DevTools open while you’re doing this to make sure you always have the newest version of the files.</p>
<p>You should now have <em>Components</em> and <em>Profiler</em> tabs in your DevTools. If you click on the <code>HelloWorld</code> component in the <em>Components</em> tab, you can see that it has no <em>props</em>. You’ll learn much more about props later. For now, just remember that the React DevTools extension is a helpful tool for you to view information about your components and their props.</p>
<h2 id="walking-through-the-code-1">Walking through the code</h2>
<p>Even though there are only five statements in that code block, a lot is going on. This section carefully walks through each of the statements to help you get a deeper understanding.</p>
<h3 id="those-wacky-import-statements-1">Those wacky import statements</h3>
<p>Consider those <code>import</code> statements. These differ in two ways from what you’ve seen with ES modules to date.</p>
<ol type="1">
<li>They come from another website altogether. When you use <code>import</code> to bring in modules from another domain, that request is governed by CORS; that means the other server <em>must</em> have CORS configured to let you import their code. Luckily, unpkg.com configures CORS to allow any authority to import their script files.</li>
<li>They don’t seem to import anything. There is no <code>import { React } from</code> there. It’s just <code>import 'url'</code>. This is called a <em>side effect</em> import and is generally frowned upon in modern Web development. But, React does not package their code in ES6 format. What those <code>import</code> statements do is <em>add variables in the global scope</em>. The two variables they add are <code>React</code> from the first import, and <code>ReactDOM</code> from the second import. Those global variables can then be used by your code, which happens with <code>React.createElement</code> and <code>ReactDOM.render</code>.</li>
</ol>
<p>If you were going to move these into production, you would change the URLs that you import from</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb130-1" title="1"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react@16/umd/react.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb130-2" title="2"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react-dom@16/umd/react-dom.development.js&#39;</span><span class="op">;</span></a></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb131-1" title="1"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react@16/umd/react.production.min.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb131-2" title="2"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react-dom@16.13.1/umd/react-dom.production.min.js&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Those files contain the minified “production” version of the code, which is just a smaller version of the “development” versions. If you open up the links to the <a href="https://unpkg.com/react@16/umd/react.development.js">react.development.js</a> and <a href="https://unpkg.com/react@16/umd/react.production.min.js">react-production.min.js</a> files in your browser, you’ll see JavaScript in both files. Notice how the non-minified version (<a href="https://unpkg.com/react@16/umd/react.development.js">react.development.js</a>) includes plain JavaScript you’re used to seeing. The minified version simply compresses that JavaScript.</p>
<h3 id="the-odd-looking-function-1">The odd-looking function</h3>
<p>Turn your attention to this statement.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb132-1" title="1"><span class="kw">const</span> HelloWorld <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb132-2" title="2">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb132-3" title="3">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb132-4" title="4">  <span class="st">&#39;Hello, programmers!&#39;</span></a>
<a class="sourceLine" id="cb132-5" title="5">)<span class="op">;</span></a></code></pre></div>
<p>The statement declares the <code>HelloWorld</code> variable and stores a function in it. This is the way that components look in React. It is a function-based component because it’s a function. It returns the value returned from <code>React.createElement</code>. If that syntax is weird, it is functionally the same as this code.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb133-1" title="1"><span class="kw">const</span> HelloWorld <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb133-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&#39;h1&#39;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&#39;Hello, programmers!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb133-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Because there are a lot of die-hard functional programmers (as opposed to object-oriented programmers) that like that kind of syntax (arrow functions without curly braces that span multiple lines), you will see it in a lot of places while learning React.</p>
<p>The arguments passed to <code>React.createElement</code> are:</p>
<ol type="1">
<li>What to create in the DOM.</li>
</ol>
<ul>
<li>If it is a string, it needs to be all lowercase and the name of the HTML element to create. This example passes in <code>'h1'</code> as the tag to create in the DOM.</li>
<li>Otherwise, it should be the variable that holds another component. You can see it being used that way in the later code.</li>
</ul>
<ol start="2" type="1">
<li>Any properties/attributes to put on the generated element. This example passes in <code>null</code> because there are no attributes needed. You will see some, soon.</li>
<li>The child content of the element. The third (and fourth and fifth and…) arguments contains what React should put as the children of the content of the element. In this case, the content is <code>'Hello, programmers!'</code>.</li>
</ol>
<p><strong>Important</strong>: Every time this walk-through asks you to create a function-based component, this is what it will mostly look like. It will look like this <em>or</em> it will look like this and have a single parameter named <code>props</code> like this.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb134-1" title="1"><span class="co">// Without the need for data</span></a>
<a class="sourceLine" id="cb134-2" title="2"><span class="kw">const</span> HelloWorldNoData <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb134-3" title="3">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb134-4" title="4">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb134-5" title="5">  <span class="st">&#39;Hello, programmers!&#39;</span></a>
<a class="sourceLine" id="cb134-6" title="6">)<span class="op">;</span></a>
<a class="sourceLine" id="cb134-7" title="7"></a>
<a class="sourceLine" id="cb134-8" title="8"><span class="co">// With the need for data has the</span></a>
<a class="sourceLine" id="cb134-9" title="9"><span class="co">// props parameter.</span></a>
<a class="sourceLine" id="cb134-10" title="10"><span class="kw">const</span> HelloWorldWithData <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb134-11" title="11">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb134-12" title="12">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb134-13" title="13">  <span class="st">&#39;Hello, programmers!&#39;</span></a>
<a class="sourceLine" id="cb134-14" title="14">)<span class="op">;</span></a></code></pre></div>
<h3 id="putting-it-in-the-page-1">Putting it in the page</h3>
<p>The last three statements in the code block are these.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb135-1" title="1"><span class="kw">const</span> target <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb135-2" title="2"><span class="kw">const</span> app <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(HelloWorld<span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb135-3" title="3"><span class="va">ReactDOM</span>.<span class="at">render</span>(app<span class="op">,</span> target)<span class="op">;</span></a></code></pre></div>
<p>The first line is something you should be really familiar with. You are selecting the <code>&lt;main&gt;</code> element and referencing it as <code>target</code>.</p>
<p>The second line is using <code>React.createElement</code> to create an element from the <code>HelloWorld</code> function-based component discussed in the last section. It has <code>null</code> properties.</p>
<p>The third line <em>renders</em> the component into the actual Web page, the component specified by the first argument, which is the one created from the <code>HelloWorld</code> component. Remember that you can open your DevTools, find the <em>Components</em> tab, and click it to see the React DevTools show you the “HelloWorld” component rendered by React.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-hello-programmers-create-element-with-react-tools.png" alt="Hello programmers with dev tools" /><figcaption>Hello programmers with dev tools</figcaption>
</figure>
<p>Before moving on, add some more to that, so you get a feel for how it works. Replace the content of your <strong>app.js</strong> with this stuff. The comments to the right of each line shows what React will do with the stuff only after you call <code>ReactDOM.render</code> with it.</p>
<blockquote>
<p><strong>Note:</strong> since you have not included a CSS file to style <code>#nav-links</code> and <code>.is-selected</code> in your project, the <code>id</code> and <code>className</code> aren’t actually being used for any styling purpose. The code below includes an <code>id</code> and <code>className</code> to shows an example of setting <code>id</code> and <code>className</code> with <code>React.createElement</code> and how it translates to HTML.</p>
</blockquote>
<div class="sourceCode" id="cb136"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb136-1" title="1"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react@16/umd/react.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb136-2" title="2"><span class="im">import</span> <span class="st">&#39;https://unpkg.com/react-dom@16/umd/react-dom.development.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb136-3" title="3"></a>
<a class="sourceLine" id="cb136-4" title="4"><span class="kw">const</span> Links <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb136-5" title="5">  <span class="st">&#39;ul&#39;</span><span class="op">,</span>                                  <span class="co">// &lt;ul</span></a>
<a class="sourceLine" id="cb136-6" title="6">  <span class="op">{</span> <span class="dt">id</span><span class="op">:</span> <span class="st">&#39;nav-links&#39;</span> <span class="op">},</span>                   <span class="co">//  id=&quot;nav-links&quot;&gt;</span></a>
<a class="sourceLine" id="cb136-7" title="7">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb136-8" title="8">    <span class="st">&#39;li&#39;</span><span class="op">,</span>                                <span class="co">// &lt;li</span></a>
<a class="sourceLine" id="cb136-9" title="9">    <span class="op">{</span> <span class="dt">className</span><span class="op">:</span> <span class="st">&#39;is-selected&#39;</span> <span class="op">},</span>        <span class="co">//  class=&quot;is-selected&quot;&gt;</span></a>
<a class="sourceLine" id="cb136-10" title="10">    <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb136-11" title="11">      <span class="st">&#39;a&#39;</span><span class="op">,</span>                               <span class="co">// &lt;a</span></a>
<a class="sourceLine" id="cb136-12" title="12">      <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;https://appacademy.io&#39;</span> <span class="op">},</span> <span class="co">//  href=&quot;...&quot;&gt;</span></a>
<a class="sourceLine" id="cb136-13" title="13">      <span class="st">&#39;App Academy&#39;</span>                      <span class="co">//    App Academy</span></a>
<a class="sourceLine" id="cb136-14" title="14">    )<span class="op">,</span>                                   <span class="co">// &lt;/a&gt;</span></a>
<a class="sourceLine" id="cb136-15" title="15">  )<span class="op">,</span>                                     <span class="co">// &lt;/li&gt;</span></a>
<a class="sourceLine" id="cb136-16" title="16">  <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb136-17" title="17">    <span class="st">&#39;li&#39;</span><span class="op">,</span>                                <span class="co">// &lt;li&gt;</span></a>
<a class="sourceLine" id="cb136-18" title="18">    <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb136-19" title="19">    <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb136-20" title="20">      <span class="st">&#39;a&#39;</span><span class="op">,</span>                               <span class="co">// &lt;a</span></a>
<a class="sourceLine" id="cb136-21" title="21">      <span class="op">{</span> <span class="dt">href</span><span class="op">:</span> <span class="st">&#39;https://aaonline.io&#39;</span> <span class="op">},</span>   <span class="co">//  href=&quot;...&quot;&gt;</span></a>
<a class="sourceLine" id="cb136-22" title="22">      <span class="st">&#39;a/A Open&#39;</span><span class="op">,</span>                        <span class="co">//  a/A Open</span></a>
<a class="sourceLine" id="cb136-23" title="23">    )<span class="op">,</span>                                   <span class="co">// &lt;/a&gt;</span></a>
<a class="sourceLine" id="cb136-24" title="24">  )<span class="op">,</span>                                     <span class="co">// &lt;/li&gt;</span></a>
<a class="sourceLine" id="cb136-25" title="25">)<span class="op">;</span>                                       <span class="co">// &lt;/ul&gt;</span></a>
<a class="sourceLine" id="cb136-26" title="26"></a>
<a class="sourceLine" id="cb136-27" title="27"><span class="kw">const</span> HelloWorld <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb136-28" title="28">  <span class="st">&#39;h1&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb136-29" title="29">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb136-30" title="30">  <span class="st">&#39;Hello, programmers&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb136-31" title="31">)<span class="op">;</span></a>
<a class="sourceLine" id="cb136-32" title="32"></a>
<a class="sourceLine" id="cb136-33" title="33"><span class="co">// Creates the HelloWorld first and, then, creates</span></a>
<a class="sourceLine" id="cb136-34" title="34"><span class="co">// the Links</span></a>
<a class="sourceLine" id="cb136-35" title="35"><span class="kw">const</span> AllTogether <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="va">React</span>.<span class="at">createElement</span>(</a>
<a class="sourceLine" id="cb136-36" title="36">  <span class="st">&#39;div&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb136-37" title="37">  <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb136-38" title="38">  <span class="va">React</span>.<span class="at">createElement</span>(HelloWorld<span class="op">,</span> <span class="kw">null</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb136-39" title="39">  <span class="va">React</span>.<span class="at">createElement</span>(Links<span class="op">,</span> <span class="kw">null</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb136-40" title="40">)<span class="op">;</span></a>
<a class="sourceLine" id="cb136-41" title="41"></a>
<a class="sourceLine" id="cb136-42" title="42"><span class="kw">const</span> target <span class="op">=</span> <span class="va">document</span>.<span class="at">querySelector</span>(<span class="st">&#39;main&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb136-43" title="43"><span class="kw">const</span> app <span class="op">=</span> <span class="va">React</span>.<span class="at">createElement</span>(AllTogether<span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb136-44" title="44"><span class="va">ReactDOM</span>.<span class="at">render</span>(app<span class="op">,</span> target)<span class="op">;</span></a></code></pre></div>
<p>Look at what gets produced in the <em>Elements</em> tab of your DevTools. Look at what gets produced in the <em>Components</em> tab of your DevTools for all three of your components. Play around with it: change tags, replace some of those <code>null</code> second arguments with objects to see what gets presented. Give it a whirl. From this point on, you’ll be working with JavaScript code known as <strong>JSX</strong> in your React projects. JSX is just syntactic sugar that translates to creating React element objects. Although you won’t be creating full-scale projects with <code>React.createElement</code>, it’s important to remember that React is actually using <code>React.createElement</code> under the hood.</p>
<hr />
<h1 id="thinking-in-components-1">Thinking In Components</h1>
<p>For the next couple of walk through articles, you will be reproducing a page from Petrack. Please go to <a href="https://polar-beach-08187.herokuapp.com/">Petrack</a> and click around it so you can see how it works. Pay special attention to the detail page for the pets. This article will analyze it so that it can introduce you into how to “think in React”.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/pettrack-pet-detail.png" alt="Petrack pet detail page" /><figcaption>Petrack pet detail page</figcaption>
</figure>
<p>When you “think in React”, you are supposed to “think in components”. A component in React is usually a JavaScript function or a class that returns a special React object called an “element”. There is a <em>very</em> vocal community that believes that function-based components are far superior than class-based components because they’re easier to understand. You will have the opportunity to use both in this class and make up your mind which you like better.</p>
<p>In this article, you will gain insight into how to break a UI down into portions of functionality that React calls “components”. The way this article presents the components is only one way to do it. Other developers may choose to do it differently. There is usually no wrong way to do it.</p>
<h2 id="components-1">Components</h2>
<p>In React-speak, a “component” is a chunk of the user interface that can (or should) be treated as a unit because it may (or likely will) be used more than once or used to structure a page. That’s not a very satisfying definition. This article will walk you through breaking down the page using the practical example of the Petrack pet detail page.</p>
<p>When you think of components, it’s good to think in terms of the Single Responsibility Principle. Remember that? It’s good to have a component do one thing and one thing well. In this analysis, it will identify how it fits (or doesn’t fit) in with the Single Responsibility Principle.</p>
<p>If you think in terms of Pug, then a component is kind of like an <code>include</code>, a big or small amount of code that you could use over and over in your UI. The main difference is that React is <em>in the browser</em> and handles user events and HTML generation for you so that you’re not creating template strings and adding them via the <code>innerHTML</code> property or <code>appendChild</code> method. Pug is just on the server generating HTML.</p>
<h2 id="the-navigation-component-3">The navigation component</h2>
<p>On all of the pages, there is the same navigation at the top of the page.</p>
<figure>
<img src="images/pettrack-pet-detail-static-content.png" alt="Petrack navigation" /><figcaption>Petrack navigation</figcaption>
</figure>
<p>If you were working in Pug, that would be in your <strong>layout.pug</strong> because you would want it to appear in every page. In React, you will create a reusable component, maybe call it <code>Navigation</code>, and use it on all of your React-enabled pages.</p>
<p>This does one thing and one thing well: it shows the static content of the navigation. There’s nothing else it needs to do. Good job, <code>Navigation</code> component!</p>
<p>What this means is that the code that will create the heading “Petrack”, the links “Pets” and “Owners”, and the “Back” link will all be in their own component, which is just a JavaScript function or class. It could look something like this, but with real code where it reads “some cool React code here”. This is the skeleton of the code.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb137-1" title="1"><span class="co">// Navigation.js</span></a>
<a class="sourceLine" id="cb137-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb137-3" title="3"></a>
<a class="sourceLine" id="cb137-4" title="4"><span class="kw">const</span> Navigation <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb137-5" title="5">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb137-6" title="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb137-7" title="7"></a>
<a class="sourceLine" id="cb137-8" title="8"><span class="im">export</span> <span class="im">default</span> Navigation<span class="op">;</span></a></code></pre></div>
<p>You would put that in a file named <strong>Navigation.js</strong>. It’s capitalized because, in React world, the names of your custom components are <em>always</em> capitalized.</p>
<p>Don’t worry if that doesn’t make complete sense, yet. You will be making these components and their files <em>for the rest of your lives</em>. Or, at least, for the rest of this course. And, definitely, for the remainder of this module.</p>
<p>The walk through articles that follow this will explain what’s going on as well as what that <code>props</code> parameter is.</p>
<h2 id="the-details-components-1">The details components</h2>
<p>Now, for the remainder of the page.</p>
<figure>
<img src="images/pettrack-pet-detail-component.png" alt="Petrack detail" /><figcaption>Petrack detail</figcaption>
</figure>
<p>This could be another component. It would create the “Details” headline, show the individual details of the pet, create the “Owners” headline, and then create the links to the owners. It could look something like this.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb138-1" title="1"><span class="co">// PetDetail.js</span></a>
<a class="sourceLine" id="cb138-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb138-3" title="3"></a>
<a class="sourceLine" id="cb138-4" title="4"><span class="kw">const</span> PetDetail <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb138-5" title="5">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb138-6" title="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb138-7" title="7"></a>
<a class="sourceLine" id="cb138-8" title="8"><span class="im">export</span> <span class="im">default</span> PetDetail<span class="op">;</span></a></code></pre></div>
<p>This component, the <code>PetDetail</code> component, does too much. It’s in charge of showing two different kinds of information, the details of the pet <em>and</em> the owners links. That means there’s probably an opportunity to create more components that this component can then use. This is called <em>component composition</em>.</p>
<h3 id="breaking-it-down-further-1">Breaking it down further</h3>
<p>Now, please think like a Pug developer for just a moment. How would you create this page in Pug? The code for this from the project looks like this.</p>
<pre class="pug"><code>extends ../layout

block content
  h1 Details
  dl
    dt Name
    dd= pet.name
    dt Age
    dd= pet.age
    dt Type
    dd= pet.PetType.type

  h2 Owners
  ul
    each owner in pet.Owners
      li: a(href=&quot;/owners/&quot; + owner.id) #{owner.lastName}, #{owner.firstName}</code></pre>
<p>To start thinking in components, ask yourself</p>
<ul>
<li>What parts of that page are repeated?</li>
<li>What parts have the same structure?</li>
</ul>
<p>You can see that in the <em>Details</em> section of the page, there are repeated structures of <code>dt</code> and <code>dd</code> elements. You can see in the <em>Owners</em> section, there is a loop that creates a link to the owners based on the owner information. Those types of reusable chunks of content are good candidates for being their own components.</p>
<h3 id="the-pet-information-item-component-2">The pet information item component</h3>
<p>You can extract the creation of the <code>dt</code> and <code>dd</code> elements into its own component.</p>
<figure>
<img src="images/pettrack-pet-detail-information-item-component.png" alt="Petrack pet information item" /><figcaption>Petrack pet information item</figcaption>
</figure>
<p>That could look something like this.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb140-1" title="1"><span class="co">// PetInformationItem.js</span></a>
<a class="sourceLine" id="cb140-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb140-3" title="3"></a>
<a class="sourceLine" id="cb140-4" title="4"><span class="kw">const</span> PetInformationItem <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb140-5" title="5">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb140-6" title="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb140-7" title="7"></a>
<a class="sourceLine" id="cb140-8" title="8"><span class="im">export</span> <span class="im">default</span> PetInformationItem<span class="op">;</span></a></code></pre></div>
<p>It would be responsible for making that portion of the Web page appear. And, you would use it over and over for each of the different pieces of data you wanted to show. As you add more data about pets, you could use that <code>PetInformationItem</code> to maintain the visual consistency of the Web page, as well as allowing you to write less code. This component does one thing and does it well.</p>
<h3 id="the-owner-link-component-3">The owner link component</h3>
<p>Just like extracting the pet information item, you can extract that owner link into its own component. It would generate the the <code>a</code> and format the person’s name.</p>
<figure>
<img src="images/pettrack-pet-detail-owner-link-component.png" alt="Petrack owner link" /><figcaption>Petrack owner link</figcaption>
</figure>
<p>Again, the skeleton code would look something like this.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb141-1" title="1"><span class="co">// OwnerLink.js</span></a>
<a class="sourceLine" id="cb141-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb141-3" title="3"></a>
<a class="sourceLine" id="cb141-4" title="4"><span class="kw">const</span> OwnerLink <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb141-5" title="5">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb141-6" title="6"><span class="op">}</span></a>
<a class="sourceLine" id="cb141-7" title="7"></a>
<a class="sourceLine" id="cb141-8" title="8"><span class="im">export</span> <span class="im">default</span> OwnerLink<span class="op">;</span></a></code></pre></div>
<p>This component also does one thing and does it well. If you ever need to change the way owner names appear in lists of links in the application, you can come to this one component and change it. It would then take effect everywhere! Single Responsibility Principle for the win!</p>
<h3 id="the-owners-list-component-1">The owners list component</h3>
<p>Now, the thing that manages the list itself and the use of the <code>OwnerLink</code> component is eligible for being its own component, too.</p>
<figure>
<img src="images/pettrack-pet-detail-owners-list-component.png" alt="Petrack owners list" /><figcaption>Petrack owners list</figcaption>
</figure>
<p>It’s single responsibility is to manage creating the “Owners” header and the unordered list. It will use the <code>OwnerLink</code> component to do that! Again, this is called <em>component composition</em>.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb142-1" title="1"><span class="co">// OwnersList.js</span></a>
<a class="sourceLine" id="cb142-2" title="2"><span class="im">import</span> OwnerLink <span class="im">from</span> <span class="st">&#39;./OwnerLink&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb142-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb142-4" title="4"></a>
<a class="sourceLine" id="cb142-5" title="5"><span class="kw">const</span> OwnersList <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb142-6" title="6">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb142-7" title="7"></a>
<a class="sourceLine" id="cb142-8" title="8">  <span class="co">/**</span></a>
<a class="sourceLine" id="cb142-9" title="9"><span class="co">   * Use the OwnerLink component, too!</span></a>
<a class="sourceLine" id="cb142-10" title="10"><span class="co">   */</span></a>
<a class="sourceLine" id="cb142-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb142-12" title="12"></a>
<a class="sourceLine" id="cb142-13" title="13"><span class="im">export</span> <span class="im">default</span> OwnersList<span class="op">;</span></a></code></pre></div>
<h3 id="putting-the-list-and-details-together-1">Putting the list and details together</h3>
<p>If you create the <code>PetInformationItem</code> and the <code>OwnerLink</code> component, then you will want to use them in your <code>PetDetail</code> component. That is as easy as using the <code>import</code> statement to allow them to be used by that code.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb143-1" title="1"><span class="co">// PetDetail.js</span></a>
<a class="sourceLine" id="cb143-2" title="2"><span class="im">import</span> OwnersList <span class="im">from</span> <span class="st">&#39;./OwnersList&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb143-3" title="3"><span class="im">import</span> PetInformationItem <span class="im">from</span> <span class="st">&#39;./PetInformationItem&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb143-4" title="4"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb143-5" title="5"></a>
<a class="sourceLine" id="cb143-6" title="6"><span class="kw">const</span> PetDetail <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb143-7" title="7">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb143-8" title="8"></a>
<a class="sourceLine" id="cb143-9" title="9">  <span class="co">/**</span></a>
<a class="sourceLine" id="cb143-10" title="10"><span class="co">   * Use the OwnersList and PetInformationItem</span></a>
<a class="sourceLine" id="cb143-11" title="11"><span class="co">   * components, too!</span></a>
<a class="sourceLine" id="cb143-12" title="12"><span class="co">   */</span></a>
<a class="sourceLine" id="cb143-13" title="13"><span class="op">}</span></a>
<a class="sourceLine" id="cb143-14" title="14"></a>
<a class="sourceLine" id="cb143-15" title="15"><span class="im">export</span> <span class="im">default</span> PetDetail<span class="op">;</span></a></code></pre></div>
<h2 id="putting-it-all-together-1">Putting it all together</h2>
<p>Once you have all of those components, you would create one more component, the top-level “page” component, that would render the <code>Navigation</code> and <code>PetDetail</code> components.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb144-1" title="1"><span class="co">// PetDetailPage.js</span></a>
<a class="sourceLine" id="cb144-2" title="2"><span class="im">import</span> Navigation <span class="im">from</span> <span class="st">&#39;./Navigation&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb144-3" title="3"><span class="im">import</span> PetDetail <span class="im">from</span> <span class="st">&#39;./PetDetail&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb144-4" title="4"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb144-5" title="5"></a>
<a class="sourceLine" id="cb144-6" title="6"><span class="kw">const</span> PetDetailPage <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb144-7" title="7">  <span class="co">/* some cool React code here */</span></a>
<a class="sourceLine" id="cb144-8" title="8"></a>
<a class="sourceLine" id="cb144-9" title="9">  <span class="co">/**</span></a>
<a class="sourceLine" id="cb144-10" title="10"><span class="co">   * Use the Navigation and PetDetail</span></a>
<a class="sourceLine" id="cb144-11" title="11"><span class="co">   * components, too!</span></a>
<a class="sourceLine" id="cb144-12" title="12"><span class="co">   */</span></a>
<a class="sourceLine" id="cb144-13" title="13"><span class="op">}</span></a>
<a class="sourceLine" id="cb144-14" title="14"></a>
<a class="sourceLine" id="cb144-15" title="15"><span class="im">export</span> <span class="im">default</span> PetDetailPage<span class="op">;</span></a></code></pre></div>
<p>The final analysis in this breakdown of “components” to “think in React” looks like this.</p>
<figure>
<img src="images/pettrack-pet-detail-all-components.png" alt="Petrack final analysis" /><figcaption>Petrack final analysis</figcaption>
</figure>
<p>You can see each of the components that were described in this article. You can also see how the <code>PetInformationItem</code> and <code>OwnerLink</code> components get used multiple times on the page.</p>
<h2 id="there-is-probably-more-1">There is probably more</h2>
<p>Take a look at this, again, and think about if there is any “missing” component before continuing.</p>
<figure>
<img src="images/pettrack-pet-detail-all-components.png" alt="Petrack final analysis" /><figcaption>Petrack final analysis</figcaption>
</figure>
<p>You could also create a <code>PetDetailList</code> component, if you want, that would manage the “Details” header and the definition list. That would reflect the same structure that the <code>OwnersList</code> has, a component responsible for generating a header and a list. In the following walk through articles, the <code>PetDetailList</code> component will also be included in the development.</p>
<h2 id="what-youve-seen-2">What you’ve seen</h2>
<p>This is thinking in React. Looking at a Web page and deciding what parts of it belong in sections, what parts are repeated, and how to group them all together. The React documentation calls this <a href="https://reactjs.org/docs/thinking-in-react.html#step-1-break-the-ui-into-a-component-hierarchy">breaking the UI into a component hierarchy</a>. That link is to a section in the React documentation entitled <em>Thinking in React</em>. That section performs the same exercise that this article performed, but with a lot fewer words and pictures.</p>
<p>In the upcoming exercises, you will create these components in a couple of ways. The first way is the hard way, but shows you how React works under the covers. The second way uses the fancy JSX language to make it easier for you.</p>
<hr />
<h1 id="jsx-walk-through-navigation-component-1">JSX Walk-Through: Navigation Component</h1>
<p>You will now work on creating the PetTrack page.</p>
<ul>
<li><code>PetDetailPage</code>: Created in this step</li>
<li><code>Navigation</code>: Created in this step</li>
<li><code>PetDetails</code></li>
<li><code>PetDetailList</code></li>
<li><code>PetInformationItem</code></li>
<li><code>OwnersList</code></li>
<li><code>OwnerLink</code></li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<h2 id="the-strategy-2">The strategy</h2>
<p>This guide will work top-down, in that it will start with the top-most (or outer-most) component, the <code>PetDetailPage</code> component. Then, it will move to a next level component, like <code>Navigation</code>. It will just keep adding components and getting them to work with the data from the AJAX call.</p>
<h2 id="the-pet-detail-page-component-2">The pet detail page component</h2>
<p>The <code>PetDetailPage</code> component will be responsible for showing the navigation component, the details list component, and the owners list component. None of those exist, yet, so just stub out a new component to hold the source.</p>
<p>Create a new file named <strong>PetDetailPage.js</strong> in the <strong>src</strong> directory. In that file, type this content into it.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const PetDetailPage = () =&gt;
  &lt;div&gt;PetDetailPage component&lt;/div&gt; // Temporary so it builds
;

export default PetDetailPage;</code></pre>
<p>Here’s some analysis.</p>
<h3 id="the-import-statement-2">The import statement</h3>
<p>You will notice that the top of the file imports the <code>React</code> object, but you do not use it anywhere in the file! You have to do this because, remember, each JSX element, like <code>&lt;header&gt;...&lt;/header&gt;</code>, ends up getting translated to <code>React.createElement</code> calls. Without the <code>import</code> statement, the <code>React</code> object would not exist and compiling would fail.</p>
<h3 id="the-component-2">The component</h3>
<p>The <code>const PetDetailPage = () =&gt; ...</code> is just a normal arrow function.</p>
<p>The body of the component is a JSX expression <code>&lt;div&gt;&lt;/div&gt;</code> which Babel will translate into an invocation of <code>React.createElement</code>. Here’s what it looks like after passing through Babel.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb146-1" title="1"><span class="kw">var</span> PetDetailPage <span class="op">=</span> <span class="kw">function</span> <span class="at">PetDetailPage</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb146-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;div&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&quot;PetDetailPage component&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb146-3" title="3"><span class="op">}</span> <span class="co">// Temporary so it builds</span></a>
<a class="sourceLine" id="cb146-4" title="4"><span class="op">;</span></a></code></pre></div>
<h3 id="the-export-statement-2">The export statement</h3>
<p>This is just so you can import it into other components for use, which you will do now.</p>
<h2 id="using-the-pet-detail-page-component-2">Using the pet detail page component</h2>
<p>Open up <strong>src/App.js</strong>. Import the newly-created <code>PetDetailPage</code> component. Remember that this is Webpack that’s doing this for you, so you <em>do not</em> need to put the <strong>.js</strong> extension on the name of the module that you import.</p>
<p>Replace the <code>&lt;h1&gt;Hello&lt;/h1&gt;</code> with <code>&lt;PetDetailPage&gt;&lt;/PetDetailPage&gt;</code>. Save all of your files. You should now see this content in your browser and <em>Components</em> tab.</p>
<figure>
<img src="images/create-react-app-with-default-pet-detail-page.png" alt="Petrack with default PetDetailPage" /><figcaption>Petrack with default PetDetailPage</figcaption>
</figure>
<p>The content of the <strong>src/App.js</strong> should look similar to this.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import PetDetailPage from &#39;./PetDetailPage&#39;;

function App() {
  return (
    &lt;PetDetailPage&gt;&lt;/PetDetailPage&gt;
  );
}

export default App;</code></pre>
<p>Since <code>PetDetailPage</code> has no child content, you could also write that code like this, with the ending slash.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import PetDetailPage from &#39;./PetDetailPage&#39;;

function App() {
  return (
    &lt;PetDetailPage /&gt;
  );
}

export default App;</code></pre>
<h2 id="the-navigation-component-4">The navigation component</h2>
<p>Create a new file named <strong>Navigation.js</strong> in the <strong>src</strong> directory of your application. Put this content in there. Please type it rather than copy and paste it.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const Navigation = () =&gt;
  &lt;header&gt;
    &lt;h1&gt;Petrack&lt;/h1&gt;
    &lt;nav&gt;
      &lt;ul&gt;
        &lt;li&gt;
          &lt;a href=&quot;/pets&quot;&gt;Pets&lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
          &lt;a href=&quot;/owners&quot;&gt;Owners&lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  &lt;/header&gt;
;

export default Navigation;</code></pre>
<p>All of the JSX, the html-looking tags, those get converted into the calls to <code>React.createElement</code>. When Babel gets done with it, it looks like this, which is just an ugly version of one call to <code>React.createElement</code> for each of the elements in the JSX.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb150-1" title="1"><span class="kw">var</span> Navigation <span class="op">=</span> <span class="kw">function</span> <span class="at">Navigation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb150-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;header&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;h1&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&quot;Petrack&quot;</span>)<span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;nav&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;ul&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;li&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb150-3" title="3">    <span class="dt">href</span><span class="op">:</span> <span class="st">&quot;/pets&quot;</span></a>
<a class="sourceLine" id="cb150-4" title="4">  <span class="op">},</span> <span class="st">&quot;Pets&quot;</span>))<span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;li&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb150-5" title="5">    <span class="dt">href</span><span class="op">:</span> <span class="st">&quot;/owners&quot;</span></a>
<a class="sourceLine" id="cb150-6" title="6">  <span class="op">},</span> <span class="st">&quot;Owners&quot;</span>)))))<span class="op">;</span></a>
<a class="sourceLine" id="cb150-7" title="7"><span class="op">};</span></a></code></pre></div>
<h2 id="using-the-navigation-component-2">Using the navigation component</h2>
<p>Back in the <strong>src/PetDetailPage.js</strong> file, import the <code>Navigation</code> component and replace the <code>&lt;div&gt;PetDetailPage component&lt;/div&gt;</code> with the <code>Navigation</code> component much like you did in the <code>App</code> component with <code>PetDetailPage</code>.</p>
<p>Once you save your files, you should see the navigation.</p>
<figure>
<img src="images/react-pet-detail-page-nav-complete.png" alt="PetDetailPage navigation complete" /><figcaption>PetDetailPage navigation complete</figcaption>
</figure>
<h2 id="what-just-happened-2">What just happened?</h2>
<p>You created two new components and added them to the <strong>src</strong> directory. You imported them so that other components could use them. It was fast and easy and (hopefully) painless. JSX is lovely to work with, far easier than the calls to <code>React.createElement</code> if that didn’t exist.</p>
<hr />
<p>You will now work on creating the PetTrack page.</p>
<ul>
<li><code>PetDetailPage</code>: Created in this step</li>
<li><code>Navigation</code>: Created in this step</li>
<li><code>PetDetails</code></li>
<li><code>PetDetailList</code></li>
<li><code>PetInformationItem</code></li>
<li><code>OwnersList</code></li>
<li><code>OwnerLink</code></li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<h2 id="the-strategy-3">The strategy</h2>
<p>This guide will work top-down, in that it will start with the top-most (or outer-most) component, the <code>PetDetailPage</code> component. Then, it will move to a next level component, like <code>Navigation</code>. It will just keep adding components and getting them to work with the data from the AJAX call.</p>
<h2 id="the-pet-detail-page-component-3">The pet detail page component</h2>
<p>The <code>PetDetailPage</code> component will be responsible for showing the navigation component, the details list component, and the owners list component. None of those exist, yet, so just stub out a new component to hold the source.</p>
<p>Create a new file named <strong>PetDetailPage.js</strong> in the <strong>src</strong> directory. In that file, type this content into it.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const PetDetailPage = () =&gt;
  &lt;div&gt;PetDetailPage component&lt;/div&gt; // Temporary so it builds
;

export default PetDetailPage;</code></pre>
<p>Here’s some analysis.</p>
<h3 id="the-import-statement-3">The import statement</h3>
<p>You will notice that the top of the file imports the <code>React</code> object, but you do not use it anywhere in the file! You have to do this because, remember, each JSX element, like <code>&lt;header&gt;...&lt;/header&gt;</code>, ends up getting translated to <code>React.createElement</code> calls. Without the <code>import</code> statement, the <code>React</code> object would not exist and compiling would fail.</p>
<h3 id="the-component-3">The component</h3>
<p>The <code>const PetDetailPage = () =&gt; ...</code> is just a normal arrow function.</p>
<p>The body of the component is a JSX expression <code>&lt;div&gt;&lt;/div&gt;</code> which Babel will translate into an invocation of <code>React.createElement</code>. Here’s what it looks like after passing through Babel.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb152-1" title="1"><span class="kw">var</span> PetDetailPage <span class="op">=</span> <span class="kw">function</span> <span class="at">PetDetailPage</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb152-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;div&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&quot;PetDetailPage component&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb152-3" title="3"><span class="op">}</span> <span class="co">// Temporary so it builds</span></a>
<a class="sourceLine" id="cb152-4" title="4"><span class="op">;</span></a></code></pre></div>
<h3 id="the-export-statement-3">The export statement</h3>
<p>This is just so you can import it into other components for use, which you will do now.</p>
<h2 id="using-the-pet-detail-page-component-3">Using the pet detail page component</h2>
<p>Open up <strong>src/App.js</strong>. Import the newly-created <code>PetDetailPage</code> component. Remember that this is Webpack that’s doing this for you, so you <em>do not</em> need to put the <strong>.js</strong> extension on the name of the module that you import.</p>
<p>Replace the <code>&lt;h1&gt;Hello&lt;/h1&gt;</code> with <code>&lt;PetDetailPage&gt;&lt;/PetDetailPage&gt;</code>. Save all of your files. You should now see this content in your browser and <em>Components</em> tab.</p>
<figure>
<img src="images/create-react-app-with-default-pet-detail-page.png" alt="Petrack with default PetDetailPage" /><figcaption>Petrack with default PetDetailPage</figcaption>
</figure>
<p>The content of the <strong>src/App.js</strong> should look similar to this.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import PetDetailPage from &#39;./PetDetailPage&#39;;

function App() {
  return (
    &lt;PetDetailPage&gt;&lt;/PetDetailPage&gt;
  );
}

export default App;</code></pre>
<p>Since <code>PetDetailPage</code> has no child content, you could also write that code like this, with the ending slash.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import PetDetailPage from &#39;./PetDetailPage&#39;;

function App() {
  return (
    &lt;PetDetailPage /&gt;
  );
}

export default App;</code></pre>
<h2 id="the-navigation-component-5">The navigation component</h2>
<p>Create a new file named <strong>Navigation.js</strong> in the <strong>src</strong> directory of your application. Put this content in there. Please type it rather than copy and paste it.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const Navigation = () =&gt;
  &lt;header&gt;
    &lt;h1&gt;Petrack&lt;/h1&gt;
    &lt;nav&gt;
      &lt;ul&gt;
        &lt;li&gt;
          &lt;a href=&quot;/pets&quot;&gt;Pets&lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
          &lt;a href=&quot;/owners&quot;&gt;Owners&lt;/a&gt;
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  &lt;/header&gt;
;

export default Navigation;</code></pre>
<p>All of the JSX, the html-looking tags, those get converted into the calls to <code>React.createElement</code>. When Babel gets done with it, it looks like this, which is just an ugly version of one call to <code>React.createElement</code> for each of the elements in the JSX.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb156-1" title="1"><span class="kw">var</span> Navigation <span class="op">=</span> <span class="kw">function</span> <span class="at">Navigation</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb156-2" title="2">  <span class="cf">return</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;header&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;h1&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">&quot;Petrack&quot;</span>)<span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;nav&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;ul&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;li&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb156-3" title="3">    <span class="dt">href</span><span class="op">:</span> <span class="st">&quot;/pets&quot;</span></a>
<a class="sourceLine" id="cb156-4" title="4">  <span class="op">},</span> <span class="st">&quot;Pets&quot;</span>))<span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;li&quot;</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="va">React</span>.<span class="at">createElement</span>(<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb156-5" title="5">    <span class="dt">href</span><span class="op">:</span> <span class="st">&quot;/owners&quot;</span></a>
<a class="sourceLine" id="cb156-6" title="6">  <span class="op">},</span> <span class="st">&quot;Owners&quot;</span>)))))<span class="op">;</span></a>
<a class="sourceLine" id="cb156-7" title="7"><span class="op">};</span></a></code></pre></div>
<h2 id="using-the-navigation-component-3">Using the navigation component</h2>
<p>Back in the <strong>src/PetDetailPage.js</strong> file, import the <code>Navigation</code> component and replace the <code>&lt;div&gt;PetDetailPage component&lt;/div&gt;</code> with the <code>Navigation</code> component much like you did in the <code>App</code> component with <code>PetDetailPage</code>.</p>
<p>Once you save your files, you should see the navigation.</p>
<figure>
<img src="images/react-pet-detail-page-nav-complete.png" alt="PetDetailPage navigation complete" /><figcaption>PetDetailPage navigation complete</figcaption>
</figure>
<h2 id="what-just-happened-3">What just happened?</h2>
<p>You created two new components and added them to the <strong>src</strong> directory. You imported them so that other components could use them. It was fast and easy and (hopefully) painless. JSX is lovely to work with, far easier than the calls to <code>React.createElement</code> if that didn’t exist.</p>
<hr />
<h1 id="jsx-walk-through-pet-details-part-1-1">JSX Walk-Through: Pet Details, Part 1</h1>
<p>You will now start adding data rendering to the page with the components created and modified in this step.</p>
<ul>
<li><code>PetDetailPage</code>: Modified in this step</li>
<li><code>Navigation</code>: Done</li>
<li><code>PetDetails</code>: Created in this step</li>
<li><code>PetDetailList</code>: Created in this step</li>
<li><code>PetInformationItem</code>: Created in this step</li>
<li><code>OwnersList</code></li>
<li><code>OwnerLink</code></li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<h2 id="getting-some-data-1">Getting some data</h2>
<p>Open the <strong>src/index.js</strong> file. In it, after the call to <code>ReactDOM.render</code>, create a fetch call for the RESTful endpoint https://polar-beach-08187.herokuapp.com/api/pets/2. (You can click on the link to see the data. That’s “Mog”, the cat. She is forgetful.) Do all of the normal stuff that you would do with <code>async</code> functions and what not.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb157-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb157-2" title="2">  <span class="kw">const</span> url <span class="op">=</span> <span class="st">&#39;https://polar-beach-08187.herokuapp.com/api/pets/2&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb157-3" title="3">  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb157-4" title="4">  <span class="cf">if</span> (<span class="va">response</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb157-5" title="5">    <span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb157-6" title="6">    <span class="va">console</span>.<span class="at">log</span>(pet)<span class="op">;</span></a>
<a class="sourceLine" id="cb157-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb157-8" title="8"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<figure>
<img src="images/react-mog-data-pull.png" alt="Petrack Mog data fetch" /><figcaption>Petrack Mog data fetch</figcaption>
</figure>
<p>Now, to pass that data into your React components, you will pass it as a property. You have to pass it on the element getting rendered. React is all about rendering things. You can just call another render from inside your <code>async</code> function. But, this time, you will pass the pet data in as an attribute of the <code>App</code> component with curly braces to indicate to JSX that it is a data value and not a string.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb158-1" title="1">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb158-2" title="2">  <span class="kw">const</span> url <span class="op">=</span> <span class="st">&#39;https://polar-beach-08187.herokuapp.com/api/pets/2&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb158-3" title="3">  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb158-4" title="4">  <span class="cf">if</span> (<span class="va">response</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb158-5" title="5">    <span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb158-6" title="6">    <span class="va">console</span>.<span class="at">log</span>(pet)<span class="op">;</span></a>
<a class="sourceLine" id="cb158-7" title="7"></a>
<a class="sourceLine" id="cb158-8" title="8">    <span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb158-9" title="9">      <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb158-10" title="10">        <span class="op">&lt;</span>App pet<span class="op">={</span>pet<span class="op">}</span> /&gt;   <span class="op">{</span><span class="co">/* Now, with data */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb158-11" title="11">      &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb158-12" title="12">      <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb158-13" title="13">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb158-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb158-15" title="15"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>This has changed everything! You don’t see it, yet, but once the AJAX call completes, go look at the <em>Components</em> tab of your DevTools. Click on the <code>App</code> component and look at the values in the right pane. React now knows about the data that you passed in!</p>
<p>Now, you need to pass that to the <code>PetDetailPage</code> component. In the <strong>src/App.js</strong> file, change the function’s parameter list to have a single parameter named “props”. Then, pass the value of <code>props.pet</code> into the pet attribute of the <code>PetDetailPage</code> component, similar to what you did in <strong>src/index.js</strong> for the <code>App</code> component. You should be able to see the props in the <em>Components</em> tab for both the <code>App</code> and <code>PetDetailPage</code> components.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/create-react-app-passing-data-into-pet-detail-page.gif" alt="Data passed down to PetDetailPage" /><figcaption>Data passed down to PetDetailPage</figcaption>
</figure>
<p>You will use that data to pass down into the detail components that you will now create.</p>
<h2 id="the-pet-details-component-1">The pet details component</h2>
<p><strong>Note</strong>: This section introduces an error that you will fix. It is a common error, so knowing how to fix it when you see it is good information to have.</p>
<p>The <code>PetDetails</code> component is in charge of rendering the <code>PetDetailList</code> and the <code>OwnersList</code> components. For now, get a new component working.</p>
<p>Create a new file named <strong>src/PetDetails.js</strong>. Import the <code>React</code> object. Create a function-based <code>PetDetails</code> component that has a <code>props</code> parameter, and have it render an empty <code>div</code>. Export the component as the default export for the module.</p>
<p>In the <strong>PetDetailPage.js</strong> file, import the new <code>PetDetails</code> component. Change the <code>PetDetailPage</code> component to accept a <code>props</code> parameter rather then an empty parameter list. Then, use the <code>PetDetails</code> component in the body of the <code>PetDetailPage</code> as a sibling to the <code>Navigation</code> component. You need to pass the pet data into it. Your code should look like this. (You may have empty tags rather than the self-closing slash tags. That’s fine.)</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

import Navigation from &#39;./Navigation&#39;;
import PetDetails from &#39;./PetDetails&#39;;

const PetDetailPage = props =&gt;
  &lt;Navigation /&gt;
  &lt;PetDetails pet={props.pet} /&gt;
;

export default PetDetailPage;</code></pre>
<p>Save all of your files. Look at your browser. There is an error.</p>
<figure>
<img src="images/create-react-app-pet-detail-page-without-single-root-error.png" alt="PetDetailPage with adjacent element error" /><figcaption>PetDetailPage with adjacent element error</figcaption>
</figure>
<p>This happens because components <em>must</em> have a single top-level element. You can see that <code>PetDetailPage</code> now has two because both <code>Navigation</code> and <code>PetDetails</code> are at the top level.</p>
<p>To solve this, you need the two elements in a single element. You could do that with a <code>div</code>, for example.</p>
<pre class="jsx"><code>const PetDetailPage = props =&gt;
  &lt;div&gt;
    &lt;Navigation /&gt;
    &lt;PetDetails pet={props.pet} /&gt;
  &lt;/div&gt;
;</code></pre>
<p>This is fine, except for when you don’t want to introduce extra tags for no reason in your HTML. That is why, in React 16, the developers introduced the idea of a <code>Fragment</code>. The <code>Fragment</code> is a special placeholder that groups together JSX elements in the virtual DOM, but does not creating any tags in the real DOM. You can wrap those two elements (or any number of elements) in a <code>React.Fragment</code> JSX element like this.</p>
<pre class="jsx"><code>const PetDetailPage = props =&gt;
  &lt;React.Fragment&gt;
    &lt;Navigation /&gt;
    &lt;PetDetails pet={props.pet} /&gt;
  &lt;/React.Fragment&gt;
;</code></pre>
<p>If you do that and save the file, the compile error goes away and you see the content as it should be.</p>
<p>Wrapping things in <code>Fragment</code> elements like that is such a common thing, that there is a shortcut syntax for it. Since the <code>Fragment</code> does not represent any real tag, you write it like an HTML tag that <em>has no name</em>.</p>
<pre class="jsx"><code>const PetDetailPage = props =&gt;
  &lt;&gt;
    &lt;Navigation /&gt;
    &lt;PetDetails pet={props.pet} /&gt;
  &lt;/&gt;
;</code></pre>
<p>It’s pretty weird. But, it’s a very <em>React</em> way of doing things.</p>
<h2 id="create-the-pet-detail-list-component-1">Create the pet detail list component</h2>
<p>Here’s some code for you that you can use for your <code>PetDetailList</code> component. Create a file named <strong>src/PetDetailList.js</strong> and put it in there. Feel free to copy and paste it so that you can get on to the neat-o data stuff.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const PetDetailList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Details&lt;/h2&gt;
    &lt;dl&gt;

    &lt;/dl&gt;
  &lt;/&gt;
;

export default PetDetailList;</code></pre>
<p>Back in <strong>PetDetails.js</strong>, import this new <code>PetDetailList</code> component, and replace the empty <code>div</code> with it.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb164-1" title="1"><span class="co">// Add the import line</span></a>
<a class="sourceLine" id="cb164-2" title="2"><span class="im">import</span> PetDetailList <span class="im">from</span> <span class="st">&#39;./PetDetailList.js&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb164-3" title="3"></a>
<a class="sourceLine" id="cb164-4" title="4"><span class="kw">const</span> PetDetails <span class="op">=</span> props <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb164-5" title="5">  <span class="op">&lt;</span>PetDetailList pet<span class="op">={</span><span class="va">props</span>.<span class="at">pet</span><span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb164-6" title="6"><span class="op">;</span></a>
<a class="sourceLine" id="cb164-7" title="7"></a>
<a class="sourceLine" id="cb164-8" title="8"><span class="im">export</span> <span class="im">default</span> PetDetails<span class="op">;</span></a></code></pre></div>
<p>Refresh your page. You should now see the <code>PetDetailList</code> in the <em>Components</em> tab. It’s props should have all of data for the pet on it. You should also see the “Details” headline in the rendered HTML, too.</p>
<p>The next step is to create the <code>PetInformationItem</code> component to fill out that <code>dl</code> just yearning for content in the <code>PetDetailList</code> component.</p>
<h2 id="the-pet-information-item-component-3">The pet information item component</h2>
<p><strong>Note</strong>: The following steps will introduce an error that you will fix. This is so you can get a feel for what kind of errors you will see when working with React.</p>
<p><strong>Mira’s Note</strong>: The following will not actually introduce an error for the reason provided, because there is no missing pass-down of props in the chain of nested components if you follow the instructions. The error described after it, however, will show.</p>
<p>Create a new file, <strong>src/PetInformationItem.js</strong>. It will contain a function-based component that needs data to render, so stub out the function with the “props” parameter. Don’t forget to import the React. Then, it needs to render two elements, the <code>dt</code> element and the <code>dd</code> element. Do that by wrapping a fragment around them.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb165-1" title="1"><span class="kw">&lt;dt&gt;</span>Name of property<span class="kw">&lt;/dt&gt;</span></a>
<a class="sourceLine" id="cb165-2" title="2"><span class="kw">&lt;dd&gt;</span>Value of property<span class="kw">&lt;/dd&gt;</span></a></code></pre></div>
<p>So, the code will look something like this.</p>
<pre class="jsx"><code>import React from &#39;react&#39;;

const PetInformationItem = props =&gt;
  &lt;&gt;
    &lt;dt&gt;{props.name}&lt;/dt&gt;
    {/* Replace this with the dd element and value */}
  &lt;/&gt;
;

export default PetInformationItem;</code></pre>
<p>Replace the comment with a <code>dd</code> JSX element that has <code>props.value</code> as its content, similar to how the <code>dt</code> has <code>props.name</code> as its content.</p>
<p>That implies an expectation that this component <em>needs</em> a property named “name” that will be used to render the <code>dt</code> element, and it <em>needs</em> a property named “value” to render the <code>dd</code> element.</p>
<p>Once you have that done, it’s time to use it in the <code>PetDetailList</code> components. Go back to <strong>src/PetDetailList.js</strong>. Import the <code>PetInformationItem</code> component. You will use it three times, to show the name, age, and pet type of the pet. Here’s the first one. Just put it in there and save it because you have to investigate an error.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb167-1" title="1"><span class="kw">const</span> PetDetailList <span class="op">=</span> props <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb167-2" title="2">  <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb167-3" title="3">    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Details&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb167-4" title="4">    <span class="op">&lt;</span>dl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb167-5" title="5">      <span class="op">&lt;</span>PetInformationItem name<span class="op">=</span><span class="st">&quot;Name&quot;</span> value<span class="op">={</span><span class="va">props</span>.<span class="va">pet</span>.<span class="at">name</span><span class="op">}</span>/&gt;</a>
<a class="sourceLine" id="cb167-6" title="6">    &lt;/dl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb167-7" title="7">  &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb167-8" title="8"><span class="op">;</span></a></code></pre></div>
<p>This shows that <code>PetDetailList</code> now has an expectation that <code>props</code> will have a “name” property, an “age” property, and a “PetType” property that will have a “type” property on it! That’s a lot of expectations…</p>
<p>If you refresh your page, an error might occur.</p>
<figure>
<img src="images/create-react-app-with-property-error.png" alt="Petrack PetDetails with error" /><figcaption>Petrack PetDetails with error</figcaption>
</figure>
<p>The <em>Create React App</em> reports the error for you in the browser’s main window. This is nice so that you don’t have to go mucking about the console to try to determine what went wrong.</p>
<p>In the above screen shot, it complains that it cannot get the “property ‘name’ of undefined”. If you get this error, make sure you are passing down the <code>pet</code> prop from the <code>App</code> component all the way down to the <code>PetDetailList</code> component. You can see all the props for each component in the Chrome dev tools Component tab.</p>
<p>The following conditions trigger that same error but for a different reason.</p>
<p>In the <code>src/index.js</code> file, you render <code>App</code> twice. Once before the fetch call, and once after the fetch response comes back. <strong>NOTE: This is NOT the normal way to render the App after a fetch call. You will be learning a better way to use fetch calls with React tomorrow.</strong></p>
<p>Your <code>src/index.js</code> should now look like this:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb168-1" title="1"><span class="co">// ... imports</span></a>
<a class="sourceLine" id="cb168-2" title="2"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb168-3" title="3">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb168-4" title="4">    <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb168-5" title="5">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb168-6" title="6">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb168-7" title="7">)<span class="op">;</span></a>
<a class="sourceLine" id="cb168-8" title="8"></a>
<a class="sourceLine" id="cb168-9" title="9">(<span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb168-10" title="10">  <span class="kw">const</span> url <span class="op">=</span> <span class="st">&#39;https://polar-beach-08187.herokuapp.com/api/pets/2&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb168-11" title="11">  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(url)<span class="op">;</span></a>
<a class="sourceLine" id="cb168-12" title="12">  <span class="cf">if</span> (<span class="va">response</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb168-13" title="13">    <span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb168-14" title="14">    <span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb168-15" title="15">      <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb168-16" title="16">        <span class="op">&lt;</span>App pet<span class="op">={</span>pet<span class="op">}</span> /&gt;   <span class="op">{</span><span class="co">/* Now, with data */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb168-17" title="17">      &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb168-18" title="18">      <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb168-19" title="19">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb168-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb168-21" title="21"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>If you refresh your page, you should see the following error.</p>
<figure>
<img src="images/create-react-app-with-property-error.png" alt="Petrack PetDetails with error" /><figcaption>Petrack PetDetails with error</figcaption>
</figure>
<p>Can you see where that’s happening in the <strong>PetDetailList.js</strong> file? Take a moment to figure out where the error is being thrown.</p>
<p>If you identified the expression <code>props.pet.name</code>, then you got it! Remember that when the React first renders the virtual DOM, it has <em>no data</em>. That doesn’t come until later, after the AJAX call completes. There are <em>so many</em> ways to fix this but <strong>only one</strong> is idiomatic React. That is the use of <code>defaultProps</code>.</p>
<p>Recall that the <code>PetDetailList</code> component has an expectation that the <code>props</code> value should have a “pet” property that is an object. You can specify a default value for the “pet” property for the <code>PetDetails</code> component by putting the following code <em>after</em> the function declaration.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb169-1" title="1"><span class="va">PetDetailList</span>.<span class="at">defaultProps</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb169-2" title="2">  <span class="dt">pet</span><span class="op">:</span> <span class="op">{},</span></a>
<a class="sourceLine" id="cb169-3" title="3"><span class="op">};</span></a></code></pre></div>
<p>This tells React that, when the <code>PetDetailList</code> renders, if the “pet” property of <code>props</code> is undefined, then it should use the default value specified in the assignment. This is a built-in React feature and fixes the problem.</p>
<p>Refresh the page. You should now see the page render and, when the AJAX call completes, the name “Mog” to appear.</p>
<p>Now, add the other two <code>PetInformationItem</code> calls. One should have the name “Age” and the value of <code>props.pet.age</code>. The second should have the name “Type” and the value of <code>props.pet.PetType.type</code>. That will cause another error, so take care of it in the <code>defaultProps</code>.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-information-data-load.gif" alt="Petrack PetDetails before and after load" /><figcaption>Petrack PetDetails before and after load</figcaption>
</figure>
<p>If it’s hard to see the before load, comment out the async function in the <code>src/index.js</code> to see what the page looks like before the fetch call is made.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb170-1" title="1"><span class="co">// ... src/index.js</span></a>
<a class="sourceLine" id="cb170-2" title="2"></a>
<a class="sourceLine" id="cb170-3" title="3"><span class="co">// (async () =&gt; {</span></a>
<a class="sourceLine" id="cb170-4" title="4"><span class="co">//   const url = &#39;https://polar-beach-08187.herokuapp.com/api/pets/2&#39;;</span></a>
<a class="sourceLine" id="cb170-5" title="5"><span class="co">//   const response = await fetch(url);</span></a>
<a class="sourceLine" id="cb170-6" title="6"><span class="co">//   if (response.ok) {</span></a>
<a class="sourceLine" id="cb170-7" title="7"><span class="co">//     const pet = await response.json();</span></a>
<a class="sourceLine" id="cb170-8" title="8"><span class="co">//     ReactDOM.render(</span></a>
<a class="sourceLine" id="cb170-9" title="9"><span class="co">//       &lt;React.StrictMode&gt;</span></a>
<a class="sourceLine" id="cb170-10" title="10"><span class="co">//         &lt;App pet={pet} /&gt;   {/* Now, with data */}</span></a>
<a class="sourceLine" id="cb170-11" title="11"><span class="co">//       &lt;/React.StrictMode&gt;,</span></a>
<a class="sourceLine" id="cb170-12" title="12"><span class="co">//       document.getElementById(&#39;root&#39;)</span></a>
<a class="sourceLine" id="cb170-13" title="13"><span class="co">//     );</span></a>
<a class="sourceLine" id="cb170-14" title="14"><span class="co">//   }</span></a>
<a class="sourceLine" id="cb170-15" title="15"><span class="co">// })();</span></a></code></pre></div>
<p>If you want that yucky bumpy load to not happen, consider creating a default value for the “value” property in <code>PetInformationItem</code>. In the following screenshot, you can see what happens when you set a default value of “loading…” for the “value” property in <code>PetInformationItem</code>.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/intro-to-react/assets/react-information-with-loading-message-data-load.gif" alt="Petrack PetDetails with loading message" /><figcaption>Petrack PetDetails with loading message</figcaption>
</figure>
<h2 id="what-youve-seen-3">What you’ve seen</h2>
<p>In this part of building a React application, you have</p>
<ul>
<li>Passed data from an AJAX call (or really wherever) into a React component</li>
<li>Accessed data using the conventionally-named <code>props</code> parameter in your function-based components</li>
<li>Passed data from a “parent” component to a “child” component</li>
<li>Used default values to prevent errors and improve the aesthetic experience of using your application</li>
</ul>
<p>Just one more step and you’re done!</p>
<hr />
<h1 id="jsx-walk-through-pet-details-part-2-1">JSX Walk-Through: Pet Details, Part 2</h1>
<p>All you have left is to create a list of owners with links.</p>
<ul>
<li><code>PetDetailPage</code>: Done</li>
<li><code>Navigation</code>: Done</li>
<li><code>PetDetails</code>: Modified in this step</li>
<li><code>PetDetailList</code>: Done</li>
<li><code>PetInformationItem</code>: Done</li>
<li><code>OwnersList</code>: Created in this step</li>
<li><code>OwnerLink</code>Created in this step</li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<p>You’re almost done. Now, you get to handle a collection of data from the owners.</p>
<h2 id="stub-out-the-owners-list-component-2">Stub out the owners list component</h2>
<p>You’ve done this four other times, so it’s pretty straight forward.</p>
<ul>
<li>Create the <strong>src/OwnersList.js</strong> file. In it,
<ul>
<li>Import the React object</li>
<li>Create the function-based component named <code>OwnersList</code> with a <code>props</code> argument that uses a <code>React.Fragment</code> as its element</li>
<li>Add a child that is an ‘h2’ with the content “Owners”</li>
<li>Using <code>defaultProps</code>, add a default property value for “owners” and set it to an empty array because this component will expect an array of owner data</li>
<li>Export the <code>OwnersList</code> as the default export</li>
</ul></li>
<li>In the <strong>PetDetails.js</strong> file,
<ul>
<li>Import the <code>OwnersList</code> component</li>
<li>Add it as another child element of the <code>PetDetailPage</code> component after the <code>PetDetailList</code></li>
<li>Wrap both the <code>PetDetailList</code> and <code>OwnersList</code> in a <code>Fragment</code>.</li>
<li>Pass in the owners to the <code>OwnersList</code> component in a property named “owners” like this <code>{props.pet.Owners}</code> which will pass in the array of owners for the pet</li>
<li>Fix the error with a default value for the “pet” property</li>
</ul></li>
</ul>
<pre class="jsx"><code>// src/PetDetails.js
import React from &#39;react&#39;;

import OwnersList from &#39;./OwnersList&#39;;
import PetDetailList from &#39;./PetDetailList&#39;;

const PetDetails = props =&gt;
  &lt;&gt;
    &lt;PetDetailList pet={props.pet} /&gt;
    &lt;OwnersList owners={props.pet.Owners} /&gt;
  &lt;/&gt;
;

PetDetails.defaultProps = {
  pet: {
    PetType: {},
  },
};

export default PetDetails;</code></pre>
<p>Refresh the page and make sure everything still works.</p>
<figure>
<img src="images/react-pet-detail-with-owners-headline.png" alt="Petrack with owners headline" /><figcaption>Petrack with owners headline</figcaption>
</figure>
<h2 id="dealing-with-the-list-2">Dealing with the list</h2>
<p><strong>Note</strong>: This section introduces an error that you will fix. It is a common error about how to create React elements from lists. You may see it often. This way, you will know how to fix it, too.</p>
<p>Back in <strong>OwnersList.js</strong>, you want a <code>ul</code> to follow the <code>h2</code>.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb172-1" title="1"><span class="kw">const</span> OwnersList <span class="op">=</span> props <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb172-2" title="2">  <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb172-3" title="3">    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Owners&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb172-4" title="4">    <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb172-5" title="5">      <span class="op">{</span><span class="co">/* Create li elements here */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb172-6" title="6">    &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb172-7" title="7">  &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb172-8" title="8"><span class="op">;</span></a></code></pre></div>
<p>Here’s the thing. You have an array of owners. You want to turn them into some list items. For each owner, you want to <em>map</em> that to a list item. And, therein lies the hint. Since the value in <code>props.owners</code> is an array, you can use the <code>map</code> function to generate another array of React elements and plop them in there! Give it a go with this code. Replace the comment about where list items go above with this line of code.</p>
<pre class="jsx"><code>{ props.owners.map(owner =&gt;
  &lt;li&gt;{owner.firstName}&lt;/li&gt;
)}</code></pre>
<p>Refresh the page. What happens? You should now see “Human” for each of the list items. That’s great! In the console, there’s an error. That’s sad!</p>
<figure>
<img src="images/react-pet-detail-owners-list-with-key-error.png" alt="Petrack with owners list and key error" /><figcaption>Petrack with owners list and key error</figcaption>
</figure>
<p>In this last step, you’ve changed the way you’re passing children into the <code>React.createElement</code>. Up until now, you’ve had discrete single elements as children, like in <strong>PetDetailList.js</strong> where you have this code.</p>
<pre class="jsx"><code>const PetDetailList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Details&lt;/h2&gt;
    &lt;dl&gt;
      &lt;PetInformationItem name=&quot;Name&quot; value={props.pet.name}/&gt;
      &lt;PetInformationItem name=&quot;Age&quot; value={props.pet.age}/&gt;
      &lt;PetInformationItem name=&quot;Type&quot; value={props.pet.PetType.type}/&gt;
    &lt;/dl&gt;
  &lt;/&gt;
;</code></pre>
<p>Each of <code>PetInformationItem</code> elements is a different, discrete, and separate child for the <code>dl</code> element.</p>
<p>The code in <strong>OwnersList.js</strong>, this code,</p>
<pre class="jsx"><code>const OwnersList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Owners&lt;/h2&gt;
    &lt;ul&gt;
      {props.owners.map(owner =&gt;
        &lt;li&gt;{owner.firstName}&lt;/li&gt;
      )}
    &lt;/ul&gt;
  &lt;/&gt;
;</code></pre>
<p>in that, you have created an <em>array</em> of objects. Recall that when you call the <code>map</code> function on an array, it returns <em>another array</em>. React doesn’t care about this, but it would like a little help in tracking each of those entries in the virtual DOM that it builds. That’s what the error message is about, giving React a little help by providing a “key” property for each of the elements that you’re creating in the array. The value of the “key” property must be unique and stable, that is, for a given object (like an owner named “Human One” with an id of 7), the value returned must always be the same. Luckily, because you have the id of the owner, you can use that because that id value is tied to a primary key, somewhere, and should never change for this object. The name can change, of course. But, the id will likely never change.</p>
<p>Add a “key” property to the <code>li</code> element and set it equal to the id of the owner object, like this.</p>
<pre class="jsx"><code>&lt;li key={owner.id}&gt;{owner.firstName}&lt;/li&gt;</code></pre>
<p>Now, the error in the console goes away.</p>
<p>Back to the <code>OwnersList</code> component, look at the formatting, the indentation that you see in the code.</p>
<pre class="jsx"><code>const OwnersList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Owners&lt;/h2&gt;
    &lt;ul&gt;
      {props.owners.map(owner =&gt;
        &lt;li key={owner.id}&gt;
          {owner.firstName}
        &lt;/li&gt;
      )}
    &lt;/ul&gt;
  &lt;/&gt;
;</code></pre>
<p>That, too, is idiomatic React, the <em>React</em> way of doing things. You’ll see that kind of code all over the React world.</p>
<h2 id="the-owner-link-component-4">The owner link component</h2>
<p>While it’s nice, and all, to see the owner’s first name in the list, the actual page has a link to the owner page with the format “last name, first name”. Time to create the (last!) component of this walk-through.</p>
<p>Create a new file named <strong>src/OwnerLink.js</strong>. In it, do the following:</p>
<ul>
<li>Import the React object</li>
<li>Create a new function-based component named <code>OwnerLink</code> that accepts data that has
<ul>
<li><code>a</code> as its element</li>
<li>An object literal with the property name “href” and the value of the “href” property passed in through the <code>props</code></li>
<li>A string as its child which contains the last name and the first name</li>
</ul></li>
<li>Export the component as the default export</li>
</ul>
<p>Once you have that, import the <code>OwnerLink</code> component into the <strong>src/OwnersList.js</strong> file. Now, replace this line in <code>OwnersList</code></p>
<pre class="jsx"><code>{owner.firstName}</code></pre>
<p>with an <code>OwnerLink</code> component with <em>three</em> attributes: “href”, “firstName”, and “lastName”. Those are the three properties expected inside the component. Use the curly brace syntax to pass in the appropriate values of the <code>owner</code>. This is something you haven’t done, yet. Try to think through the problem of how to pass in <em>multiple</em> property values. If you get stuck and can’t get it after about ten minutes, ask for help!</p>
<p>Refresh the page. If everything works, you’re done!</p>
<h2 id="what-youve-done-here-2">What you’ve done, here</h2>
<p>In this part of the walk-through, you used a collection to render a collection of React elements. You found out that using a collection like that requires you to provide a “key” property that has a stable, unique value. Once you had that, React would gladly manage that collection of objects in its virtual DOM.</p>
<h2 id="what-youve-done-overall-2">What you’ve done, overall</h2>
<p>You have used JSX to do some amazing things, here.</p>
<ul>
<li>You reinforced the best practice of putting one React component in its own file (module) and exporting it as the default value of the module</li>
<li>You learned that JSX compiles to <code>React.createElement</code></li>
<li>You learned that <code>&lt;&gt;</code> and <code>&lt;/&gt;</code> are shorthand literal for the often-used <code>React.Fragment</code> element</li>
<li>You used <code>defaultProps</code> to make sure that components always had some valid values to work with</li>
<li>You used <em>pure functional components</em> all the way through this, which means that none of the components used any other data than what was given to it</li>
<li>You are intimately familiar with how React creates its elements, now, which means there will be no magical thinking about JSX when you use it</li>
</ul>
<hr />
<p>All you have left is to create a list of owners with links.</p>
<ul>
<li><code>PetDetailPage</code>: Done</li>
<li><code>Navigation</code>: Done</li>
<li><code>PetDetails</code>: Modified in this step</li>
<li><code>PetDetailList</code>: Done</li>
<li><code>PetInformationItem</code>: Done</li>
<li><code>OwnersList</code>: Created in this step</li>
<li><code>OwnerLink</code>Created in this step</li>
</ul>
<figure>
<img src="images/pettrack-pet-detail-all-components-with-details-list.png" alt="Petrack component analysis" /><figcaption>Petrack component analysis</figcaption>
</figure>
<p>You’re almost done. Now, you get to handle a collection of data from the owners.</p>
<h2 id="stub-out-the-owners-list-component-3">Stub out the owners list component</h2>
<p>You’ve done this four other times, so it’s pretty straight forward.</p>
<ul>
<li>Create the <strong>src/OwnersList.js</strong> file. In it,
<ul>
<li>Import the React object</li>
<li>Create the function-based component named <code>OwnersList</code> with a <code>props</code> argument that uses a <code>React.Fragment</code> as its element</li>
<li>Add a child that is an ‘h2’ with the content “Owners”</li>
<li>Using <code>defaultProps</code>, add a default property value for “owners” and set it to an empty array because this component will expect an array of owner data</li>
<li>Export the <code>OwnersList</code> as the default export</li>
</ul></li>
<li>In the <strong>PetDetails.js</strong> file,
<ul>
<li>Import the <code>OwnersList</code> component</li>
<li>Add it as another child element of the <code>PetDetailPage</code> component after the <code>PetDetailList</code></li>
<li>Wrap both the <code>PetDetailList</code> and <code>OwnersList</code> in a <code>Fragment</code>.</li>
<li>Pass in the owners to the <code>OwnersList</code> component in a property named “owners” like this <code>{props.pet.Owners}</code> which will pass in the array of owners for the pet</li>
<li>Fix the error with a default value for the “pet” property</li>
</ul></li>
</ul>
<pre class="jsx"><code>// src/PetDetails.js
import React from &#39;react&#39;;

import OwnersList from &#39;./OwnersList&#39;;
import PetDetailList from &#39;./PetDetailList&#39;;

const PetDetails = props =&gt;
  &lt;&gt;
    &lt;PetDetailList pet={props.pet} /&gt;
    &lt;OwnersList owners={props.pet.Owners} /&gt;
  &lt;/&gt;
;

PetDetails.defaultProps = {
  pet: {
    PetType: {},
  },
};

export default PetDetails;</code></pre>
<p>Refresh the page and make sure everything still works.</p>
<figure>
<img src="images/react-pet-detail-with-owners-headline.png" alt="Petrack with owners headline" /><figcaption>Petrack with owners headline</figcaption>
</figure>
<h2 id="dealing-with-the-list-3">Dealing with the list</h2>
<p><strong>Note</strong>: This section introduces an error that you will fix. It is a common error about how to create React elements from lists. You may see it often. This way, you will know how to fix it, too.</p>
<p>Back in <strong>OwnersList.js</strong>, you want a <code>ul</code> to follow the <code>h2</code>.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb180-1" title="1"><span class="kw">const</span> OwnersList <span class="op">=</span> props <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb180-2" title="2">  <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb180-3" title="3">    <span class="op">&lt;</span>h2<span class="op">&gt;</span>Owners&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb180-4" title="4">    <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb180-5" title="5">      <span class="op">{</span><span class="co">/* Create li elements here */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb180-6" title="6">    &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb180-7" title="7">  &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb180-8" title="8"><span class="op">;</span></a></code></pre></div>
<p>Here’s the thing. You have an array of owners. You want to turn them into some list items. For each owner, you want to <em>map</em> that to a list item. And, therein lies the hint. Since the value in <code>props.owners</code> is an array, you can use the <code>map</code> function to generate another array of React elements and plop them in there! Give it a go with this code. Replace the comment about where list items go above with this line of code.</p>
<pre class="jsx"><code>{ props.owners.map(owner =&gt;
  &lt;li&gt;{owner.firstName}&lt;/li&gt;
)}</code></pre>
<p>Refresh the page. What happens? You should now see “Human” for each of the list items. That’s great! In the console, there’s an error. That’s sad!</p>
<figure>
<img src="images/react-pet-detail-owners-list-with-key-error.png" alt="Petrack with owners list and key error" /><figcaption>Petrack with owners list and key error</figcaption>
</figure>
<p>In this last step, you’ve changed the way you’re passing children into the <code>React.createElement</code>. Up until now, you’ve had discrete single elements as children, like in <strong>PetDetailList.js</strong> where you have this code.</p>
<pre class="jsx"><code>const PetDetailList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Details&lt;/h2&gt;
    &lt;dl&gt;
      &lt;PetInformationItem name=&quot;Name&quot; value={props.pet.name}/&gt;
      &lt;PetInformationItem name=&quot;Age&quot; value={props.pet.age}/&gt;
      &lt;PetInformationItem name=&quot;Type&quot; value={props.pet.PetType.type}/&gt;
    &lt;/dl&gt;
  &lt;/&gt;
;</code></pre>
<p>Each of <code>PetInformationItem</code> elements is a different, discrete, and separate child for the <code>dl</code> element.</p>
<p>The code in <strong>OwnersList.js</strong>, this code,</p>
<pre class="jsx"><code>const OwnersList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Owners&lt;/h2&gt;
    &lt;ul&gt;
      {props.owners.map(owner =&gt;
        &lt;li&gt;{owner.firstName}&lt;/li&gt;
      )}
    &lt;/ul&gt;
  &lt;/&gt;
;</code></pre>
<p>in that, you have created an <em>array</em> of objects. Recall that when you call the <code>map</code> function on an array, it returns <em>another array</em>. React doesn’t care about this, but it would like a little help in tracking each of those entries in the virtual DOM that it builds. That’s what the error message is about, giving React a little help by providing a “key” property for each of the elements that you’re creating in the array. The value of the “key” property must be unique and stable, that is, for a given object (like an owner named “Human One” with an id of 7), the value returned must always be the same. Luckily, because you have the id of the owner, you can use that because that id value is tied to a primary key, somewhere, and should never change for this object. The name can change, of course. But, the id will likely never change.</p>
<p>Add a “key” property to the <code>li</code> element and set it equal to the id of the owner object, like this.</p>
<pre class="jsx"><code>&lt;li key={owner.id}&gt;{owner.firstName}&lt;/li&gt;</code></pre>
<p>Now, the error in the console goes away.</p>
<p>Back to the <code>OwnersList</code> component, look at the formatting, the indentation that you see in the code.</p>
<pre class="jsx"><code>const OwnersList = props =&gt;
  &lt;&gt;
    &lt;h2&gt;Owners&lt;/h2&gt;
    &lt;ul&gt;
      {props.owners.map(owner =&gt;
        &lt;li key={owner.id}&gt;
          {owner.firstName}
        &lt;/li&gt;
      )}
    &lt;/ul&gt;
  &lt;/&gt;
;</code></pre>
<p>That, too, is idiomatic React, the <em>React</em> way of doing things. You’ll see that kind of code all over the React world.</p>
<h2 id="the-owner-link-component-5">The owner link component</h2>
<p>While it’s nice, and all, to see the owner’s first name in the list, the actual page has a link to the owner page with the format “last name, first name”. Time to create the (last!) component of this walk-through.</p>
<p>Create a new file named <strong>src/OwnerLink.js</strong>. In it, do the following:</p>
<ul>
<li>Import the React object</li>
<li>Create a new function-based component named <code>OwnerLink</code> that accepts data that has
<ul>
<li><code>a</code> as its element</li>
<li>An object literal with the property name “href” and the value of the “href” property passed in through the <code>props</code></li>
<li>A string as its child which contains the last name and the first name</li>
</ul></li>
<li>Export the component as the default export</li>
</ul>
<p>Once you have that, import the <code>OwnerLink</code> component into the <strong>src/OwnersList.js</strong> file. Now, replace this line in <code>OwnersList</code></p>
<pre class="jsx"><code>{owner.firstName}</code></pre>
<p>with an <code>OwnerLink</code> component with <em>three</em> attributes: “href”, “firstName”, and “lastName”. Those are the three properties expected inside the component. Use the curly brace syntax to pass in the appropriate values of the <code>owner</code>. This is something you haven’t done, yet. Try to think through the problem of how to pass in <em>multiple</em> property values. If you get stuck and can’t get it after about ten minutes, ask for help!</p>
<p>Refresh the page. If everything works, you’re done!</p>
<h2 id="what-youve-done-here-3">What you’ve done, here</h2>
<p>In this part of the walk-through, you used a collection to render a collection of React elements. You found out that using a collection like that requires you to provide a “key” property that has a stable, unique value. Once you had that, React would gladly manage that collection of objects in its virtual DOM.</p>
<h2 id="what-youve-done-overall-3">What you’ve done, overall</h2>
<p>You have used JSX to do some amazing things, here.</p>
<ul>
<li>You reinforced the best practice of putting one React component in its own file (module) and exporting it as the default value of the module</li>
<li>You learned that JSX compiles to <code>React.createElement</code></li>
<li>You learned that <code>&lt;&gt;</code> and <code>&lt;/&gt;</code> are shorthand literal for the often-used <code>React.Fragment</code> element</li>
<li>You used <code>defaultProps</code> to make sure that components always had some valid values to work with</li>
<li>You used <em>pure functional components</em> all the way through this, which means that none of the components used any other data than what was given to it</li>
<li>You are intimately familiar with how React creates its elements, now, which means there will be no magical thinking about JSX when you use it</li>
</ul>
<hr />
<h1 id="week-14-day-3-react-with-state" data-ignore="true">WEEK-14 DAY-3<br><em>React With State</em></h1>
<hr />
<h1 id="react-class-components-learning-objectives">React Class Components Learning Objectives</h1>
<p>As you’ve learned the fundamentals of React, you’ve seen how to use functions to create components. You can also create components using ES2015 classes. After reading and practicing, you should be able to:</p>
<ul>
<li>Create a simple React application by removing items and content from a project generated by the Create React App default template</li>
<li>Create a simple React application using a custom Create React App template</li>
<li>Create a React component using ES2015 class syntax</li>
<li>Describe when it’s appropriate to use a class component</li>
<li>Initialize and update state within a class component</li>
<li>Provide default values for a class component’s props</li>
<li>Add event listeners to elements</li>
<li>Prevent event default behavior</li>
<li>Safely use the <code>this</code> keyword within event handlers</li>
<li>Describe what the React <code>SyntheticEvent</code> object is and the role it plays in handling events</li>
<li>Create a React class component containing a simple form</li>
<li>Define a single event handler method to handle <code>onChange</code> events for multiple <code>&lt;input&gt;</code> elements</li>
<li>Add a <code>&lt;textarea&gt;</code> element to a form</li>
<li>Add a <code>&lt;select&gt;</code> element to a form</li>
<li>Implement form validations</li>
<li>Describe the lifecycle of a React component</li>
<li>Recall that the commonly used component lifecycle methods include <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code></li>
<li>Use the <code>componentDidMount</code> component lifecycle method to fetch data from an API</li>
<li>Utilize official documentation to gain an understanding of how new technology works</li>
</ul>
<hr />
<h1 id="simple-react-project">Simple React Project</h1>
<p>While creating a new React project using Create React App is easy to do, the application that the default template generates contains items and content that aren’t essential for learning React. Distilling the generated application down to its essential items and content removes all distractions and allows you to focus on the basics.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Create a simple React application using a custom Create React App template; and,</li>
<li>Create a simple React application by removing items and content from a project generated by the Create React App default template.</li>
</ul>
<h2 id="using-a-custom-template">Using a custom template</h2>
<p>Deleting files from the standard <em>Create React App</em> template can get tedious. To help save you time, App Academy has a custom template that you can use with Create React App to generate a simple React application!</p>
<p>Just run the following command:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb187-1" title="1"><span class="ex">npx</span> create-react-app my-app --template @appacademy/simple</a></code></pre></div>
<p>Feel free to change <code>my-app</code> to whatever you’d like. Once the command completes, browse to the generated application folder and run <code>npm start</code> to start your application!</p>
<h2 id="if-you-like-deleting-files">If you like deleting files…</h2>
<p>If you still just want to use the template that comes with <em>Create React App</em> and want to delete the files yourself, here’s that guide for you to follow.</p>
<p>To start, use Create React App to create a new application:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb188-1" title="1"><span class="ex">npx</span> create-react-app simple-project</a></code></pre></div>
<p>Then open the <code>simple-project</code> folder in your code editor.</p>
<h3 id="simplifying-the-public-folder">Simplifying the <code>public</code> folder</h3>
<p>In the <code>public</code> folder, you’re only going to keep the <code>index.html</code> file, so remove all of the following:</p>
<ul>
<li><code>favicon.ico</code></li>
<li><code>robots.txt</code></li>
<li><code>logo192.png</code></li>
<li><code>logo512.png</code></li>
<li><code>manifest.json</code></li>
</ul>
<p>The <code>favicon.ico</code> and <code>robots.txt</code> files are useful for applications that will actually be released and used by actual users, but not necessary for learning projects. The <code>logo192.png</code> and <code>logo512.png</code> image files are referenced in the <code>manifest.json</code> file and are <a href="https://developer.chrome.com/extensions/manifest/icons">the icons that browsers use in various contexts</a> (home screen, application menu, etc.) The <a href="https://developers.google.com/web/fundamentals/web-app-manifest/"><code>manifest.json</code> file</a> provides the metadata that’s used when your web app is installed on a user’s mobile device or desktop.</p>
<p>Now you can simplify the content of the <code>index.html</code> to this:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb189-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb189-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb189-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb189-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb189-5" title="5">    <span class="kw">&lt;title&gt;</span>React App<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb189-6" title="6">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb189-7" title="7">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb189-8" title="8">    <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;root&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb189-9" title="9">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb189-10" title="10"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<p>To get to the above HTML, you can:</p>
<ul>
<li>Remove the unnecessary lines of code until you’re left with the above code; or</li>
<li>You can remove all of the code and use the <code>html:5</code> Emmet command to generate the boilerplate HTML and add a <code>&lt;div&gt;</code> element with an <code>id</code> attribute set to <code>root</code> (this is the element that your React application will render to).</li>
</ul>
<h3 id="simplifying-the-src-folder">Simplifying the <code>src</code> folder</h3>
<p>In the <code>src</code> folder, you’re going to keep the following files:</p>
<ul>
<li><code>App.js</code></li>
<li><code>index.css</code></li>
<li><code>index.js</code></li>
</ul>
<p>And remove all of the following:</p>
<ul>
<li><code>App.css</code></li>
<li><code>App.test.js</code></li>
<li><code>logo.svg</code></li>
<li><code>serviceWorker.js</code></li>
<li><code>setupTests.js</code></li>
</ul>
<p>The <code>App.css</code> file is where you’d add styles that are scoped to the <code>App</code> component and the <code>App.test.js</code> file is where you’d write unit tests for the <code>App</code> component. While you’re learning React, styling components and writing unit tests won’t be a focus. If you want to add some basic styles for your application, you can use the <code>index.css</code> file to add global styles.</p>
<p>The <code>logo.svg</code> file was part of the visual design of the generated application. The <code>serviceWorker.js</code> file contains code that registers a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API">service worker</a> which allows the application load faster on subsequent visits if/when the application is released into production. The <code>setupTests.js</code> file contains a single import statement for a module that helps make it easier to write unit test assertions on DOM nodes.</p>
<p>Now you can update the contents of the <code>App.js</code>, <code>index.css</code>, and <code>index.js</code> files to the following:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb190-1" title="1"><span class="co">// ./src/App.js</span></a>
<a class="sourceLine" id="cb190-2" title="2"></a>
<a class="sourceLine" id="cb190-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb190-4" title="4"></a>
<a class="sourceLine" id="cb190-5" title="5"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb190-6" title="6">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb190-7" title="7">    <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hello world<span class="op">!</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb190-8" title="8">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb190-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb190-10" title="10"></a>
<a class="sourceLine" id="cb190-11" title="11"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<div class="sourceCode" id="cb191"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb191-1" title="1"><span class="co">/* ./src/index.css */</span></a>
<a class="sourceLine" id="cb191-2" title="2"></a>
<a class="sourceLine" id="cb191-3" title="3"><span class="co">/* </span><span class="al">TODO</span><span class="co"> Add site wide styles */</span></a></code></pre></div>
<div class="sourceCode" id="cb192"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb192-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb192-2" title="2"></a>
<a class="sourceLine" id="cb192-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb192-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb192-5" title="5"><span class="im">import</span> <span class="st">&#39;./index.css&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb192-6" title="6"><span class="im">import</span> App <span class="im">from</span> <span class="st">&#39;./App&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb192-7" title="7"></a>
<a class="sourceLine" id="cb192-8" title="8"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb192-9" title="9">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb192-10" title="10">    <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb192-11" title="11">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb192-12" title="12">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb192-13" title="13">)<span class="op">;</span></a></code></pre></div>
<blockquote>
<p>For your reference, here’s a repo containing the final simple React project: <a href="https://github.com/appacademy-starters/react-simple-project">react simple project</a></p>
</blockquote>
<h2 id="what-you-learned-1">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Create a simple React application by removing items and content from a project generated by the Create React App default template; and</li>
<li>Create a simple React application using a custom Create React App template.</li>
</ul>
<hr />
<h1 id="react-class-components">React Class Components</h1>
<p>As you’ve learned the fundamentals of React, you’ve seen how to use functions to create components to develop the user interface for a frontend application. Unsurprisingly, as with most things related to software development, there’s more than one way to create components in React.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Create a React component using ES2015 class syntax;</li>
<li>Describe when it’s appropriate to use a class component;</li>
<li>Initialize and update state within a class component; and</li>
<li>Provide default values for props.</li>
</ul>
<h2 id="hello-class-components">Hello class components!</h2>
<p>Up to this point, you’ve written components using functions:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb193-1" title="1"><span class="co">// ./src/Message.js</span></a>
<a class="sourceLine" id="cb193-2" title="2"></a>
<a class="sourceLine" id="cb193-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb193-4" title="4"></a>
<a class="sourceLine" id="cb193-5" title="5"><span class="kw">const</span> Message <span class="op">=</span> (props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb193-6" title="6">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb193-7" title="7">    <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb193-8" title="8">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb193-9" title="9"><span class="op">};</span></a>
<a class="sourceLine" id="cb193-10" title="10"></a>
<a class="sourceLine" id="cb193-11" title="11"><span class="im">export</span> <span class="im">default</span> Message<span class="op">;</span></a></code></pre></div>
<p>But React also allows you to create components using ES2015 classes. Here’s the above function component rewritten as a class component:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb194-1" title="1"><span class="co">// ./src/Message.js</span></a>
<a class="sourceLine" id="cb194-2" title="2"></a>
<a class="sourceLine" id="cb194-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb194-4" title="4"></a>
<a class="sourceLine" id="cb194-5" title="5"><span class="kw">class</span> Message <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb194-6" title="6">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb194-7" title="7">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb194-8" title="8">      <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb194-9" title="9">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb194-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb194-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb194-12" title="12"></a>
<a class="sourceLine" id="cb194-13" title="13"><span class="im">export</span> <span class="im">default</span> Message<span class="op">;</span></a></code></pre></div>
<p>Every class component must extend (i.e. inherit) from <code>React.Component</code> and have a <code>render</code> method that returns the element(s) to render for the component.</p>
<p>Class components are used just like function components:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb195-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb195-2" title="2"></a>
<a class="sourceLine" id="cb195-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb195-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb195-5" title="5"><span class="im">import</span> Message <span class="im">from</span> <span class="st">&#39;./Message&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb195-6" title="6"></a>
<a class="sourceLine" id="cb195-7" title="7"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb195-8" title="8">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb195-9" title="9">    <span class="op">&lt;</span>Message text<span class="op">=</span><span class="st">&#39;Hello world!&#39;</span> /&gt;</a>
<a class="sourceLine" id="cb195-10" title="10">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb195-11" title="11">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb195-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>From just the above JSX code in the <code>index.js</code> file, you can’t tell if the <code>&lt;Message&gt;</code> component is written as a function or class component. Which approach that’s used is an internal implementation detail of the component. In fact, you can switch back and forth between the two approaches provided that you aren’t using a feature that’s only available in class components (more about this in just a bit).</p>
<h3 id="setting-and-accessing-props">Setting and accessing props</h3>
<p>Notice from this example of using the <code>Message</code> class component that props are set on class components just like you do with function components:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb196-1" title="1"><span class="op">&lt;</span>Message text<span class="op">=</span><span class="st">&#39;Hello world!&#39;</span> /&gt;</a></code></pre></div>
<p>To access props within a class component, use the <code>this.props</code> property:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb197-1" title="1"><span class="kw">class</span> Message <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb197-2" title="2">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb197-3" title="3">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb197-4" title="4">      <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb197-5" title="5">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb197-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb197-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>If your class component defines a <code>constructor</code> method that needs access to props, define a <code>props</code> parameter:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb198-1" title="1"><span class="kw">class</span> Message <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb198-2" title="2">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb198-3" title="3">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb198-4" title="4"></a>
<a class="sourceLine" id="cb198-5" title="5">    <span class="co">// </span><span class="al">TODO</span><span class="co"> Initialize state, etc.</span></a>
<a class="sourceLine" id="cb198-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb198-7" title="7"></a>
<a class="sourceLine" id="cb198-8" title="8">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb198-9" title="9">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb198-10" title="10">      <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb198-11" title="11">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb198-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb198-13" title="13"><span class="op">}</span></a></code></pre></div>
<p>Just be sure to call the <code>super</code> method and pass in the <code>props</code> parameter! Failing to do so will result in the following error:</p>
<pre><code>ReferenceError: Must call super constructor in derived class before accessing
&#39;this&#39; or returning from derived constructor</code></pre>
<blockquote>
<p>Remember, a component, whether it’s a function or class component, should never change its own props.</p>
</blockquote>
<h3 id="legacy-class-component-syntax">Legacy class component syntax</h3>
<p>In the early days of React, before using ES2015 classes was commonplace, components were usually created using the <code>React.createclass</code> function. You’ll still sometimes see this syntax in the wild. If in the future you ever find yourself needing to create a component using the <code>React.createclass</code> function when targeting newer versions of React, you’ll need to install a separate React module named <a href="https://reactjs.org/docs/react-without-es6.html"><code>create-react-class</code></a>.</p>
<h2 id="stateful-components">Stateful components</h2>
<p>So far, the above example class component behaves exactly as its function component counterpart. This might leave you wondering why you’d want or need to create a class component.</p>
<p><strong>One of the two reasons why you would use a Class component over a Function component is to add and manage local or internal state to your component. The second main reason to use a Class component is to use a component’s lifecycle methods.</strong> The following sections will focus on how to add and manage a component’s state. You’ll learn more about a component’s lifecycle (and the associated component lifecycle methods) later in a future reading.</p>
<h3 id="what-is-state">What is state?</h3>
<p>In contrast to props which are provided by the consumer or caller of the component, state is data that’s internal to a component. State is owned by the component where it’s defined and used. That’s why we say it’s “internal” or “local” to that component. Whereas props are not to be changed by a component, state is intended to be updated or mutated (you’ll see how to update state in just a bit). Together, props and state represent the data that’s used to determine how the component should behave and render.</p>
<h3 id="when-to-use-state">When to use state</h3>
<p>State should only be used when it’s absolutely necessary. If a bit of data is never going to change or if it is needed across the entire application, use props instead.</p>
<p>When you’re just learning React, it can be challenging to know when it’s okay to use state and when it’s not. State is often used when creating components that retrieve data from APIs or render forms. You’ll see examples of those kinds of components later in this lesson. To start, we’ll look at simple, contrived example of using state in just a bit.</p>
<blockquote>
<p>Function components are the simplest way to declare a component. If a component doesn’t need to use state or lifecycle methods, it should be written as a function component. A new feature in React, <a href="https://reactjs.org/docs/hooks-intro.html">hooks</a>, levels the playing field between function and class components, so that everything you can do in a class component can now be done with function components. You’ll learn about React hooks in a future lesson.</p>
</blockquote>
<h2 id="initializing-state">Initializing state</h2>
<p>When creating a stateful class component, you can use a class <code>constructor</code> method to initialize the <code>this.state</code> object.</p>
<p>Here’s a <code>RandomQuote</code> component that initializes two state properties, <code>this.state.quotes</code> and <code>this.state.currentQuoteIndex</code>, within its <code>constructor</code> method:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb200-1" title="1"><span class="co">// ./src/RandomQuote.js</span></a>
<a class="sourceLine" id="cb200-2" title="2"></a>
<a class="sourceLine" id="cb200-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb200-4" title="4"></a>
<a class="sourceLine" id="cb200-5" title="5"><span class="kw">class</span> RandomQuote <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb200-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb200-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb200-8" title="8"></a>
<a class="sourceLine" id="cb200-9" title="9">    <span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb200-10" title="10">      <span class="st">&#39;May the Force be with you.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb200-11" title="11">      <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no place like home.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb200-12" title="12">      <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">m the king of the world!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb200-13" title="13">      <span class="st">&#39;My mama always said life was like a box of chocolates.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb200-14" title="14">      <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">ll be back.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb200-15" title="15">    ]<span class="op">;</span></a>
<a class="sourceLine" id="cb200-16" title="16"></a>
<a class="sourceLine" id="cb200-17" title="17">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb200-18" title="18">      quotes<span class="op">,</span></a>
<a class="sourceLine" id="cb200-19" title="19">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb200-20" title="20">    <span class="op">};</span></a>
<a class="sourceLine" id="cb200-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb200-22" title="22"></a>
<a class="sourceLine" id="cb200-23" title="23">  <span class="at">getRandomInt</span>(max) <span class="op">{</span></a>
<a class="sourceLine" id="cb200-24" title="24">    <span class="cf">return</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">Math</span>.<span class="at">random</span>() <span class="op">*</span> <span class="va">Math</span>.<span class="at">floor</span>(max))<span class="op">;</span></a>
<a class="sourceLine" id="cb200-25" title="25">  <span class="op">}</span></a>
<a class="sourceLine" id="cb200-26" title="26"></a>
<a class="sourceLine" id="cb200-27" title="27">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb200-28" title="28">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb200-29" title="29">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb200-30" title="30">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Random Quote&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb200-31" title="31">        <span class="op">&lt;</span>p<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">quotes</span>[<span class="kw">this</span>.<span class="va">state</span>.<span class="at">currentQuoteIndex</span>]<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb200-32" title="32">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb200-33" title="33">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb200-34" title="34">  <span class="op">}</span></a>
<a class="sourceLine" id="cb200-35" title="35"><span class="op">}</span></a>
<a class="sourceLine" id="cb200-36" title="36"></a>
<a class="sourceLine" id="cb200-37" title="37"><span class="im">export</span> <span class="im">default</span> RandomQuote<span class="op">;</span></a></code></pre></div>
<p>Notice in the <code>render</code> method, that the state properties are being accessed using <code>this.state.quotes</code> and <code>this.state.currentQuoteIndex</code>.</p>
<p>If you’re following along, be sure to update your application’s entry point to import and render the <code>RandomQuote</code> component:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb201-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb201-2" title="2"></a>
<a class="sourceLine" id="cb201-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb201-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb201-5" title="5"><span class="im">import</span> RandomQuote <span class="im">from</span> <span class="st">&#39;./RandomQuote&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb201-6" title="6"></a>
<a class="sourceLine" id="cb201-7" title="7"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb201-8" title="8">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb201-9" title="9">    <span class="op">&lt;</span>RandomQuote /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb201-10" title="10">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb201-11" title="11">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb201-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>If you run your application (i.e. <code>npm start</code>) and view it in the browser, you’ll one of the five quotes displayed. Refreshing the page will display a new random quote.</p>
<blockquote>
<p>Sometimes the same quote will be displayed more than once in a row. You’ll see in a bit how to fix that bug.</p>
</blockquote>
<h3 id="using-the-react-developer-tools-to-view-a-components-state">Using the React Developer Tools to view a component’s state</h3>
<p>Assuming you have the <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en">React Developer Tools</a> installed, open up your browser’s developer tools and view the “Components” tab. On the left, you can select the <code>RandomQuote</code> component to view its current props and state values on the right.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-class-components/assets/react-class-components-init-state.png" alt="init state" /><figcaption>init state</figcaption>
</figure>
<h2 id="updating-state">Updating state</h2>
<p>Remember earlier when we said that state should only be used if the data is going to change? Currently, the current quote index doesn’t change after it’s been initialized in the <code>constructor</code> method. Using state to track this value would make more sense if there was a way to trigger the component to <em>update</em> the current quote index.</p>
<p>To do this, add a <code>&lt;button&gt;</code> element just below the <code>&lt;p&gt;</code> element with the following attributes and content:</p>
<pre class="jsx"><code>&lt;button type=&#39;button&#39; onClick={this.changeQuote}&gt;Change Quote&lt;/button&gt;</code></pre>
<p>Notice the <code>onClick={this.changeQuote}</code> bit? This is how you add an event listener for the <code>onclick</code> event. <code>this.changeQuote</code> is the event handler method and <code>onClick</code> is the event to listen for.</p>
<blockquote>
<p>When adding event listeners, be sure to camelCase the event name (i.e. <code>onClick</code> instead of <code>onclick</code>) and pass a reference to the event handler method instead of calling it (i.e. <code>this.changeQuote</code> instead of <code>this.changeQuote()</code>). You’ll learn more about handling events later in this lesson.</p>
</blockquote>
<p>Now add the <code>changeQuote</code> event handler method to the <code>RandomQuote</code> class:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb203-1" title="1">changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb203-2" title="2">  <span class="kw">const</span> newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb203-3" title="3"></a>
<a class="sourceLine" id="cb203-4" title="4">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb203-5" title="5">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb203-6" title="6">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb203-7" title="7"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>Did you notice the slightly odd looking class property syntax (i.e. <code>changeQuote = () =&gt; { ... }</code>) that’s being used to define the <code>changeQuote</code> method? Using this experimental syntax for defining a class property in combination with an arrow function ensures that you can reliably use the <code>this</code> keyword within the method. You’ll learn more about this coding pattern for defining event handlers later in this lesson.</p>
</blockquote>
<p>The <code>changeQuote</code> event handler calls the <code>this.getRandomInt</code> method to get a new random integer and then calls the <code>this.setState</code> method to update the component’s state. The <code>this.setState</code> method accepts an object literal containing the state properties to update.</p>
<p>After updating the state, React re-renders the component and displays the new quote (provided that the current quote index actually changed). Because calling the <code>this.setState</code> method triggers a re-render, it should not be called from within the <code>render</code> method, as that would trigger an infinite loop.</p>
<p>Notice that the object literal passed into the <code>this.setState</code> method only contains the state property that needs to be updated. The <code>this.setState</code> method merges state updates into the current state object, so you only need to provide the state properties that need to be updated.</p>
<p>Now, instead of refreshing the page, you can click the “Change Quote” button to display a new random quote!</p>
<p>For your reference, here’s the updated <code>RandomQuote</code> component:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb204-1" title="1"><span class="co">// ./src/RandomQuote.js</span></a>
<a class="sourceLine" id="cb204-2" title="2"></a>
<a class="sourceLine" id="cb204-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb204-4" title="4"></a>
<a class="sourceLine" id="cb204-5" title="5"><span class="kw">class</span> RandomQuote <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb204-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb204-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb204-8" title="8"></a>
<a class="sourceLine" id="cb204-9" title="9">    <span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb204-10" title="10">      <span class="st">&#39;May the Force be with you.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb204-11" title="11">      <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no place like home.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb204-12" title="12">      <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">m the king of the world!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb204-13" title="13">      <span class="st">&#39;My mama always said life was like a box of chocolates.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb204-14" title="14">      <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">ll be back.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb204-15" title="15">    ]<span class="op">;</span></a>
<a class="sourceLine" id="cb204-16" title="16"></a>
<a class="sourceLine" id="cb204-17" title="17">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb204-18" title="18">      quotes<span class="op">,</span></a>
<a class="sourceLine" id="cb204-19" title="19">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb204-20" title="20">    <span class="op">};</span></a>
<a class="sourceLine" id="cb204-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb204-22" title="22"></a>
<a class="sourceLine" id="cb204-23" title="23">  changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb204-24" title="24">    <span class="kw">const</span> newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb204-25" title="25"></a>
<a class="sourceLine" id="cb204-26" title="26">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb204-27" title="27">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb204-28" title="28">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb204-29" title="29">  <span class="op">}</span></a>
<a class="sourceLine" id="cb204-30" title="30"></a>
<a class="sourceLine" id="cb204-31" title="31">  <span class="at">getRandomInt</span>(max) <span class="op">{</span></a>
<a class="sourceLine" id="cb204-32" title="32">    <span class="cf">return</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">Math</span>.<span class="at">random</span>() <span class="op">*</span> <span class="va">Math</span>.<span class="at">floor</span>(max))<span class="op">;</span></a>
<a class="sourceLine" id="cb204-33" title="33">  <span class="op">}</span></a>
<a class="sourceLine" id="cb204-34" title="34"></a>
<a class="sourceLine" id="cb204-35" title="35">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb204-36" title="36">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb204-37" title="37">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb204-38" title="38">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Random Quote&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb204-39" title="39">        <span class="op">&lt;</span>p<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">quotes</span>[<span class="kw">this</span>.<span class="va">state</span>.<span class="at">currentQuoteIndex</span>]<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb204-40" title="40">        <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">changeQuote</span><span class="op">}&gt;</span>Change Quote&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb204-41" title="41">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb204-42" title="42">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb204-43" title="43">  <span class="op">}</span></a>
<a class="sourceLine" id="cb204-44" title="44"><span class="op">}</span></a>
<a class="sourceLine" id="cb204-45" title="45"></a>
<a class="sourceLine" id="cb204-46" title="46"><span class="im">export</span> <span class="im">default</span> RandomQuote<span class="op">;</span></a></code></pre></div>
<h3 id="dont-modify-state-directly">Don’t modify state directly</h3>
<p>You should always use the <code>this.setState</code> method to update state rather than setting the <code>this.state</code> property directly:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb205-1" title="1">changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb205-2" title="2">  <span class="kw">const</span> newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb205-3" title="3"></a>
<a class="sourceLine" id="cb205-4" title="4">  <span class="co">// Don&#39;t set the `this.state` property directly</span></a>
<a class="sourceLine" id="cb205-5" title="5">  <span class="co">// anywhere outside of the `constructor` method!</span></a>
<a class="sourceLine" id="cb205-6" title="6">  <span class="co">// this.state = {</span></a>
<a class="sourceLine" id="cb205-7" title="7">  <span class="co">//   currentQuoteIndex: newIndex,</span></a>
<a class="sourceLine" id="cb205-8" title="8">  <span class="co">// };</span></a>
<a class="sourceLine" id="cb205-9" title="9"></a>
<a class="sourceLine" id="cb205-10" title="10">  <span class="co">// Always use the `this.setState` method to update state.</span></a>
<a class="sourceLine" id="cb205-11" title="11">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb205-12" title="12">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb205-13" title="13">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb205-14" title="14"><span class="op">}</span></a></code></pre></div>
<p>Reassigning <code>this.state</code> alone won’t trigger re-rendering, leaving your component out of sync.</p>
<p>If you used Create React App to create your application and your application is currently running (using the <code>npm start</code> command), you’ll receive a warning in the terminal if you reassign <code>this.state</code> outside of the constructor:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb206-1" title="1"><span class="ex">Do</span> not mutate state directly. Use setState()  <span class="ex">react/no-direct-mutation-state</span></a></code></pre></div>
<h2 id="properly-updating-state-from-the-previous-state">Properly updating state from the previous state</h2>
<p>When testing the <code>RandomQuote</code> component, you might have noticed that sometimes the same quote will display more than once. This is occurring because the <code>this.getRandomInt</code> method is returning a random integer that’s the same as the current quote index value. We can fix this bug by calling the <code>this.getRandomInt</code> method until we get a random integer that’s different from the current quote index value.</p>
<p>On the surface, this appears to be simple fix–just use a loop to call the <code>this.getRandomInt</code> method until you get a random integer that’s different from the current quote index:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb207-1" title="1">changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb207-2" title="2">  <span class="kw">const</span> <span class="op">{</span> quotes<span class="op">,</span> currentQuoteIndex <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb207-3" title="3"></a>
<a class="sourceLine" id="cb207-4" title="4">  <span class="kw">let</span> newIndex <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb207-5" title="5"></a>
<a class="sourceLine" id="cb207-6" title="6">  <span class="cf">do</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb207-7" title="7">    newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb207-8" title="8">  <span class="op">}</span> <span class="cf">while</span> (newIndex <span class="op">===</span> currentQuoteIndex)<span class="op">;</span></a>
<a class="sourceLine" id="cb207-9" title="9"></a>
<a class="sourceLine" id="cb207-10" title="10">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb207-11" title="11">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb207-12" title="12">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb207-13" title="13"><span class="op">}</span></a></code></pre></div>
<p>The problem with the above solution is that it doesn’t take into account that state updates are handled asynchronously by React. When the <code>currentQuoteIndex</code> value is retrieved from state (at the start of the method block), you’re not guaranteed that it’s the latest value. There could be a state update that hasn’t been applied yet.</p>
<p>To safely update state based upon the previous state, pass an anonymous method to the <code>this.setState</code> method (instead of an object literal) that defines two parameters, <code>state</code> and <code>props</code>, and returns an object literal containing the state properties to update. The <code>state</code> and <code>props</code> parameters give you safe, predictable access to the previous state and prop values:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb208-1" title="1">changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb208-2" title="2">  <span class="kw">this</span>.<span class="at">setState</span>((state<span class="op">,</span> props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb208-3" title="3">    <span class="kw">const</span> <span class="op">{</span> quotes<span class="op">,</span> currentQuoteIndex <span class="op">}</span> <span class="op">=</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb208-4" title="4"></a>
<a class="sourceLine" id="cb208-5" title="5">    <span class="kw">let</span> newIndex <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb208-6" title="6"></a>
<a class="sourceLine" id="cb208-7" title="7">    <span class="cf">do</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb208-8" title="8">      newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb208-9" title="9">    <span class="op">}</span> <span class="cf">while</span> (newIndex <span class="op">===</span> currentQuoteIndex)<span class="op">;</span></a>
<a class="sourceLine" id="cb208-10" title="10"></a>
<a class="sourceLine" id="cb208-11" title="11">    <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb208-12" title="12">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb208-13" title="13">    <span class="op">};</span></a>
<a class="sourceLine" id="cb208-14" title="14">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb208-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>Now, if you retest your application, clicking the “Change Quote” button will display a different random quote every time!</p>
<h2 id="providing-default-values-for-props">Providing default values for props</h2>
<p>Currently, the list of quotes doesn’t change once it’s initialized in the <code>constructor</code> method:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb209-1" title="1"><span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb209-2" title="2">  <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb209-3" title="3"></a>
<a class="sourceLine" id="cb209-4" title="4">  <span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb209-5" title="5">    <span class="st">&#39;May the Force be with you.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb209-6" title="6">    <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no place like home.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb209-7" title="7">    <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">m the king of the world!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb209-8" title="8">    <span class="st">&#39;My mama always said life was like a box of chocolates.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb209-9" title="9">    <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">ll be back.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb209-10" title="10">  ]<span class="op">;</span></a>
<a class="sourceLine" id="cb209-11" title="11"></a>
<a class="sourceLine" id="cb209-12" title="12">  <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb209-13" title="13">    quotes<span class="op">,</span></a>
<a class="sourceLine" id="cb209-14" title="14">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb209-15" title="15">  <span class="op">};</span></a>
<a class="sourceLine" id="cb209-16" title="16"><span class="op">}</span></a></code></pre></div>
<p>Given this, it makes more sense for the quotes to be a prop value. Changing the quotes to a prop would also give the consumer or caller of the <code>RandomQuote</code> component the ability to customize the list of quotes.</p>
<p>Here’s an updated version of the <code>RandomQuote</code> component that defines the list of quotes as a prop:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb210-1" title="1"><span class="co">// ./src/RandomQuote.js</span></a>
<a class="sourceLine" id="cb210-2" title="2"></a>
<a class="sourceLine" id="cb210-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb210-4" title="4"></a>
<a class="sourceLine" id="cb210-5" title="5"><span class="kw">class</span> RandomQuote <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb210-6" title="6">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb210-7" title="7">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb210-8" title="8"></a>
<a class="sourceLine" id="cb210-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb210-10" title="10">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">props</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb210-11" title="11">    <span class="op">};</span></a>
<a class="sourceLine" id="cb210-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb210-13" title="13"></a>
<a class="sourceLine" id="cb210-14" title="14">  changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb210-15" title="15">    <span class="kw">this</span>.<span class="at">setState</span>((state<span class="op">,</span> props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb210-16" title="16">      <span class="kw">const</span> <span class="op">{</span> currentQuoteIndex <span class="op">}</span> <span class="op">=</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb210-17" title="17">      <span class="kw">const</span> <span class="op">{</span> quotes <span class="op">}</span> <span class="op">=</span> props<span class="op">;</span></a>
<a class="sourceLine" id="cb210-18" title="18"></a>
<a class="sourceLine" id="cb210-19" title="19">      <span class="kw">let</span> newIndex <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb210-20" title="20"></a>
<a class="sourceLine" id="cb210-21" title="21">      <span class="cf">do</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb210-22" title="22">        newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb210-23" title="23">      <span class="op">}</span> <span class="cf">while</span> (newIndex <span class="op">===</span> currentQuoteIndex)<span class="op">;</span></a>
<a class="sourceLine" id="cb210-24" title="24"></a>
<a class="sourceLine" id="cb210-25" title="25">      <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb210-26" title="26">        <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb210-27" title="27">      <span class="op">};</span></a>
<a class="sourceLine" id="cb210-28" title="28">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb210-29" title="29">  <span class="op">}</span></a>
<a class="sourceLine" id="cb210-30" title="30"></a>
<a class="sourceLine" id="cb210-31" title="31">  <span class="at">getRandomInt</span>(max) <span class="op">{</span></a>
<a class="sourceLine" id="cb210-32" title="32">    <span class="cf">return</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">Math</span>.<span class="at">random</span>() <span class="op">*</span> <span class="va">Math</span>.<span class="at">floor</span>(max))<span class="op">;</span></a>
<a class="sourceLine" id="cb210-33" title="33">  <span class="op">}</span></a>
<a class="sourceLine" id="cb210-34" title="34"></a>
<a class="sourceLine" id="cb210-35" title="35">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb210-36" title="36">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb210-37" title="37">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb210-38" title="38">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Random Quote&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb210-39" title="39">        <span class="op">&lt;</span>p<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">quotes</span>[<span class="kw">this</span>.<span class="va">state</span>.<span class="at">currentQuoteIndex</span>]<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb210-40" title="40">        <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">changeQuote</span><span class="op">}&gt;</span>Change Quote&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb210-41" title="41">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb210-42" title="42">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb210-43" title="43">  <span class="op">}</span></a>
<a class="sourceLine" id="cb210-44" title="44"><span class="op">}</span></a>
<a class="sourceLine" id="cb210-45" title="45"></a>
<a class="sourceLine" id="cb210-46" title="46"><span class="im">export</span> <span class="im">default</span> RandomQuote<span class="op">;</span></a></code></pre></div>
<p>Notice that the <code>constructor</code> method now defines a <code>props</code> parameter and passes that parameter into the <code>super</code> method call:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb211-1" title="1"><span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb211-2" title="2">  <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb211-3" title="3"></a>
<a class="sourceLine" id="cb211-4" title="4">  <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb211-5" title="5">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">props</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb211-6" title="6">  <span class="op">};</span></a>
<a class="sourceLine" id="cb211-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>The <code>changeQuote</code> and <code>render</code> methods were also updated to reference the quotes using <code>this.props.quotes</code> instead of <code>this.state.quotes</code>.</p>
<p>Now, in the <code>index.js</code> file, the quotes to randomly display can be passed into the <code>RandomQuote</code> component:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb212-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb212-2" title="2"></a>
<a class="sourceLine" id="cb212-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb212-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb212-5" title="5"><span class="im">import</span> RandomQuote <span class="im">from</span> <span class="st">&#39;./RandomQuote&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb212-6" title="6"></a>
<a class="sourceLine" id="cb212-7" title="7"><span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb212-8" title="8">  <span class="st">&#39;Toto, I</span><span class="sc">\&#39;</span><span class="st">ve a feeling we</span><span class="sc">\&#39;</span><span class="st">re not in Kansas anymore.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb212-9" title="9">  <span class="st">&#39;Here</span><span class="sc">\&#39;</span><span class="st">s looking at you, kid.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb212-10" title="10">  <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no crying in baseball!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb212-11" title="11">  <span class="st">&#39;Elementary, my dear Watson.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb212-12" title="12">  <span class="st">&#39;Rosebud.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb212-13" title="13">]<span class="op">;</span></a>
<a class="sourceLine" id="cb212-14" title="14"></a>
<a class="sourceLine" id="cb212-15" title="15"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb212-16" title="16">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb212-17" title="17">    <span class="op">&lt;</span>RandomQuote quotes<span class="op">={</span>quotes<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb212-18" title="18">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb212-19" title="19">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb212-20" title="20">)<span class="op">;</span></a></code></pre></div>
<p>Unfortunately, now the consumer or caller of the component <em>must</em> set the <code>quotes</code> prop or the component will throw an error. You can retain the previous behavior by defining a default value for the <code>quotes</code> prop using the <code>defaultProps</code> static property:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb213-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb213-2" title="2"></a>
<a class="sourceLine" id="cb213-3" title="3"><span class="kw">class</span> RandomQuote <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb213-4" title="4">  <span class="co">// Code removed for brevity.</span></a>
<a class="sourceLine" id="cb213-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb213-6" title="6"></a>
<a class="sourceLine" id="cb213-7" title="7"><span class="va">RandomQuote</span>.<span class="at">defaultProps</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb213-8" title="8">  <span class="dt">quotes</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb213-9" title="9">    <span class="st">&#39;May the Force be with you.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb213-10" title="10">    <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no place like home.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb213-11" title="11">    <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">m the king of the world!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb213-12" title="12">    <span class="st">&#39;My mama always said life was like a box of chocolates.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb213-13" title="13">    <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">ll be back.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb213-14" title="14">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb213-15" title="15"><span class="op">};</span></a>
<a class="sourceLine" id="cb213-16" title="16"></a>
<a class="sourceLine" id="cb213-17" title="17"><span class="im">export</span> <span class="im">default</span> RandomQuote<span class="op">;</span></a></code></pre></div>
<p>The default <code>quotes</code> prop value will be used if the consumer or caller of the <code>RandomQuote</code> component doesn’t provide a value for the <code>quotes</code> prop.</p>
<p>Now the <code>RandomQuote</code> component can be used without having to provide the <code>quotes</code> prop:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb214-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb214-2" title="2"></a>
<a class="sourceLine" id="cb214-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb214-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb214-5" title="5"><span class="im">import</span> RandomQuote <span class="im">from</span> <span class="st">&#39;./RandomQuote&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb214-6" title="6"></a>
<a class="sourceLine" id="cb214-7" title="7"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb214-8" title="8">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb214-9" title="9">    <span class="op">&lt;</span>RandomQuote /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb214-10" title="10">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb214-11" title="11">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb214-12" title="12">)<span class="op">;</span></a></code></pre></div>
<h2 id="what-you-learned-2">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Create a React component using ES2015 class syntax;</li>
<li>Describe when it’s appropriate to use a class component;</li>
<li>Initialize and update state within a class component; and</li>
<li>Provide default values for props.</li>
</ul>
<hr />
<h1 id="handling-events">Handling Events</h1>
<p>Event handling is a key part of any dynamic application; without it, you wouldn’t be able to respond to user actions. As with most things in React, how you add event listeners and handle events is different from how you’d do it in vanilla JavaScript, it also manages to feel familiar.</p>
<p>In an earlier article, you saw an example of handling button click events. In this article you’ll deepen your understanding how to handle events in React components.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Add event listeners to elements;</li>
<li>Prevent event default behavior;</li>
<li>Safely use the <code>this</code> keyword within event handlers; and</li>
<li>Describe what the React <code>SyntheticEvent</code> object is and the role it plays in handling events.</li>
</ul>
<h2 id="adding-event-listeners">Adding event listeners</h2>
<p>To add an event listener to an element, define a method to handle the event and associate that method with the element event you want to listen for:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb215-1" title="1"><span class="co">// ./src/AlertButton.js</span></a>
<a class="sourceLine" id="cb215-2" title="2"></a>
<a class="sourceLine" id="cb215-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb215-4" title="4"></a>
<a class="sourceLine" id="cb215-5" title="5"><span class="kw">class</span> AlertButton <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb215-6" title="6">  showAlert <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb215-7" title="7">    <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;Button clicked!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb215-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb215-9" title="9"></a>
<a class="sourceLine" id="cb215-10" title="10">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb215-11" title="11">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb215-12" title="12">      <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">showAlert</span><span class="op">}&gt;</span>Click Me&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb215-13" title="13">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb215-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb215-15" title="15"><span class="op">}</span></a>
<a class="sourceLine" id="cb215-16" title="16"></a>
<a class="sourceLine" id="cb215-17" title="17"><span class="im">export</span> <span class="im">default</span> AlertButton<span class="op">;</span></a></code></pre></div>
<p>In the above example, the <code>showAlert</code> method is the event handler, which simply calls the <code>window.alert</code> method to display the text “Button clicked!” within a browser alert dialog. The <code>showAlert</code> event handler is added as a listener for the <code>&lt;button&gt;</code> element’s click event using the <code>onClick</code> attribute (i.e. <code>onClick={this.showAlert}</code>).</p>
<p>When adding event listeners, be sure to camelCase the event name (i.e. <code>onClick</code> instead of <code>onclick</code>) and pass a reference to the event handler method instead of calling it (i.e. <code>this.showAlert</code> instead of <code>this.showAlert()</code>).</p>
<p>Also notice the slightly odd looking class property syntax (i.e. <code>showAlert = () =&gt; { ... }</code>) that’s used to define the <code>showAlert</code> method. Using this experimental syntax for defining a class property in combination with an arrow function ensures that you can reliably use the <code>this</code> keyword within the event handler method. We’ll exam this issue in more detail in just a bit.</p>
<blockquote>
<p>See the official React documentation for a <a href="https://reactjs.org/docs/events.html#supported-events">list of the supported events</a>.</p>
</blockquote>
<h2 id="preventing-default-behavior">Preventing default behavior</h2>
<p>Within the browser, HTML element events often have default behavior associated with them. For example, clicking an <code>&lt;a&gt;</code> element will navigate to the resource indicated by the anchor element’s <code>href</code> attribute or clicking a <code>&lt;button&gt;</code> element that’s contained with a form will submit the form.</p>
<p>When handling button clicks in the previous example, nothing special had to be done to prevent the event’s default behavior from interfering with our intended action because a <code>&lt;button&gt;</code> element of type <code>button</code> doesn’t have any default behavior associated with it.</p>
<p>Consider the following example though:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb216-1" title="1"><span class="co">// ./src/NoDefaultSubmitForm.js</span></a>
<a class="sourceLine" id="cb216-2" title="2"></a>
<a class="sourceLine" id="cb216-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb216-4" title="4"></a>
<a class="sourceLine" id="cb216-5" title="5"><span class="kw">class</span> NoDefaultSubmitForm <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb216-6" title="6">  submitForm <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb216-7" title="7">    <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;Handling form submission...&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb216-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb216-9" title="9"></a>
<a class="sourceLine" id="cb216-10" title="10">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb216-11" title="11">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb216-12" title="12">      <span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">submitForm</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb216-13" title="13">        <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb216-14" title="14">      &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb216-15" title="15">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb216-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb216-17" title="17"><span class="op">}</span></a>
<a class="sourceLine" id="cb216-18" title="18"></a>
<a class="sourceLine" id="cb216-19" title="19"><span class="im">export</span> <span class="im">default</span> NoDefaultSubmitForm<span class="op">;</span></a></code></pre></div>
<p>In this example, a <code>&lt;button&gt;</code> element without a <code>type</code> attribute is rendered within a <code>&lt;form&gt;</code> element. By default, this button will submit the form when clicked. This has the unintended consequence of reloading the page when the button is clicked, instead of allowing the <code>this.submitForm</code> event handler method to handle the form submission.</p>
<blockquote>
<p>In an actual React application, the <code>this.submitForm</code> event handler method would likely use the browser’s Fetch API to send a <code>POST</code> or <code>PUT</code> request to a REST API when the form is submitted. To keep this example as simple as possible, the <code>window.alert</code> method is used to display the text “Handling form submission…”.</p>
</blockquote>
<p>To keep the default form submission from occurring, the event handler method can be updated to this:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb217-1" title="1">submitForm <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb217-2" title="2">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb217-3" title="3">  <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;Handling form submission...&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb217-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>Notice that a parameter named <code>e</code> has been added to the anonymous method definition. The <code>e</code> parameter references an event object that’s the form submission event being handled. The <code>e</code> event object provides a method named <code>preventDefault</code> that when called, prevents the event’s default action.</p>
<blockquote>
<p>The <code>e</code> parameter is a <code>SyntheticEvent</code> object type. You’ll learn more about this object type in just a bit.</p>
</blockquote>
<h2 id="using-this-in-event-handlers">Using <code>this</code> in event handlers</h2>
<p>Earlier, it was mentioned that the class property syntax (i.e. <code>showAlert = () =&gt; { ... }</code>) was being used in combination with an arrow function so that the <code>this</code> keyword could be reliably used within an event handler method. To understand why this coding pattern is needed, let’s stray from the “happy path” and make things break.</p>
<p>Here’s the example of a button click event handler again that correctly defines the <code>showAlert</code> event handler method:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb218-1" title="1"><span class="co">// ./src/AlertButton.js</span></a>
<a class="sourceLine" id="cb218-2" title="2"></a>
<a class="sourceLine" id="cb218-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb218-4" title="4"></a>
<a class="sourceLine" id="cb218-5" title="5"><span class="kw">class</span> AlertButton <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb218-6" title="6">  showAlert <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb218-7" title="7">    <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;Button clicked!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb218-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb218-9" title="9"></a>
<a class="sourceLine" id="cb218-10" title="10">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb218-11" title="11">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb218-12" title="12">      <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">showAlert</span><span class="op">}&gt;</span>Click Me&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb218-13" title="13">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb218-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb218-15" title="15"><span class="op">}</span></a>
<a class="sourceLine" id="cb218-16" title="16"></a>
<a class="sourceLine" id="cb218-17" title="17"><span class="im">export</span> <span class="im">default</span> AlertButton<span class="op">;</span></a></code></pre></div>
<p>To see what <code>this</code> references in the <code>showAlert</code> event handler method, you can replace the call to the <code>window.alert</code> method with a call to the <code>console.log</code> method to print <code>this</code> to the console:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb219-1" title="1">showAlert <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb219-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb219-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Now when the button is clicked, you’ll see the <code>AlertButton</code> component printed to the console:</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-class-components/assets/event-handling-console-alert-button.png" alt="console alert button" /><figcaption>console alert button</figcaption>
</figure>
<p>To break the <code>this</code> keyword, you can rewrite the <code>showAlert</code> event handler method to be a regular class method:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb220-1" title="1"><span class="at">showAlert</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb220-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb220-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Now when the button is clicked, you’ll see <code>undefined</code> printed to the console:</p>
<figure>
<img src="images/event-handling-console-undefined.png" alt="console undefined" /><figcaption>console undefined</figcaption>
</figure>
<h3 id="reviewing-class-methods-and-the-this-keyword">Reviewing class methods and the <code>this</code> keyword</h3>
<p>To understand why <code>this</code> is <code>undefined</code> when an event handler method is defined as a class method, take a look at the following example:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb221-1" title="1"><span class="kw">class</span> Person <span class="op">{</span></a>
<a class="sourceLine" id="cb221-2" title="2">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb221-3" title="3">    <span class="kw">this</span>.<span class="at">name</span> <span class="op">=</span> <span class="st">&#39;Jane Smith&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb221-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb221-5" title="5"></a>
<a class="sourceLine" id="cb221-6" title="6">  <span class="at">displayName</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb221-7" title="7">    <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="at">name</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb221-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb221-9" title="9"><span class="op">}</span></a>
<a class="sourceLine" id="cb221-10" title="10"></a>
<a class="sourceLine" id="cb221-11" title="11"><span class="kw">const</span> p <span class="op">=</span> <span class="kw">new</span> <span class="at">Person</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb221-12" title="12"></a>
<a class="sourceLine" id="cb221-13" title="13"><span class="co">// Calling the method on the instance</span></a>
<a class="sourceLine" id="cb221-14" title="14"><span class="co">// works as expected.</span></a>
<a class="sourceLine" id="cb221-15" title="15"><span class="va">p</span>.<span class="at">displayName</span>()<span class="op">;</span> <span class="co">// Jane Smith</span></a>
<a class="sourceLine" id="cb221-16" title="16"></a>
<a class="sourceLine" id="cb221-17" title="17"><span class="co">// Storing a reference to the method in a variable</span></a>
<a class="sourceLine" id="cb221-18" title="18"><span class="co">// and calling the method using the variable</span></a>
<a class="sourceLine" id="cb221-19" title="19"><span class="co">// breaks the `this` keyword&#39;s implicit binding</span></a>
<a class="sourceLine" id="cb221-20" title="20"><span class="co">// to the class instance.</span></a>
<a class="sourceLine" id="cb221-21" title="21"><span class="kw">const</span> displayName <span class="op">=</span> <span class="va">p</span>.<span class="at">displayName</span><span class="op">;</span></a>
<a class="sourceLine" id="cb221-22" title="22"><span class="at">displayName</span>()<span class="op">;</span> <span class="co">// TypeError: Cannot read property &#39;name&#39; of undefined</span></a></code></pre></div>
<p>The first time that the <code>displayName</code> method is called, it’s called directly on <code>p</code>, the instance of the <code>Person</code> class. “Jane Smith” is printed to the console because the <code>this</code> keyword is implicitly bound to the instance of the class allowing the <code>name</code> property on the instance to be found and passed to the <code>console.log</code> method.</p>
<p>The second time that the <code>displayName</code> method is called, a reference to the class method is stored in a variable and the method is called using the variable. This breaks the <code>this</code> keyword’s implicit binding to the instance of the class (i.e. <code>p</code>) resulting in the <code>TypeError</code> because <code>this</code> is <code>undefined</code>.</p>
<p>The <code>bind</code> method can be used to <em>explicitly</em> bind the <code>displayName</code> class method to the <code>p</code> class instance. The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind"><code>bind</code> method</a> returns a function that’s bound to the passed in object. Now the <code>displayName</code> variable can be successfully called to display the person’s name in the console:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb222-1" title="1"><span class="kw">const</span> displayName <span class="op">=</span> <span class="va">p</span>.<span class="va">displayName</span>.<span class="at">bind</span>(p)<span class="op">;</span></a>
<a class="sourceLine" id="cb222-2" title="2"><span class="at">displayName</span>()<span class="op">;</span> <span class="co">// Jane Smith</span></a></code></pre></div>
<p>Even though this is a simple, contrived example, it accurately models what is happening with the React component’s event handler method. When adding an event listener to a React element, you associate an event handler method with the element event you want to listen for by passing a reference to the event handler method:</p>
<pre class="jsx"><code>&lt;button type=&#39;button&#39; onClick={this.showAlert}&gt;Click Me&lt;/button&gt;</code></pre>
<p>Passing the reference to the <code>this.showAlert</code> class method to the <code>onClick</code> attribute breaks the <code>this</code> keyword’s implicit binding to the instance of the class (i.e. the instance of the <code>AlertButton</code> component).</p>
<p>The <code>bind</code> method, just like was done with the above <code>Person</code> class example, can be used in a React component <code>constructor</code> method to explicitly bind event handler methods to the component instance:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb224-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb224-2" title="2"></a>
<a class="sourceLine" id="cb224-3" title="3"><span class="kw">class</span> AlertButton <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb224-4" title="4">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb224-5" title="5">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb224-6" title="6"></a>
<a class="sourceLine" id="cb224-7" title="7">    <span class="kw">this</span>.<span class="at">showAlert</span> <span class="op">=</span> <span class="kw">this</span>.<span class="va">showAlert</span>.<span class="at">bind</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb224-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb224-9" title="9"></a>
<a class="sourceLine" id="cb224-10" title="10">  <span class="at">showAlert</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb224-11" title="11">    <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb224-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb224-13" title="13"></a>
<a class="sourceLine" id="cb224-14" title="14">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb224-15" title="15">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb224-16" title="16">      <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">showAlert</span><span class="op">}&gt;</span>Click Me&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb224-17" title="17">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb224-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb224-19" title="19"><span class="op">}</span></a>
<a class="sourceLine" id="cb224-20" title="20"></a>
<a class="sourceLine" id="cb224-21" title="21"><span class="im">export</span> <span class="im">default</span> AlertButton<span class="op">;</span></a></code></pre></div>
<h3 id="understanding-the-class-property-arrow-function-pattern">Understanding the class property + arrow function pattern</h3>
<p>To review, the pattern of defining an event handler method using a class property in combination with an arrow function looks like this:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb225-1" title="1">showAlert <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb225-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb225-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>What’s not apparent from this example is that the class property syntax, which allows you to define class properties (or fields as they’re sometimes called) <em>outside</em> of the <code>constructor</code> method, is an experimental syntax. Experimental JavaScript syntax is syntax that’s been proposed to add to <a href="https://en.wikipedia.org/wiki/ECMAScript">ECMAScript</a> (the scripting-language specification for JavaScript) but hasn’t officially been added to the language specification yet.</p>
<p>While some browsers support class property syntax, other browsers don’t. To reliably use class property syntax, your JavaScript code needs to be converted, or <em>transpiled</em>, into syntax that’s broadly supported by browsers.</p>
<p>When using Create React App to create a React application, Babel is configured on your behalf to transpile your JavaScript code (including JSX) into a version of JavaScript that’s broadly supported. When you run the application using <code>npm start</code>, the <code>AlertButton</code> component is transpiled by Babel into the following code:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb226-1" title="1"><span class="kw">class</span> AlertButton <span class="kw">extends</span> <span class="va">react__WEBPACK_IMPORTED_MODULE_0___default</span>.<span class="va">a</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb226-2" title="2">  <span class="at">constructor</span>(...<span class="at">args</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb226-3" title="3">    <span class="kw">super</span>(...<span class="at">args</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb226-4" title="4"></a>
<a class="sourceLine" id="cb226-5" title="5">    <span class="kw">this</span>.<span class="at">showAlert</span> <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb226-6" title="6">      <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb226-7" title="7">    <span class="op">};</span></a>
<a class="sourceLine" id="cb226-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb226-9" title="9"></a>
<a class="sourceLine" id="cb226-10" title="10">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb226-11" title="11">    <span class="cf">return</span> <span class="co">/*#__PURE__*/</span><span class="va">react__WEBPACK_IMPORTED_MODULE_0___default</span>.<span class="va">a</span>.<span class="at">createElement</span>(<span class="st">&quot;button&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb226-12" title="12">      <span class="dt">type</span><span class="op">:</span> <span class="st">&quot;button&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb226-13" title="13">      <span class="dt">onClick</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">showAlert</span><span class="op">,</span></a>
<a class="sourceLine" id="cb226-14" title="14">      <span class="dt">__self</span><span class="op">:</span> <span class="kw">this</span><span class="op">,</span></a>
<a class="sourceLine" id="cb226-15" title="15">      <span class="dt">__source</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb226-16" title="16">        <span class="dt">fileName</span><span class="op">:</span> _jsxFileName<span class="op">,</span></a>
<a class="sourceLine" id="cb226-17" title="17">        <span class="dt">lineNumber</span><span class="op">:</span> <span class="dv">24</span><span class="op">,</span></a>
<a class="sourceLine" id="cb226-18" title="18">        <span class="dt">columnNumber</span><span class="op">:</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb226-19" title="19">      <span class="op">}</span></a>
<a class="sourceLine" id="cb226-20" title="20">    <span class="op">},</span> <span class="st">&quot;Click Me&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb226-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb226-22" title="22"><span class="op">}</span></a></code></pre></div>
<p>Notice how the <code>showAlert</code> class property definition has been moved into the <code>constructor</code> method? The value of the <code>showAlert</code> property is set to the arrow function that defines the event handler method. Since arrow functions don’t have their own context, the event handler method inherits the surrounding lexical context, which is the <code>constructor</code> method’s context. That results in the <code>this</code> keyword within the arrow function referring to the instance of the component that’s being initialized by the <code>constructor</code> method.</p>
<p>An arrow function’s inherited context can’t be lost or changed. When the event handler method is called later on, when the button is clicked, the <code>this</code> keyword remains correctly bound to the instance of the component.</p>
<blockquote>
<p>You’ll learn more about transpilation and Babel in a future lesson. To read more about Babel and its support for the proposed class property syntax, see <a href="https://babeljs.io/docs/en/next/babel-plugin-proposal-class-properties.html">this page</a>.</p>
</blockquote>
<h3 id="pick-an-approach-and-be-consistent">Pick an approach and be consistent</h3>
<p>Feel free to use either approach, class properties and arrow functions or the <code>bind</code> method, to ensure that the <code>this</code> keyword can be reliably used in your event handler methods. Just be sure that whatever approach you or your team has decided to use, that you follow it consistently. Doing so will make it easier to read and maintain your code.</p>
<h2 id="the-syntheticevent-object">The <code>SyntheticEvent</code> object</h2>
<p>Earlier, an example was shown on how to prevent the default form submission from occurring when handling the <code>onSubmit</code> form event:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb227-1" title="1"><span class="co">// ./src/NoDefaultSubmitForm.js</span></a>
<a class="sourceLine" id="cb227-2" title="2"></a>
<a class="sourceLine" id="cb227-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb227-4" title="4"></a>
<a class="sourceLine" id="cb227-5" title="5"><span class="kw">class</span> NoDefaultSubmitForm <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb227-6" title="6">  submitForm <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb227-7" title="7">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb227-8" title="8">    <span class="va">window</span>.<span class="at">alert</span>(<span class="st">&#39;Handling form submission...&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb227-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb227-10" title="10"></a>
<a class="sourceLine" id="cb227-11" title="11">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb227-12" title="12">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb227-13" title="13">      <span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">submitForm</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb227-14" title="14">        <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb227-15" title="15">      &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb227-16" title="16">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb227-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb227-18" title="18"><span class="op">}</span></a>
<a class="sourceLine" id="cb227-19" title="19"></a>
<a class="sourceLine" id="cb227-20" title="20"><span class="im">export</span> <span class="im">default</span> NoDefaultSubmitForm<span class="op">;</span></a></code></pre></div>
<p>Notice that the <code>submitForm</code> event handler method defines a parameter named <code>e</code> which references an event object that’s the form submission event being handled.</p>
<p>In a React application, event objects are not the native browser event object types that you’d normally interact with when handling events using JavaScript in the browser. Instead, they’re instances of the <a href="https://reactjs.org/docs/events.html">React <code>SyntheticEvent</code> object type</a>.</p>
<p>An instance of the React <code>SyntheticEvent</code> object type wraps the native browser event object to normalize events across browser vendors. The <code>SyntheticEvent</code> object type follows the <a href="https://www.w3.org/TR/2019/WD-uievents-20190530/">W3C spec for UI events</a>, so you can use synthetic event objects just like you would if they were the native browser event objects. This gives you, the developer, a consistent, predictable experience working with events without having to worry about which browser your application is running within.</p>
<p>For your reference, the <code>SyntheticEvent</code> object type has the following attributes:</p>
<pre><code>boolean bubbles
boolean cancelable
DOMEventTarget currentTarget
boolean defaultPrevented
number eventPhase
boolean isTrusted
DOMEvent nativeEvent
void preventDefault()
boolean isDefaultPrevented()
void stopPropagation()
boolean isPropagationStopped()
void persist()
DOMEventTarget target
number timeStamp
string type</code></pre>
<p>Notice that a synthetic event object defines a property named <code>nativeEvent</code>. This property gives you access to the underlying native browser event, though you’ll rarely (if ever) need to access it.</p>
<h2 id="what-you-learned-3">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Add event listeners to elements;</li>
<li>Prevent event default behavior;</li>
<li>Safely use the <code>this</code> keyword within event handlers; and</li>
<li>Describe what the React <code>SyntheticEvent</code> object is and the role it plays in handling events.</li>
</ul>
<hr />
<h1 id="react-forms">React Forms</h1>
<p>As you’ve learned in earlier lessons, HTML forms are an essential and ubiquitous part of the web. Forms are used to search, create resources (i.e. account, posts), update resources, and more. Learning how to create forms using React is an invaluable skill for you to learn and practice.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Create a React class component containing a simple form;</li>
<li>Define a single event handler method to handle <code>onChange</code> events for multiple <code>&lt;input&gt;</code> elements;</li>
<li>Add a <code>&lt;textarea&gt;</code> element to a form;</li>
<li>Add a <code>&lt;select&gt;</code> element to a form; and</li>
<li>Implement form validations.</li>
</ul>
<h2 id="creating-a-simple-form">Creating a simple form</h2>
<p>To learn how to create an HTML form in React, you’ll create a <code>ContactUs</code> class component that’ll contain a simple “Contact Us” form. The form will initially contain just three fields:</p>
<ul>
<li>Name - The name of the user filling out the form;</li>
<li>Email - The user’s email; and</li>
<li>Phone - The user’s phone number.</li>
</ul>
<h3 id="defining-the-render-method">Defining the <code>render</code> method</h3>
<p>To start, add a class component named <code>ContactUs</code> and define the <code>render</code> method to render the HTML form:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb229-1" title="1"><span class="co">// ./src/ContactUs.js</span></a>
<a class="sourceLine" id="cb229-2" title="2"></a>
<a class="sourceLine" id="cb229-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb229-4" title="4"></a>
<a class="sourceLine" id="cb229-5" title="5"><span class="kw">class</span> ContactUs <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb229-6" title="6">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb229-7" title="7">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb229-8" title="8">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-9" title="9">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Contact Us&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-10" title="10">        <span class="op">&lt;</span>form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-11" title="11">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-12" title="12">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;name&#39;</span><span class="op">&gt;</span><span class="dt">Name</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-13" title="13">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> /&gt;</a>
<a class="sourceLine" id="cb229-14" title="14">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-15" title="15">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-16" title="16">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;email&#39;</span><span class="op">&gt;</span><span class="dt">Email</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-17" title="17">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;email&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> /&gt;</a>
<a class="sourceLine" id="cb229-18" title="18">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-19" title="19">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-20" title="20">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span><span class="dt">Phone</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-21" title="21">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> /&gt;</a>
<a class="sourceLine" id="cb229-22" title="22">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-23" title="23">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-24" title="24">            <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-25" title="25">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-26" title="26">        &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-27" title="27">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb229-28" title="28">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb229-29" title="29">  <span class="op">}</span></a>
<a class="sourceLine" id="cb229-30" title="30"><span class="op">}</span></a>
<a class="sourceLine" id="cb229-31" title="31"></a>
<a class="sourceLine" id="cb229-32" title="32"><span class="im">export</span> <span class="im">default</span> ContactUs<span class="op">;</span></a></code></pre></div>
<p>So far, there’s nothing particularly interesting about this form. The only thing that looks different from regular HTML is that the <code>&lt;label&gt;</code> element’s <code>for</code> attribute is <code>htmlFor</code> in React.</p>
<blockquote>
<p>There are a variety of ways to structure the HTML for forms. The above form layout is compatible with the <a href="https://getbootstrap.com/docs/4.4/components/forms/">form CSS classes</a> available in the <a href="https://getbootstrap.com/">Bootstrap CSS framework</a>. While we won’t be applying any styles to the form in this article, the layout that we’ll use will make it easy to use Bootstrap at any point.</p>
</blockquote>
<p>If you’re following along, be sure to update your React application’s entry point to render the <code>ContactUs</code> component:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb230-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb230-2" title="2"></a>
<a class="sourceLine" id="cb230-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb230-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb230-5" title="5"><span class="im">import</span> ContactUs <span class="im">from</span> <span class="st">&#39;./ContactUs&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb230-6" title="6"></a>
<a class="sourceLine" id="cb230-7" title="7"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb230-8" title="8">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb230-9" title="9">    <span class="op">&lt;</span>ContactUs /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb230-10" title="10">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb230-11" title="11">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb230-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>At this point, you can run your application (<code>npm start</code>) and view the form in the browser. You can even fill out the form, but currently the component doesn’t initialize or update any state.</p>
<h3 id="adding-state-to-the-component">Adding state to the component</h3>
<p>To add state to the <code>ContactUs</code> component, you’ll add a <code>constructor</code> method that’ll initialize the <code>this.state</code> object with three properties: <code>name</code>, <code>email</code>, and <code>phone</code>. Then in the <code>render</code> method you’ll retrieve the <code>name</code>, <code>email</code>, and <code>phone</code> values from state and use them to set the <code>value</code> attributes on the corresponding form field <code>&lt;input&gt;</code> elements:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb231-1" title="1"><span class="co">// ./src/ContactUs.js</span></a>
<a class="sourceLine" id="cb231-2" title="2"></a>
<a class="sourceLine" id="cb231-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb231-4" title="4"></a>
<a class="sourceLine" id="cb231-5" title="5"><span class="kw">class</span> ContactUs <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb231-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb231-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb231-8" title="8"></a>
<a class="sourceLine" id="cb231-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb231-10" title="10">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb231-11" title="11">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb231-12" title="12">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb231-13" title="13">    <span class="op">};</span></a>
<a class="sourceLine" id="cb231-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb231-15" title="15"></a>
<a class="sourceLine" id="cb231-16" title="16">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb231-17" title="17">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb231-18" title="18"></a>
<a class="sourceLine" id="cb231-19" title="19">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb231-20" title="20">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-21" title="21">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Contact Us&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-22" title="22">        <span class="op">&lt;</span>form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-23" title="23">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-24" title="24">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;name&#39;</span><span class="op">&gt;</span><span class="dt">Name</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-25" title="25">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> value<span class="op">={</span>name<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb231-26" title="26">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-27" title="27">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-28" title="28">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;email&#39;</span><span class="op">&gt;</span><span class="dt">Email</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-29" title="29">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;email&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> value<span class="op">={</span>email<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb231-30" title="30">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-31" title="31">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-32" title="32">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span><span class="dt">Phone</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-33" title="33">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb231-34" title="34">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-35" title="35">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-36" title="36">            <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-37" title="37">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-38" title="38">        &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-39" title="39">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb231-40" title="40">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb231-41" title="41">  <span class="op">}</span></a>
<a class="sourceLine" id="cb231-42" title="42"><span class="op">}</span></a>
<a class="sourceLine" id="cb231-43" title="43"></a>
<a class="sourceLine" id="cb231-44" title="44"><span class="im">export</span> <span class="im">default</span> ContactUs<span class="op">;</span></a></code></pre></div>
<p>Next, when a form field element value is changed, the associated component state property needs to be updated. Adding or removing a character within an <code>&lt;input&gt;</code> element raises the <code>onChange</code> event, which makes it a natural choice for keeping the component state in sync:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb232-1" title="1"><span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">nameOnChange</span><span class="op">}</span> value<span class="op">={</span>name<span class="op">}</span> /&gt;</a></code></pre></div>
<p>Remember that when an event is raised, the associated event handler method is called and passed an instance of React’s <code>SyntheticEvent</code> object type. Here’s the <code>nameOnChange</code> event handler method that’s associated with the above “Name” form field:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb233-1" title="1">nameOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb233-2" title="2">  <span class="co">// `e` is a `SyntheticEvent` object.</span></a>
<a class="sourceLine" id="cb233-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>A reference to the element that raised the event is available through the <code>SyntheticEvent</code> object’s <code>target</code> property. Using the reference to the form field element, you can retrieve the current value like this:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb234-1" title="1">nameOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb234-2" title="2">  <span class="kw">const</span> name <span class="op">=</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb234-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>With the current form field value in hand, call the <code>this.setState</code> method to update the corresponding state value:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb235-1" title="1">nameOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb235-2" title="2">  <span class="kw">const</span> name <span class="op">=</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb235-3" title="3">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> name <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb235-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>With a little refactoring, you can condense the event handler method to a single line of code:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb236-1" title="1">nameOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb236-2" title="2">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb236-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Using the same approach to add an <code>onChange</code> event handler to the “Email” and “Phone” form fields gives you this:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb237-1" title="1"><span class="co">// ./src/ContactUs.js</span></a>
<a class="sourceLine" id="cb237-2" title="2"></a>
<a class="sourceLine" id="cb237-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb237-4" title="4"></a>
<a class="sourceLine" id="cb237-5" title="5"><span class="kw">class</span> ContactUs <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb237-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb237-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb237-8" title="8"></a>
<a class="sourceLine" id="cb237-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb237-10" title="10">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb237-11" title="11">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb237-12" title="12">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb237-13" title="13">    <span class="op">};</span></a>
<a class="sourceLine" id="cb237-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb237-15" title="15"></a>
<a class="sourceLine" id="cb237-16" title="16">  nameOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb237-17" title="17">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb237-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb237-19" title="19"></a>
<a class="sourceLine" id="cb237-20" title="20">  emailOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb237-21" title="21">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">email</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb237-22" title="22">  <span class="op">}</span></a>
<a class="sourceLine" id="cb237-23" title="23"></a>
<a class="sourceLine" id="cb237-24" title="24">  phoneOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb237-25" title="25">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">phone</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb237-26" title="26">  <span class="op">}</span></a>
<a class="sourceLine" id="cb237-27" title="27"></a>
<a class="sourceLine" id="cb237-28" title="28">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb237-29" title="29">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb237-30" title="30"></a>
<a class="sourceLine" id="cb237-31" title="31">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb237-32" title="32">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-33" title="33">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Contact Us&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-34" title="34">        <span class="op">&lt;</span>form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-35" title="35">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-36" title="36">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;name&#39;</span><span class="op">&gt;</span><span class="dt">Name</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-37" title="37">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">nameOnChange</span><span class="op">}</span> value<span class="op">={</span>name<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb237-38" title="38">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-39" title="39">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-40" title="40">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;email&#39;</span><span class="op">&gt;</span><span class="dt">Email</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-41" title="41">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;email&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">emailOnChange</span><span class="op">}</span> value<span class="op">={</span>email<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb237-42" title="42">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-43" title="43">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-44" title="44">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span><span class="dt">Phone</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-45" title="45">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">phoneOnChange</span><span class="op">}</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb237-46" title="46">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-47" title="47">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-48" title="48">            <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-49" title="49">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-50" title="50">        &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-51" title="51">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb237-52" title="52">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb237-53" title="53">  <span class="op">}</span></a>
<a class="sourceLine" id="cb237-54" title="54"><span class="op">}</span></a>
<a class="sourceLine" id="cb237-55" title="55"></a>
<a class="sourceLine" id="cb237-56" title="56"><span class="im">export</span> <span class="im">default</span> ContactUs<span class="op">;</span></a></code></pre></div>
<p>If you view the form again in the browser and open the React Developer Tools, you can see the component’s state update as you type within each of the form fields (i.e the <code>&lt;input&gt;</code> elements).</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-class-components/assets/react-forms-onchange-event-handler.png" alt="onchange event handler" /><figcaption>onchange event handler</figcaption>
</figure>
<h3 id="handling-form-submissions">Handling form submissions</h3>
<p>Now that the <code>ContactUs</code> component is initializing and updating state when form field values are changed, it’s time to handle form submissions! To start, add an <code>onSubmit</code> event handler to the form and within the <code>onSubmit</code> event handler prevent the default behavior so that the page doesn’t reload:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb238-1" title="1"><span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">onSubmit</span><span class="op">}&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb239"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb239-1" title="1">onSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb239-2" title="2">  <span class="co">// Prevent the default form behavior</span></a>
<a class="sourceLine" id="cb239-3" title="3">  <span class="co">// so the page doesn&#39;t reload.</span></a>
<a class="sourceLine" id="cb239-4" title="4">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb239-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>Then retrieve the <code>name</code>, <code>email</code>, and <code>phone</code> values from state and use those values to create a new <code>contactUsInformation</code> object literal:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb240-1" title="1">onSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb240-2" title="2">  <span class="co">// Prevent the default form behavior</span></a>
<a class="sourceLine" id="cb240-3" title="3">  <span class="co">// so the page doesn&#39;t reload.</span></a>
<a class="sourceLine" id="cb240-4" title="4">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb240-5" title="5"></a>
<a class="sourceLine" id="cb240-6" title="6">  <span class="co">// Retrieve the contact us information from state.</span></a>
<a class="sourceLine" id="cb240-7" title="7">  <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb240-8" title="8"></a>
<a class="sourceLine" id="cb240-9" title="9">  <span class="co">// Create a new object for the contact us information.</span></a>
<a class="sourceLine" id="cb240-10" title="10">  <span class="kw">const</span> contactUsInformation <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb240-11" title="11">    name<span class="op">,</span></a>
<a class="sourceLine" id="cb240-12" title="12">    email<span class="op">,</span></a>
<a class="sourceLine" id="cb240-13" title="13">    phone<span class="op">,</span></a>
<a class="sourceLine" id="cb240-14" title="14">    <span class="dt">submittedOn</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb240-15" title="15">  <span class="op">};</span></a>
<a class="sourceLine" id="cb240-16" title="16"></a>
<a class="sourceLine" id="cb240-17" title="17">  <span class="co">// For now, just log the contact us information to the console</span></a>
<a class="sourceLine" id="cb240-18" title="18">  <span class="co">// though ideally, we&#39;d persist this information to a database</span></a>
<a class="sourceLine" id="cb240-19" title="19">  <span class="co">// using a REST API.</span></a>
<a class="sourceLine" id="cb240-20" title="20">  <span class="va">console</span>.<span class="at">log</span>(contactUsInformation)<span class="op">;</span></a>
<a class="sourceLine" id="cb240-21" title="21"><span class="op">}</span></a></code></pre></div>
<p>Notice that an additional property, <code>submittedOn</code>, is being added to the <code>contactUsInformation</code> object literal to indicate the date/time that the information was submitted. Ideally, the <code>contactUsInformation</code> object would be persist to a database using a REST API, but for now, you’ll just log the object to the console.</p>
<p>Now that the form submission has been processed, call the <code>this.setState</code> method to reset the <code>name</code>, <code>email</code>, and <code>phone</code> values:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb241-1" title="1">onSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb241-2" title="2">  <span class="co">// Prevent the default form behavior</span></a>
<a class="sourceLine" id="cb241-3" title="3">  <span class="co">// so the page doesn&#39;t reload.</span></a>
<a class="sourceLine" id="cb241-4" title="4">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb241-5" title="5"></a>
<a class="sourceLine" id="cb241-6" title="6">  <span class="co">// Retrieve the contact us information from state.</span></a>
<a class="sourceLine" id="cb241-7" title="7">  <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb241-8" title="8"></a>
<a class="sourceLine" id="cb241-9" title="9">  <span class="co">// Create a new object for the contact us information.</span></a>
<a class="sourceLine" id="cb241-10" title="10">  <span class="kw">const</span> contactUsInformation <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb241-11" title="11">    name<span class="op">,</span></a>
<a class="sourceLine" id="cb241-12" title="12">    email<span class="op">,</span></a>
<a class="sourceLine" id="cb241-13" title="13">    phone<span class="op">,</span></a>
<a class="sourceLine" id="cb241-14" title="14">    <span class="dt">submittedOn</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb241-15" title="15">  <span class="op">};</span></a>
<a class="sourceLine" id="cb241-16" title="16"></a>
<a class="sourceLine" id="cb241-17" title="17">  <span class="co">// For now, just log the contact us information to the console</span></a>
<a class="sourceLine" id="cb241-18" title="18">  <span class="co">// though ideally, we&#39;d persist this information to a database</span></a>
<a class="sourceLine" id="cb241-19" title="19">  <span class="co">// using a REST API.</span></a>
<a class="sourceLine" id="cb241-20" title="20">  <span class="va">console</span>.<span class="at">log</span>(contactUsInformation)<span class="op">;</span></a>
<a class="sourceLine" id="cb241-21" title="21"></a>
<a class="sourceLine" id="cb241-22" title="22">  <span class="co">// Reset the form state.</span></a>
<a class="sourceLine" id="cb241-23" title="23">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb241-24" title="24">    <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb241-25" title="25">    <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb241-26" title="26">    <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb241-27" title="27">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb241-28" title="28"><span class="op">}</span></a></code></pre></div>
<p>Putting all of that together gives you this:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb242-1" title="1"><span class="co">// ./src/ContactUs.js</span></a>
<a class="sourceLine" id="cb242-2" title="2"></a>
<a class="sourceLine" id="cb242-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb242-4" title="4"></a>
<a class="sourceLine" id="cb242-5" title="5"><span class="kw">class</span> ContactUs <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb242-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb242-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb242-8" title="8"></a>
<a class="sourceLine" id="cb242-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb242-10" title="10">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb242-11" title="11">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb242-12" title="12">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb242-13" title="13">    <span class="op">};</span></a>
<a class="sourceLine" id="cb242-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb242-15" title="15"></a>
<a class="sourceLine" id="cb242-16" title="16">  nameOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb242-17" title="17">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb242-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb242-19" title="19"></a>
<a class="sourceLine" id="cb242-20" title="20">  emailOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb242-21" title="21">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">email</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb242-22" title="22">  <span class="op">}</span></a>
<a class="sourceLine" id="cb242-23" title="23"></a>
<a class="sourceLine" id="cb242-24" title="24">  phoneOnChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb242-25" title="25">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">phone</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb242-26" title="26">  <span class="op">}</span></a>
<a class="sourceLine" id="cb242-27" title="27"></a>
<a class="sourceLine" id="cb242-28" title="28">  onSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb242-29" title="29">    <span class="co">// Prevent the default form behavior</span></a>
<a class="sourceLine" id="cb242-30" title="30">    <span class="co">// so the page doesn&#39;t reload.</span></a>
<a class="sourceLine" id="cb242-31" title="31">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb242-32" title="32"></a>
<a class="sourceLine" id="cb242-33" title="33">    <span class="co">// Retrieve the contact us information from state.</span></a>
<a class="sourceLine" id="cb242-34" title="34">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb242-35" title="35"></a>
<a class="sourceLine" id="cb242-36" title="36">    <span class="co">// Create a new object for the contact us information.</span></a>
<a class="sourceLine" id="cb242-37" title="37">    <span class="kw">const</span> contactUsInformation <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb242-38" title="38">      name<span class="op">,</span></a>
<a class="sourceLine" id="cb242-39" title="39">      email<span class="op">,</span></a>
<a class="sourceLine" id="cb242-40" title="40">      phone<span class="op">,</span></a>
<a class="sourceLine" id="cb242-41" title="41">      <span class="dt">submittedOn</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb242-42" title="42">    <span class="op">};</span></a>
<a class="sourceLine" id="cb242-43" title="43"></a>
<a class="sourceLine" id="cb242-44" title="44">    <span class="co">// For now, just log the contact us information to the console</span></a>
<a class="sourceLine" id="cb242-45" title="45">    <span class="co">// though ideally, we&#39;d persist this information to a database</span></a>
<a class="sourceLine" id="cb242-46" title="46">    <span class="co">// using a REST API.</span></a>
<a class="sourceLine" id="cb242-47" title="47">    <span class="va">console</span>.<span class="at">log</span>(contactUsInformation)<span class="op">;</span></a>
<a class="sourceLine" id="cb242-48" title="48"></a>
<a class="sourceLine" id="cb242-49" title="49">    <span class="co">// Reset the form state.</span></a>
<a class="sourceLine" id="cb242-50" title="50">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb242-51" title="51">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb242-52" title="52">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb242-53" title="53">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb242-54" title="54">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb242-55" title="55">  <span class="op">}</span></a>
<a class="sourceLine" id="cb242-56" title="56"></a>
<a class="sourceLine" id="cb242-57" title="57">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb242-58" title="58">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb242-59" title="59"></a>
<a class="sourceLine" id="cb242-60" title="60">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb242-61" title="61">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-62" title="62">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Contact Us&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-63" title="63">        <span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">onSubmit</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb242-64" title="64">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-65" title="65">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;name&#39;</span><span class="op">&gt;</span><span class="dt">Name</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-66" title="66">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">nameOnChange</span><span class="op">}</span> value<span class="op">={</span>name<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb242-67" title="67">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-68" title="68">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-69" title="69">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;email&#39;</span><span class="op">&gt;</span><span class="dt">Email</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-70" title="70">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;email&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">emailOnChange</span><span class="op">}</span> value<span class="op">={</span>email<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb242-71" title="71">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-72" title="72">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-73" title="73">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span><span class="dt">Phone</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-74" title="74">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">phoneOnChange</span><span class="op">}</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb242-75" title="75">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-76" title="76">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-77" title="77">            <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-78" title="78">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-79" title="79">        &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-80" title="80">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb242-81" title="81">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb242-82" title="82">  <span class="op">}</span></a>
<a class="sourceLine" id="cb242-83" title="83"><span class="op">}</span></a>
<a class="sourceLine" id="cb242-84" title="84"></a>
<a class="sourceLine" id="cb242-85" title="85"><span class="im">export</span> <span class="im">default</span> ContactUs<span class="op">;</span></a></code></pre></div>
<p>If you run your application again and view the form in the browser, you can fill out each form field and click “Submit” to submit the form. Notice that the page doesn’t reload! And if you look in the developer tool’s console, you’ll see an object containing your contact us information.</p>
<h3 id="controlled-components">Controlled components</h3>
<p>Congrats! You’ve completed your first simple React form! In doing so, you used what’s known as “controlled components”.</p>
<p>HTML form elements naturally maintain their own state. For example, an <code>input</code> element will track the state of the value that’s typed within it (without any help from libraries like React). But a React class component uses <code>this.state</code> to track its internal state. To keep a component’s state as the “one source of truth”, <code>onChange</code> event handlers are used on form field elements to update the component’s state when a form element’s state has changed.</p>
<p>This approach of making the component’s state the “one source of truth” is called “controlled components”.</p>
<p>To help understand how this works, here’s an overview of the flow:</p>
<ul>
<li>A user types a character within a form <code>&lt;input&gt;</code> element;</li>
<li>The <code>&lt;input&gt;</code> element’s <code>onChange</code> event is raised;</li>
<li>The event handler method associated with the <code>&lt;input&gt;</code> element’s <code>onChange</code> event is called;</li>
<li>The event handler method calls the <code>this.setState</code> method to update the form field’s value in state;</li>
<li>Updating the component’s state causes React to re-render the component (i.e. the <code>render</code> method is called); and</li>
<li>The form <code>&lt;input&gt;</code> element is rendered with its <code>value</code> attribute set to the associated value from <code>this.state</code>.</li>
</ul>
<p>While all of the above steps might <em>feel</em> like a lot, in reality, the entire process happens very quickly. You can test this yourself by playing around with the <code>ContactUs</code> component. Typing within each of the form fields feels completely natural.</p>
<h2 id="handling-multiple-elements">Handling multiple elements</h2>
<p>Adding an <code>onChange</code> event handler method for each form element can become tedious and quickly bloat the code for your component. Luckily, you can define a single <code>onChange</code> event handler that’ll work for every form element.</p>
<p>Earlier you learned that a reference to the element that raised the <code>onChange</code> event is available through the <code>SyntheticEvent</code> object’s <code>target</code> property. Using the reference to the form field element, you can retrieve the current value and <em>name</em> of the element like this:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb243-1" title="1">onChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb243-2" title="2">  <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> value <span class="op">}</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">target</span><span class="op">;</span></a>
<a class="sourceLine" id="cb243-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>If the form field element’s <code>name</code> attribute matches the state property name then you can use it to index into the state object to update its value:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb244-1" title="1">onChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb244-2" title="2">  <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> value <span class="op">}</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">target</span><span class="op">;</span></a>
<a class="sourceLine" id="cb244-3" title="3">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> [name]<span class="op">:</span> value <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb244-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>This one event handler method can replace all three of the existing <code>onChange</code> event handler methods: <code>nameOnChange</code>, <code>emailOnChange</code>, and <code>phoneOnChange</code>. To make this work, add <code>name</code> attributes to each of the form field <code>&lt;input&gt;</code> elements and update the <code>onChange</code> attributes to reference the new <code>this.onChange</code> event handler method:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb245-1" title="1"><span class="co">// ./src/ContactUs.js</span></a>
<a class="sourceLine" id="cb245-2" title="2"></a>
<a class="sourceLine" id="cb245-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb245-4" title="4"></a>
<a class="sourceLine" id="cb245-5" title="5"><span class="kw">class</span> ContactUs <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb245-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb245-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb245-8" title="8"></a>
<a class="sourceLine" id="cb245-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb245-10" title="10">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb245-11" title="11">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb245-12" title="12">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb245-13" title="13">    <span class="op">};</span></a>
<a class="sourceLine" id="cb245-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb245-15" title="15"></a>
<a class="sourceLine" id="cb245-16" title="16">  onChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb245-17" title="17">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> value <span class="op">}</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">target</span><span class="op">;</span></a>
<a class="sourceLine" id="cb245-18" title="18">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> [name]<span class="op">:</span> value <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb245-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb245-20" title="20"></a>
<a class="sourceLine" id="cb245-21" title="21">  onSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb245-22" title="22">    <span class="co">// Prevent the default form behavior</span></a>
<a class="sourceLine" id="cb245-23" title="23">    <span class="co">// so the page doesn&#39;t reload.</span></a>
<a class="sourceLine" id="cb245-24" title="24">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb245-25" title="25"></a>
<a class="sourceLine" id="cb245-26" title="26">    <span class="co">// Retrieve the contact us information from state.</span></a>
<a class="sourceLine" id="cb245-27" title="27">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb245-28" title="28"></a>
<a class="sourceLine" id="cb245-29" title="29">    <span class="co">// Create a new object for the contact us information.</span></a>
<a class="sourceLine" id="cb245-30" title="30">    <span class="kw">const</span> contactUsInformation <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb245-31" title="31">      name<span class="op">,</span></a>
<a class="sourceLine" id="cb245-32" title="32">      email<span class="op">,</span></a>
<a class="sourceLine" id="cb245-33" title="33">      phone<span class="op">,</span></a>
<a class="sourceLine" id="cb245-34" title="34">      <span class="dt">submittedOn</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb245-35" title="35">    <span class="op">};</span></a>
<a class="sourceLine" id="cb245-36" title="36"></a>
<a class="sourceLine" id="cb245-37" title="37">    <span class="co">// For now, just log the contact us information to the console</span></a>
<a class="sourceLine" id="cb245-38" title="38">    <span class="co">// though ideally, we&#39;d persist this information to a database</span></a>
<a class="sourceLine" id="cb245-39" title="39">    <span class="co">// using a REST API.</span></a>
<a class="sourceLine" id="cb245-40" title="40">    <span class="va">console</span>.<span class="at">log</span>(contactUsInformation)<span class="op">;</span></a>
<a class="sourceLine" id="cb245-41" title="41"></a>
<a class="sourceLine" id="cb245-42" title="42">    <span class="co">// Reset the form state.</span></a>
<a class="sourceLine" id="cb245-43" title="43">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb245-44" title="44">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb245-45" title="45">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb245-46" title="46">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb245-47" title="47">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb245-48" title="48">  <span class="op">}</span></a>
<a class="sourceLine" id="cb245-49" title="49"></a>
<a class="sourceLine" id="cb245-50" title="50">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb245-51" title="51">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb245-52" title="52"></a>
<a class="sourceLine" id="cb245-53" title="53">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb245-54" title="54">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-55" title="55">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Contact Us&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-56" title="56">        <span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">onSubmit</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb245-57" title="57">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-58" title="58">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;name&#39;</span><span class="op">&gt;</span><span class="dt">Name</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-59" title="59">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> name<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>name<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb245-60" title="60">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-61" title="61">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-62" title="62">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;email&#39;</span><span class="op">&gt;</span><span class="dt">Email</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-63" title="63">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;email&#39;</span> name<span class="op">=</span><span class="st">&#39;email&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>email<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb245-64" title="64">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-65" title="65">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-66" title="66">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span><span class="dt">Phone</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-67" title="67">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> name<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb245-68" title="68">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-69" title="69">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-70" title="70">            <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-71" title="71">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-72" title="72">        &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-73" title="73">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb245-74" title="74">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb245-75" title="75">  <span class="op">}</span></a>
<a class="sourceLine" id="cb245-76" title="76"><span class="op">}</span></a>
<a class="sourceLine" id="cb245-77" title="77"></a>
<a class="sourceLine" id="cb245-78" title="78"><span class="im">export</span> <span class="im">default</span> ContactUs<span class="op">;</span></a></code></pre></div>
<p>Don’t forget to remove the <code>nameOnChange</code>, <code>emailOnChange</code>, and <code>phoneOnChange</code> event handler methods from your class component!</p>
<h2 id="adding-a-text-area">Adding a text area</h2>
<p>In a regular HTML form, the value for a <code>&lt;textarea&gt;</code> element is defined by its inner content:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb246-1" title="1"><span class="kw">&lt;textarea&gt;</span>This is the value for the text area element.<span class="kw">&lt;/textarea&gt;</span></a></code></pre></div>
<p>The <code>&lt;textarea&gt;</code> element, in React, uses a <code>value</code> attribute instead of its inner content to define its value. This allows the <code>&lt;textarea&gt;</code> element to be handled in the same way as <code>&lt;input&gt;</code> elements.</p>
<p>To see this in action, add a “Comments” field to the form:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb247-1" title="1"><span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb247-2" title="2">  <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;comments&#39;</span><span class="op">&gt;</span>Comments<span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb247-3" title="3">  <span class="op">&lt;</span>textarea id<span class="op">=</span><span class="st">&#39;comments&#39;</span> name<span class="op">=</span><span class="st">&#39;comments&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>comments<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb247-4" title="4">&lt;/div<span class="op">&gt;</span></a></code></pre></div>
<p>To support this new form field, you’ll need to also update the <code>constructor</code>, <code>onSubmit</code>, and <code>render</code> methods:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb248-1" title="1"><span class="co">// ./src/ContactUs.js</span></a>
<a class="sourceLine" id="cb248-2" title="2"></a>
<a class="sourceLine" id="cb248-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb248-4" title="4"></a>
<a class="sourceLine" id="cb248-5" title="5"><span class="kw">class</span> ContactUs <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb248-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb248-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb248-8" title="8"></a>
<a class="sourceLine" id="cb248-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb248-10" title="10">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb248-11" title="11">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb248-12" title="12">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb248-13" title="13">      <span class="dt">comments</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb248-14" title="14">    <span class="op">};</span></a>
<a class="sourceLine" id="cb248-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb248-16" title="16"></a>
<a class="sourceLine" id="cb248-17" title="17">  onChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb248-18" title="18">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> value <span class="op">}</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">target</span><span class="op">;</span></a>
<a class="sourceLine" id="cb248-19" title="19">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> [name]<span class="op">:</span> value <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb248-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb248-21" title="21"></a>
<a class="sourceLine" id="cb248-22" title="22">  onSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb248-23" title="23">    <span class="co">// Prevent the default form behavior</span></a>
<a class="sourceLine" id="cb248-24" title="24">    <span class="co">// so the page doesn&#39;t reload.</span></a>
<a class="sourceLine" id="cb248-25" title="25">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb248-26" title="26"></a>
<a class="sourceLine" id="cb248-27" title="27">    <span class="co">// Retrieve the contact us information from state.</span></a>
<a class="sourceLine" id="cb248-28" title="28">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone<span class="op">,</span> comments <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb248-29" title="29"></a>
<a class="sourceLine" id="cb248-30" title="30">    <span class="co">// Create a new object for the contact us information.</span></a>
<a class="sourceLine" id="cb248-31" title="31">    <span class="kw">const</span> contactUsInformation <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb248-32" title="32">      name<span class="op">,</span></a>
<a class="sourceLine" id="cb248-33" title="33">      email<span class="op">,</span></a>
<a class="sourceLine" id="cb248-34" title="34">      phone<span class="op">,</span></a>
<a class="sourceLine" id="cb248-35" title="35">      comments<span class="op">,</span></a>
<a class="sourceLine" id="cb248-36" title="36">      <span class="dt">submittedOn</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb248-37" title="37">    <span class="op">};</span></a>
<a class="sourceLine" id="cb248-38" title="38"></a>
<a class="sourceLine" id="cb248-39" title="39">    <span class="co">// For now, just log the contact us information to the console</span></a>
<a class="sourceLine" id="cb248-40" title="40">    <span class="co">// though ideally, we&#39;d persist this information to a database</span></a>
<a class="sourceLine" id="cb248-41" title="41">    <span class="co">// using a REST API.</span></a>
<a class="sourceLine" id="cb248-42" title="42">    <span class="va">console</span>.<span class="at">log</span>(contactUsInformation)<span class="op">;</span></a>
<a class="sourceLine" id="cb248-43" title="43"></a>
<a class="sourceLine" id="cb248-44" title="44">    <span class="co">// Reset the form state.</span></a>
<a class="sourceLine" id="cb248-45" title="45">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb248-46" title="46">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb248-47" title="47">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb248-48" title="48">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb248-49" title="49">      <span class="dt">comments</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb248-50" title="50">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb248-51" title="51">  <span class="op">}</span></a>
<a class="sourceLine" id="cb248-52" title="52"></a>
<a class="sourceLine" id="cb248-53" title="53">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb248-54" title="54">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone<span class="op">,</span> comments <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb248-55" title="55"></a>
<a class="sourceLine" id="cb248-56" title="56">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb248-57" title="57">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-58" title="58">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Contact Us&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-59" title="59">        <span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">onSubmit</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb248-60" title="60">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-61" title="61">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;name&#39;</span><span class="op">&gt;</span><span class="dt">Name</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-62" title="62">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> name<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>name<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb248-63" title="63">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-64" title="64">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-65" title="65">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;email&#39;</span><span class="op">&gt;</span><span class="dt">Email</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-66" title="66">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;email&#39;</span> name<span class="op">=</span><span class="st">&#39;email&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>email<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb248-67" title="67">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-68" title="68">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-69" title="69">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span><span class="dt">Phone</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-70" title="70">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> name<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb248-71" title="71">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-72" title="72">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-73" title="73">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;comments&#39;</span><span class="op">&gt;</span><span class="dt">Comments</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-74" title="74">            <span class="op">&lt;</span>textarea id<span class="op">=</span><span class="st">&#39;comments&#39;</span> name<span class="op">=</span><span class="st">&#39;comments&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>comments<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb248-75" title="75">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-76" title="76">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-77" title="77">            <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-78" title="78">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-79" title="79">        &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-80" title="80">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb248-81" title="81">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb248-82" title="82">  <span class="op">}</span></a>
<a class="sourceLine" id="cb248-83" title="83"><span class="op">}</span></a>
<a class="sourceLine" id="cb248-84" title="84"></a>
<a class="sourceLine" id="cb248-85" title="85"><span class="im">export</span> <span class="im">default</span> ContactUs<span class="op">;</span></a></code></pre></div>
<h2 id="adding-a-select-list">Adding a select list</h2>
<p>To maintain symmetry across React form element types, the <code>&lt;select&gt;</code> element also uses a <code>value</code> attribute to get and set the element’s selected option. To see this in action, add a <code>&lt;select&gt;</code> element to the right of the <code>&lt;input&gt;</code> element for the “Phone” form field, to give the user a way to specify what type of phone number they’re providing:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb249-1" title="1"><span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb249-2" title="2">  <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span>Phone<span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb249-3" title="3">  <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> name<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb249-4" title="4">  <span class="op">&lt;</span>select name<span class="op">=</span><span class="st">&#39;phoneType&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phoneType<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb249-5" title="5">    <span class="op">&lt;</span>option value<span class="op">=</span><span class="st">&#39;&#39;</span><span class="op">&gt;</span>Select a phone <span class="va">type</span>...&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb249-6" title="6">    <span class="op">&lt;</span>option<span class="op">&gt;</span>Home&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb249-7" title="7">    <span class="op">&lt;</span>option<span class="op">&gt;</span>Work&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb249-8" title="8">    <span class="op">&lt;</span>option<span class="op">&gt;</span>Mobile&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb249-9" title="9">  &lt;/select<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb249-10" title="10">&lt;/div<span class="op">&gt;</span></a></code></pre></div>
<p>In the above <code>&lt;select&gt;</code> list, the <code>&lt;option&gt;</code> elements are statically rendered, but it’s also possible to dynamically render them from an array of values. For the array of phone type option values, define a default value for a prop named <code>phoneTypes</code>:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb250-1" title="1"><span class="va">ContactUs</span>.<span class="at">defaultProps</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb250-2" title="2">  <span class="dt">phoneTypes</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb250-3" title="3">    <span class="st">&#39;Home&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb250-4" title="4">    <span class="st">&#39;Work&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb250-5" title="5">    <span class="st">&#39;Mobile&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb250-6" title="6">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb250-7" title="7"><span class="op">};</span></a></code></pre></div>
<p>Then render the <code>&lt;select&gt;</code> list options using the <code>this.props.phoneTypes</code> array:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb251-1" title="1"><span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb251-2" title="2">  <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span>Phone<span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb251-3" title="3">  <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> name<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb251-4" title="4">  <span class="op">&lt;</span>select name<span class="op">=</span><span class="st">&#39;phoneType&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phoneType<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb251-5" title="5">    <span class="op">&lt;</span>option value<span class="op">=</span><span class="st">&#39;&#39;</span><span class="op">&gt;</span>Select a phone <span class="va">type</span>...&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb251-6" title="6">    <span class="op">{</span></a>
<a class="sourceLine" id="cb251-7" title="7">      <span class="kw">this</span>.<span class="va">props</span>.<span class="va">phoneTypes</span>.<span class="at">map</span>(phoneType <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb251-8" title="8">        <span class="op">&lt;</span>option key<span class="op">={</span>phoneType<span class="op">}&gt;{</span>phoneType<span class="op">}</span>&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb251-9" title="9">      )</a>
<a class="sourceLine" id="cb251-10" title="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb251-11" title="11">  &lt;/select<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb251-12" title="12">&lt;/div<span class="op">&gt;</span></a></code></pre></div>
<p>Notice that you can leave the first “Select a phone type…” <code>&lt;option&gt;</code> element as a static element before rendering the dynamic <code>&lt;option&gt;</code> elements.</p>
<p>To complete this new field, update the <code>constructor</code>, <code>onSubmit</code>, and <code>render</code> methods just like you did when adding the “Comments” form field:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb252-1" title="1"><span class="co">// ./src/ContactUs.js</span></a>
<a class="sourceLine" id="cb252-2" title="2"></a>
<a class="sourceLine" id="cb252-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb252-4" title="4"></a>
<a class="sourceLine" id="cb252-5" title="5"><span class="kw">class</span> ContactUs <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb252-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb252-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb252-8" title="8"></a>
<a class="sourceLine" id="cb252-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb252-10" title="10">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-11" title="11">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-12" title="12">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-13" title="13">      <span class="dt">phoneType</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-14" title="14">      <span class="dt">comments</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-15" title="15">    <span class="op">};</span></a>
<a class="sourceLine" id="cb252-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb252-17" title="17"></a>
<a class="sourceLine" id="cb252-18" title="18">  onChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb252-19" title="19">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> value <span class="op">}</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">target</span><span class="op">;</span></a>
<a class="sourceLine" id="cb252-20" title="20">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> [name]<span class="op">:</span> value <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb252-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb252-22" title="22"></a>
<a class="sourceLine" id="cb252-23" title="23">  onSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb252-24" title="24">    <span class="co">// Prevent the default form behavior</span></a>
<a class="sourceLine" id="cb252-25" title="25">    <span class="co">// so the page doesn&#39;t reload.</span></a>
<a class="sourceLine" id="cb252-26" title="26">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb252-27" title="27"></a>
<a class="sourceLine" id="cb252-28" title="28">    <span class="co">// Retrieve the contact us information from state.</span></a>
<a class="sourceLine" id="cb252-29" title="29">    <span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb252-30" title="30">      name<span class="op">,</span></a>
<a class="sourceLine" id="cb252-31" title="31">      email<span class="op">,</span></a>
<a class="sourceLine" id="cb252-32" title="32">      phone<span class="op">,</span></a>
<a class="sourceLine" id="cb252-33" title="33">      phoneType<span class="op">,</span></a>
<a class="sourceLine" id="cb252-34" title="34">      comments<span class="op">,</span></a>
<a class="sourceLine" id="cb252-35" title="35">    <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb252-36" title="36"></a>
<a class="sourceLine" id="cb252-37" title="37">    <span class="co">// Create a new object for the contact us information.</span></a>
<a class="sourceLine" id="cb252-38" title="38">    <span class="kw">const</span> contactUsInformation <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb252-39" title="39">      name<span class="op">,</span></a>
<a class="sourceLine" id="cb252-40" title="40">      email<span class="op">,</span></a>
<a class="sourceLine" id="cb252-41" title="41">      phone<span class="op">,</span></a>
<a class="sourceLine" id="cb252-42" title="42">      phoneType<span class="op">,</span></a>
<a class="sourceLine" id="cb252-43" title="43">      comments<span class="op">,</span></a>
<a class="sourceLine" id="cb252-44" title="44">      <span class="dt">submittedOn</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb252-45" title="45">    <span class="op">};</span></a>
<a class="sourceLine" id="cb252-46" title="46"></a>
<a class="sourceLine" id="cb252-47" title="47">    <span class="co">// For now, just log the contact us information to the console</span></a>
<a class="sourceLine" id="cb252-48" title="48">    <span class="co">// though ideally, we&#39;d persist this information to a database</span></a>
<a class="sourceLine" id="cb252-49" title="49">    <span class="co">// using a REST API.</span></a>
<a class="sourceLine" id="cb252-50" title="50">    <span class="va">console</span>.<span class="at">log</span>(contactUsInformation)<span class="op">;</span></a>
<a class="sourceLine" id="cb252-51" title="51"></a>
<a class="sourceLine" id="cb252-52" title="52">    <span class="co">// Reset the form state.</span></a>
<a class="sourceLine" id="cb252-53" title="53">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb252-54" title="54">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-55" title="55">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-56" title="56">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-57" title="57">      <span class="dt">phoneType</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-58" title="58">      <span class="dt">comments</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-59" title="59">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb252-60" title="60">  <span class="op">}</span></a>
<a class="sourceLine" id="cb252-61" title="61"></a>
<a class="sourceLine" id="cb252-62" title="62">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb252-63" title="63">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> email<span class="op">,</span> phone<span class="op">,</span> phoneType<span class="op">,</span> comments <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb252-64" title="64"></a>
<a class="sourceLine" id="cb252-65" title="65">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb252-66" title="66">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-67" title="67">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Contact Us&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-68" title="68">        <span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">onSubmit</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb252-69" title="69">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-70" title="70">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;name&#39;</span><span class="op">&gt;</span><span class="dt">Name</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-71" title="71">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> name<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>name<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb252-72" title="72">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-73" title="73">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-74" title="74">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;email&#39;</span><span class="op">&gt;</span><span class="dt">Email</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-75" title="75">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;email&#39;</span> name<span class="op">=</span><span class="st">&#39;email&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>email<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb252-76" title="76">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-77" title="77">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-78" title="78">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span><span class="dt">Phone</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-79" title="79">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> name<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb252-80" title="80">            <span class="op">&lt;</span>select name<span class="op">=</span><span class="st">&#39;phoneType&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phoneType<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb252-81" title="81">              <span class="op">&lt;</span>option value<span class="op">=</span><span class="st">&#39;&#39;</span><span class="op">&gt;</span>Select a phone <span class="va">type</span>...&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-82" title="82">              <span class="op">{</span></a>
<a class="sourceLine" id="cb252-83" title="83">                <span class="kw">this</span>.<span class="va">props</span>.<span class="va">phoneTypes</span>.<span class="at">map</span>(phoneType <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb252-84" title="84">                  <span class="op">&lt;</span>option key<span class="op">={</span>phoneType<span class="op">}&gt;{</span>phoneType<span class="op">}</span>&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-85" title="85">                )</a>
<a class="sourceLine" id="cb252-86" title="86">              <span class="op">}</span></a>
<a class="sourceLine" id="cb252-87" title="87">            &lt;/select<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-88" title="88">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-89" title="89">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-90" title="90">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;comments&#39;</span><span class="op">&gt;</span><span class="dt">Comments</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-91" title="91">            <span class="op">&lt;</span>textarea id<span class="op">=</span><span class="st">&#39;comments&#39;</span> name<span class="op">=</span><span class="st">&#39;comments&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>comments<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb252-92" title="92">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-93" title="93">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-94" title="94">            <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-95" title="95">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-96" title="96">        &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-97" title="97">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb252-98" title="98">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb252-99" title="99">  <span class="op">}</span></a>
<a class="sourceLine" id="cb252-100" title="100"><span class="op">}</span></a>
<a class="sourceLine" id="cb252-101" title="101"></a>
<a class="sourceLine" id="cb252-102" title="102"><span class="va">ContactUs</span>.<span class="at">defaultProps</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb252-103" title="103">  <span class="dt">phoneTypes</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb252-104" title="104">    <span class="st">&#39;Home&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-105" title="105">    <span class="st">&#39;Work&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-106" title="106">    <span class="st">&#39;Mobile&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb252-107" title="107">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb252-108" title="108"><span class="op">};</span></a>
<a class="sourceLine" id="cb252-109" title="109"></a>
<a class="sourceLine" id="cb252-110" title="110"><span class="im">export</span> <span class="im">default</span> ContactUs<span class="op">;</span></a></code></pre></div>
<h2 id="implementing-validations">Implementing validations</h2>
<p>One last feature needs to be added before the simple “Contact Us” form is done: form validation. Without validation, a user can submit the form without providing a single bit of data. To implement form validation, you’ll use vanilla JS to validate that the “Name” and “Email” form fields have values before allowing the form to be submitted.</p>
<p>To do that, add a method to your class component named <code>validate</code> that accepts <code>name</code> and <code>email</code> parameters. Use conditional statements to check the truthiness of the <code>name</code> and <code>email</code> parameters. If either parameter is <code>false</code>, add an appropriate validation error message to a <code>validationErrors</code> array and return the array from the method:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb253-1" title="1"><span class="at">validate</span>(name<span class="op">,</span> email) <span class="op">{</span></a>
<a class="sourceLine" id="cb253-2" title="2">  <span class="kw">const</span> validationErrors <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb253-3" title="3"></a>
<a class="sourceLine" id="cb253-4" title="4">  <span class="cf">if</span> (<span class="op">!</span>name) <span class="op">{</span></a>
<a class="sourceLine" id="cb253-5" title="5">    <span class="va">validationErrors</span>.<span class="at">push</span>(<span class="st">&#39;Please provide a Name&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb253-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb253-7" title="7"></a>
<a class="sourceLine" id="cb253-8" title="8">  <span class="cf">if</span> (<span class="op">!</span>email) <span class="op">{</span></a>
<a class="sourceLine" id="cb253-9" title="9">    <span class="va">validationErrors</span>.<span class="at">push</span>(<span class="st">&#39;Please provide an Email&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb253-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb253-11" title="11">  </a>
<a class="sourceLine" id="cb253-12" title="12">  <span class="cf">return</span> validationErrors<span class="op">;</span></a>
<a class="sourceLine" id="cb253-13" title="13"><span class="op">}</span></a></code></pre></div>
<p>Within the <code>onSubmit</code> event handler method, call the <code>validate</code> method and check the length of the returned array to see if there are any validation errors. If there are validation errors, then call the <code>this.setState</code> method to update the component state, otherwise process the form submission:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb254-1" title="1"><span class="co">// Get validation errors.</span></a>
<a class="sourceLine" id="cb254-2" title="2"><span class="kw">const</span> validationErrors <span class="op">=</span> <span class="kw">this</span>.<span class="at">validate</span>(name<span class="op">,</span> email)<span class="op">;</span></a>
<a class="sourceLine" id="cb254-3" title="3"></a>
<a class="sourceLine" id="cb254-4" title="4"><span class="co">// If we have validation errors...</span></a>
<a class="sourceLine" id="cb254-5" title="5"><span class="cf">if</span> (<span class="va">validationErrors</span>.<span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb254-6" title="6">  <span class="co">// Update the state to display the validation errors.</span></a>
<a class="sourceLine" id="cb254-7" title="7">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> validationErrors <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb254-8" title="8"><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb254-9" title="9">  <span class="co">// Process the form submission...</span></a>
<a class="sourceLine" id="cb254-10" title="10"><span class="op">}</span></a></code></pre></div>
<p>In the <code>render</code> method, use an inline conditional expression with a logical <code>&amp;&amp;</code> operator to conditionally render an unordered list of validation messages if the <code>validationErrors</code> array has a <code>length</code> greater than <code>0</code>:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb255-1" title="1"><span class="op">{</span> <span class="va">validationErrors</span>.<span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> (</a>
<a class="sourceLine" id="cb255-2" title="2">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb255-3" title="3">      The following errors were <span class="dt">found</span><span class="op">:</span></a>
<a class="sourceLine" id="cb255-4" title="4">      <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb255-5" title="5">        <span class="op">{</span><span class="va">validationErrors</span>.<span class="at">map</span>(error <span class="kw">=&gt;</span> <span class="op">&lt;</span>li key<span class="op">={</span>error<span class="op">}&gt;{</span>error<span class="op">}</span>&lt;/li<span class="op">&gt;</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb255-6" title="6">      &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb255-7" title="7">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb255-8" title="8">  )</a>
<a class="sourceLine" id="cb255-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>You’ll also need to update the <code>constructor</code> method to initialize the <code>validationErrors</code> state property:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb256-1" title="1"><span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb256-2" title="2">  <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb256-3" title="3"></a>
<a class="sourceLine" id="cb256-4" title="4">  <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb256-5" title="5">    <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb256-6" title="6">    <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb256-7" title="7">    <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb256-8" title="8">    <span class="dt">phoneType</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb256-9" title="9">    <span class="dt">comments</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb256-10" title="10">    <span class="dt">validationErrors</span><span class="op">:</span> []<span class="op">,</span></a>
<a class="sourceLine" id="cb256-11" title="11">  <span class="op">};</span></a>
<a class="sourceLine" id="cb256-12" title="12"><span class="op">}</span></a></code></pre></div>
<p>Putting all of that together, here’s what the updated <code>ContactUs</code> class component should look like now:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb257-1" title="1"><span class="co">// ./src/ContactUs.js</span></a>
<a class="sourceLine" id="cb257-2" title="2"></a>
<a class="sourceLine" id="cb257-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb257-4" title="4"></a>
<a class="sourceLine" id="cb257-5" title="5"><span class="kw">class</span> ContactUs <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb257-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb257-8" title="8"></a>
<a class="sourceLine" id="cb257-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-10" title="10">      <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-11" title="11">      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-12" title="12">      <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-13" title="13">      <span class="dt">phoneType</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-14" title="14">      <span class="dt">comments</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-15" title="15">      <span class="dt">validationErrors</span><span class="op">:</span> []<span class="op">,</span></a>
<a class="sourceLine" id="cb257-16" title="16">    <span class="op">};</span></a>
<a class="sourceLine" id="cb257-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb257-18" title="18"></a>
<a class="sourceLine" id="cb257-19" title="19">  onChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-20" title="20">    <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> value <span class="op">}</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">target</span><span class="op">;</span></a>
<a class="sourceLine" id="cb257-21" title="21">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> [name]<span class="op">:</span> value <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb257-22" title="22">  <span class="op">}</span></a>
<a class="sourceLine" id="cb257-23" title="23"></a>
<a class="sourceLine" id="cb257-24" title="24">  <span class="at">validate</span>(name<span class="op">,</span> email) <span class="op">{</span></a>
<a class="sourceLine" id="cb257-25" title="25">    <span class="kw">const</span> validationErrors <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb257-26" title="26"></a>
<a class="sourceLine" id="cb257-27" title="27">    <span class="cf">if</span> (<span class="op">!</span>name) <span class="op">{</span></a>
<a class="sourceLine" id="cb257-28" title="28">      <span class="va">validationErrors</span>.<span class="at">push</span>(<span class="st">&#39;Please provide a Name&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb257-29" title="29">    <span class="op">}</span></a>
<a class="sourceLine" id="cb257-30" title="30"></a>
<a class="sourceLine" id="cb257-31" title="31">    <span class="cf">if</span> (<span class="op">!</span>email) <span class="op">{</span></a>
<a class="sourceLine" id="cb257-32" title="32">      <span class="va">validationErrors</span>.<span class="at">push</span>(<span class="st">&#39;Please provide an Email&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb257-33" title="33">    <span class="op">}</span></a>
<a class="sourceLine" id="cb257-34" title="34">    </a>
<a class="sourceLine" id="cb257-35" title="35">    <span class="cf">return</span> validationErrors<span class="op">;</span></a>
<a class="sourceLine" id="cb257-36" title="36">  <span class="op">}</span></a>
<a class="sourceLine" id="cb257-37" title="37"></a>
<a class="sourceLine" id="cb257-38" title="38">  onSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-39" title="39">    <span class="co">// Prevent the default form behavior</span></a>
<a class="sourceLine" id="cb257-40" title="40">    <span class="co">// so the page doesn&#39;t reload.</span></a>
<a class="sourceLine" id="cb257-41" title="41">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb257-42" title="42"></a>
<a class="sourceLine" id="cb257-43" title="43">    <span class="co">// Retrieve the contact us information from state.</span></a>
<a class="sourceLine" id="cb257-44" title="44">    <span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-45" title="45">      name<span class="op">,</span></a>
<a class="sourceLine" id="cb257-46" title="46">      email<span class="op">,</span></a>
<a class="sourceLine" id="cb257-47" title="47">      phone<span class="op">,</span></a>
<a class="sourceLine" id="cb257-48" title="48">      phoneType<span class="op">,</span></a>
<a class="sourceLine" id="cb257-49" title="49">      comments<span class="op">,</span></a>
<a class="sourceLine" id="cb257-50" title="50">    <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span> </a>
<a class="sourceLine" id="cb257-51" title="51"></a>
<a class="sourceLine" id="cb257-52" title="52">    <span class="co">// Get validation errors.</span></a>
<a class="sourceLine" id="cb257-53" title="53">    <span class="kw">const</span> validationErrors <span class="op">=</span> <span class="kw">this</span>.<span class="at">validate</span>(name<span class="op">,</span> email)<span class="op">;</span></a>
<a class="sourceLine" id="cb257-54" title="54"></a>
<a class="sourceLine" id="cb257-55" title="55">    <span class="co">// If we have validation errors...</span></a>
<a class="sourceLine" id="cb257-56" title="56">    <span class="cf">if</span> (<span class="va">validationErrors</span>.<span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb257-57" title="57">      <span class="co">// Update the state to display the validation errors.</span></a>
<a class="sourceLine" id="cb257-58" title="58">      <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> validationErrors <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb257-59" title="59">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-60" title="60">      <span class="co">// Create a new object for the contact us information.</span></a>
<a class="sourceLine" id="cb257-61" title="61">      <span class="kw">const</span> contactUsInformation <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-62" title="62">        name<span class="op">,</span></a>
<a class="sourceLine" id="cb257-63" title="63">        email<span class="op">,</span></a>
<a class="sourceLine" id="cb257-64" title="64">        phone<span class="op">,</span></a>
<a class="sourceLine" id="cb257-65" title="65">        phoneType<span class="op">,</span></a>
<a class="sourceLine" id="cb257-66" title="66">        comments<span class="op">,</span></a>
<a class="sourceLine" id="cb257-67" title="67">        <span class="dt">submittedOn</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb257-68" title="68">      <span class="op">};</span></a>
<a class="sourceLine" id="cb257-69" title="69"></a>
<a class="sourceLine" id="cb257-70" title="70">      <span class="co">// For now, just log the contact us information to the console</span></a>
<a class="sourceLine" id="cb257-71" title="71">      <span class="co">// though ideally, we&#39;d persist this information to a database</span></a>
<a class="sourceLine" id="cb257-72" title="72">      <span class="co">// using a REST API.</span></a>
<a class="sourceLine" id="cb257-73" title="73">      <span class="va">console</span>.<span class="at">log</span>(contactUsInformation)<span class="op">;</span></a>
<a class="sourceLine" id="cb257-74" title="74"></a>
<a class="sourceLine" id="cb257-75" title="75">      <span class="co">// Reset the form state.</span></a>
<a class="sourceLine" id="cb257-76" title="76">      <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb257-77" title="77">        <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-78" title="78">        <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-79" title="79">        <span class="dt">phone</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-80" title="80">        <span class="dt">phoneType</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-81" title="81">        <span class="dt">comments</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-82" title="82">        <span class="dt">validationErrors</span><span class="op">:</span> []<span class="op">,</span></a>
<a class="sourceLine" id="cb257-83" title="83">      <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb257-84" title="84">    <span class="op">}</span></a>
<a class="sourceLine" id="cb257-85" title="85">  <span class="op">}</span></a>
<a class="sourceLine" id="cb257-86" title="86"></a>
<a class="sourceLine" id="cb257-87" title="87">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb257-88" title="88">    <span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-89" title="89">      name<span class="op">,</span></a>
<a class="sourceLine" id="cb257-90" title="90">      email<span class="op">,</span></a>
<a class="sourceLine" id="cb257-91" title="91">      phone<span class="op">,</span></a>
<a class="sourceLine" id="cb257-92" title="92">      phoneType<span class="op">,</span></a>
<a class="sourceLine" id="cb257-93" title="93">      comments<span class="op">,</span></a>
<a class="sourceLine" id="cb257-94" title="94">      validationErrors<span class="op">,</span></a>
<a class="sourceLine" id="cb257-95" title="95">    <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb257-96" title="96"></a>
<a class="sourceLine" id="cb257-97" title="97">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb257-98" title="98">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-99" title="99">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Contact Us&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-100" title="100">        <span class="op">{</span> <span class="va">validationErrors</span>.<span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> (</a>
<a class="sourceLine" id="cb257-101" title="101">            <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-102" title="102">              The following errors were <span class="dt">found</span><span class="op">:</span></a>
<a class="sourceLine" id="cb257-103" title="103">              <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-104" title="104">                <span class="op">{</span><span class="va">validationErrors</span>.<span class="at">map</span>(error <span class="kw">=&gt;</span> <span class="op">&lt;</span>li key<span class="op">={</span>error<span class="op">}&gt;{</span>error<span class="op">}</span>&lt;/li<span class="op">&gt;</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb257-105" title="105">              &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-106" title="106">            &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-107" title="107">          )</a>
<a class="sourceLine" id="cb257-108" title="108">        <span class="op">}</span></a>
<a class="sourceLine" id="cb257-109" title="109">        <span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">onSubmit</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb257-110" title="110">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-111" title="111">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;name&#39;</span><span class="op">&gt;</span><span class="dt">Name</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-112" title="112">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;name&#39;</span> name<span class="op">=</span><span class="st">&#39;name&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>name<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb257-113" title="113">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-114" title="114">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-115" title="115">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;email&#39;</span><span class="op">&gt;</span><span class="dt">Email</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-116" title="116">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;email&#39;</span> name<span class="op">=</span><span class="st">&#39;email&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>email<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb257-117" title="117">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-118" title="118">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-119" title="119">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;phone&#39;</span><span class="op">&gt;</span><span class="dt">Phone</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-120" title="120">            <span class="op">&lt;</span>input id<span class="op">=</span><span class="st">&#39;phone&#39;</span> name<span class="op">=</span><span class="st">&#39;phone&#39;</span> type<span class="op">=</span><span class="st">&#39;text&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phone<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb257-121" title="121">            <span class="op">&lt;</span>select name<span class="op">=</span><span class="st">&#39;phoneType&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>phoneType<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb257-122" title="122">              <span class="op">&lt;</span>option value<span class="op">=</span><span class="st">&#39;&#39;</span><span class="op">&gt;</span>Select a phone <span class="va">type</span>...&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-123" title="123">              <span class="op">{</span></a>
<a class="sourceLine" id="cb257-124" title="124">                <span class="kw">this</span>.<span class="va">props</span>.<span class="va">phoneTypes</span>.<span class="at">map</span>(phoneType <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb257-125" title="125">                  <span class="op">&lt;</span>option key<span class="op">={</span>phoneType<span class="op">}&gt;{</span>phoneType<span class="op">}</span>&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-126" title="126">                )</a>
<a class="sourceLine" id="cb257-127" title="127">              <span class="op">}</span></a>
<a class="sourceLine" id="cb257-128" title="128">            &lt;/select<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-129" title="129">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-130" title="130">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-131" title="131">            <span class="op">&lt;</span>label htmlFor<span class="op">=</span><span class="st">&#39;comments&#39;</span><span class="op">&gt;</span><span class="dt">Comments</span><span class="op">:</span>&lt;/label<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-132" title="132">            <span class="op">&lt;</span>textarea id<span class="op">=</span><span class="st">&#39;comments&#39;</span> name<span class="op">=</span><span class="st">&#39;comments&#39;</span> onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">onChange</span><span class="op">}</span> value<span class="op">={</span>comments<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb257-133" title="133">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-134" title="134">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-135" title="135">            <span class="op">&lt;</span>button<span class="op">&gt;</span>Submit&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-136" title="136">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-137" title="137">        &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-138" title="138">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb257-139" title="139">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb257-140" title="140">  <span class="op">}</span></a>
<a class="sourceLine" id="cb257-141" title="141"><span class="op">}</span></a>
<a class="sourceLine" id="cb257-142" title="142"></a>
<a class="sourceLine" id="cb257-143" title="143"><span class="va">ContactUs</span>.<span class="at">defaultProps</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb257-144" title="144">  <span class="dt">phoneTypes</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb257-145" title="145">    <span class="st">&#39;Home&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-146" title="146">    <span class="st">&#39;Work&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-147" title="147">    <span class="st">&#39;Mobile&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb257-148" title="148">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb257-149" title="149"><span class="op">};</span></a>
<a class="sourceLine" id="cb257-150" title="150"></a>
<a class="sourceLine" id="cb257-151" title="151"><span class="im">export</span> <span class="im">default</span> ContactUs<span class="op">;</span></a></code></pre></div>
<p>If you run your application again, view the form in the browser, and attempt to submit the form without providing any form field values, you’ll receive two validation error messages:</p>
<pre><code>The following errors were found:

  * Please provide a Name
  * Please provide an Email</code></pre>
<p>Overall, this approach to validating the form is relatively simple. You <em>could</em> validate the data as it changes so that the user would receive feedback sooner (i.e. not having to wait to submit the form to see the validation error messages). Sometimes it’s helpful to receive feedback in real time, but sometimes it can be annoying to users. Consider each situation and use an approach that feels appropriate for your users.</p>
<h3 id="using-a-validation-library">Using a validation library</h3>
<p>You can also use a validation library like <a href="https://github.com/validatorjs/validator.js">Validator.js</a> to add more sophisticated form validations.</p>
<p>First, install the <code>validator</code> npm package:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb259-1" title="1"><span class="ex">npm</span> install validator</a></code></pre></div>
<p>Then import the email validator into the <code>./src/ContactUs.js</code> module:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb260-1" title="1"><span class="im">import</span> isEmail <span class="im">from</span> <span class="st">&#39;validator/es/lib/isEmail&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Now you can use the <code>isEmail</code> validator function to check if the provided <code>email</code> value is in fact a valid email address:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb261-1" title="1"><span class="at">validate</span>(name<span class="op">,</span> email) <span class="op">{</span></a>
<a class="sourceLine" id="cb261-2" title="2">  <span class="kw">const</span> validationErrors <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb261-3" title="3"></a>
<a class="sourceLine" id="cb261-4" title="4">  <span class="cf">if</span> (<span class="op">!</span>name) <span class="op">{</span></a>
<a class="sourceLine" id="cb261-5" title="5">    <span class="va">validationErrors</span>.<span class="at">push</span>(<span class="st">&#39;Please provide a Name&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb261-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb261-7" title="7"></a>
<a class="sourceLine" id="cb261-8" title="8">  <span class="cf">if</span> (<span class="op">!</span>email) <span class="op">{</span></a>
<a class="sourceLine" id="cb261-9" title="9">    <span class="va">validationErrors</span>.<span class="at">push</span>(<span class="st">&#39;Please provide an Email&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb261-10" title="10">  <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="at">isEmail</span>(email)) <span class="op">{</span></a>
<a class="sourceLine" id="cb261-11" title="11">    <span class="va">validationErrors</span>.<span class="at">push</span>(<span class="st">&#39;Please provide a valid Email&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb261-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb261-13" title="13">  </a>
<a class="sourceLine" id="cb261-14" title="14">  <span class="cf">return</span> validationErrors<span class="op">;</span></a>
<a class="sourceLine" id="cb261-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>If you run your application again, view the form in the browser, and attempt to submit the form with an invalid email address, you’ll receive the following validation error message:</p>
<pre><code>The following errors were found:

  * Please provide a valid Email</code></pre>
<h3 id="client-side-vs-server-side-validation">Client-side vs server-side validation</h3>
<p>As a reminder, client-side validation like the validations in the <code>ContactUs</code> class component, are optional to implement; <strong>server-side validation is not optional</strong>. This is because client side validations can be disabled or manipulated by savvy users.</p>
<p>Sometimes the “best” approach is to skip implementing validations on the client-side and rely completely on the server-side validation. Using this approach, you’d simply call the API when the form is submitted and if the request returns a <code>400 BAD REQUEST</code> response, you’d display the validation error messages returned from the server.</p>
<p>If you do decide to implement client-side validations, do it with the end goal of improving your application’s overall user experience, not as your only means of validating user provided data.</p>
<h2 id="what-you-learned-4">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Create a React class component containing a simple form;</li>
<li>Define a single event handler method to handle <code>onChange</code> events for multiple <code>&lt;input&gt;</code> elements;</li>
<li>Add a <code>&lt;textarea&gt;</code> element to a form;</li>
<li>Add a <code>&lt;select&gt;</code> element to a form; and</li>
<li>Implement form validations.</li>
</ul>
<hr />
<h1 id="component-lifecycle">Component Lifecycle</h1>
<p>When creating a React class component, you define its props and state, how it’ll handle user generated events, and how it’ll render, but you don’t directly control <em>when</em> those things occur. And while you can add your component to another component’s <code>render</code> method (making it a child of that component), you don’t control <em>when</em> your component will be loaded into (or unloaded from) the component tree. You also don’t control when your component will be updated and re-rendered.</p>
<p>The lifecycle of a component is simply a way of describing the key moments in the lifetime of a component: when it’s loading (i.e. mounting), updating, and unloading (i.e. unmounting).</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Describe the lifecycle of a React component;</li>
<li>Recall that the commonly used component lifecycle methods include <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code>; and</li>
<li>Use the <code>componentDidMount</code> component lifecycle method to fetch data from an API.</li>
</ul>
<h2 id="the-lifecycle-of-a-react-component">The lifecycle of a React component</h2>
<p>Each class component has several lifecycle methods that you can add to run code at specific points in a component’s lifetime:</p>
<ul>
<li><a href="https://reactjs.org/docs/react-component.html#componentdidmount"><code>componentDidMount</code></a> - This method is called after your component has been added to the component tree.</li>
<li><a href="https://reactjs.org/docs/react-component.html#componentdidupdate"><code>componentDidUpdate</code></a> - This method is called after your component has been updated.</li>
<li><a href="https://reactjs.org/docs/react-component.html#componentwillunmount"><code>componentWillUnmount</code></a> - This method is called just before your component is removed from the component tree.</li>
</ul>
<p>Let’s take a closer look the process that occurs when a component is mounting, updating, and unmounting.</p>
<h3 id="mounting">Mounting</h3>
<p>When a class component is being added to the component tree, the following process occurs:</p>
<ul>
<li>The <code>constructor</code> method is called;</li>
<li>The <code>render</code> method is called;</li>
<li>React updates the DOM; and</li>
<li>The <code>componentDidMount</code> lifecycle method is called.</li>
</ul>
<h3 id="updating">Updating</h3>
<p>A component will update if it receives new props or if the <code>setState</code> method is called.</p>
<p>When a component receives new props, the following process occurs:</p>
<ul>
<li>The <code>render</code> method is called;</li>
<li>React updates DOM; and</li>
<li>The <code>componentDidUpdate</code> lifecycle method is called.</li>
</ul>
<p>When a the <code>setState</code> method is called, the following process occurs:</p>
<ul>
<li>The <code>render</code> method is called;</li>
<li>React updates DOM; and</li>
<li>The <code>componentDidUpdate</code> lifecycle method is called.</li>
</ul>
<h3 id="unmounting">Unmounting</h3>
<p>Just before a class component is removed from the component tree, the <code>componentWillUnmount</code> lifecycle method is called.</p>
<blockquote>
<p>To see a visual depiction of the above processes, check out this interactive <a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">lifecycle diagram</a>.</p>
</blockquote>
<h3 id="avoiding-the-legacy-lifecycle-methods">Avoiding the legacy lifecycle methods</h3>
<p>In earlier versions of React, there were additional lifecycle methods that you could use. These methods are now deprecated and are marked as “unsafe” to use (because they’ll eventually be removed from React’s API).</p>
<p>The legacy lifecycle methods are:</p>
<ul>
<li><a href="https://reactjs.org/docs/react-component.html#unsafe_componentwillmount"><code>UNSAFE_componentWillMount</code></a></li>
<li><a href="https://reactjs.org/docs/react-component.html#unsafe_componentwillreceiveprops"><code>UNSAFE_componentWillReceiveProps</code></a></li>
<li><a href="https://reactjs.org/docs/react-component.html#unsafe_componentwillupdate"><code>UNSAFE_componentWillUpdate</code></a></li>
</ul>
<p>Sometimes you’ll encounter these lifecycle methods in older articles and code examples when researching React online. To learn more about these lifecycle methods, see the <a href="https://reactjs.org/docs/react-component.html#legacy-lifecycle-methods">official React documentation</a>.</p>
<h2 id="using-the-class-component-lifecycle-methods">Using the class component lifecycle methods</h2>
<p>To see the <a href="https://reactjs.org/docs/react-component.html#componentdidmount"><code>componentDidMount</code></a>, <a href="https://reactjs.org/docs/react-component.html#componentdidupdate"><code>componentDidUpdate</code></a>, and <a href="https://reactjs.org/docs/react-component.html#componentwillunmount"><code>componentWillUnmount</code></a> lifecycle methods in action, you can create a couple of simple React class components.</p>
<p>For the first class component, you’ll define the <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code> lifecycle methods and render an <code>&lt;h2&gt;</code> element using the <code>this.props.text</code> prop for its content:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb263-1" title="1"><span class="co">// ./src/LifecycleMethods.js</span></a>
<a class="sourceLine" id="cb263-2" title="2"></a>
<a class="sourceLine" id="cb263-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb263-4" title="4"></a>
<a class="sourceLine" id="cb263-5" title="5"><span class="kw">class</span> LifecycleMethods <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb263-6" title="6">  <span class="at">componentDidMount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb263-7" title="7">    <span class="cf">debugger</span><span class="op">;</span></a>
<a class="sourceLine" id="cb263-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb263-9" title="9"></a>
<a class="sourceLine" id="cb263-10" title="10">  <span class="at">componentDidUpdate</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb263-11" title="11">    <span class="cf">debugger</span><span class="op">;</span></a>
<a class="sourceLine" id="cb263-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb263-13" title="13"></a>
<a class="sourceLine" id="cb263-14" title="14">  <span class="at">componentWillUnmount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb263-15" title="15">    <span class="cf">debugger</span><span class="op">;</span></a>
<a class="sourceLine" id="cb263-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb263-17" title="17"></a>
<a class="sourceLine" id="cb263-18" title="18">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb263-19" title="19">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb263-20" title="20">    <span class="op">&lt;</span>h2<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb263-21" title="21">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb263-22" title="22">  <span class="op">}</span></a>
<a class="sourceLine" id="cb263-23" title="23"><span class="op">}</span></a>
<a class="sourceLine" id="cb263-24" title="24"></a>
<a class="sourceLine" id="cb263-25" title="25"><span class="im">export</span> <span class="im">default</span> LifecycleMethods<span class="op">;</span></a></code></pre></div>
<p>The <code>debugger</code> statements will cause the browser to break within each of the lifecycle methods when they’re invoked.</p>
<p>For the second class component, you’ll create a component that’ll use the <code>LifecycleMethods</code> component:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb264-1" title="1"><span class="co">// ./src/Demo.js</span></a>
<a class="sourceLine" id="cb264-2" title="2"></a>
<a class="sourceLine" id="cb264-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb264-4" title="4"><span class="im">import</span> LifecycleMethods <span class="im">from</span> <span class="st">&#39;./LifecycleMethods&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb264-5" title="5"></a>
<a class="sourceLine" id="cb264-6" title="6"><span class="kw">class</span> Demo <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb264-7" title="7">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb264-8" title="8">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb264-9" title="9"></a>
<a class="sourceLine" id="cb264-10" title="10">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb264-11" title="11">      <span class="dt">displayComponent</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb264-12" title="12">      <span class="dt">componentText</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>().<span class="at">toLocaleString</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb264-13" title="13">    <span class="op">};</span></a>
<a class="sourceLine" id="cb264-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb264-15" title="15"></a>
<a class="sourceLine" id="cb264-16" title="16">  loadComponent <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb264-17" title="17">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">displayComponent</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb264-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb264-19" title="19"></a>
<a class="sourceLine" id="cb264-20" title="20">  unloadComponent <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb264-21" title="21">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">displayComponent</span><span class="op">:</span> <span class="kw">false</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb264-22" title="22">  <span class="op">}</span></a>
<a class="sourceLine" id="cb264-23" title="23"></a>
<a class="sourceLine" id="cb264-24" title="24">  updateComponent <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb264-25" title="25">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb264-26" title="26">      <span class="dt">componentText</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>().<span class="at">toLocaleString</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb264-27" title="27">    <span class="op">}</span>)<span class="op">;</span>    </a>
<a class="sourceLine" id="cb264-28" title="28">  <span class="op">}</span></a>
<a class="sourceLine" id="cb264-29" title="29"></a>
<a class="sourceLine" id="cb264-30" title="30">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb264-31" title="31">    <span class="cf">return</span> <span class="kw">this</span>.<span class="va">state</span>.<span class="at">displayComponent</span> <span class="op">?</span></a>
<a class="sourceLine" id="cb264-32" title="32">      (</a>
<a class="sourceLine" id="cb264-33" title="33">        <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-34" title="34">          <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-35" title="35">            <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">unloadComponent</span><span class="op">}&gt;</span>Unload Component&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-36" title="36">            <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">updateComponent</span><span class="op">}&gt;</span>Update Component&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-37" title="37">          &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-38" title="38">          <span class="op">&lt;</span>LifecycleMethods text<span class="op">={</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">componentText</span><span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb264-39" title="39">        &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-40" title="40">      ) : (</a>
<a class="sourceLine" id="cb264-41" title="41">        <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-42" title="42">          <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">loadComponent</span><span class="op">}&gt;</span>Load Component&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-43" title="43">        &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb264-44" title="44">      )<span class="op">;</span></a>
<a class="sourceLine" id="cb264-45" title="45">  <span class="op">}</span></a>
<a class="sourceLine" id="cb264-46" title="46"><span class="op">}</span></a>
<a class="sourceLine" id="cb264-47" title="47"></a>
<a class="sourceLine" id="cb264-48" title="48"><span class="im">export</span> <span class="im">default</span> Demo<span class="op">;</span></a></code></pre></div>
<p>Notice that the component renders buttons to control when the <code>LifecycleMethods</code> component is loaded, updated, and unloaded. Having these buttons will allow you to interactive trigger each of the lifecycle methods defined within the <code>LifecycleMethods</code> component.</p>
<p>If you’re following along, be sure to update your React application’s entry point to render the <code>Demo</code> component:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb265-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb265-2" title="2"></a>
<a class="sourceLine" id="cb265-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb265-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb265-5" title="5"><span class="im">import</span> Demo <span class="im">from</span> <span class="st">&#39;./Demo&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb265-6" title="6"></a>
<a class="sourceLine" id="cb265-7" title="7"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb265-8" title="8">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb265-9" title="9">    <span class="op">&lt;</span>Demo /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb265-10" title="10">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb265-11" title="11">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb265-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>Then run your application (<code>npm start</code>) and open the developer tools console in your browser. Here’s the application just after clicking the “Load Component” button. Notice that execution is paused within the <code>LifecycleMethods</code> component’s <code>componentDidMount</code> lifecycle method!</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-class-components/assets/component-lifecycle-demo.png" alt="component lifecycle demo" /><figcaption>component lifecycle demo</figcaption>
</figure>
<h2 id="fetching-data-from-an-api">Fetching data from an API</h2>
<p>A common use case for the <code>componentDidMount</code> lifecycle method, is to fetch data from an API after a component has been mounted to the DOM. Here’s an example of a class component that uses the <code>componentDidMount</code> lifecycle method to retrieve the public repositories for the provided GitHub username and render the repositories as an unordered list of links:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb266-1" title="1"><span class="co">// ./src/FetchingData.js</span></a>
<a class="sourceLine" id="cb266-2" title="2"></a>
<a class="sourceLine" id="cb266-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb266-4" title="4"></a>
<a class="sourceLine" id="cb266-5" title="5"><span class="kw">class</span> FetchingData <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb266-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb266-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb266-8" title="8"></a>
<a class="sourceLine" id="cb266-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb266-10" title="10">      <span class="dt">repositories</span><span class="op">:</span> []<span class="op">,</span></a>
<a class="sourceLine" id="cb266-11" title="11">    <span class="op">};</span></a>
<a class="sourceLine" id="cb266-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb266-13" title="13"></a>
<a class="sourceLine" id="cb266-14" title="14">  <span class="at">componentDidMount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb266-15" title="15">    <span class="kw">const</span> url <span class="op">=</span> <span class="vs">`https://api.github.com/users/</span><span class="sc">${</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">gitHubUsername</span><span class="sc">}</span><span class="vs">/repos`</span><span class="op">;</span></a>
<a class="sourceLine" id="cb266-16" title="16"></a>
<a class="sourceLine" id="cb266-17" title="17">    <span class="at">fetch</span>(url)</a>
<a class="sourceLine" id="cb266-18" title="18">      .<span class="at">then</span>((response) <span class="kw">=&gt;</span> <span class="va">response</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb266-19" title="19">      .<span class="at">then</span>((data) <span class="kw">=&gt;</span> <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">repositories</span><span class="op">:</span> data <span class="op">}</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb266-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb266-21" title="21"></a>
<a class="sourceLine" id="cb266-22" title="22">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb266-23" title="23">    <span class="kw">const</span> <span class="op">{</span> repositories <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb266-24" title="24"></a>
<a class="sourceLine" id="cb266-25" title="25">    <span class="cf">if</span> (<span class="va">repositories</span>.<span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb266-26" title="26">      <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb266-27" title="27">        <span class="op">&lt;</span>div<span class="op">&gt;</span>Fetching <span class="va">data</span>...&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb266-28" title="28">      )<span class="op">;</span></a>
<a class="sourceLine" id="cb266-29" title="29">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb266-30" title="30">     <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb266-31" title="31">       <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb266-32" title="32">         <span class="op">&lt;</span>h2<span class="op">&gt;</span>GitHub Repositories <span class="cf">for</span> <span class="op">{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">gitHubUsername</span><span class="op">}</span>&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb266-33" title="33">         <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb266-34" title="34">           <span class="op">{</span></a>
<a class="sourceLine" id="cb266-35" title="35">             <span class="va">repositories</span>.<span class="at">map</span>((repo) <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb266-36" title="36">               <span class="op">&lt;</span>li key<span class="op">={</span><span class="va">repo</span>.<span class="at">id</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb266-37" title="37">                 <span class="op">&lt;</span>a href<span class="op">={</span><span class="va">repo</span>.<span class="at">html_url</span><span class="op">}&gt;{</span><span class="va">repo</span>.<span class="at">name</span><span class="op">}</span>&lt;/a<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb266-38" title="38">               &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb266-39" title="39">             ))</a>
<a class="sourceLine" id="cb266-40" title="40">           <span class="op">}</span></a>
<a class="sourceLine" id="cb266-41" title="41">         &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb266-42" title="42">       &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb266-43" title="43">     )<span class="op">;</span></a>
<a class="sourceLine" id="cb266-44" title="44">    <span class="op">}</span></a>
<a class="sourceLine" id="cb266-45" title="45">  <span class="op">}</span></a>
<a class="sourceLine" id="cb266-46" title="46"><span class="op">}</span></a>
<a class="sourceLine" id="cb266-47" title="47"></a>
<a class="sourceLine" id="cb266-48" title="48"><span class="im">export</span> <span class="im">default</span> FetchingData<span class="op">;</span></a></code></pre></div>
<p>In the above example, the <code>FetchingData</code> component initially renders <code>&lt;div&gt;Fetching data...&lt;/div&gt;</code>. Once the component is mounted to the DOM, the <code>componentDidMount</code> lifecycle method is called, which in turn uses the Fetch API to retrieve the public repositories for the provided GitHub username. When the fetch HTTP request completes and the JSON response is parsed, the <code>this.setState</code> method is called to update the <code>this.state.repositories</code> property with the newly acquired data. Updating the state causes React to re-render the component which then displays an unordered list of links.</p>
<p>If you’re following along, be sure to update your React application’s entry point to render the <code>FetchingData</code> component and to set the <code>gitHubUsername</code> prop on the component to a valid GitHub username:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb267-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb267-2" title="2"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb267-3" title="3"><span class="im">import</span> FetchingData <span class="im">from</span> <span class="st">&#39;./FetchingData&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb267-4" title="4"></a>
<a class="sourceLine" id="cb267-5" title="5"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb267-6" title="6">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb267-7" title="7">    <span class="op">&lt;</span>FetchingData gitHubUsername<span class="op">=</span><span class="st">&#39;appacademy&#39;</span> /&gt;</a>
<a class="sourceLine" id="cb267-8" title="8">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb267-9" title="9">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb267-10" title="10">)<span class="op">;</span></a></code></pre></div>
<p>Here’s the component displaying the public repositories for the <code>appacademy</code> GitHub username:</p>
<figure>
<embed src="images/component-lifecycle-fetching-data.pngimages/component-lifecycle-fetching-data.png_____________________________________________________________________" /><figcaption>component lifecycle fetching data</figcaption>
</figure>
<h2 id="what-you-learned-5">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Describe the lifecycle of a React component;</li>
<li>Recall that the commonly used component lifecycle methods include <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code>; and</li>
<li>Use the <code>componentDidMount</code> component lifecycle method to fetch data from an API.</li>
</ul>
<h2 id="see-also">See also…</h2>
<p>In addition to the <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code> lifecycle methods, there are additional rarely used lifecycle methods. To learn more about these additional lifecycle methods, see the <a href="https://reactjs.org/docs/react-component.html#the-component-lifecycle">official React documentation</a>.</p>
<hr />
<h1 id="official-react-documentation">Official React Documentation</h1>
<p>Now that you’ve learned the basics of React, the official React documentation is a great resource to use to reinforce your newly acquired skills.</p>
<h2 id="reinforcing-your-new-skills">Reinforcing your new skills</h2>
<p>The <a href="https://reactjs.org/docs/hello-world.html">Main Concepts</a> section of the official documentation is a great series of articles that cover the basics of React. If you’re in the mood for a step-by-step tutorial, be sure to check out the <a href="https://reactjs.org/tutorial/tutorial.html">Intro to React</a> tutorial.</p>
<h2 id="extending-your-knowledge">Extending your knowledge</h2>
<p>Once you’re feeling confident with the basics of React development, you can extend your knowledge by reviewing the following topics listed under the “Advanced Guides” section of the official documentation:</p>
<ul>
<li><a href="https://reactjs.org/docs/jsx-in-depth.html">JSX In Depth</a></li>
<li><a href="https://reactjs.org/docs/reconciliation.html">Reconciliation</a></li>
<li><a href="https://reactjs.org/docs/typechecking-with-proptypes.html">Typechecking With PropTypes</a></li>
</ul>
<p>The rest of the topics listed under the Advanced Guides section can safely be ignored for now. Just remember that when you encounter an issue or need to solve a problem that you haven’t solved yet, the official documentation is a great resource!</p>
<hr />
<h1 id="calculator-project">Calculator Project</h1>
<p>You’re going to build a simple calculator app. Our app takes in two numbers and shows the result of a simple operation on the numbers when you click the operation button. Take a look at the <a href="https://appacademy.github.io/curriculum/calculator/">Live Demo</a> to see the app in action. Assume that only numbers will be entered.</p>
<h2 id="phase-1-setup">Phase 1: Setup</h2>
<p>Begin by using the <a href="https://github.com/facebook/create-react-app">create-react-app</a> package. You’ll use the command below to create a React application.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb268-1" title="1"><span class="ex">npx</span> create-react-app my-app --template @appacademy/simple</a></code></pre></div>
<p>Take note that using the <code>create-react-app</code> command initializes your project as a Git repository. If you use the <code>ls -a</code> to view the hidden files in your project, you’ll see the <code>.git</code> file.</p>
<p>You’ll also see that your <code>package.json</code> file includes four auto-generated scripts: <code>start</code>, <code>build</code>, <code>test</code>, and <code>eject</code>.</p>
<p>Today, you’ll be focusing on writing code in the project’s <code>src</code> directory. But before you begin, let’s take a moment to walk through how your view is rendered.</p>
<p>Start your development server with the <code>npm start</code> command and your browser should open <code>http://localhost:3000/</code> to render a view. This view is connected to your entry file (<code>./src/App.js</code>). Open your developer tools and view your HTML elements in the <strong>Elements</strong> tab. If you open up your <code>App.js</code> file, you’ll see that the <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a> in the file is similar to the HTML in your developer tools.</p>
<p>Although your <code>App.js</code> file is generated as a JavaScript file with a <code>.js</code> extension, JSX is used to produce and render the React elements. As a reminder, JSX is a syntax extension that ultimately get converted to vanilla JavaScript. It is not HTML although the syntax is similar. An example of a difference is the use of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/className"><code>className</code></a> instead of the HTML <code>class</code> attribute. You’ll learn more about how <a href="https://babeljs.io/">Babel</a> is used to transpile JSX into JavaScript.</p>
<p>For now, let’s refactor and clean up your <code>App</code> component by replacing its content:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb269-1" title="1"><span class="co">// App.js</span></a>
<a class="sourceLine" id="cb269-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb269-3" title="3"></a>
<a class="sourceLine" id="cb269-4" title="4"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb269-5" title="5">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb269-6" title="6">    <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;App&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb269-7" title="7">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Calculator&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb269-8" title="8">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb269-9" title="9">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb269-10" title="10"><span class="op">}</span></a>
<a class="sourceLine" id="cb269-11" title="11"></a>
<a class="sourceLine" id="cb269-12" title="12"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>Since your React app is rendering with JavaScript, you can return your <code>App</code> component with an arrow function. Replace your <code>App.js</code> file with the code below and see how the same view is rendered in <code>http://localhost:3000/</code>:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb270-1" title="1"><span class="co">// App.js</span></a>
<a class="sourceLine" id="cb270-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb270-3" title="3"></a>
<a class="sourceLine" id="cb270-4" title="4"><span class="kw">const</span> App <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb270-5" title="5">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb270-6" title="6">    <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;App&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb270-7" title="7">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Calculator&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb270-8" title="8">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb270-9" title="9">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb270-10" title="10"><span class="op">}</span></a>
<a class="sourceLine" id="cb270-11" title="11"></a>
<a class="sourceLine" id="cb270-12" title="12"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>In addition, you can use parentheses to implicitly return the <code>App</code> component:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb271-1" title="1"><span class="co">// App.js</span></a>
<a class="sourceLine" id="cb271-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb271-3" title="3"></a>
<a class="sourceLine" id="cb271-4" title="4"><span class="kw">const</span> App <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb271-5" title="5">  <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;App&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb271-6" title="6">    <span class="op">&lt;</span>h1<span class="op">&gt;</span>Calculator&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb271-7" title="7">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb271-8" title="8">)<span class="op">;</span></a>
<a class="sourceLine" id="cb271-9" title="9"></a>
<a class="sourceLine" id="cb271-10" title="10"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>But how does the JSX in <code>App.js</code> get rendered? Use <code>cmd + shift + f</code> to find where the <code>&lt;App /&gt;</code> is rendered in your application. You should see the <code>index.js</code> entry file. At the top of the file, you’ll see that the <code>App</code> component has been imported. Since your <code>App.js</code> file is returning JSX, you can render the JSX as a <code>&lt;App /&gt;</code> component by using the <a href="https://reactjs.org/docs/react-dom.html">ReactDOM.render()</a> method within your entry <code>index.js</code> file. The role of the <code>index.js</code> entry file is to render your React components.</p>
<p>Notice that the <a href="https://reactjs.org/docs/react-dom.html">ReactDOM.render()</a> method’s second argument is finding an HTML element with the <code>id</code> of <code>root</code>. Take a moment to use <code>cmd + shift + f</code> to find <code>id="root"</code>. You should now find a <code>&lt;div&gt;</code> element with an <code>id</code> of <code>root</code> in the <code>index.html</code> file. The <a href="https://reactjs.org/docs/react-dom.html">ReactDOM.render()</a> method is replacing the <code>&lt;div&gt;</code> element with the JSX.</p>
<p>Congratulations! You now have a basic React application set up with a component that you understand how to render.</p>
<h2 id="phase-2-creating-the-calculator-component">Phase 2: Creating the <code>Calculator</code> component</h2>
<p>Now create a file called <code>Calculator.js</code> within your <code>src</code> directory. Start with the code skeleton below:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb272-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&quot;react&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb272-2" title="2"></a>
<a class="sourceLine" id="cb272-3" title="3"><span class="kw">class</span> Calculator <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb272-4" title="4">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb272-5" title="5">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb272-6" title="6">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Initialize state</span></a>
<a class="sourceLine" id="cb272-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb272-8" title="8"></a>
<a class="sourceLine" id="cb272-9" title="9">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb272-10" title="10">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb272-11" title="11">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb272-12" title="12">        <span class="op">&lt;</span>h1<span class="op">&gt;</span>Time <span class="cf">for</span> math<span class="op">!</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb272-13" title="13">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb272-14" title="14">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb272-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb272-16" title="16"><span class="op">}</span></a>
<a class="sourceLine" id="cb272-17" title="17"></a>
<a class="sourceLine" id="cb272-18" title="18"><span class="im">export</span> <span class="im">default</span> Calculator<span class="op">;</span></a></code></pre></div>
<p>In your <code>App.js</code> file, import the <code>Calculator</code> component and set it to render underneath the <code>&lt;h1&gt;</code> element. Make sure “Calculator” still shows up in the browser, this time with “Time for math!” from your <code>Calculator</code> component.</p>
<h3 id="state">State</h3>
<p>Now let’s initialize the <code>state</code> of your <code>Calculator</code> component! The state of your component is just a JavaScript object. For the calculator, it will contain three keys: the result and two numbers from user input.</p>
<p>Within the <code>constructor()</code> method of your <code>Calculator</code> component, define <code>this.state</code> with default values for the result and two numbers. The <code>result</code> should have a default value of <code>0</code>. You actually want the two numbers to start out blank, so give <code>num1</code> and <code>num2</code> a default value of an empty string:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb273-1" title="1"><span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb273-2" title="2">  <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb273-3" title="3">  <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb273-4" title="4">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Set default state</span></a>
<a class="sourceLine" id="cb273-5" title="5">  <span class="op">};</span></a>
<a class="sourceLine" id="cb273-6" title="6"><span class="op">}</span></a></code></pre></div>
<h2 id="phase-3-rendering-in-your-component">Phase 3: Rendering in your component</h2>
<p>The first thing you want to render is your <code>result</code>. Notice how your <code>Calculator</code> and <code>App</code> components are rendering JSX elements in different ways. Your <code>Calculator</code> component is a <a href="https://reactjs.org/docs/react-component.html">class component</a>, so it needs to use the <code>render()</code> method to return JSX, while your <code>App</code> component is a function component so it can directly return JSX. You want to interpolate the result, which is stored in the component’s <code>state</code>, into the JSX. It’ll look something like this:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb274-1" title="1">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb274-2" title="2">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb274-3" title="3">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb274-4" title="4">        <span class="op">&lt;</span>h1<span class="op">&gt;</span><span class="dt">Result</span><span class="op">:</span> <span class="op">{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">result</span><span class="op">}</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb274-5" title="5">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb274-6" title="6">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb274-7" title="7">  <span class="op">}</span></a></code></pre></div>
<h2 id="phase-4-creating-input-fields">Phase 4: Creating input fields</h2>
<p>Let’s make the input fields. You want the <code>state</code> to receive the new value of the input field every time something is typed in. You can do this by passing an <code>onChange</code> event handler as a <em>prop</em> to the input field. Whenever the input field’s value changes (via the user), the input will run its <code>onChange</code> prop, which should be a callback. Let’s create a callback as a method inside your component. Begin by console logging the <em>change</em> event that is passed into the callback.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb275-1" title="1">handleFirstNum <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb275-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(e)<span class="op">;</span></a>
<a class="sourceLine" id="cb275-3" title="3"><span class="op">};</span></a></code></pre></div>
<p>Add an <code>&lt;input&gt;</code> element underneath your rendered <code>result</code>. Assign the <code>onChange</code> prop to a <code>handleFirstNum()</code> callback like so:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb276-1" title="1"><span class="op">&lt;</span>input onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">handleFirstNum</span><span class="op">}</span> placeholder<span class="op">=</span><span class="st">&quot;First number&quot;</span> /&gt;</a></code></pre></div>
<p>Try typing in your “First number” input field and seeing what is logged in your developer tools console from the <em>change</em> event. As a reminder, event objects from your event listeners have <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/target">target</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget">currentTarget</a> elements. In this case, both the <code>event.target</code> and <code>event.currentTarget</code> refer to the <code>&lt;input&gt;</code> element.</p>
<p>Update your <code>handleFirstNum</code> method to use the parsed <code>value</code> of your <code>event.target</code> to set the <code>num1</code> state. As a reminder, parsing non-numeric strings results in a <code>NaN</code> (“Not a Number”) output. Also make note that you need to use <a href="https://reactjs.org/docs/react-component.html#setstate">this.setState()</a> in order to set a component’s state and re-render the component with the updated state.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb277-1" title="1">handleFirstNum <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb277-2" title="2">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Parse value</span></a>
<a class="sourceLine" id="cb277-3" title="3">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Set state</span></a>
<a class="sourceLine" id="cb277-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>You also want your input fields to always reflect the current version of the state and properly update when you trigger a re-render by changing the state, so make sure to include <code>value={this.state.num1}</code> in the input tag.</p>
<p>That’s one of the inputs! Create a second <code>&lt;input&gt;</code> element and a <code>handleSecondNum()</code> callback. It should look very similar.</p>
<h2 id="phase-5-creating-calculator-buttons">Phase 5: Creating calculator buttons</h2>
<p>Time to write the operations. Each one of these is a button, with an <code>onClick</code> callback set that carries out the operation and sets the state of the result to the answer. For example, you can create a “+” button with an <code>onClick</code> listener to invoke an <code>add()</code> method with <code>num1</code> and <code>num2</code> to update the <code>result</code> state.</p>
<p>The current values for <code>num1</code> and <code>num2</code> should be properly updated and stored within the state of your component. Create four methods to handle adding, subtracting, multiplying, and dividing. Remember to use <code>setState()</code> to set <code>this.state.result</code> to the correct result.</p>
<h3 id="clear">Clear</h3>
<p>It’d also be nice to be able to clear out the input fields. Make a button that resets the state to its initial values. You can add an <code>onClick</code> listener to this button to invoke a <code>clearInput</code> method to reset the state, and therefore clear each input field’s <code>value</code>.</p>
<p>This is part of why it’s important to set a <code>value</code> on the input fields. By having the value depend on the state, you ensure that the value will be re-rendered, and therefore be properly cleared when you set the state of <code>num1</code> and <code>num2</code> back to empty strings.</p>
<h2 id="phase-6-refactoring-your-project">Phase 6: Refactoring your project</h2>
<p>You’re probably using the values stored in your state a few times in your <code>render</code> method. Let’s DRY it up a little. Destructure the properties stored in your state in your <code>render</code> method to be able to refer to them by separate variables. Remember that any JavaScript you do should happen before the <code>return</code> statement!</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb278-1" title="1"><span class="at">render</span>()<span class="op">{</span></a>
<a class="sourceLine" id="cb278-2" title="2">  <span class="co">// </span><span class="al">TODO</span><span class="co">: destructuring state variables</span></a>
<a class="sourceLine" id="cb278-3" title="3">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb278-4" title="4">    <span class="co">// </span><span class="al">TODO</span><span class="co">: refactor variables defined</span></a>
<a class="sourceLine" id="cb278-5" title="5">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb278-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>Congratulations! You’ve created your first React application!</p>
<h3 id="what-youve-learned-6">What you’ve learned</h3>
<p>In this small project, you created your first React class-based component and used it to store state and handle events.</p>
<hr />
<h1 id="react-widgets-project">React Widgets Project</h1>
<p><a href="https://appacademy.github.io/curriculum/widgets/"><strong>Live Demo!</strong></a></p>
<p>To practice creating React components, you are going to build four simple widgets. You’ll be building a clock widget, an interactive folder widget, a weather widget, and a simple search input component.</p>
<p>By the end of this project, you will:</p>
<ul>
<li>Know how to set up a new React project;</li>
<li>Be able to create simple React components;</li>
<li>Know how to incorporate an API into your app; and</li>
<li>Be able to add basic styling to React components.</li>
</ul>
<h2 id="phase-1-setup-1">Phase 1: Setup</h2>
<p>Generate a new React application called “Widgets” with <a href="https://github.com/facebook/create-react-app">create-react-app</a> by running <code>npx create-react-app widgets --template @appacademy/simple</code>. Note how you are using a custom template to generate your React application.</p>
<p>Once your project has been initialized, in the <code>index.js</code> file you’ll see that <code>ReactDOM</code> is rendering a <code>&lt;React.StrictMode&gt;</code> component. <a href="https://reactjs.org/docs/strict-mode.html">StrictMode</a> simply means that additional checks and warnings will be made in development mode. It’s a helpful tool that highlights potential problems.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb279-1" title="1"><span class="co">// index.js</span></a>
<a class="sourceLine" id="cb279-2" title="2"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb279-3" title="3">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb279-4" title="4">    <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb279-5" title="5">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb279-6" title="6">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb279-7" title="7">)<span class="op">;</span></a></code></pre></div>
<p>Let’s rename the rendered <code>App</code> component to be a component named <code>Root</code>. Make sure to update where you have imported <code>App</code> and to update the <code>App.js</code> file name to <code>Root.js</code>.</p>
<p>The <code>Root</code> component should be a function component because it won’t use internal state or any lifecycle methods. For now, have your <code>Root</code> component return an empty <code>&lt;div&gt;</code>. You will fill this in with your widget components as you create them. At this point, your <code>Root.js</code> file should look something like this:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb280-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb280-2" title="2"></a>
<a class="sourceLine" id="cb280-3" title="3"><span class="kw">const</span> Root <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb280-4" title="4">  <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb280-5" title="5"></a>
<a class="sourceLine" id="cb280-6" title="6">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb280-7" title="7">)<span class="op">;</span></a>
<a class="sourceLine" id="cb280-8" title="8"></a>
<a class="sourceLine" id="cb280-9" title="9"><span class="im">export</span> <span class="im">default</span> Root<span class="op">;</span></a></code></pre></div>
<h2 id="phase-2-clock-widget">Phase 2: Clock Widget</h2>
<p>The clock component should display the current date and time, updating every second. Start by creating a new file <code>Clock.js</code> in your <code>src</code> folder importing <code>React</code> into the file. Define your <code>Clock</code> class to extend from <code>React.Component</code> and remember to export the class. You will import your <code>Clock</code> component into your <code>Root.js</code> file and incorporate it into the return value of your <code>Root</code>. This is the pattern you will follow for all the widgets.</p>
<p>Now it’s time to create a render method! Have your clock render a “Clock” title in an <code>&lt;h1&gt;</code> element and check that this renders correctly on the page.</p>
<p>In the constructor, set the initial state for the time of your clock using <code>new Date()</code> like so:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb281-1" title="1"><span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb281-2" title="2">  <span class="dt">time</span><span class="op">:</span> <span class="kw">new</span> <span class="at">Date</span>()</a>
<a class="sourceLine" id="cb281-3" title="3"><span class="op">};</span></a></code></pre></div>
<p>Write a method, <code>tick</code> that uses <code>setState</code> to update the <code>time</code> to a <code>new Date()</code>. Remember to define this method using an arrow function or else you’d need to bind the function in the constructor.</p>
<p>Now you can define a <a href="https://facebook.github.io/react/docs/component-specs.html#mounting-componentdidmount">componentDidMount()</a> method to initialize the ticking of your clock. As a reminder, the <code>componentDidMount()</code> method is one of the lifecycle methods. When a component is mounted, the <code>render()</code> method will first return the component’s JSX elements. Then <code>componentDidMount()</code> will be called. You can often house your logic to fetch information that updates <em>state</em> in this lifecycle method.</p>
<p>For the <code>componentDidMount()</code> method in your <code>Clock</code> component, you’ll use JavaScript’s <code>setInterval()</code> method to call your <code>this.tick()</code> method every second.</p>
<p>You’ll also want to store that interval as a property of the <code>Clock</code> class that you can cancel with <code>clearInterval()</code> in <a href="https://facebook.github.io/react/docs/component-specs.html#unmounting-componentwillunmount">componentWillUnmount()</a>, which gets called just before the component is removed. Don’t store this in the component’s <code>state</code> since it doesn’t affect the UI. Instead, just store it directly on <code>this</code>, like so:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb282-1" title="1"><span class="at">componentDidMount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb282-2" title="2">  <span class="kw">this</span>.<span class="at">interval</span> <span class="op">=</span> <span class="at">setInterval</span>(<span class="kw">this</span>.<span class="at">tick</span><span class="op">,</span> <span class="dv">1000</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb282-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>In your render method, display the current <code>hours</code>, <code>minutes</code>, and <code>seconds</code>. Check out all of the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date">Date object</a> methods you can use to display the date and time in a human-readable string.</p>
<h3 id="styling">Styling</h3>
<p>You’ll notice that you have an <code>index.css</code> file already imported into your entry <code>index.js</code> file. Create and include a <code>reset.css</code> file before the line to import your <code>index.css</code> file.</p>
<p>Feel free to use the following CSS reset file template:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb283-1" title="1"><span class="co">/* reset.css */</span></a>
<a class="sourceLine" id="cb283-2" title="2"></a>
<a class="sourceLine" id="cb283-3" title="3">a<span class="op">,</span> article<span class="op">,</span> body<span class="op">,</span> button<span class="op">,</span> div<span class="op">,</span> fieldset<span class="op">,</span> footer<span class="op">,</span> form<span class="op">,</span> h1<span class="op">,</span> h2<span class="op">,</span> header<span class="op">,</span> html<span class="op">,</span> i<span class="op">,</span> img<span class="op">,</span> input<span class="op">,</span> label<span class="op">,</span> li<span class="op">,</span> main<span class="op">,</span> nav<span class="op">,</span> p<span class="op">,</span> section<span class="op">,</span> small<span class="op">,</span> span<span class="op">,</span> strong<span class="op">,</span> textarea<span class="op">,</span> time<span class="op">,</span> ul {</a>
<a class="sourceLine" id="cb283-4" title="4">  <span class="kw">background</span>: <span class="dv">transparent</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-5" title="5">  <span class="kw">border</span>: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-6" title="6">  <span class="kw">box-sizing</span>: <span class="bu">inherit</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-7" title="7">  <span class="kw">color</span>: <span class="bu">inherit</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-8" title="8">  <span class="kw">font</span>: <span class="bu">inherit</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-9" title="9">  <span class="kw">margin</span>: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-10" title="10">  <span class="kw">outline</span>: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-11" title="11">  <span class="kw">padding</span>: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-12" title="12">  <span class="kw">text-align</span>: <span class="bu">inherit</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-13" title="13">  <span class="kw">text-decoration</span>: <span class="bu">inherit</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-14" title="14">  <span class="kw">vertical-align</span>: <span class="bu">inherit</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-15" title="15">}</a>
<a class="sourceLine" id="cb283-16" title="16"></a>
<a class="sourceLine" id="cb283-17" title="17">ul {</a>
<a class="sourceLine" id="cb283-18" title="18">  <span class="kw">list-style</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-19" title="19">}</a>
<a class="sourceLine" id="cb283-20" title="20"></a>
<a class="sourceLine" id="cb283-21" title="21">img {</a>
<a class="sourceLine" id="cb283-22" title="22">  <span class="kw">display</span>: <span class="dv">block</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-23" title="23">  <span class="kw">height</span>: <span class="bu">auto</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-24" title="24">  <span class="kw">width</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-25" title="25">}</a>
<a class="sourceLine" id="cb283-26" title="26"></a>
<a class="sourceLine" id="cb283-27" title="27">button<span class="op">,</span> input<span class="ex">[type</span><span class="op">=</span><span class="st">&quot;email&quot;</span><span class="ex">]</span><span class="op">,</span> input<span class="ex">[type</span><span class="op">=</span><span class="st">&quot;password&quot;</span><span class="ex">]</span><span class="op">,</span> input<span class="ex">[type</span><span class="op">=</span><span class="st">&quot;submit&quot;</span><span class="ex">]</span><span class="op">,</span> input<span class="ex">[type</span><span class="op">=</span><span class="st">&quot;text&quot;</span><span class="ex">]</span><span class="op">,</span> textarea {</a>
<a class="sourceLine" id="cb283-28" title="28">  <span class="co">/*</span></a>
<a class="sourceLine" id="cb283-29" title="29"><span class="co">  Get rid of native styling. Read more here:</span></a>
<a class="sourceLine" id="cb283-30" title="30"><span class="co">  http://css-tricks.com/almanac/properties/a/appearance/</span></a>
<a class="sourceLine" id="cb283-31" title="31"><span class="co">  */</span></a>
<a class="sourceLine" id="cb283-32" title="32">  <span class="kw">-moz-appearance</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-33" title="33">  <span class="kw">-webkit-appearance</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-34" title="34">  <span class="kw">appearance</span>: <span class="dv">none</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-35" title="35">}</a>
<a class="sourceLine" id="cb283-36" title="36"></a>
<a class="sourceLine" id="cb283-37" title="37">button<span class="op">,</span> input<span class="ex">[type</span><span class="op">=</span><span class="st">&quot;submit&quot;</span><span class="ex">]</span> {</a>
<a class="sourceLine" id="cb283-38" title="38">  <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></a>
<a class="sourceLine" id="cb283-39" title="39">}</a></code></pre></div>
<p>Now go to <a href="https://fonts.google.com/">Google Fonts</a> and select a nice font for your clock. In the <code>public/index.html</code> file, update your page to have a <code>title</code> of “Widgets”. Now take the font embed code and paste it into the <code>&lt;head&gt;</code> of your page.</p>
<p>Your <code>index.html</code> file should look something like this:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb284-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb284-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb284-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb284-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb284-5" title="5">    <span class="kw">&lt;link</span><span class="ot"> href=</span><span class="st">&quot;https://fonts.googleapis.com/css2?family=Orbitron&quot;</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb284-6" title="6">    <span class="kw">&lt;title&gt;</span>Widgets<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb284-7" title="7">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb284-8" title="8">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb284-9" title="9">    <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;root&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb284-10" title="10">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb284-11" title="11"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<p>To use the font, set the <code>font-family</code> of your element to the font name in your <code>index.css</code> file.</p>
<p>Set the time and date headers to be on one side and the actual time and date to the other. Refer to the live demo to see what your end goal is. You can achieve this easily with a flexbox. Take a look at the <a href="https://css-tricks.com/almanac/properties/j/justify-content/"><code>justify-content</code></a> property. Which one do you want to use? Try all of them to understand what they do.</p>
<p>Add a background. Use the <code>background</code> or <code>background-color</code> property to change the background. Feel free to do this for every widget.</p>
<p>You should now have a clock that displays the current time and date. You used <code>setInterval()</code> to make sure that the clock updates every second, and <code>clearInterval()</code> to clear the timer that <code>setInterval()</code> set. Once you have sufficiently styled your clock, move on to the next widget.</p>
<h2 id="phase-3-folder-widget">Phase 3: Folder Widget</h2>
<p>You’re going to add a folder widget that the user can interact with. The folder tabs should each be labeled with their own title. The selected tab should be in a <strong>bold</strong> font. Below the tab, display the contents of the selected tab. The folder content should update when the user selects different tabs.</p>
<p>Make a <code>Folder</code> component. <code>Root</code> should pass the <code>Folder</code> component a <code>folders</code> prop. The prop should be an array of JavaScript objects that each have <code>title</code> and <code>content</code> as properties:</p>
<p><strong>Folder component</strong></p>
<div class="sourceCode" id="cb285"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb285-1" title="1"><span class="op">&lt;</span>Folder folders<span class="op">={</span>folders<span class="op">}</span> /&gt;</a></code></pre></div>
<p><strong>Folders prop</strong></p>
<div class="sourceCode" id="cb286"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb286-1" title="1"><span class="kw">const</span> folders <span class="op">=</span> [</a>
<a class="sourceLine" id="cb286-2" title="2">  <span class="op">{</span><span class="dt">title</span><span class="op">:</span> <span class="st">&#39;one&#39;</span><span class="op">,</span> <span class="dt">content</span><span class="op">:</span> <span class="st">&#39;I am the first&#39;</span><span class="op">},</span></a>
<a class="sourceLine" id="cb286-3" title="3">  <span class="op">{</span><span class="dt">title</span><span class="op">:</span> <span class="st">&#39;two&#39;</span><span class="op">,</span> <span class="dt">content</span><span class="op">:</span> <span class="st">&#39;Second folder here&#39;</span><span class="op">},</span></a>
<a class="sourceLine" id="cb286-4" title="4">  <span class="op">{</span><span class="dt">title</span><span class="op">:</span> <span class="st">&#39;three&#39;</span><span class="op">,</span> <span class="dt">content</span><span class="op">:</span> <span class="st">&#39;Third folder here&#39;</span><span class="op">}</span></a>
<a class="sourceLine" id="cb286-5" title="5">]<span class="op">;</span></a></code></pre></div>
<p>Keep track of the selected tab’s index in your <code>Folder</code> component’s state. Set the <code>Folder</code> component’s default <code>currentTab</code> state to zero.</p>
<p>In the render method, return an <code>&lt;h1&gt;</code> element with the title of “Folder”. You’ll begin by rendering one folder’s content, using the <code>currentTab</code> state to select which folder content to render.</p>
<p>Render a <code>&lt;div&gt;</code> element with two child elements: a header to render folder titles (you’ll make a <code>&lt;Header&gt;</code> subcomponent) and a <code>&lt;div&gt;</code> element to render the selected tab’s content. Define a <code>folder</code> variable by indexing into your <code>folders</code> prop with your <code>currentTab</code> state. This way you can reference your selected folder’s content with clean code!</p>
<p>At this point, your component’s <code>render()</code> method should look something like this:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb287-1" title="1"><span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb287-2" title="2">  <span class="kw">const</span> folder <span class="op">=</span> <span class="kw">this</span>.<span class="va">props</span>.<span class="at">folders</span>[<span class="kw">this</span>.<span class="va">state</span>.<span class="at">currentTab</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb287-3" title="3"></a>
<a class="sourceLine" id="cb287-4" title="4">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb287-5" title="5">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb287-6" title="6">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Folder&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb287-7" title="7">      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&#39;tabs&#39;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb287-8" title="8">        <span class="op">{</span><span class="co">/* </span><span class="al">TODO</span><span class="co">: render folder titles */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb287-9" title="9">        <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&#39;tab-content&#39;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb287-10" title="10">          <span class="op">{</span><span class="va">folder</span>.<span class="at">content</span><span class="op">}</span></a>
<a class="sourceLine" id="cb287-11" title="11">        &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb287-12" title="12">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb287-13" title="13">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb287-14" title="14">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb287-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>Take a moment to observe the syntax for making a comment inside of JSX. If you use VS Code’s keyboard shortcut (<code>cmd + /</code>) to comment, you will not make a valid comment. You need to use block comment syntax wrapped in curly braces in order to write comments in JSX!</p>
<p>Remember that JSX interpolation is just syntactic sugar and that it only supports <em>expressions</em>, so you also can’t use <code>if</code>/<code>else</code> inside <code>{ }</code>. However, [ternary conditionals] are valid inside JSX interpolation.</p>
<p>Now create a <code>selectTab()</code> method that takes in a selected folder index. You’ll use this method to update the <code>currentTab</code> state with the input index. For now, have the method console log the index input.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb288-1" title="1">selectTab <span class="op">=</span> (idx) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb288-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(idx)</a>
<a class="sourceLine" id="cb288-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Let’s move forward with rendering the folder titles!</p>
<h3 id="creating-a-subcomponent">Creating a subcomponent</h3>
<p>Let’s create a <code>Headers</code> subcomponent to render your folder titles! Within your <code>Folder.js</code> file, create a subcomponent above your <code>Folder</code> class. This subcomponent will take care of rendering an unordered list of list items containing clickable tabs.</p>
<p>Plan what information you want to pass as props from your <code>Folder</code> component into your <code>Headers</code>. You’ll want to render each tab’s title, so you’ll probably want to thread a <code>titles</code> prop from your <code>Folder</code> component. Map over your array of <code>folders</code> to define a <code>titles</code> array of folder titles. Now thread your <code>titles</code> array as a prop to the <code>Headers</code> subcomponent. As a reminder, “threading props” simply refers to passing props from one component to another.</p>
<p>You also want to pass the <code>currentTab</code> state so that the <code>Headers</code> component can know which tab to render with different CSS as selected or active.</p>
<p>Lastly, you’ll want your <code>Headers</code> component to be able to use the <code>selectTab()</code> method you have defined in order to update the tab’s <code>currentTab</code> state.</p>
<p>Your <code>Folder</code> component should render the <code>Headers</code> subcomponent below:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb289-1" title="1"><span class="op">&lt;</span>Headers</a>
<a class="sourceLine" id="cb289-2" title="2">  titles<span class="op">={</span>titles<span class="op">}</span></a>
<a class="sourceLine" id="cb289-3" title="3">  currentTab<span class="op">={</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">currentTab</span><span class="op">}</span></a>
<a class="sourceLine" id="cb289-4" title="4">  selectTab<span class="op">={</span><span class="kw">this</span>.<span class="at">selectTab</span><span class="op">}</span></a>
<a class="sourceLine" id="cb289-5" title="5">/&gt;</a></code></pre></div>
<p>Now let’s dive into what your <code>Headers</code> component should render. Begin by returning an unordered list:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb290-1" title="1"><span class="kw">const</span> Headers <span class="op">=</span> (props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb290-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb290-3" title="3">    <span class="op">&lt;</span>ul className<span class="op">=</span><span class="st">&#39;tab-header&#39;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb290-4" title="4"></a>
<a class="sourceLine" id="cb290-5" title="5">    &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb290-6" title="6">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb290-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>Instead of taking in a <code>props</code> argument and referring to all your props like <code>props.folders</code> or <code>props.currentTab</code>, you can destructure the props you have received like so:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb291-1" title="1"><span class="kw">const</span> Headers <span class="op">=</span> (<span class="op">{</span> titles<span class="op">,</span> currentTab<span class="op">,</span> selectTab <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb291-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb291-3" title="3">    <span class="op">&lt;</span>ul className<span class="op">=</span><span class="st">&#39;tab-header&#39;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb291-4" title="4"></a>
<a class="sourceLine" id="cb291-5" title="5">    &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb291-6" title="6">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb291-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>Now map your folder <code>titles</code> to list item elements that render each folder’s <code>title</code>. You’ll need to pass a <a href="https://reactjs.org/docs/reconciliation.html#keys">unique <code>key</code> property</a> to each <code>&lt;li&gt;</code> or React will grumble to all your console-reading users about its unfair working conditions. “How is one supposed to efficiently diff the DOM when one doesn’t even know which list items match up with which!?”</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb292-1" title="1"><span class="kw">const</span> Headers <span class="op">=</span> (<span class="op">{</span> titles<span class="op">,</span> currentTab<span class="op">,</span> selectTab <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb292-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb292-3" title="3">    <span class="op">&lt;</span>ul className<span class="op">=</span><span class="st">&#39;tab-header&#39;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb292-4" title="4">      <span class="op">{</span><span class="va">titles</span>.<span class="at">map</span>((title<span class="op">,</span> idx) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb292-5" title="5">        <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb292-6" title="6">          <span class="op">&lt;</span>li key<span class="op">={</span>idx<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb292-7" title="7">            <span class="op">{</span>title<span class="op">}</span></a>
<a class="sourceLine" id="cb292-8" title="8">          &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb292-9" title="9">        )<span class="op">;</span></a>
<a class="sourceLine" id="cb292-10" title="10">      <span class="op">}</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb292-11" title="11">    &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb292-12" title="12">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb292-13" title="13"><span class="op">}</span></a></code></pre></div>
<p>To clean up your return, you can extract your list elements as a <code>tabs</code> variable:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb293-1" title="1"><span class="kw">const</span> Headers <span class="op">=</span> (<span class="op">{</span> titles<span class="op">,</span> currentTab<span class="op">,</span> selectTab <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb293-2" title="2">  <span class="kw">const</span> tabs <span class="op">=</span> <span class="va">titles</span>.<span class="at">map</span>((title<span class="op">,</span> idx) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb293-3" title="3">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb293-4" title="4">      <span class="op">&lt;</span>li key<span class="op">={</span>idx<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb293-5" title="5">        <span class="op">{</span>title<span class="op">}</span></a>
<a class="sourceLine" id="cb293-6" title="6">      &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb293-7" title="7">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb293-8" title="8">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb293-9" title="9"></a>
<a class="sourceLine" id="cb293-10" title="10">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb293-11" title="11">    <span class="op">&lt;</span>ul className<span class="op">=</span><span class="st">&#39;tab-header&#39;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb293-12" title="12">      <span class="op">{</span>tabs<span class="op">}</span></a>
<a class="sourceLine" id="cb293-13" title="13">    &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb293-14" title="14">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb293-15" title="15"><span class="op">};</span></a></code></pre></div>
<p>Now add an <code>onClick</code> handler to each list item to update the <code>currentTab</code> state in the <code>Folder</code> component. You’ll also want to set the <code>id</code> of the <code>&lt;li&gt;</code> element to each title’s index. You can then reference the index through <code>e.target.id</code> to use in the <code>selectTab()</code> function.</p>
<p>You might ask why not just preset an argument with an arrow function callback directly in the <code>onClick</code>. It is actually bad practice to do so! Feel free to read more <a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-bind.md">here</a>. In this case, it’s better to <a href="https://reactjs.org/docs/handling-events.html">handle the event</a> and invoke the <code>selectTab()</code> function within the click handler.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb294-1" title="1"><span class="co">/* BAD PRACTICE */</span></a>
<a class="sourceLine" id="cb294-2" title="2"><span class="cf">return</span> (</a>
<a class="sourceLine" id="cb294-3" title="3">  <span class="op">&lt;</span>li key<span class="op">={</span>idx<span class="op">}</span> id<span class="op">={</span>idx<span class="op">}</span> onClick<span class="op">={</span>() <span class="kw">=&gt;</span> <span class="at">selectTab</span>(idx)<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb294-4" title="4">    <span class="op">{</span>title<span class="op">}</span></a>
<a class="sourceLine" id="cb294-5" title="5">  &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb294-6" title="6">)<span class="op">;</span></a>
<a class="sourceLine" id="cb294-7" title="7"></a>
<a class="sourceLine" id="cb294-8" title="8"><span class="co">/* GOOD PRACTICE */</span></a>
<a class="sourceLine" id="cb294-9" title="9"><span class="cf">return</span> (</a>
<a class="sourceLine" id="cb294-10" title="10">  <span class="op">&lt;</span>li key<span class="op">={</span>idx<span class="op">}</span> id<span class="op">={</span>idx<span class="op">}</span> onClick<span class="op">={</span>handleClick<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb294-11" title="11">    <span class="op">{</span>title<span class="op">}</span></a>
<a class="sourceLine" id="cb294-12" title="12">  &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb294-13" title="13">)<span class="op">;</span></a></code></pre></div>
<p>Define a <code>handleClick()</code> function in your <code>Headers</code> component. Reference the folder’s index through <code>e.target.id</code> and parse the <code>id</code> into an integer to invoke the <code>selectTab()</code> function:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb295-1" title="1"><span class="kw">const</span> handleClick <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb295-2" title="2">  <span class="kw">const</span> idx <span class="op">=</span> <span class="at">parseInt</span>(<span class="va">e</span>.<span class="va">target</span>.<span class="at">id</span><span class="op">,</span> <span class="dv">10</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb295-3" title="3">  <span class="at">selectTab</span>(idx)<span class="op">;</span></a>
<a class="sourceLine" id="cb295-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>At this point, test your click handler. Click your folder titles and open your developer tools console. You should see the logging of clicked folder indices. After you have confirmed your click handler is working, update your <code>selectTab()</code> function to set the <code>currentTab</code> state using its input.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb296-1" title="1">selectTab <span class="op">=</span> (idx) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb296-2" title="2">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">currentTab</span><span class="op">:</span> idx <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb296-3" title="3"><span class="op">}</span></a></code></pre></div>
<h3 id="styling-1">Styling</h3>
<p>Before you move forward to focusing on a specific tab, add some styling to make your <code>Folder</code> widget look like folders with tabs! Add a border around each tab and use <code>border-radius</code> to add nicely curved corners to the top of your tabs.</p>
<p>Use a flexbox to ensure that the tabs all take up the same amount of space. Add <code>display: flex</code> to your CSS for your folder tabs. Center the folder content, both horizontally and vertically.</p>
<p>Add a hover effect to change the background color of the tab that’s being moused over. Change the <code>cursor</code> to be a <code>pointer</code> when you’re mousing over the tabs to make it clear that the tabs are interactive.</p>
<h3 id="using-class-names-to-focus">Using class names to focus</h3>
<p>Now let’s be able to focus on a specific tab! At this point, you should have a widget that displays the content of all your folder tabs.</p>
<p>In your <code>Headers</code> subcomponent, you’ll want to assign an <code>active</code> class to your selected tab. The selected tab’s label should be bold and the folder content should update when a different tab is selected. Within the mapping of your header <code>titles</code>, you can compare the <code>idx</code> of each title to the folder’s <code>currentTab</code> state to decide whether a list item should have the CSS class name of <code>active</code>.</p>
<p>For example, you can use a ternary operator to assign a <code>headerClass</code> variable like this:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb297-1" title="1"><span class="kw">const</span> headerClass <span class="op">=</span> (idx <span class="op">===</span> currentTab) <span class="op">?</span> <span class="st">&#39;active&#39;</span> : <span class="st">&#39;&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Feel free to restyle your <code>Folder</code> component by adding the CSS below into your <code>index.css</code> file. Play around with changing the <code>.tab-header &gt; li.active</code> class styling to manipulate the styling of your selected tab!</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb298-1" title="1"><span class="co">/* Folder */</span></a>
<a class="sourceLine" id="cb298-2" title="2"></a>
<a class="sourceLine" id="cb298-3" title="3"><span class="fu">.tab-header</span> {</a>
<a class="sourceLine" id="cb298-4" title="4">  <span class="kw">margin</span>: <span class="dv">0</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-5" title="5">  <span class="kw">display</span>: flex<span class="op">;</span></a>
<a class="sourceLine" id="cb298-6" title="6">  <span class="kw">justify-content</span>: space-between<span class="op">;</span></a>
<a class="sourceLine" id="cb298-7" title="7">}</a>
<a class="sourceLine" id="cb298-8" title="8"></a>
<a class="sourceLine" id="cb298-9" title="9"><span class="fu">.tab-header</span> <span class="op">&gt;</span> li {</a>
<a class="sourceLine" id="cb298-10" title="10">  <span class="kw">width</span>: <span class="dv">33</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-11" title="11">  <span class="kw">border-top</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-12" title="12">  <span class="kw">border-left</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-13" title="13">  <span class="kw">border-right</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-14" title="14">  <span class="kw">border-bottom</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-15" title="15">  <span class="kw">border-top-left-radius</span>: <span class="dv">10</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-16" title="16">  <span class="kw">border-top-right-radius</span>: <span class="dv">10</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-17" title="17">  <span class="kw">padding</span>: <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-18" title="18">  <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-19" title="19">  <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-20" title="20">  <span class="kw">background-color</span>: <span class="cn">lightpink</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-21" title="21">}</a>
<a class="sourceLine" id="cb298-22" title="22"></a>
<a class="sourceLine" id="cb298-23" title="23"><span class="fu">.tab-header</span> <span class="op">&gt;</span> li<span class="in">:first-child</span> {</a>
<a class="sourceLine" id="cb298-24" title="24">  <span class="kw">border-left</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-25" title="25">}</a>
<a class="sourceLine" id="cb298-26" title="26"></a>
<a class="sourceLine" id="cb298-27" title="27"><span class="fu">.tab-header</span> <span class="op">&gt;</span> li<span class="in">:last-child</span> {</a>
<a class="sourceLine" id="cb298-28" title="28">  <span class="kw">border-right</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-29" title="29">}</a>
<a class="sourceLine" id="cb298-30" title="30"></a>
<a class="sourceLine" id="cb298-31" title="31"><span class="fu">.tab-header</span> <span class="op">&gt;</span> li<span class="in">:hover</span> {</a>
<a class="sourceLine" id="cb298-32" title="32">  <span class="kw">background-color</span>: <span class="cn">lightblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-33" title="33">  <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-34" title="34">}</a>
<a class="sourceLine" id="cb298-35" title="35"></a>
<a class="sourceLine" id="cb298-36" title="36"><span class="fu">.tab-header</span> <span class="op">&gt;</span> li<span class="fu">.active</span> {</a>
<a class="sourceLine" id="cb298-37" title="37">  <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-38" title="38">  <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-39" title="39">  <span class="kw">background-color</span>: <span class="cn">lightblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-40" title="40">  <span class="kw">border-bottom</span>: <span class="dv">0</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-41" title="41">}</a>
<a class="sourceLine" id="cb298-42" title="42"></a>
<a class="sourceLine" id="cb298-43" title="43"><span class="fu">.tabs</span> {</a>
<a class="sourceLine" id="cb298-44" title="44">  <span class="kw">width</span>: <span class="dv">240</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-45" title="45">}</a>
<a class="sourceLine" id="cb298-46" title="46"></a>
<a class="sourceLine" id="cb298-47" title="47"><span class="fu">.tab-content</span> {</a>
<a class="sourceLine" id="cb298-48" title="48">  <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-49" title="49">  <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-50" title="50">  <span class="kw">height</span>: <span class="dv">192</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-51" title="51">  <span class="kw">margin</span>: <span class="dv">0</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-52" title="52">  <span class="kw">border-left</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-53" title="53">  <span class="kw">border-bottom</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-54" title="54">  <span class="kw">border-right</span>: <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-55" title="55">  <span class="kw">display</span>: flex<span class="op">;</span></a>
<a class="sourceLine" id="cb298-56" title="56">  <span class="kw">align-items</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-57" title="57">  <span class="kw">justify-content</span>: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-58" title="58">  <span class="kw">background-color</span>: <span class="cn">lightblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb298-59" title="59">}</a></code></pre></div>
<h2 id="phase-4-weather-widget">Phase 4: Weather Widget</h2>
<p>In this phase, you will create a weather widget to display the current weather based on the user’s location. You will be using the <code>navigator.geolocation</code> API to get the user’s current location, and the OpenWeatherMap API to get the current weather.</p>
<p>Make a <code>Weather</code> component, which again, will be incorporated into your <code>Root</code> component. Now set your component’s default state with a <code>null</code> weather object in your constructor, like so:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb299-1" title="1"><span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb299-2" title="2">  <span class="dt">weather</span><span class="op">:</span> <span class="kw">null</span></a>
<a class="sourceLine" id="cb299-3" title="3"><span class="op">};</span></a></code></pre></div>
<p>Review the <a href="http://openweathermap.org/current">OpenWeatherMap API</a> documentation. You’ll use this API to get the weather based on your current location (it is recommended to fetch the weather by geographic coordinates). Upon a successful fetch, you’ll update your component’s state.</p>
<p>In order to get the API to accept your HTTP requests, you’ll need an API key. <a href="http://openweathermap.org/appid">Read up on how to use the API key and sign up for one here.</a> After signing up, click on the API keys tab to get your key. You may need to open their welcome email before the API key will work.</p>
<p>In the real world, you should be very careful about placing API keys in frontend JavaScript or anywhere else they are publicly available and can be scraped (this includes public Git repositories). Stolen keys can cost you. <em>You have been warned.</em></p>
<p>Now let’s get your current location! When the component mounts, call <code>navigator.geolocation.getCurrentPosition()</code> to get it. Read through the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/Using_geolocation">navigator documentation</a> to figure out how to use this method properly. (Make sure you have <a href="https://support.google.com/chrome/answer/142065?hl=en">location services enabled</a> in your browser, or this won’t work.)</p>
<p>From reading the documentation, you know that there are two methods to access a browser’s location data: - <code>getCurrentPosition()</code> - <code>watchPosition()</code></p>
<p>Let’s look at the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition">documentation</a> for the <code>getCurrentPosition()</code> method to find out more about its expected parameters. You should see a <strong>Syntax</strong> portion on the documentation with the method breakdown below:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb300-1" title="1"><span class="va">navigator</span>.<span class="va">geolocation</span>.<span class="at">getCurrentPosition</span>(success[<span class="op">,</span> error[<span class="op">,</span> [options]])</a></code></pre></div>
<p>You’ll also see that there is a <strong>Parameters</strong> section below that outlines a mandatory <code>success</code> callback function, an optional <code>error</code> callback, and an optional <code>options</code> object. In documentation, square brackets around a parameter indicates that it is an optional parameter.</p>
<p>Now let’s test the <code>getCurrentPosition()</code> method in your developer tools console. Console log a result as the method’s <code>success</code> callback like so:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb301-1" title="1"><span class="kw">const</span> success <span class="op">=</span> (res) <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(res)<span class="op">;</span></a>
<a class="sourceLine" id="cb301-2" title="2"><span class="va">navigator</span>.<span class="va">geolocation</span>.<span class="at">getCurrentPosition</span>(success)<span class="op">;</span></a></code></pre></div>
<p>You should have received a request to share your location with the browser! Upon allowing the browser to know your location, you should console log a <code>GeolocationPosition</code> object when invoking the method again in the console:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb302-1" title="1"><span class="va">navigator</span>.<span class="va">geolocation</span>.<span class="at">getCurrentPosition</span>(success)<span class="op">;</span></a></code></pre></div>
<p>Begin by invoking the <code>getCurrentPosition()</code> method in your <code>Weather</code> component’s <code>componentDidMount()</code> method. Upon successfully retrieving your browser’s location, you’ll invoke a success callback to query the weather API.</p>
<p>Let’s create your success callback! Create a <code>pollWeather()</code> method to take in your received <code>location</code> result from <code>navigator.geolocation.getCurrentPosition()</code>. You’ll use the <code>latitude</code> and <code>longitude</code> of your location to make a fetch call to the weather API. Think of how to extract the <code>latitude</code> and <code>longitude</code> properties from your <code>GeolocationPosition</code> object. Also think of how you might structure your fetch URL to include the query parameter for your geographic coordinates.</p>
<p>Navigate to the <code>By geographic coordinates</code> section in the <a href="http://openweathermap.org/current">OpenWeatherMap API</a> documentation. You’ll see an example of an API query string using latitude and longitude coordinates (<code>api.openweathermap.org/data/2.5/weather?lat=35&amp;lon=139</code>). You’ll also see an example JSON response below.</p>
<p>You can define a <code>toQueryString()</code> helper method to format your query parameters into a fetch call URL. To think of scaling your “Widgets” project, you can move this helper function into a <code>utils.js</code> file so that it can be used for other APIs you might incorporate! Have the function take in a <code>params</code> object. You’ll then iterate through the object to sanitize each query value with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent">encodeURIComponent()</a>. You can then return a query string like <code>lat=35&amp;lon=139</code> to build an example API query string above.</p>
<p>In your <code>pollWeather()</code> method, use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">Fetch API</a> to make a fetch call to the OpenWeatherMap API. Remember to parse your response as JSON before updating the <code>weather</code> state. Upon a successful fetch, update your component’s <code>weather</code> state with the <code>weather</code> property of your JSON response! Use your component’s state to render the current city and temperature on the page.</p>
<p>By default, the OpenWeatherMap API will return the temperature in Standard units (Kelvin). Convert to Fahrenheit <strong>OR</strong> peruse the API docs for a way to request the weather in Imperial units (Fahrenheit)! Give the weather box a nice border and make sure the elements inside are spaced evenly.</p>
<p>Great work! Now you have three widgets. One that displays the time, another that allows you navigate folder tabs, and another that displays the weather. You used the <code>navigator.geolocation</code> API to get your current location, which you then passed to your fetch request to get the weather from the OpenWeatherMap API.</p>
<h2 id="phase-5-autocomplete-widget">Phase 5: Autocomplete Widget</h2>
<p>Make an <code>Autocomplete</code> component that filters a list of names by the user’s input. Match only names that start with the search input. When a user clicks on a name, the input field should autocomplete to that name. Create a new file <code>Auto.js</code> and define your <code>Autocomplete</code> class there. Incorporate it into <code>Root</code>.</p>
<p>Because your autocomplete widget should be reusable, you shouldn’t hard code a list of names into the component. Instead of hard coding the names, set up your <code>Autocomplete</code> component to accept <code>names</code> as a prop. Then set the component’s initial state for <code>inputVal</code> as an empty string.</p>
<p>Build your widget in the <code>render</code> method. It should contain an input field and an unordered list. Render an <code>&lt;li&gt;</code> inside the <code>&lt;ul&gt;</code> for every name that begins with the value in the input box. Remember to pass your <a href="https://reactjs.org/docs/reconciliation.html#keys">unique <code>key</code> property</a> to each <code>&lt;li&gt;</code>!</p>
<p>When a user types something into the input, use an <code>onChange</code> event handler to update the widget’s state. Create a <code>handleInput()</code> event handler method to update the state of <code>inputVal</code> with the typed input value.</p>
<p>Also add an <code>onClick</code> handler to the unordered list. The role of this click handler is to update the widget’s search string (the <code>inputVal</code> state) upon a user’s click of the <code>&lt;li&gt;</code> element you’ve created for each name. You will need to turn your <code>&lt;input&gt;</code> into a <a href="https://reactjs.org/docs/forms.html#controlled-components">controlled component</a> for this to work. Would you access the event’s <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget">currentTarget</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/target">target</a>? Remember to use <code>setState()</code> to update the widget’s search string.</p>
<p>Now you’ll want to find the names that match your user’s search input. Define a <code>matches()</code> method to generate an array of name <code>matches</code> based on the <code>inputVal</code> state. Since you’re taking in user input, think of how you could use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">regular expressions</a> to match the character combinations between your user’s input string and the list of searchable names. If the input is empty, return the original, full list of names so that your user can see all the searchable names!</p>
<p>Now let’s generate the name matches! Iterate through each name. You’ll use the length of <code>inputVal</code> to slice a segment of each name. Compare the name segment with the input value. Take into consideration that some users might type “barney” instead of searching for “Barney”.</p>
<p>For example, compare the name segment to the input value in order to match a search input of “bar” to the “bar” segment of “Barney”. Then you could add the name, “Barney”, to your <code>matches</code> array. On the next iteration, the “bar” input would also match to “Barbara” so that you could add “Barbara” to the <code>matches</code> array.</p>
<p>If you have no matches, you can add a “No matches” string to your <code>matches</code> array so that when <code>matches</code> is returned and rendered, your user will be notified upon searching for a name without matches.</p>
<h3 id="styling-2">Styling</h3>
<p>Give your component a border and make sure all the <code>&lt;li&gt;</code> elements are nicely padded inside the box. Change the <code>cursor</code> property to display a pointer when hovering over one of the <code>&lt;li&gt;</code> elements. Center all your widgets using flexboxes. Which <code>justify-content</code> property would you use for this?</p>
<p>Great job! The autocomplete widget uses an event handler to update the state of the component when letters are typed into the input field. Once the autocomplete widget is sufficiently styled, move on to the bonus phase to make your widgets even better.</p>
<h2 id="bonus-phase-react-transitions">Bonus Phase: React-Transitions</h2>
<p>Right now, in the autocomplete widget, the matched names instantly appear on the screen and the filtered names instantly disappear. This is abrupt and ugly. You want the names to fade out or in when they are entering or leaving the page. How can you achieve that with React? With <a href="https://reactcommunity.org/react-transition-group/">React Transition Group</a>!</p>
<p>First you need to import the <code>CSSTransition</code> module into your project. In the console, run <code>npm install react-transition-group@^4.0.0 --save</code>.</p>
<p>Then you need to import the module in the file. At the top of <code>Auto.js</code>, write <code>import CSSTransition from 'react-transition-group';</code>.</p>
<p>In your <code>render</code> method, you will need to wrap the group of elements that will be entering and leaving the screen with the <code>&lt;TransitionGroup&gt;</code> element. In the case of the autocomplete widget, wrap the results rendered as <code>&lt;li&gt;</code>, within the <code>&lt;ul&gt;</code>. <strong>You are not wrapping each individual <code>&lt;li&gt;</code>, but rather the entire group.</strong></p>
<p>Now you’ll need to wrap each individual <code>&lt;li&gt;</code> with a <code>&lt;CSSTransition&gt;</code> element. Move the list item’s <code>key</code> to the <code>&lt;CSSTransition&gt;</code> element.</p>
<p><code>&lt;CSSTransition&gt;</code> has three necessary attributes. Read what they are below and make sure to include them:</p>
<p><code>classNames</code>: This is the name that’s used to create all of the transition classes. For now, let’s set this to <code>"result"</code>, but you can pick any name you like.</p>
<p><code>timeout</code>: Specifies how long (in ms) the transition should last. This prop takes in an object with two keys (<code>timeout={{ exit: exitNumber, enter: enterNumber }}</code>). * <code>enter</code>: Length of the transition when the element enters. This needs to be a number, so you’ll have to interpolate the JavaScript number, otherwise it’ll be read as a string. (i.e <code>{500}</code> instead of <code>500</code>). * <code>exit</code>: Same as above, except for when an element is leaving the page.</p>
<p>Finally the CSS. Create a new CSS file and paste in the code below. Be sure to import your new CSS file into your entry <code>index.js</code> file so the transitions are applied.</p>
<p>The CSS below assumes you’ve given the <code>classNames</code> attribute to <code>result</code>. If you gave it a different name, just replace every <code>result</code> with the name you gave.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb303-1" title="1"><span class="co">/* AutoComplete */</span></a>
<a class="sourceLine" id="cb303-2" title="2"></a>
<a class="sourceLine" id="cb303-3" title="3"><span class="fu">.result-enter</span> {</a>
<a class="sourceLine" id="cb303-4" title="4">  <span class="kw">opacity</span>: <span class="dv">0.01</span><span class="op">;</span></a>
<a class="sourceLine" id="cb303-5" title="5">  <span class="kw">transform</span>: translateY(<span class="dv">500</span><span class="dt">%</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb303-6" title="6">}</a>
<a class="sourceLine" id="cb303-7" title="7"></a>
<a class="sourceLine" id="cb303-8" title="8"><span class="fu">.result-enter.result-enter-active</span> {</a>
<a class="sourceLine" id="cb303-9" title="9">  <span class="kw">opacity</span>: <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb303-10" title="10">  <span class="kw">transform</span>: translateY(<span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb303-11" title="11">  <span class="kw">transition</span>: opacity <span class="dv">500</span><span class="dt">ms</span><span class="op">,</span> transform <span class="dv">500</span><span class="dt">ms</span><span class="op">;</span></a>
<a class="sourceLine" id="cb303-12" title="12">}</a>
<a class="sourceLine" id="cb303-13" title="13"></a>
<a class="sourceLine" id="cb303-14" title="14"><span class="fu">.result-exit</span> {</a>
<a class="sourceLine" id="cb303-15" title="15">  <span class="kw">opacity</span>: <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb303-16" title="16">  <span class="kw">transform</span>: translateY(<span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb303-17" title="17">}</a>
<a class="sourceLine" id="cb303-18" title="18"></a>
<a class="sourceLine" id="cb303-19" title="19"><span class="fu">.result-exit.result-exit-active</span> {</a>
<a class="sourceLine" id="cb303-20" title="20">  <span class="kw">opacity</span>: <span class="dv">0.01</span><span class="op">;</span></a>
<a class="sourceLine" id="cb303-21" title="21">  <span class="kw">transform</span>: translateY(<span class="dv">500</span><span class="dt">%</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb303-22" title="22">  <span class="kw">transition</span>: opacity <span class="dv">500</span><span class="dt">ms</span><span class="op">,</span> transform <span class="dv">500</span><span class="dt">ms</span><span class="op">;</span></a>
<a class="sourceLine" id="cb303-23" title="23">}</a></code></pre></div>
<p>Go play with the widget! You’ll notice that when names appear, they fade in from the bottom. When they leave, they fade out and fall to the bottom. Let’s break down the CSS file:</p>
<p><code>.result-enter</code>: Specifies the initial state of an element that is entering the page. Since I want the names to start invisible and at the bottom, I’ve given it the <code>opacity</code> and <code>transform</code> properties the appropriate values.</p>
<p><code>.result-enter.result-enter-active</code>: Specifies the final state of an element that has entered the screen. Looking at the CSS, you can see that I expect the element to be completely opaque and in it’s original y-position when it is done entering. This is where you also specify the <code>transition</code> property.</p>
<p><code>.result-exit</code>: Specifies the initial state of an element that is leaving the page. In almost all cases, the values of this class with match the values in the <code>result-enter.result-enter-active</code> class.</p>
<p><code>.result-exit.result-exit-active</code>: Specifies the final state of an element that has left the screen. This is where you also specify the <code>transition</code> property.</p>
<p>Play around with the CSS file. What kind of interesting transitions can you create?</p>
<h2 id="bonus-phase-resolving-strictmode-warnings">Bonus Phase: Resolving StrictMode Warnings</h2>
<p>Check out your new transition in the browser. Open up your developer tools and type something in the “Autocomplete” search input. Your transitions are working, but wait - you have a warning in the console!</p>
<blockquote>
<p>Warning: findDOMNode is deprecated in StrictMode. findDOMNode was passed an instance of CSSTransitionGroupChild which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://fb.me/react-strict-mode-find-node</p>
</blockquote>
<p>This is an example of how <a href="https://reactjs.org/docs/strict-mode.html">StrictMode</a> is a helpful tool that highlights potential problems. In this case, <code>StrictMode</code> is giving you helpful information about the <a href="https://reactjs.org/docs/strict-mode.html#warning-about-deprecated-finddomnode-usage">deprecation of <code>findDOMNode</code></a>, which is used under the hood. You are also given a clickable link to the official React documentation!</p>
<p>According to the documentation, <code>findDOMNode</code> is used “to search the tree for a DOM node given a class instance.” Now is your chance to practice going through the official React documentation and learning from reading a <a href="https://github.com/reactjs/react-transition-group/pull/559">merged PR</a> in the official <a href="https://github.com/reactjs/react-transition-group/">react-transition-group repository</a>! Take a moment to read through the <a href="https://github.com/reactjs/react-transition-group/pull/559">merged PR</a> to see real-life discussion about implementing the <code>nodeRef</code> feature as an alternative to having React use <code>findDOMNode</code> under the hood.</p>
<p>In your constructor method, create a ref with <a href="https://reactjs.org/docs/refs-and-the-dom.html"><code>React.createRef()</code></a> and use the ref to assign a <code>nodeRef</code> prop to the <code>&lt;CSSTransition&gt;</code> that wraps your result items. Doing this will allow React to reference the <code>&lt;CSSTransition&gt;</code> component, without using the deprecated <code>findDOMNode</code> method to search through the tree for the component. Since React is no longer using <code>findDOMNode</code> under the hood, using a <code>nodeRef</code> will remove the warning in the developer tools console.</p>
<p>Congratulations! You have just read through official documentation. In the future, you may contribute to an open-source or community managed project, just like how the use for the <a href="https://github.com/reactjs/react-transition-group/pull/559">merged PR</a> did! Don’t be discouraged by reading live discussion in GitHub issues and pull requests. You’ll continue building your foundation of React knowledge and before you know it, you might even be contributing to projects yourself!</p>
<hr />
<h1 id="week-14-day-4-react-router-and-react-builds" data-ignore="true">WEEK-14 DAY-4<br><em>React Router and React Builds</em></h1>
<hr />
<h1 id="react-router-learning-objectives">React Router Learning Objectives</h1>
<p>At this point, you know how to build and render frontend components with React. Now it’s time to learn about frontend routing so that you can connect specific components to render at specific URL paths. After reading and practicing, you should be able to:</p>
<ul>
<li>Use the <code>react-router-dom</code> package to set up React Router in your applications</li>
<li>Create routes using the <code>&lt;Route&gt;</code> component from the <code>react-router-dom</code> package</li>
<li>Generate navigation links with the <code>&lt;Link&gt;</code> and <code>&lt;NavLink&gt;</code> components from the <code>react-router-dom</code> package<br />
</li>
<li>Create <code>&lt;Switch&gt;</code> routes and manage the order of rendered components</li>
<li>Use the React Router <code>match</code> prop to access router parameters</li>
<li>Use the React Router <code>history</code> prop to programmatically change the browser’s URL</li>
<li>Redirect users by using the <code>&lt;Redirect&gt;</code> component in a route</li>
<li>Describe what nested routes are and how to create them</li>
</ul>
<hr />
<h1 id="react-builds-learning-objectives">React Builds Learning Objectives</h1>
<p>You’ve been using Create React App to create and build React applications. While you don’t need to understand every detail of the frontend build process that Create React App provides, having a general understanding will help you to take full advantage of the features offered by the tool. After reading and practicing, you should be able to:</p>
<ul>
<li>Describe what frontend builds are and why they’re needed</li>
<li>Describe at a high level what happens in a Create React App when you run <code>npm start</code></li>
<li>Prepare to deploy a React application into a production environment</li>
</ul>
<hr />
<h1 id="react-router-introduction">React Router Introduction</h1>
<p>Now that you know how to render components in a React app, how do you handle rendering different components for different website pages? React Router is the answer!</p>
<p>Think of how you have created server-side routes in Express. Take the following URL and server-side route. Notice how the <code>/users/:userId</code> path corresponds with the <code>http://localhost:3000/users/2</code> URL to render a specific HTML page.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb304-1" title="1"><span class="co">// http://localhost:3000/users/2</span></a>
<a class="sourceLine" id="cb304-2" title="2"><span class="va">app</span>.<span class="at">get</span>(<span class="st">&#39;/users/:userId&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb304-3" title="3">  <span class="va">res</span>.<span class="at">render</span>(<span class="st">&#39;userProfile.pug&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb304-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>In the default React setup, you lose the ability to create routes in the same manner as in Express. This is what React Router aims to solve!</p>
<p><a href="https://github.com/ReactTraining/react-router">React Router</a> is a frontend routing library that allows you to control which components to display using the browser location. A user can also copy and paste a URL and email it to a friend or link to it from their own website.</p>
<p>When you finish this article, you should be able to use the following from the <code>react-router-dom</code> library:</p>
<ul>
<li><code>&lt;BrowserRouter&gt;</code> to provide your application access to the <code>react-router-dom</code> library; and</li>
<li><code>&lt;Route&gt;</code> to connect specific URL paths to specific components you want rendered; and</li>
<li><code>&lt;Switch&gt;</code> to wrap several <code>Route</code> elements, rendering only one even if several match the current URL; and</li>
<li>React Router’s <code>match</code> prop to access route path parameters.</li>
</ul>
<h2 id="getting-started-with-routing">Getting started with routing</h2>
<p>Since you are writing single page apps, you don’t want to refresh the page each time you change the browser location. Instead, you want to update the browser location and your app’s response using JavaScript. This is known as client-side routing. You are using React, so you will use React Router to do this.</p>
<p>Create a simple react project template:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb305-1" title="1"><span class="ex">npx</span> create-react-app my-app --template @appacademy/simple</a></code></pre></div>
<p>Then install React Router:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb306-1" title="1"><span class="ex">npm</span> install --save react-router-dom@^5.1.2</a></code></pre></div>
<p>Now import <code>BrowserRouter</code> from <code>react-router-dom</code> in your entry file:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb307-1" title="1"><span class="im">import</span> <span class="op">{</span> BrowserRouter <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom`;</span></a></code></pre></div>
<h3 id="browserrouter">BrowserRouter</h3>
<p><code>BrowserRouter</code> is the primary component of the router that wraps your route hierarchy. It creates a React context that passes routing information down to all its descendent components. For example, if you want to give <code>&lt;App&gt;</code> and all its children components access to React Router, you would wrap <code>&lt;App&gt;</code> like so:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb308-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb308-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb308-3" title="3"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb308-4" title="4"><span class="im">import</span> <span class="op">{</span> BrowserRouter <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb308-5" title="5"><span class="im">import</span> App <span class="im">from</span> <span class="st">&#39;./App&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb308-6" title="6"></a>
<a class="sourceLine" id="cb308-7" title="7"><span class="kw">const</span> Root <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb308-8" title="8">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb308-9" title="9">    <span class="op">&lt;</span>BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb308-10" title="10">      <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb308-11" title="11">    &lt;/BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb308-12" title="12">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb308-13" title="13"><span class="op">};</span></a>
<a class="sourceLine" id="cb308-14" title="14"></a>
<a class="sourceLine" id="cb308-15" title="15"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb308-16" title="16">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb308-17" title="17">    <span class="op">&lt;</span>Root /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb308-18" title="18">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb308-19" title="19">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb308-20" title="20">)<span class="op">;</span></a></code></pre></div>
<p>Now you can route the rendering of certain components to certain URLs (i.e <code>https://www.website.com/profile</code>).</p>
<h3 id="hashrouter">HashRouter</h3>
<p>Alternatively, you could import and use <code>HashRouter</code> from <code>react-router-dom</code>. Links for applications that use <code>&lt;HashRouter&gt;</code> would look like <code>https://www.website.com/#/profile</code> (with an <code>#</code> between the domain and path).</p>
<p>You’ll focus on using the <code>&lt;BrowserRouter&gt;</code>.</p>
<h2 id="creating-frontend-routes">Creating frontend routes</h2>
<p>React Router helps your React application render specific components based on the URL. The React Router component you’ll use most often is <code>&lt;Route&gt;</code>.</p>
<p>The <code>&lt;Route&gt;</code> component is used to wrap another component, causing that component to only be rendered if a certain URL is matched. The behavior of the <code>&lt;Route&gt;</code> component is controlled by the following props: <code>path</code>, <code>component</code>, <code>exact</code>, and <code>render</code> (optional).</p>
<p>Create a simple <code>Users</code> component that returns <code>&lt;h1&gt;This is the users index!&lt;/h1&gt;</code>. Now let’s refactor your <code>index.js</code> file so that you can create your routes within the component:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb309-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb309-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb309-3" title="3"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb309-4" title="4"><span class="im">import</span> <span class="op">{</span> BrowserRouter<span class="op">,</span> Route <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb309-5" title="5"><span class="im">import</span> App <span class="im">from</span> <span class="st">&#39;./App&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb309-6" title="6"><span class="im">import</span> Users <span class="im">from</span> <span class="st">&#39;./Users&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb309-7" title="7"></a>
<a class="sourceLine" id="cb309-8" title="8"><span class="kw">const</span> Root <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb309-9" title="9">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb309-10" title="10">    <span class="op">&lt;</span>BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb309-11" title="11">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb309-12" title="12">        <span class="op">{</span><span class="co">/* </span><span class="al">TODO</span><span class="co">: Routes */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb309-13" title="13">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb309-14" title="14">    &lt;/BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb309-15" title="15">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb309-16" title="16"><span class="op">};</span></a>
<a class="sourceLine" id="cb309-17" title="17"></a>
<a class="sourceLine" id="cb309-18" title="18"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb309-19" title="19">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb309-20" title="20">    <span class="op">&lt;</span>Root /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb309-21" title="21">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb309-22" title="22">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb309-23" title="23">)<span class="op">;</span></a></code></pre></div>
<p>Note that <code>BrowserRouter</code> can only have a single child component, so the snippet above wraps all routes within parent a <code>&lt;div&gt;</code> element. Now let’s create some routes!</p>
<h3 id="component">component</h3>
<p>Begin with the <code>component</code> prop. This prop takes a reference to the component to be rendered. Let’s render your <code>App</code> component:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb310-1" title="1"><span class="kw">const</span> Root <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb310-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb310-3" title="3">    <span class="op">&lt;</span>BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb310-4" title="4">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb310-5" title="5">        <span class="op">&lt;</span>Route component<span class="op">={</span>App<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb310-6" title="6">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb310-7" title="7">    &lt;/BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb310-8" title="8">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb310-9" title="9"><span class="op">};</span></a></code></pre></div>
<p>Now you’ll need to connect a path to the component!</p>
<h3 id="path">path</h3>
<p>The wrapped component will only be rendered when the path is matched. The path matches the URL when it matches some initial portion of the URL. For example, a path of <code>/</code> would match both of the following URLs: <code>/</code> and <code>/users</code>. (Because <code>/users</code> begins with a <code>/</code> it matches the path <code>/</code>)</p>
<pre class="jsx"><code>&lt;Route path=&#39;/&#39; component={App} /&gt;
&lt;Route path=&#39;/users&#39; component={Users} /&gt;</code></pre>
<p>Take a moment to navigate to <code>http://localhost:3000/users</code> to see how both the <code>App</code> component and <code>Users</code> component are rendering.</p>
<h3 id="exact">exact</h3>
<p>If this <code>exact</code> flag is set, the path will only match when it exactly matches the URL. Then browsing to the <code>/users</code> path would no longer match <code>/</code> and only the <code>Users</code> component will be rendered (instead of both the <code>App</code> component and <code>Users</code> component).</p>
<pre class="jsx"><code>&lt;Route exact path=&#39;/&#39; component={App} /&gt;
&lt;Route path=&#39;/users&#39; component={Users} /&gt;</code></pre>
<h3 id="render">render</h3>
<p>This is an optional prop that takes in a function to be called. The function will be called when the path matches. The function’s return value is rendered. You could also define a functional component inside the <code>component</code> prop, but this results in extra, unnecessary work for React. The <code>render</code> prop is preferred for inline rendering of simple functional components.</p>
<p>The difference between using <code>component</code> and <code>render</code> is that <code>component</code> returns new JSX to be re-mounted every time the route renders, while <code>render</code> simply returns to JSX what will be mounted once and re-rendered. For any given route, you should only use either the <code>component</code> prop, or the <code>render</code> prop. If both are supplied, only the <code>component</code> prop will be used.</p>
<pre class="jsx"><code>// This inline rendering will work, but is unnecessarily slow.
&lt;Route path=&quot;/hello&quot; component={() =&gt; &lt;h1&gt;Hello!&lt;/h1&gt;} /&gt;

// This is the preferred way for inline rendering.
&lt;Route path=&quot;/hello&quot; render={() =&gt; &lt;h1&gt;Hello!&lt;/h1&gt;} /&gt;</code></pre>
<p>It can be helpful to use <code>render</code> instead of <code>component</code> in your <code>&lt;Route&gt;</code> when you need to pass props into the rendered component. For example, imagine that you needed to pass the <code>users</code> object as a prop to your <code>Users</code> component. Then you could pass in props from <code>Root</code> to <code>Users</code> by returning the <code>Users</code> component like so:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb314-1" title="1"><span class="co">// `users` to be passed as a prop:</span></a>
<a class="sourceLine" id="cb314-2" title="2"><span class="kw">const</span> users <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb314-3" title="3">  <span class="dv">1</span><span class="op">:</span> <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Andrew&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb314-4" title="4">  <span class="dv">2</span><span class="op">:</span> <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Raymond&#39;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb314-5" title="5"><span class="op">};</span></a></code></pre></div>
<pre class="jsx"><code>&lt;Route path=&quot;/users&quot; render={() =&gt; &lt;Users users={users} /&gt;} /&gt;</code></pre>
<p>As a reminder, <code>BrowserRouter</code> can only have a single child component. That’s why you have wrapped all your routes within parent a <code>&lt;div&gt;</code> element.</p>
<pre class="jsx"><code>const Root = () =&gt; {
  const users = {
    1: { name: &#39;Andrew&#39; },
    2: { name: &#39;Raymond&#39; }
  };

  return (
    &lt;BrowserRouter&gt;
      &lt;div&gt;
        &lt;h1&gt;Hi, I&#39;m Root!&lt;/h1&gt;
        &lt;Route exact path=&quot;/&quot; component={App} /&gt;
        &lt;Route path=&quot;/hello&quot; render={() =&gt; &lt;h1&gt;Hello!&lt;/h1&gt;} /&gt;
        &lt;Route path=&quot;/users&quot; render={() =&gt; &lt;Users users={users} /&gt;} /&gt;
      &lt;/div&gt;
    &lt;/BrowserRouter&gt;
  );
};</code></pre>
<p>With this <code>Root</code> component, you will always render the <code>&lt;h1&gt;Hi, I'm Root!&lt;/h1&gt;</code>, regardless of the path. Because of the first <code>&lt;Route&gt;</code>, you will only render the <code>App</code> component if the path exactly matches <code>/</code>. Because of the second <code>&lt;Route&gt;</code>, you will only render the <code>Users</code> component if the path matches <code>/users</code>.</p>
<h3 id="route-path-params">Route path params</h3>
<p>A component’s props can also hold information about a URL’s parameters. The router will match route segments starting at <code>:</code> up to the next <code>/</code>, <code>?</code>, or <code>#</code>. Those matched values are then passed to components via their props. Such segments are <em>wildcard</em> values that make up your route parameters.</p>
<p>For example, take the route below:</p>
<pre class="jsx"><code>&lt;Route path=&quot;/users/:userId&quot;
       render={(props) =&gt; &lt;Profile users={users} {...props} /&gt;} /&gt;</code></pre>
<p>The router would break down the full <code>/users/:userId/photos</code> path to two parts: <code>/users</code>, <code>:userId</code>.</p>
<p>The <code>Profile</code> component’s props would have access to the <code>:userId</code> part of the <code>http://localhost:3000/users/:userId/photos</code> URL through the <code>props</code> with router parameter information. You would access the the <code>match</code> prop’s parameters (<code>props.match.params</code>). If you are using the <code>render</code> prop of the <code>Route</code> component, make sure to spread the props back into the component if you want it to know about the “match” parameters.</p>
<pre class="jsx"><code>// Route&#39;s `render` prop allows you to pass the `users`
// prop and spread the router `props`.
render={(props) =&gt; &lt;Profile users={users} {...props} /&gt;}
</code></pre>
<p>The <code>params</code> object would then have a property of <code>userId</code> which would hold the value of the <code>:userId</code> <em>wildcard</em> value. Let’s render the <code>userId</code> parameter in a user profile component. Take a moment to create a <code>Profile.js</code> file with the following code:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb319-1" title="1"><span class="co">// ./src/Profile.js</span></a>
<a class="sourceLine" id="cb319-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&quot;react&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb319-3" title="3"></a>
<a class="sourceLine" id="cb319-4" title="4"><span class="kw">const</span> Profile <span class="op">=</span> (props) <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb319-5" title="5">  <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb319-6" title="6">    The user<span class="st">&#39;s id is {props.match.params.userId}.</span></a>
<a class="sourceLine" id="cb319-7" title="7">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb319-8" title="8">)<span class="op">;</span></a>
<a class="sourceLine" id="cb319-9" title="9"></a>
<a class="sourceLine" id="cb319-10" title="10"><span class="im">export</span> <span class="im">default</span> Profile<span class="op">;</span></a></code></pre></div>
<p>Notice how it uses the <code>match</code> prop to access the <code>:userId</code> parameter from the URL. You can use this wildcard to make and AJAX call to fetch the user information from the database and render the return data in the <code>Profile</code> component. Recall that your <code>Profile</code> component was rendered at the path <code>/users/:userId</code>. Thus you can use your <code>userId</code> parameters from <code>match.params</code> to fetch a specific user:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb320-1" title="1"><span class="co">// ./src/Profile.js</span></a>
<a class="sourceLine" id="cb320-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&quot;react&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb320-3" title="3"></a>
<a class="sourceLine" id="cb320-4" title="4"><span class="kw">const</span> Profile <span class="op">=</span> (<span class="op">{</span> users<span class="op">,</span> <span class="dt">match</span><span class="op">:</span> <span class="op">{</span> params <span class="op">}</span> <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb320-5" title="5"></a>
<a class="sourceLine" id="cb320-6" title="6">  <span class="co">// In a real-world scenario, you&#39;d make a call to an API to fetch the user,</span></a>
<a class="sourceLine" id="cb320-7" title="7">  <span class="co">// instead of passing down and keying into a `users` prop.</span></a>
<a class="sourceLine" id="cb320-8" title="8">  <span class="kw">const</span> user <span class="op">=</span> users[<span class="va">params</span>.<span class="at">userId</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb320-9" title="9"></a>
<a class="sourceLine" id="cb320-10" title="10">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb320-11" title="11">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb320-12" title="12">      The user<span class="st">&#39;s id is {params.userId} and the user&#39;</span>s name is <span class="op">{</span><span class="va">user</span>.<span class="at">name</span><span class="op">}</span>.</a>
<a class="sourceLine" id="cb320-13" title="13">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb320-14" title="14">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb320-15" title="15"><span class="op">};</span></a>
<a class="sourceLine" id="cb320-16" title="16"></a>
<a class="sourceLine" id="cb320-17" title="17"><span class="im">export</span> <span class="im">default</span> Profile<span class="op">;</span></a></code></pre></div>
<h2 id="match">Match</h2>
<p>Now that you’ve seen your React Router’s <code>match</code> prop in action, let’s go over more about <a href="https://reacttraining.com/react-router/web/api/Route/route-props">route props</a>! React Router passes information to the components as route props, accessible to all components with access to the React Router. The three props it makes available are <code>location</code>, <code>match</code> and <code>history</code>. You’ve learned about <code>props.match.params</code>, but now let’s review the other properties of the <code>match</code> prop!</p>
<p>This is an object that contains important information about how the current URL matches the route path. Here are some of the more useful keys on the <code>match</code> object:</p>
<ul>
<li><code>isExact</code>: a boolean that tells you whether or not the URL exactly matches the path</li>
<li><code>url</code>: the current URL</li>
<li><code>path</code>: the route path it matched against (without wildcards filled in)</li>
<li><code>params</code>: the matches for the individual wildcard segments, nested under their names</li>
</ul>
<p>When you use React Router, the browser <code>location</code> and <code>history</code> are a part of the state of your app. You can store information about which component should be displayed, which user profile you are currently viewing, or any other piece of state, in the browser location. You can then access that information from anywhere your Router props are passed to in your app.</p>
<p>Now that you’ve learned about parameters and route props, let’s revisit your <code>Root</code> component to add an <code>exact</code> flag to your <code>/users</code> route so that it does not render with your <code>/users/:userId</code> route. Your component should look something like this:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb321-1" title="1"><span class="kw">const</span> Root <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb321-2" title="2">  <span class="kw">const</span> users <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb321-3" title="3">    <span class="dv">1</span><span class="op">:</span> <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Andrew&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb321-4" title="4">    <span class="dv">2</span><span class="op">:</span> <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Raymond&#39;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb321-5" title="5">  <span class="op">};</span></a>
<a class="sourceLine" id="cb321-6" title="6"></a>
<a class="sourceLine" id="cb321-7" title="7">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb321-8" title="8">    <span class="op">&lt;</span>BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb321-9" title="9">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hi<span class="op">,</span> I<span class="st">&#39;m Root!&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb321-10" title="10">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb321-11" title="11">        <span class="op">&lt;</span>Route exact path<span class="op">=</span><span class="st">&quot;/&quot;</span> component<span class="op">={</span>App<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb321-12" title="12">        <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&quot;/hello&quot;</span> render<span class="op">={</span>() <span class="kw">=&gt;</span> <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hello<span class="op">!</span>&lt;/h1<span class="op">&gt;}</span> /&gt;</a>
<a class="sourceLine" id="cb321-13" title="13"></a>
<a class="sourceLine" id="cb321-14" title="14">        <span class="op">{</span><span class="co">/* Render the `Users` page if no ID is included. */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb321-15" title="15">        <span class="op">&lt;</span>Route exact path<span class="op">=</span><span class="st">&quot;/users&quot;</span> render<span class="op">={</span>() <span class="kw">=&gt;</span> <span class="op">&lt;</span>Users users<span class="op">={</span>users<span class="op">}</span> /&gt;<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb321-16" title="16"></a>
<a class="sourceLine" id="cb321-17" title="17">        <span class="op">{</span><span class="co">/* Otherwise, render the profile page for that userId. */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb321-18" title="18">        <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&quot;/users/:userId&quot;</span> component<span class="op">={</span>(props) <span class="kw">=&gt;</span> <span class="op">&lt;</span>Profile users<span class="op">={</span>users<span class="op">}</span> <span class="op">{</span>...<span class="at">props</span><span class="op">}</span> /&gt;<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb321-19" title="19">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb321-20" title="20">    &lt;/BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb321-21" title="21">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb321-22" title="22"><span class="op">};</span></a></code></pre></div>
<h2 id="what-you-learned-6">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Use components from the React Router library; and</li>
<li>Create routes to render specific components; and</li>
<li>Manage the order of rendered routes; and</li>
<li>Use the <code>exact</code> flag to ensure that a specific path renders a specific component; and</li>
<li>Use the React Router <code>match</code> prop to access Router params.</li>
</ul>
<hr />
<h1 id="react-router-navigation">React Router Navigation</h1>
<p>Now that you know how to create front-end routes with React Router, you’ll need to implement a way for your users to navigate the routes! This is what using React Router’s <code>Link</code>, <code>NavLink</code>, <code>Redirect</code>, and <code>history</code> prop can help you do.</p>
<p>In this article, you’ll be working off of the demo project you built in the React Router Intro reading. When you finish this article, you should be able to use the following components from the <code>react-router-dom</code> library:</p>
<ul>
<li><code>&lt;Link&gt;</code> or <code>&lt;NavLink&gt;</code> to create links with absolute paths to routes in your application (like “/users/1”); and,</li>
<li><code>&lt;Redirect&gt;</code> to redirect a user to another path (i.e. a login page when the user is not logged in); and</li>
<li>React Router’s <code>history</code> prop to update a browser’s URL programmatically.</li>
</ul>
<h2 id="adding-links-for-navigation">Adding links for navigation</h2>
<p>React Router’s <code>&lt;Link&gt;</code> is one way to simplify navigation around your app. It issues an on-click navigation event to a route defined in your app’s router. Using <code>&lt;Link&gt;</code> renders an anchor tag with a correctly set <code>href</code> attribute.</p>
<h3 id="link">Link</h3>
<p>To use it, update your imports from the <code>react-router-dom</code> package to include <code>Link</code>:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb322-1" title="1"><span class="im">import</span> <span class="op">{</span> BrowserRouter<span class="op">,</span> Route<span class="op">,</span> Link <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Note that <code>&lt;Link&gt;</code> can take two props: <code>to</code> and <code>onClick</code>.</p>
<p>The <code>to</code> prop is a route location description that points to an absolute path, (i.e. <code>/users</code>). Add the following <code>Link</code> components in your <code>index.js</code> file above your routes:</p>
<pre class="jsx"><code>&lt;Link to=&quot;/&quot;&gt;App&lt;/Link&gt;
&lt;Link to=&quot;/users&quot;&gt;Users&lt;/Link&gt;
&lt;Link to=&quot;/users/1&quot;&gt;Andrew&#39;s Profile&lt;/Link&gt;</code></pre>
<p>The <code>onClick</code> prop is just like any other JSX click handler. You can write a function that takes in an <code>event</code> and handles it. Add the following <code>Link</code> before your routes and the following click handler function within your <code>Root</code> component:</p>
<pre class="jsx"><code>// Link with onClick prop
&lt;Link to=&quot;/&quot; onClick={handleClick}&gt;App with click handler&lt;/Link&gt;</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb325-1" title="1"><span class="co">// Click handler function</span></a>
<a class="sourceLine" id="cb325-2" title="2"><span class="kw">const</span> handleClick <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb325-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Thanks for clicking!&#39;</span>)</a>
<a class="sourceLine" id="cb325-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>Now, test your routes and links! If you inspect the page, you’ll see that your links are now rendered as <code>&lt;a&gt;</code> elements. Notice that clicking the <code>App with click handler</code> link logs a message in your console while directing your browser to render the <code>App</code> component.</p>
<h3 id="navlink">NavLink</h3>
<p>The <code>&lt;NavLink&gt;</code> works just like a <code>&lt;Link&gt;</code>, but with a little extra functionality. It has the ability to add extra styling when the path it links to matches the current path. This makes it an ideal choice for a navigation bar, hence the name. This styling can be controlled by three extra props: <code>activeClassName</code>, <code>activeStyle</code>, and <code>exact</code>. To begin using <code>NavLink</code>, update your imports from the <code>react-router-dom</code> package:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb326-1" title="1"><span class="im">import</span> <span class="op">{</span> BrowserRouter<span class="op">,</span> Route<span class="op">,</span> NavLink <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a></code></pre></div>
<p>The <code>activeClassName</code> prop of the <code>NavLink</code> component allows you to set a CSS class name for styling the <code>NavLink</code> when its route is active. By default, the <code>activeClassName</code> is already set to <code>active</code>. This means that you simply need to add an <code>.active</code> class to your CSS file to add active styling to your link. A <code>NavLink</code> will be active if its <code>to</code> prop path matches the current URL.</p>
<p>Let’s change your “Users”, “Hello”, and “Andrew’s Profile” links to be different colors and have a larger font size when active.</p>
<pre class="jsx"><code>&lt;NavLink to=&quot;/&quot;&gt;App&lt;/NavLink&gt;
&lt;NavLink activeClassName=&quot;red&quot; to=&quot;/users&quot;&gt;Users&lt;/NavLink&gt;
&lt;NavLink activeClassName=&quot;blue&quot; to=&quot;/hello&quot;&gt;Hello&lt;/NavLink&gt;
&lt;NavLink activeClassName=&quot;green&quot; to=&quot;/users/1&quot;&gt;Andrew&#39;s Profile&lt;/NavLink&gt;
&lt;NavLink to=&quot;/&quot; onClick={handleClick}&gt;App with click handler&lt;/NavLink&gt;</code></pre>
<p>For example, this is what the rendered HTML <code>&lt;a&gt;</code> tag would look like when when the browser is navigated to the <code>/</code> path or the <code>/users</code> path:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb328-1" title="1"><span class="co">&lt;!-- Navigated to the / path (the activeClassName</span></a>
<a class="sourceLine" id="cb328-2" title="2"><span class="co">     prop is set to active by default) --&gt;</span></a>
<a class="sourceLine" id="cb328-3" title="3"><span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/&quot;</span><span class="ot"> class=</span><span class="st">&quot;active&quot;</span><span class="kw">&gt;</span>App<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb328-4" title="4"></a>
<a class="sourceLine" id="cb328-5" title="5"><span class="co">&lt;!-- NOT navigated to the `/` path --&gt;</span></a>
<a class="sourceLine" id="cb328-6" title="6"><span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/&quot;</span><span class="kw">&gt;</span>App<span class="kw">&lt;/a&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb329"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb329-1" title="1"><span class="co">&lt;!-- Navigated to the /users path (the activeClassName</span></a>
<a class="sourceLine" id="cb329-2" title="2"><span class="co">     prop is manually set to red) --&gt;</span></a>
<a class="sourceLine" id="cb329-3" title="3"><span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/users&quot;</span><span class="ot"> class=</span><span class="st">&quot;red&quot;</span><span class="kw">&gt;</span>Users<span class="kw">&lt;/a&gt;</span></a>
<a class="sourceLine" id="cb329-4" title="4"></a>
<a class="sourceLine" id="cb329-5" title="5"><span class="co">&lt;!-- NOT navigated to the `/users` path --&gt;</span></a>
<a class="sourceLine" id="cb329-6" title="6"><span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/users&quot;</span><span class="kw">&gt;</span>Users<span class="kw">&lt;/a&gt;</span></a></code></pre></div>
<p>Import <code>NavLink</code> into your <code>index.js</code> file and take a moment to update all your <code>Link</code> elements to <code>NavLink</code> elements. Set an <code>activeClassName</code> prop to an <code>active</code> class. Add the following <code>.active</code> class to your <code>index.css</code> file:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb330-1" title="1"><span class="fu">.active</span> {</a>
<a class="sourceLine" id="cb330-2" title="2">  <span class="kw">font-weight</span>: <span class="dv">bold</span><span class="op">;</span></a>
<a class="sourceLine" id="cb330-3" title="3">}</a>
<a class="sourceLine" id="cb330-4" title="4"></a>
<a class="sourceLine" id="cb330-5" title="5"><span class="fu">.red</span> {</a>
<a class="sourceLine" id="cb330-6" title="6">  <span class="kw">color</span>: <span class="cn">red</span><span class="op">;</span></a>
<a class="sourceLine" id="cb330-7" title="7">  <span class="kw">font-size</span>: <span class="dv">30</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb330-8" title="8">}</a>
<a class="sourceLine" id="cb330-9" title="9"></a>
<a class="sourceLine" id="cb330-10" title="10"><span class="fu">.blue</span> {</a>
<a class="sourceLine" id="cb330-11" title="11">  <span class="kw">color</span>: <span class="cn">blue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb330-12" title="12">  <span class="kw">font-size</span>: <span class="dv">30</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb330-13" title="13">}</a>
<a class="sourceLine" id="cb330-14" title="14"></a>
<a class="sourceLine" id="cb330-15" title="15"><span class="fu">.green</span> {</a>
<a class="sourceLine" id="cb330-16" title="16">  <span class="kw">color</span>: <span class="cn">green</span><span class="op">;</span></a>
<a class="sourceLine" id="cb330-17" title="17">  <span class="kw">font-size</span>: <span class="dv">30</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb330-18" title="18">}</a></code></pre></div>
<p>Test your styled links! Notice how the <code>App</code> and <code>App with click handler</code> links are always bolded. This is because all of your links include the <code>/</code> path, meaning that the link to <code>/</code> will be active when browsing to <code>/users</code> and <code>/users/1</code> because of how <code>users</code> and <code>users/1</code> are both prefaced by a <code>/</code>.</p>
<p>The <code>activeStyle</code> prop is a style object that will be applied inline to the <code>NavLink</code> when its <code>to</code> prop matches the current URL. Add the following <code>activeStyle</code> to your <code>App</code> link and comment out the <code>.active</code> class in your CSS file.</p>
<pre class="jsx"><code>&lt;NavLink to=&quot;/&quot; activeStyle={{ fontWeight: &quot;bold&quot; }}&gt;App&lt;/NavLink&gt;</code></pre>
<p>The following html is rendered when at the <code>/</code> path:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb332-1" title="1"><span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/&quot;</span><span class="ot"> style=</span><span class="st">&quot;font-weight:bold;&quot;</span><span class="ot"> class=</span><span class="st">&quot;active&quot;</span><span class="kw">&gt;</span>App<span class="kw">&lt;/a&gt;</span></a></code></pre></div>
<p>Notice how your <code>App with click handler</code> is not bolded anymore. This is because the default <code>active</code> class being applied does not have any CSS stylings set to the class. Uncomment your <code>.active</code> class in your CSS file to bring back bolding to this NavLink.</p>
<p>The <code>exact</code> prop is a boolean that defaults to <code>false</code>. If set to <code>true</code>, then the <code>activeStyle</code> and <code>activeClassName</code> props will only be applied when the current URL exactly matches the <code>to</code> prop. Update your <code>App</code> and <code>App with click handler</code> links with an <code>exact</code> prop set. Just like in your routes, you can use the <code>exact</code> flag instead of <code>exact={true}</code>.</p>
<pre class="jsx"><code>&lt;NavLink to=&quot;/&quot; exact={true} activeStyle={{ fontWeight: &quot;bold&quot; }}&gt;App&lt;/NavLink&gt;
&lt;NavLink to=&quot;/&quot; exact onClick={handleClick}&gt;App with click handler&lt;/NavLink&gt;</code></pre>
<p>Now your <code>App</code> and <code>App with click handler</code> links will only be bolded when you have navigated precisely to the <code>/</code> path.</p>
<h2 id="switching-between-routes">Switching between routes</h2>
<p>You came across styling issues when the <code>/users</code> and <code>/users/1</code> paths matched the <code>/</code> path. Routing can have this issue as well. This is why you need to control the switching between routes.</p>
<p>React Router’s <code>&lt;Switch&gt;</code> component allows you to only render one <code>&lt;Route&gt;</code> even if several match the current URL. You can nest as many <code>Route</code>s as you wish between the opening and closing <code>Switch</code> tags, but only the first one that matches the current URL will be rendered.</p>
<p>This is particularly useful if you want a default component that will only render if none of our other routes match. View the example below. Without the Switch, <code>DefaultComponent</code> would always render. Since there isn’t set a path in the <code>DefaultComponent</code> route, it will simply use the default path of <code>/</code>. Now the <code>DefaultComponent</code> will only render when neither of the preceding routes match.</p>
<pre class="jsx"><code>&lt;Switch&gt;
  &lt;Route path=&quot;some/url&quot; component={SomeComponent} /&gt;
  &lt;Route path=&quot;some/other/url&quot; component={OtherComponent} /&gt;
  &lt;Route component={DefaultComponent} /&gt;
&lt;/Switch&gt;</code></pre>
<p>Import <code>Switch</code> from <code>react-router-dom</code> and add <code>&lt;Switch&gt;</code> tags around your routes to take care of ordering and switching between your routes! Begin by adding the following route to the bottom of your routes to render that a <code>404: Page not found</code> message:</p>
<pre class="jsx"><code>&lt;Route render={() =&gt; &lt;h1&gt;404: Page not found&lt;/h1&gt;} /&gt;</code></pre>
<p>This is what your <code>Root</code> component should look like at this point:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb336-1" title="1"><span class="kw">const</span> Root <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb336-2" title="2">  <span class="kw">const</span> users <span class="op">=</span> [</a>
<a class="sourceLine" id="cb336-3" title="3">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;andrew&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb336-4" title="4">    <span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;raymond&#39;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb336-5" title="5">  ]<span class="op">;</span></a>
<a class="sourceLine" id="cb336-6" title="6"></a>
<a class="sourceLine" id="cb336-7" title="7">  <span class="kw">const</span> handleClick <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb336-8" title="8">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Thanks for clicking!&#39;</span>)</a>
<a class="sourceLine" id="cb336-9" title="9">  <span class="op">};</span></a>
<a class="sourceLine" id="cb336-10" title="10"></a>
<a class="sourceLine" id="cb336-11" title="11">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb336-12" title="12">    <span class="op">&lt;</span>BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-13" title="13">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hi<span class="op">,</span> I<span class="st">&#39;m Root!&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb336-14" title="14"></a>
<a class="sourceLine" id="cb336-15" title="15">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-16" title="16">        <span class="op">&lt;</span>NavLink to<span class="op">=</span><span class="st">&quot;/&quot;</span> exact<span class="op">={</span><span class="kw">true</span><span class="op">}</span> activeStyle<span class="op">={{</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">&quot;bold&quot;</span> <span class="op">}}&gt;</span>App&lt;/NavLink<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-17" title="17">        <span class="op">&lt;</span>NavLink activeClassName<span class="op">=</span><span class="st">&quot;red&quot;</span> to<span class="op">=</span><span class="st">&quot;/users&quot;</span><span class="op">&gt;</span>Users&lt;/NavLink<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-18" title="18">        <span class="op">&lt;</span>NavLink activeClassName<span class="op">=</span><span class="st">&quot;blue&quot;</span> to<span class="op">=</span><span class="st">&quot;/hello&quot;</span><span class="op">&gt;</span>Hello&lt;/NavLink<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-19" title="19">        <span class="op">&lt;</span>NavLink activeClassName<span class="op">=</span><span class="st">&quot;green&quot;</span> to<span class="op">=</span><span class="st">&quot;/users/1&quot;</span><span class="op">&gt;</span>Andrew<span class="st">&#39;s Profile&lt;/NavLink&gt;</span></a>
<a class="sourceLine" id="cb336-20" title="20">        <span class="op">&lt;</span>NavLink to<span class="op">=</span><span class="st">&quot;/&quot;</span> exact onClick<span class="op">={</span>handleClick<span class="op">}&gt;</span>App <span class="cf">with</span> click handler&lt;/NavLink<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-21" title="21"></a>
<a class="sourceLine" id="cb336-22" title="22">        <span class="op">&lt;</span>Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-23" title="23">          <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&quot;/users/:userId&quot;</span> component<span class="op">={</span>(props) <span class="kw">=&gt;</span> <span class="op">&lt;</span>Profile users<span class="op">={</span>users<span class="op">}</span> <span class="op">{</span>...<span class="at">props</span><span class="op">}</span> /&gt;<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb336-24" title="24">          <span class="op">&lt;</span>Route exact path<span class="op">=</span><span class="st">&quot;/users&quot;</span> render<span class="op">={</span>() <span class="kw">=&gt;</span> <span class="op">&lt;</span>Users users<span class="op">={</span>users<span class="op">}</span> /&gt;<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb336-25" title="25">          <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&quot;/hello&quot;</span> render<span class="op">={</span>() <span class="kw">=&gt;</span> <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hello<span class="op">!</span>&lt;/h1<span class="op">&gt;}</span> /&gt;</a>
<a class="sourceLine" id="cb336-26" title="26">          <span class="op">&lt;</span>Route exact path<span class="op">=</span><span class="st">&quot;/&quot;</span> component<span class="op">={</span>App<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb336-27" title="27">          <span class="op">&lt;</span>Route render<span class="op">={</span>() <span class="kw">=&gt;</span> <span class="op">&lt;</span>h1<span class="op">&gt;</span><span class="dv">404</span><span class="op">:</span> Page not found&lt;/h1<span class="op">&gt;}</span> /&gt;</a>
<a class="sourceLine" id="cb336-28" title="28">        &lt;/Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-29" title="29">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-30" title="30">    &lt;/BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb336-31" title="31">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb336-32" title="32"><span class="op">};</span></a></code></pre></div>
<p>Now you have control over the precedence of rendered components! Try navigating to <code>http://localhost:3000/asdf</code> or any other route you have not defined. The <code>&lt;h1&gt;404: Page not found&lt;/h1&gt;</code> JSX of the last <code>&lt;Route&gt;</code> will be rendered whenever the browser attempts to visit an undefined route.</p>
<h2 id="redirecting-users">Redirecting users</h2>
<p>But what if you want to redirect users to a login page when they aren’t logged in? The <code>&lt;Redirect&gt;</code> component from React Router helps you redirect users!</p>
<p>The component takes only one prop: <code>to</code>. When it renders, it replaces the current URL with the value of its <code>to</code> prop. Typically you conditionally render <code>&lt;Redirect&gt;</code> to redirect the user away from some page you don’t want them to visit. The example below checks whether there is a defined <code>currentUser</code> prop. If so, the <code>&lt;Route&gt;</code> will render the <code>Home</code> component. Otherwise, it will redirect the user to the <code>/login</code> path.</p>
<pre class="jsx"><code>&lt;Route
  exact path=&quot;/&quot;
  render={() =&gt; (this.props.currentUser ? &lt;Home /&gt; : &lt;Redirect to=&quot;/login&quot; /&gt;)}
/&gt;</code></pre>
<p>Note: you will learn how to use a more flexible auth pattern - don’t directly imitate this example.</p>
<h2 id="history">History</h2>
<p>You know how to redirect users with a <code>&lt;Redirect&gt;</code> component, but what if you need to redirect users programmatically? You’ve learned about the React Router’s <code>match</code> prop, but now let’s go over another one of the <a href="https://reacttraining.com/react-router/web/api/Route/route-props">route props</a>: <code>history</code>!</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb338-1" title="1"><span class="co">// Pushing a new URL (and adding to the end of history stack):</span></a>
<a class="sourceLine" id="cb338-2" title="2"><span class="kw">const</span> handleClick <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="kw">this</span>.<span class="va">props</span>.<span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/some/url&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb338-3" title="3"></a>
<a class="sourceLine" id="cb338-4" title="4"><span class="co">// Replacing the current URL (won&#39;t be tracked in history stack):</span></a>
<a class="sourceLine" id="cb338-5" title="5"><span class="kw">const</span> redirect <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="kw">this</span>.<span class="va">props</span>.<span class="va">history</span>.<span class="at">replace</span>(<span class="st">&#39;/some/other/url&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>This prop lets you update the URL programmatically. For example, suppose you want to push a new URL when the user clicks a button. It has two useful methods:</p>
<ul>
<li><code>push</code> - This adds a new URL to the end of the history stack. That means that clicking the back button will take the browser to the previous URL. Note that pushing the same URL multiple times in a row will have no effect; the URL will still only show up on the stack once. In development mode, pushing the same URL twice in a row will generate a console warning. This warning is disabled in production mode.</li>
<li><code>replace</code> - This replaces the current URL on the history stack, so the back button won’t take you to it. For example:</li>
</ul>
<h2 id="what-you-learned-7">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Create navigation links for your route paths; and</li>
<li>Redirect users through using the <code>&lt;Redirect&gt;</code> component; and</li>
<li>Update a browser’s URL programmatically by using React Router’s <code>history</code> prop.</li>
</ul>
<hr />
<h1 id="react-router-nested-routes">React Router Nested Routes</h1>
<p>Now you know how to create front-end routes and add navigation with React Router. When initializing Express projects, you declare static routes. Static routes are routes that are declared when an application is initialized. When using React Router in your application’s initialization, you can declare dynamic routes. React Router introduces dynamic routing, where your routes are created as your application is rendering. This allows you to create nested routes within components!</p>
<p>In this article, let’s dive into <a href="https://reacttraining.com/react-router/core/guides/philosophy/nested-routes">nested routes</a>! When you finish the article, you should:</p>
<ul>
<li>Describe what nested routes are; and</li>
<li>Be able to use React Router to create and navigate nested routes; and</li>
<li>Know how to use the React Router <code>match</code> prop to generate links and routes.</li>
</ul>
<h2 id="why-nested-routes">Why nested routes?</h2>
<p>Let’s begin with why you might need nested routes. As you remember, you are using React to create a single-page application. This means that you’ll be organizing your application into different components and sub-components.</p>
<p>For example, imagine creating a simple front-end application with three main pages: a home welcome page (path of <code>/</code>), a users index page (path of <code>/users</code>), and user profile pages (path of <code>/users/:userId</code>). Now imagine if every user had links to separate <code>posts</code> and <code>photos</code> pages.</p>
<p>You can create those routes and links within the user profile component, instead of creating the routes and links where the main routes are defined.</p>
<h2 id="what-are-nested-routes">What are nested routes?</h2>
<p>Now let’s dive into a user profile component to understand what are nested routes! Imagine you have a route in your application’s entry file to each user’s profile like so:</p>
<pre class="jsx"><code>&lt;Route path=&quot;/users/:userId&quot; component={Profile} /&gt;</code></pre>
<p>This means that upon navigating to <code>http://localhost:3000/users/1</code>, you would render the following <code>Profile</code> component and the <code>userId</code> parameter within <code>props.match.params</code> would have the value of <code>"1"</code>.</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb340-1" title="1"><span class="kw">const</span> Profile <span class="op">=</span> (props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb340-2" title="2">  <span class="co">// Custom call to database to fetch a user by a user ID.</span></a>
<a class="sourceLine" id="cb340-3" title="3">  <span class="kw">const</span> user <span class="op">=</span> <span class="at">fetchUser</span>(<span class="va">props</span>.<span class="va">match</span>.<span class="va">params</span>.<span class="at">userId</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb340-4" title="4">  <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> id <span class="op">}</span> <span class="op">=</span> user<span class="op">;</span></a>
<a class="sourceLine" id="cb340-5" title="5"></a>
<a class="sourceLine" id="cb340-6" title="6">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb340-7" title="7">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb340-8" title="8">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Welcome to the profile <span class="kw">of</span> <span class="op">{</span>name<span class="op">}!</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb340-9" title="9"></a>
<a class="sourceLine" id="cb340-10" title="10">      <span class="op">{</span><span class="co">/* Links to a specific user&#39;s posts and photos */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb340-11" title="11">      <span class="op">&lt;</span>Link to<span class="op">={</span><span class="vs">`/users/</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">/posts`</span><span class="op">}&gt;{</span>name<span class="op">}</span><span class="st">&#39;s Posts&lt;/Link&gt;</span></a>
<a class="sourceLine" id="cb340-12" title="12">      <span class="op">&lt;</span>Link to<span class="op">={</span><span class="vs">`/users/</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">/photos`</span><span class="op">}&gt;{</span>name<span class="op">}</span><span class="st">&#39;s Photos&lt;/Link&gt;</span></a>
<a class="sourceLine" id="cb340-13" title="13"></a>
<a class="sourceLine" id="cb340-14" title="14">      <span class="op">{</span><span class="co">/* Routes to a specific user&#39;s posts and photos */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb340-15" title="15">      <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&#39;/users/:userId/posts&#39;</span> component<span class="op">={</span>UserPosts<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb340-16" title="16">      <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&#39;/users/:userId/photos&#39;</span> component<span class="op">={</span>UserPhotos<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb340-17" title="17">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb340-18" title="18">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb340-19" title="19"><span class="op">};</span></a></code></pre></div>
<p>Since this route is not created until the <code>Profile</code> component is rendered, you are dynamically creating your nested <code>/users/:userId/posts</code> and <code>/users/:userId/photos</code> routes. Remember that your <code>match</code> prop also has other helpful properties. You can use <code>match.url</code> instead of <code>/users/${id}</code> in your profile links. You can also use <code>match.path</code> instead of <code>/users/:userId</code> in your profile routes. Remember that you can destructure <code>url</code>, <code>path</code>, and <code>params</code> from your <code>match</code> prop!</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb341-1" title="1"></a>
<a class="sourceLine" id="cb341-2" title="2"><span class="co">// Destructure `match` prop</span></a>
<a class="sourceLine" id="cb341-3" title="3"><span class="kw">const</span> Profile <span class="op">=</span> (<span class="op">{</span> <span class="dt">match</span><span class="op">:</span> <span class="op">{</span> url<span class="op">,</span> path<span class="op">,</span> params <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb341-4" title="4"></a>
<a class="sourceLine" id="cb341-5" title="5">  <span class="co">// Custom call to database to fetch a user by a user ID.</span></a>
<a class="sourceLine" id="cb341-6" title="6">  <span class="kw">const</span> user <span class="op">=</span> <span class="at">fetchUser</span>(<span class="va">params</span>.<span class="at">userId</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb341-7" title="7">  <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> id <span class="op">}</span> <span class="op">=</span> user<span class="op">;</span></a>
<a class="sourceLine" id="cb341-8" title="8"></a>
<a class="sourceLine" id="cb341-9" title="9">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb341-10" title="10">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb341-11" title="11">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Welcome to the profile <span class="kw">of</span> <span class="op">{</span>name<span class="op">}!</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb341-12" title="12"></a>
<a class="sourceLine" id="cb341-13" title="13">      <span class="op">{</span><span class="co">/* Replaced `/users/${id}` URL with `props.match.url` */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb341-14" title="14">      <span class="op">&lt;</span>Link to<span class="op">={</span><span class="vs">`</span><span class="sc">${</span>url<span class="sc">}</span><span class="vs">/posts`</span><span class="op">}&gt;{</span>name<span class="op">}</span><span class="st">&#39;s Posts&lt;/Link&gt;</span></a>
<a class="sourceLine" id="cb341-15" title="15">      <span class="op">&lt;</span>Link to<span class="op">={</span><span class="vs">`</span><span class="sc">${</span>url<span class="sc">}</span><span class="vs">/photos`</span><span class="op">}&gt;{</span>name<span class="op">}</span><span class="st">&#39;s Photos&lt;/Link&gt;</span></a>
<a class="sourceLine" id="cb341-16" title="16"></a>
<a class="sourceLine" id="cb341-17" title="17">      <span class="op">{</span><span class="co">/* Replaced `/users/:userId` path with `props.match.path` */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb341-18" title="18">      <span class="op">&lt;</span>Route path<span class="op">={</span><span class="vs">`</span><span class="sc">${</span>path<span class="sc">}</span><span class="vs">/posts`</span><span class="op">}</span> component<span class="op">={</span>UserPosts<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb341-19" title="19">      <span class="op">&lt;</span>Route path<span class="op">={</span><span class="vs">`</span><span class="sc">${</span>path<span class="sc">}</span><span class="vs">/photos`</span><span class="op">}</span> component<span class="op">={</span>UserPhotos<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb341-20" title="20">    &lt;/div<span class="op">&gt;}</span></a>
<a class="sourceLine" id="cb341-21" title="21">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb341-22" title="22"><span class="op">};</span></a></code></pre></div>
<p>In tomorrow’s project, you’ll build a rainbow of routes as well as define nested routes. In the future, you may choose to implement nested routes to keep your application’s routes organized within related components.</p>
<h2 id="what-you-learned-8">What you learned</h2>
<p>In this article, you learned:</p>
<ul>
<li>What nested routes are; and</li>
<li>About creating and navigating nested routes with React Router; and</li>
<li>How to use the React Router props to generate nested links and routes.</li>
</ul>
<hr />
<h1 id="react-builds">React Builds</h1>
<p>A “build” is the process of converting code into something that can actually execute or run on the target platform. A “front-end build” is a process of preparing a front-end or client-side application for the browser.</p>
<p>With React applications, that means (at a minimum) converting JSX to something that browsers can actually understand. When using Create React App, the build process is automatically configured to do that and a lot more.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Describe what front-end builds are and why they’re needed;</li>
<li>Describe at a high level what happens in a Create React App when you run <code>npm start</code>; and</li>
<li>Prepare to deploy a React application into a production environment.</li>
</ul>
<h2 id="understanding-front-end-builds">Understanding front-end builds</h2>
<p>The need for front-end builds predates React. Over the years, developers have found it helpful to extend the lowest common denominator version of JavaScript and CSS that they could use.</p>
<p>Sometimes developers extend JavaScript and CSS with something like <a href="https://www.typescriptlang.org/">TypeScript</a> or <a href="https://sass-lang.com/">Sass</a>. Using these non-standard languages and syntaxes require you to use a build process to convert your code into standard JavaScript and CSS that can actually run in the browser.</p>
<p>Browser-based applications also require a fair amount of optimization to deliver the best, or at least acceptable, experience to end users. Front-end build processes could be configured to lint code, run unit tests, optimize images, minify and bundle code, and more–all automatically at the press of a button (i.e. running a command at the terminal).</p>
<h3 id="javascript-versions-and-the-growth-of-front-end-builds">JavaScript versions and the growth of front-end builds</h3>
<p>Developers are generally an impatient lot. When new features are added to JavaScript, we don’t like to wait for browsers to widely support those features before we start to use them in our code. And we <em>really</em> don’t like when we have to support older, legacy versions of browsers.</p>
<p>In recent years, JavaScript has been updated on a yearly basis and browser vendors do a decent job of updating their browsers to support the new features as they’re added to the language. Years ago though, there was an infamous delay between versions 5 and 6 of JavaScript. It took <em>years</em> before ES6 (or ES2015 as it eventually was renamed to) to officially be completed and even longer before browsers supported all of its features.</p>
<p>In the period of time before ES2015 was broadly supported by browsers, developers used front-end builds to convert or <em>transpile</em> ES2015 features and syntax to an older version of the language that was more broadly supported by browsers (typically ES5). The transpilation from ES2015/ES6 down to ES5 was one of the major drivers for developers to add front-end builds to their client-side projects.</p>
<h3 id="reviewing-common-terminology">Reviewing common terminology</h3>
<p>When learning about front-end or React builds, you’ll encounter a lot of terminology that you may or may not be familiar with. Here’s some of the terminology that you’ll likely encounter:</p>
<p><strong>Linting</strong> is process of using a tool to analyze your code to catch common programming errors, bugs, stylistic inconsistencies, and suspicious coding patterns. <a href="https://eslint.org/">ESLint</a> is a popular JavaScript linting tool.</p>
<p><strong>Transpilation</strong> is the process of converting source code, like JavaScript, from one version to another version. Usually this means converting newer versions of JavaScript, <a href="https://www.ecma-international.org/ecma-262/10.0/index.html">ES2019</a> or <a href="https://tc39.es/ecma262/">ES2021</a>, to a version that’s more widely supported by browsers, like <a href="http://www.ecma-international.org/ecma-262/6.0/">ES2015</a>, or even <a href="https://www.ecma-international.org/ecma-262/5.1/">ES5</a> or <a href="https://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf">ES3</a> (if you need to support the browser that your parents or grandparents use).</p>
<p><strong>Minification</strong> is the process of removing all unnecessary characters in your code (e.g. white space characters, new line characters, comments) to produce an overall smaller file. Minification tools will often also rename identifers in your code (i.e. parameter and variable names) in the quest for smaller and smaller file sizes. Source maps can also be generated to allow debugging tools to cross reference between minified code and the original source code.</p>
<p><strong>Bundling</strong> is the process of combining multiple code files into a single file. Creating a bundle (or a handful of bundles) reduces the number of requests that a client needs to make to the server.</p>
<p><strong>Tree shaking</strong> is the process of removing unused (or dead) code from your application before it’s bundled. Tree shaking external dependencies can sometimes have a dramatic positive impact on overall bundled file sizes.</p>
<h3 id="configuration-or-code">Configuration or code?</h3>
<p>Front-end build tools have come and gone over the years; sometimes very quickly, which helped bring about the phenomenon known as <a href="https://sdtimes.com/softwaredev/is-the-javascript-fatigue-real/">JavaScript fatigue</a>.</p>
<p>Configuration based tools allow you to create your build tasks by declaring (usually using JSON, XML, or YAML) what you want to be done, without explicitly writing every step in the process. In contrast, coding or scripting based tools allow you to, well, write code to create your build tasks. Configuration based tools <em>can</em> sometimes feel simpler to use while giving up some control (at least initially) while coding based tools <em>can</em> feel more familiar and predictable (since you’re describing tasks procedurally). Every generalization is false though (including this one), so there are plenty of exceptions.</p>
<p><a href="https://gruntjs.com/">Grunt</a> is a JSON configuration based task runner that can be used to orchestrate the various tasks that make up your front-end build. Grunt was very quickly supplanted by <a href="https://gulpjs.com/">Gulp</a>, which allowed developers to write JavaScript to define front-end build tasks. After Gulp, the front-end tooling landscape became a bit more muddled. Some developers preferred the simplicity of using <a href="https://docs.npmjs.com/misc/scripts">npm scripts</a> to define build tasks while others preferred the power of configuration based bundlers like <a href="https://webpack.js.org/">webpack</a>.</p>
<h3 id="babel-and-webpack-yes-thats-intentionally-a-lowercase-w">Babel and webpack (yes, that’s intentionally a lowercase ‘w’)</h3>
<p>As front-end or client-side applications grew in complexity, developers found themselves wanting to leverage more advanced JavaScript features and newer syntax like classes, arrow functions, destructuring, async/await, etc. Using a code transpiler, like <a href="https://babeljs.io/">Babel</a>, allows you to use all of the latest and greatest features and syntax without worrying about what browsers support what.</p>
<p>Module loaders and bundlers, like <a href="https://webpack.js.org/">webpack</a>, also allowed developers to use JavaScript modules without requiring users to use a browser that natively supports ES modules. Also, module bundling (along with minification and tree-shaking) helps to reduce the bandwidth that’s required to deliver the assets for your application to the client.</p>
<p>[Create React App][cra] uses webpack (along with Babel) under the covers to build your React applications. Even if you’re not using Create React App, webpack and Babel are still very popular choices for building React applications.</p>
<h2 id="pulling-back-the-covers-a-bit-on-the-create-react-app-build-process">Pulling back the covers (a bit) on the Create React App build process</h2>
<p>Running an application created by Create React App using <code>npm start</code> can feel magical. Some stuff happens in the terminal and your application opens into your default browser. Even better, when you make changes to your application, your changes will (usually) automatically appear in the browser!</p>
<h3 id="the-create-react-app-build-process">The Create React App build process</h3>
<p>At a high level, here’s what happens when you run <code>npm start</code>:</p>
<ul>
<li>Environment variables are loaded (more about this in a bit);</li>
<li>The list of browsers to support are checked (more about this too in a bit);</li>
<li>The configured HTTP port is checked to ensure that it’s available;</li>
<li>The application compiler is configured and created;</li>
<li><a href="https://webpack.js.org/configuration/dev-server/"><code>webpack-dev-server</code></a> is started;</li>
<li><a href="https://webpack.js.org/configuration/dev-server/"><code>webpack-dev-server</code></a> compiles your application;</li>
<li>The <code>index.html</code> file is loaded into the browser; and</li>
<li>A file watcher is started to watch your files, waiting for changes.</li>
</ul>
<h3 id="ejecting">Ejecting</h3>
<p>Create React App provides a script that you can run to “eject” your application from the Create React App tooling. When you eject your application, all of the hidden stuff is exposed so that you can review and customize it.</p>
<blockquote>
<p>The need to customize Create React App rarely happens. Also, don’t eject an actual project as it’s a one-way trip! Once a Create React App project has been ejected, there’s no going back (though you could always undo the ejection process by reverting to an earlier commit if you’re using source control).</p>
</blockquote>
<p>To eject your application from Create React App, run the command <code>npm run eject</code>. You’ll be prompted if you want to continue; type “y” to continue with the ejection process. Once the ejection process has completed, you can review the files that were previously hidden from you.</p>
<p>In the <code>package.json</code> file, you’ll see the following npm scripts:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb342-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb342-2" title="2">  <span class="dt">&quot;scripts&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb342-3" title="3">    <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;node scripts/start.js&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb342-4" title="4">    <span class="dt">&quot;build&quot;</span><span class="fu">:</span> <span class="st">&quot;node scripts/build.js&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb342-5" title="5">    <span class="dt">&quot;test&quot;</span><span class="fu">:</span> <span class="st">&quot;node scripts/test.js&quot;</span></a>
<a class="sourceLine" id="cb342-6" title="6">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb342-7" title="7"><span class="fu">}</span></a></code></pre></div>
<p>You can open the <code>./scripts/start.js</code> file to see the code that’s executed when you run <code>npm start</code>.</p>
<p>If you’re curious about the webpack configuration, you can open and review the <code>./config/webpack.config.js</code>.</p>
<h2 id="preparing-to-deploy-a-react-application-for-production">Preparing to deploy a React application for production</h2>
<p>Before you deploy your application to production, you’ll want to make sure that you’ve replaced static values in your code with environment variables and considered what browsers you need to support.</p>
<h3 id="defining-environment-variables">Defining environment variables</h3>
<p>Create React App supports defining environment variables in an <code>.env</code> file. To define an environment variable, add an <code>.env</code> file to your project and define one or more variables that start with the prefix <code>REACT_APP_</code>:</p>
<pre><code>REACT_APP_FOO: some value
REACT_APP_BAR: another value</code></pre>
<p>Environment variables can be used in code like this:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb344-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">process</span>.<span class="va">env</span>.<span class="at">REACT_APP_FOO</span>)<span class="op">;</span></a></code></pre></div>
<p>You can also reference environment variables in your <code>index.html</code> like this:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb345-1" title="1"><span class="kw">&lt;title&gt;</span>%REACT_APP_BAR%<span class="kw">&lt;/title&gt;</span></a></code></pre></div>
<blockquote>
<p><strong>Important:</strong> Environment variables are embedded into your HTML, CSS, and JavaScript bundles during the build process. Because of this, it’s <em>very important</em> to not store any secrets, like API keys, in your environment variables as anyone can view your bundled code in the browser by inspecting your files.</p>
</blockquote>
<h3 id="configuring-the-supported-browsers">Configuring the supported browsers</h3>
<p>In your project’s <code>package.json</code> file, you can see the list of targeted browsers:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb346-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb346-2" title="2">  <span class="dt">&quot;browserslist&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb346-3" title="3">    <span class="dt">&quot;production&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb346-4" title="4">      <span class="st">&quot;&gt;0.2%&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb346-5" title="5">      <span class="st">&quot;not dead&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb346-6" title="6">      <span class="st">&quot;not op_mini all&quot;</span></a>
<a class="sourceLine" id="cb346-7" title="7">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb346-8" title="8">    <span class="dt">&quot;development&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb346-9" title="9">      <span class="st">&quot;last 1 chrome version&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb346-10" title="10">      <span class="st">&quot;last 1 firefox version&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb346-11" title="11">      <span class="st">&quot;last 1 safari version&quot;</span></a>
<a class="sourceLine" id="cb346-12" title="12">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb346-13" title="13">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb346-14" title="14"><span class="fu">}</span></a></code></pre></div>
<p>Adjusting these targets affect how your code will be transpiled. Specifying older browser versions will result in your code being transpiled to older versions of JavaScript in order to be compatible with the specified browser versions. The <code>production</code> list specifies the browsers to target when creating a production build and the <code>development</code> list specifics the browsers to target when running the application using <code>npm start</code>.</p>
<p>The <a href="https://browserl.ist">browserl.ist</a> website can be used to see the browsers supported by your configured <code>browserslist</code>.</p>
<h3 id="creating-a-production-build">Creating a production build</h3>
<p>To create a production build, run the command <code>npm run build</code>. The production build process bundles React in production mode and optimizes the build for the best performance. When the command completes, you’ll find your production ready files in the <code>build</code> folder.</p>
<p>Now your application is ready to be deployed!</p>
<blockquote>
<p>For more information about how to deploy a Create React App project into production, see <a href="https://facebook.github.io/create-react-app/docs/deployment">this page</a> in the official documentation.</p>
</blockquote>
<h2 id="what-you-learned-9">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Describe what front-end builds are and why they’re needed;</li>
<li>Describe at a high level what happens in a Create React App when you run <code>npm start</code>; and</li>
<li>Prepare to deploy a React application into a production environment.</li>
</ul>
<hr />
<h1 id="react-router-documentation">React Router Documentation</h1>
<p>Now that you’ve had an introduction to React Router, feel free to explore the official documentation to learn more! As you become a full-fledged software engineer, remember that documentation is your friend. You can take a brief overview for now, as the documentation might include a lot of information at first. The more you learn about React, the more you should revisit the official documentation and learn!</p>
<h2 id="setting-up-react-router">Setting up React Router</h2>
<ul>
<li><a href="https://reacttraining.com/react-router/web/guides/quick-start">React Router Quick Start</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/HashRouter">HashRouter</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/BrowserRouter">BrowserRouter</a></li>
</ul>
<h2 id="routes-and-links">Routes and Links</h2>
<ul>
<li><a href="https://reacttraining.com/react-router/web/api/Route">Route</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/Link">Link</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/NavLink">NavLink</a></li>
</ul>
<h2 id="switch-and-redirect">Switch and Redirect</h2>
<ul>
<li><a href="https://reacttraining.com/react-router/web/api/Switch">Switch</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/Redirect">Redirect</a></li>
</ul>
<h2 id="react-router-params-ownprops">React Router Params (ownProps)</h2>
<ul>
<li><a href="https://reacttraining.com/react-router/web/api/history">props.history</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/location">props.location</a></li>
<li><a href="https://reacttraining.com/react-router/web/api/match">props.match</a></li>
</ul>
<hr />
<h1 id="rainbow-routes-project">Rainbow Routes Project</h1>
<p>Today you’re going to get our first experience using React Router. The goal is to create a basic app that displays the colors of the rainbow. This rainbow, however, has something special about it - some of the colors are nested within others.</p>
<h2 id="phase-0-setup">Phase 0: Setup</h2>
<p>Begin by creating a new React project:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb347-1" title="1"><span class="ex">npx</span> create-react-app rainbow-routes --template @appacademy/simple</a></code></pre></div>
<p>Now you’ll remove all the contents of your <code>src</code> and all the contents from your <code>public</code> directory to build the application architecture from scratch! After you have deleted all your files within the directories, create a new <code>index.html</code> file in your <code>public</code> folder. Use the <code>html:5</code> emmet shortcut to generate an HTML template. Title your page “Rainbow Routes” and create a <code>div</code> with an <code>id</code> of <code>root</code> in your DOM’s <code>&lt;body&gt;</code> element. Create an <code>index.css</code> file in your <code>src</code> directory with the following code. Now let’s create your entry file!</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb348-1" title="1">h4 {</a>
<a class="sourceLine" id="cb348-2" title="2">  <span class="kw">color</span>: <span class="cn">darkblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-3" title="3">  <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-4" title="4">}</a>
<a class="sourceLine" id="cb348-5" title="5"></a>
<a class="sourceLine" id="cb348-6" title="6">h4<span class="in">:hover</span> {</a>
<a class="sourceLine" id="cb348-7" title="7">  <span class="kw">text-decoration</span>: <span class="dv">underline</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-8" title="8">}</a>
<a class="sourceLine" id="cb348-9" title="9"></a>
<a class="sourceLine" id="cb348-10" title="10"><span class="pp">#rainbow</span> {</a>
<a class="sourceLine" id="cb348-11" title="11">  <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-12" title="12">  <span class="kw">top</span>: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-13" title="13">  <span class="kw">left</span>: <span class="dv">300</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-14" title="14">}</a>
<a class="sourceLine" id="cb348-15" title="15"></a>
<a class="sourceLine" id="cb348-16" title="16">h3 {</a>
<a class="sourceLine" id="cb348-17" title="17">  <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-18" title="18">  <span class="kw">top</span>: <span class="dv">1</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-19" title="19">}</a>
<a class="sourceLine" id="cb348-20" title="20"></a>
<a class="sourceLine" id="cb348-21" title="21"><span class="fu">.red</span> {</a>
<a class="sourceLine" id="cb348-22" title="22">  <span class="kw">background-color</span>: <span class="cn">red</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-23" title="23">  <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-24" title="24">  <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-25" title="25">}</a>
<a class="sourceLine" id="cb348-26" title="26"></a>
<a class="sourceLine" id="cb348-27" title="27"><span class="fu">.orange</span> {</a>
<a class="sourceLine" id="cb348-28" title="28">  <span class="kw">background-color</span>: <span class="cn">orange</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-29" title="29">  <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-30" title="30">  <span class="kw">height</span>: <span class="dv">50</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-31" title="31">}</a>
<a class="sourceLine" id="cb348-32" title="32"></a>
<a class="sourceLine" id="cb348-33" title="33"><span class="fu">.yellow</span> {</a>
<a class="sourceLine" id="cb348-34" title="34">  <span class="kw">background-color</span>: <span class="cn">yellow</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-35" title="35">  <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-36" title="36">  <span class="kw">height</span>: <span class="dv">50</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-37" title="37">}</a>
<a class="sourceLine" id="cb348-38" title="38"></a>
<a class="sourceLine" id="cb348-39" title="39"><span class="fu">.green</span> {</a>
<a class="sourceLine" id="cb348-40" title="40">  <span class="kw">background-color</span>: <span class="cn">green</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-41" title="41">  <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-42" title="42">  <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-43" title="43">}</a>
<a class="sourceLine" id="cb348-44" title="44"></a>
<a class="sourceLine" id="cb348-45" title="45"><span class="fu">.blue</span> {</a>
<a class="sourceLine" id="cb348-46" title="46">  <span class="kw">background-color</span>: <span class="cn">blue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-47" title="47">  <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-48" title="48">  <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-49" title="49">}</a>
<a class="sourceLine" id="cb348-50" title="50"></a>
<a class="sourceLine" id="cb348-51" title="51"><span class="fu">.indigo</span> {</a>
<a class="sourceLine" id="cb348-52" title="52">  <span class="kw">background-color</span>: <span class="cn">mediumslateblue</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-53" title="53">  <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-54" title="54">  <span class="kw">height</span>: <span class="dv">50</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-55" title="55">}</a>
<a class="sourceLine" id="cb348-56" title="56"></a>
<a class="sourceLine" id="cb348-57" title="57"><span class="fu">.violet</span> {</a>
<a class="sourceLine" id="cb348-58" title="58">  <span class="kw">background-color</span>: <span class="cn">darkviolet</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-59" title="59">  <span class="kw">width</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-60" title="60">  <span class="kw">height</span>: <span class="dv">100</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-61" title="61">}</a>
<a class="sourceLine" id="cb348-62" title="62"></a>
<a class="sourceLine" id="cb348-63" title="63">a {</a>
<a class="sourceLine" id="cb348-64" title="64">  <span class="kw">display</span>: <span class="dv">block</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-65" title="65">  <span class="kw">margin-bottom</span>: <span class="dv">10</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb348-66" title="66">}</a></code></pre></div>
<p>Create an <code>index.js</code> entry file in the <code>src</code> directory. At the top of the file, make sure to import <code>React</code> from the <code>react</code> package and <code>ReactDOM</code> from the <code>react-dom</code> package. Make sure to also import your the <code>index.css</code> file you just created! This will take care of styling your <em>rainbow routes</em>.</p>
<p>Now you can use the <code>ReactDOM.render()</code> method to render a <code>&lt;Root /&gt;</code> component instead of the DOM element with an <code>id</code> of <code>root</code>. Lastly, wrap your render function with a <code>DOMContentLoaded</code> event listener, like so:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb349-1" title="1"><span class="va">document</span>.<span class="at">addEventListener</span>(<span class="st">&#39;DOMContentLoaded&#39;</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb349-2" title="2">  <span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb349-3" title="3">    <span class="op">&lt;</span>Root /<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb349-4" title="4">    <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb349-5" title="5">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb349-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Let’s create your <code>Root</code> component right in your entry file! Your <code>Root</code> component will take care of applying your <code>BrowserRouter</code> to the application. Applying the <code>BrowserRouter</code> to your <code>Root</code> component allows all the child components rendering within <code>&lt;BrowserRouter&gt;</code> tags to use and access the <code>Route</code>, <code>Link</code>, and <code>NavLink</code> components within the <code>react-router-dom</code> package.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb350-1" title="1"><span class="kw">const</span> Root <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb350-2" title="2">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Apply BrowserRouter</span></a>
<a class="sourceLine" id="cb350-3" title="3">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Render rainbow</span></a>
<a class="sourceLine" id="cb350-4" title="4">)<span class="op">;</span></a></code></pre></div>
<p>Install the <code>react-router-dom</code> package:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb351-1" title="1"><span class="ex">npm</span> install react-router-dom@^5.0.0</a></code></pre></div>
<p>Now import <code>BrowserRouter</code> from the <code>react-router-dom</code> package, like so:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb352-1" title="1"><span class="im">import</span> <span class="op">{</span> BrowserRouter <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a></code></pre></div>
<p>You’re going to be rendering a lot of components, so let’s keep your <code>src</code> directory organized by creating a <code>components</code> directory within. Within your new <code>./src/components</code> directory, create a <code>Rainbow.js</code> file for your <code>Rainbow</code> component with the following code:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb353-1" title="1"><span class="co">// ./src/components/Rainbow.js</span></a>
<a class="sourceLine" id="cb353-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb353-3" title="3"><span class="im">import</span> <span class="op">{</span> Route<span class="op">,</span> Link<span class="op">,</span> NavLink <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb353-4" title="4"></a>
<a class="sourceLine" id="cb353-5" title="5"><span class="kw">const</span> Rainbow <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb353-6" title="6">  <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb353-7" title="7">    <span class="op">&lt;</span>h1<span class="op">&gt;</span>Rainbow Router<span class="op">!</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb353-8" title="8">    <span class="op">{</span><span class="co">/* Your links should go here */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb353-9" title="9"></a>
<a class="sourceLine" id="cb353-10" title="10">    <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">&quot;rainbow&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb353-11" title="11">      <span class="op">{</span><span class="co">/* Your routes should go here */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb353-12" title="12">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb353-13" title="13">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb353-14" title="14">)<span class="op">;</span></a>
<a class="sourceLine" id="cb353-15" title="15"></a>
<a class="sourceLine" id="cb353-16" title="16"><span class="im">export</span> <span class="im">default</span> Rainbow<span class="op">;</span></a></code></pre></div>
<p>Your <code>Rainbow</code> component will act as the home page or default path (<code>/</code>) of your application. Import the <code>Rainbow</code> component into your entry file and have your <code>Root</code> component render <code>&lt;Rainbow /&gt;</code> wrapped within <code>&lt;BrowserRouter&gt;</code> tags, like so:</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb354-1" title="1"><span class="kw">const</span> Root <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb354-2" title="2">  <span class="op">&lt;</span>BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb354-3" title="3">    <span class="op">&lt;</span>Rainbow /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb354-4" title="4">  &lt;/BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb354-5" title="5">)<span class="op">;</span></a></code></pre></div>
<p>Within your <code>Rainbow</code> component, you’ll be rendering <code>&lt;NavLink&gt;</code> and <code>&lt;Route&gt;</code> components to add different navigation paths to different components. Let’s create all the components you will render!</p>
<p>Create files for the following components in your <code>./src/components</code> directory:</p>
<ul>
<li><code>Red</code></li>
<li><code>Blue</code></li>
<li><code>Green</code></li>
<li><code>Indigo</code></li>
<li><code>Orange</code></li>
<li><code>Violet</code></li>
<li><code>Yellow</code></li>
</ul>
<p>Your <code>Red</code> and <code>Blue</code> components will look something like this:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb355-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb355-2" title="2"><span class="im">import</span> <span class="op">{</span> Route<span class="op">,</span> Link<span class="op">,</span> NavLink <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb355-3" title="3"></a>
<a class="sourceLine" id="cb355-4" title="4"><span class="kw">const</span> Color <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb355-5" title="5">  <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb355-6" title="6">    <span class="op">&lt;</span>h2 className<span class="op">=</span><span class="st">&quot;color&quot;</span><span class="op">&gt;</span>Color&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb355-7" title="7">    <span class="op">{</span><span class="co">/* Links here */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb355-8" title="8"></a>
<a class="sourceLine" id="cb355-9" title="9">    <span class="op">{</span><span class="co">/* Routes here */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb355-10" title="10">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb355-11" title="11">)<span class="op">;</span></a>
<a class="sourceLine" id="cb355-12" title="12"></a>
<a class="sourceLine" id="cb355-13" title="13"><span class="im">export</span> <span class="im">default</span> Color<span class="op">;</span></a></code></pre></div>
<p>Your <code>Green</code>, <code>Indigo</code>, <code>Orange</code>, <code>Violet</code>, and <code>Yellow</code> components will look something like this:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb356-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb356-2" title="2"></a>
<a class="sourceLine" id="cb356-3" title="3"><span class="kw">const</span> Color <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb356-4" title="4">  <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb356-5" title="5">    <span class="op">&lt;</span>h3 className<span class="op">=</span><span class="st">&quot;color&quot;</span><span class="op">&gt;</span>Color&lt;/h3<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb356-6" title="6">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb356-7" title="7">)<span class="op">;</span></a>
<a class="sourceLine" id="cb356-8" title="8"></a>
<a class="sourceLine" id="cb356-9" title="9"><span class="im">export</span> <span class="im">default</span> Color<span class="op">;</span></a></code></pre></div>
<p>Now start your server and verify you can see the “Rainbow Router!” header from your <code>Rainbow</code> component. Currently there is no functionality. Let’s fix that!</p>
<h2 id="phase-1-routes">Phase 1: Routes</h2>
<p>As a reminder, wrapping the <code>Rainbow</code> component in <code>&lt;BrowserRouter&gt;</code> tags makes the router available to all descendent React Router components. Now open the <code>Rainbow.js</code> file. You’re going to render some of your color components from here. Ultimately you want your routes to look like this.</p>
<table>
<thead>
<tr class="header">
<th>URL</th>
<th>Components</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>/</code></td>
<td><code>Rainbow</code></td>
</tr>
<tr class="even">
<td><code>/red</code></td>
<td><code>Rainbow -&gt; Red</code></td>
</tr>
<tr class="odd">
<td><code>/red/orange</code></td>
<td><code>Rainbow -&gt; Red -&gt; Orange</code></td>
</tr>
<tr class="even">
<td><code>/red/yellow</code></td>
<td><code>Rainbow -&gt; Red -&gt; Yellow</code></td>
</tr>
<tr class="odd">
<td><code>/green</code></td>
<td><code>Rainbow -&gt; Green</code></td>
</tr>
<tr class="even">
<td><code>/blue</code></td>
<td><code>Rainbow -&gt; Blue</code></td>
</tr>
<tr class="odd">
<td><code>/blue/indigo</code></td>
<td><code>Rainbow -&gt; Blue -&gt; Indigo</code></td>
</tr>
<tr class="even">
<td><code>/violet</code></td>
<td><code>Rainbow -&gt; Violet</code></td>
</tr>
</tbody>
</table>
<p>This means that the <code>Red</code>, <code>Green</code>, <code>Blue</code>, and <code>Violet</code> components need to render in the <code>Rainbow</code> component, but only when you are at the corresponding URL. You’ll do this with <code>Route</code> components. Begin by importing the <code>Red</code>, <code>Green</code>, <code>Blue</code>, and <code>Violet</code> components into your <code>Rainbow.js</code> file. Then add the necessary <code>Route</code> components inside the <code>div</code> with <code>id="rainbow"</code> in the <code>Rainbow</code> component. For example to render the <code>Red</code> component with the <code>/red</code> path, you would use the following <code>Route</code> component:</p>
<pre class="jsx"><code>&lt;Route path=&quot;/red&quot; component={Red} /&gt;</code></pre>
<p>Test that your code works! Manually type in each URL you just created, and you should see the color component pop up. Remember, these are React Routes, so the paths you created will come after the <code>/</code>. For example, your default rainbow route will look like <code>http://localhost:3000/</code> while your red route will look like <code>http://localhost:3000/red</code>.</p>
<p>You want to nest the <code>Orange</code> and <code>Yellow</code> components inside the <code>Red</code> component, and the <code>Indigo</code> component inside the <code>Blue</code> component. Remember to import your components to use them in a <code>Route</code> tag. You’ll have to go add the corresponding <code>Route</code> tags to the <code>Red.js</code> and <code>Blue.js</code> files. Make sure to use the correct nested paths, such as <code>"/red/orange"</code> for the orange <code>Route</code>.</p>
<h2 id="phase-2-links">Phase 2: Links</h2>
<p>Manually navigating to our newly created routes is tiresome, so let’s add functionality to take care of this process for us. React Router provides the <code>Link</code> and <code>NavLink</code> components for this purpose.</p>
<p>Add <code>Link</code>s to the paths <code>/red</code>, <code>/green</code>, <code>/blue</code>, and <code>/violet</code> in the <code>Rainbow</code> component. For example, your red link should look like</p>
<pre class="jsx"><code>&lt;Link to=&quot;/red&quot;&gt;Red&lt;/NavLink&gt;</code></pre>
<p>When you are at <code>blue</code> you want to be able to get to <code>/blue/indigo</code>, and then back to <code>/blue</code>. Add the corresponding <code>Link</code>s to the <code>Blue</code> component like this:</p>
<pre class="jsx"><code>&lt;Link to=&#39;/blue&#39; &gt;Blue only&lt;/Link&gt;
&lt;Link to=&#39;/blue/indigo&#39; &gt;Add indigo&lt;/Link&gt;</code></pre>
<p>Similarly, add <code>Link</code>s to <code>/red</code>, <code>/red/orange</code> and <code>/red/yellow</code> to the <code>Red</code> component. Test all your links. Navigation is so much easier now!</p>
<h2 id="phase-3-navlinks">Phase 3: NavLinks</h2>
<p>It would be nice if our links gave us some indication of which route you were at. Fortunately, React Router has a special component for that very purpose: <code>NavLink</code>. NavLinks get an extra CSS class when their <code>to</code> prop matches the current URL. By default this class is called <code>active</code>.</p>
<p>Go ahead and switch all your <code>Link</code>s to <code>NavLink</code>s. If you open the app you won’t see any change yet. That’s because you haven’t added any special styling to the <code>active</code> class. Go ahead and open the <code>index.css</code> file. Create an <code>.active</code> class and add the line <code>font-weight: 700</code>. Now your active links will be bold. Isn’t that nice!</p>
<p>The only problem is that now the <code>Blue only</code> link is active even when the path is <code>/blue/indigo</code>. That doesn’t make a lot of sense. Let’s add the <code>exact</code> flag to that link so it will only be active when its <code>to</code> exactly matches the current path. Now it should look like:</p>
<pre class="jsx"><code>&lt;NavLink exact to=&quot;/blue&quot;&gt;
  Blue only
&lt;/NavLink&gt;</code></pre>
<p>Do the same for the <code>Red only</code> link. Everything should be working now.</p>
<h1 id="phase-4---changing-navlinks-active-class">Phase 4 - Changing NavLink’s Active Class</h1>
<p>You’ve already set up <code>NavLink</code> to <strong>bold</strong> the link text using the <code>.active</code> class in <code>src/index.css</code>. But what if you wanted this class to be something else? For instance, what if you want your main color links (Red, Green, Blue, Violet) to be styled differently when active than your sub-route links (Red Only, Add Orange, Add Yellow, etc.).</p>
<p>You can set the class that React Router sets to an active <code>NavLink</code> by adding the <code>activeClassName</code> prop.</p>
<p>For instance, when we are at a route matching the below <code>NavLink</code>’s <code>to</code> prop, the component will have a class of <code>.parent-active</code> applied:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb361-1" title="1"><span class="op">&lt;</span>NavLink to<span class="op">=</span><span class="st">&quot;/blue&quot;</span> activeClassName<span class="op">=</span><span class="st">&quot;parent-active&quot;</span> <span class="op">&gt;</span></a>
<a class="sourceLine" id="cb361-2" title="2">  Blue</a>
<a class="sourceLine" id="cb361-3" title="3">&lt;/NavLink<span class="op">&gt;</span></a></code></pre></div>
<p>This allows much more flexibility to style an active <code>NavLink</code>!</p>
<p>Using the example above, add an <code>activeClassName</code> prop to each of your <code>NavLink</code>s in <code>src/components/Rainbow.js</code>. Now, add some CSS styling for that class in your <code>src/index.css</code> to distinguish your main and your sub-route links.</p>
<p>Compare your work to the solution and make sure the behavior is the same. Time to celebrate! ✨ 🌈 ✨</p>
<p>You can also learn more about using the React Router at <a href="https://reacttraining.com/react-router/web/guides/quick-start">reacttraining.com</a>!</p>
<hr />
<h1 id="exploring-react-builds-project">Exploring React Builds Project</h1>
<p>In this project, you’ll use Create React App to create a simple React application. You’ll experiment with some of the features that Create React App provides and deploy a production build of your application to a standalone Express application.</p>
<h2 id="phase-0-setup-1">Phase 0: Setup</h2>
<p>Begin by using the <a href="https://github.com/facebook/create-react-app">create-react-app</a> package to create a React application:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb362-1" title="1"><span class="ex">npx</span> create-react-app exploring-react-builds --template @appacademy/simple</a></code></pre></div>
<blockquote>
<p>Remember that using the <code>create-react-app</code> command initializes your project as a Git repository. If you use the <code>ls -a</code> to view the hidden files in your project, you’ll see the <code>.git</code> file.</p>
</blockquote>
<p>Update the <code>App</code> component:</p>
<ul>
<li>Wrap the <code>&lt;h1&gt;</code> element with a <code>&lt;div&gt;</code> element; and</li>
<li>Change the <code>&lt;h1&gt;</code> element content to something like “Exploring React Builds”.</li>
</ul>
<div class="sourceCode" id="cb363"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb363-1" title="1"><span class="co">// ./src/App.js</span></a>
<a class="sourceLine" id="cb363-2" title="2"></a>
<a class="sourceLine" id="cb363-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb363-4" title="4"></a>
<a class="sourceLine" id="cb363-5" title="5"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb363-6" title="6">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb363-7" title="7">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb363-8" title="8">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Exploring React Builds&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb363-9" title="9">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb363-10" title="10">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb363-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb363-12" title="12"></a>
<a class="sourceLine" id="cb363-13" title="13"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<h2 id="phase-1-using-css-modules">Phase 1: Using CSS modules</h2>
<p>You’ve already seen an example of using the <code>import</code> keyword to import a stylesheet into a module so that it’ll be included in your application build. That’s the technique being used to include the global <code>index.css</code> stylesheet:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb364-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb364-2" title="2"></a>
<a class="sourceLine" id="cb364-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb364-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb364-5" title="5"><span class="im">import</span> <span class="st">&#39;./index.css&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb364-6" title="6"><span class="im">import</span> App <span class="im">from</span> <span class="st">&#39;./App&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb364-7" title="7"></a>
<a class="sourceLine" id="cb364-8" title="8"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb364-9" title="9">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb364-10" title="10">    <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb364-11" title="11">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb364-12" title="12">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb364-13" title="13">)<span class="op">;</span></a></code></pre></div>
<p>You can also leverage <a href="https://github.com/css-modules/css-modules">CSS modules</a> in your Create React App projects. CSS Modules scope stylesheet class names so that they are unique to a specific React component. This allows you to create class names without having to worry if they might collide with class names used in another component.</p>
<p>Add a new <code>css-modules</code> folder to the <code>src</code> folder. Within that folder, add the following files:</p>
<ul>
<li><code>HeadingA.js</code></li>
<li><code>HeadingA.module.css</code></li>
<li><code>HeadingB.js</code></li>
<li><code>HeadingB.module.css</code></li>
</ul>
<p>Then update the contents of each file to the following:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb365-1" title="1"><span class="co">// ./src/css-modules/HeadingA.js</span></a>
<a class="sourceLine" id="cb365-2" title="2"></a>
<a class="sourceLine" id="cb365-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb365-4" title="4"><span class="im">import</span> styles <span class="im">from</span> <span class="st">&#39;./HeadingA.module.css&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb365-5" title="5"></a>
<a class="sourceLine" id="cb365-6" title="6"><span class="kw">function</span> <span class="at">HeadingA</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb365-7" title="7">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb365-8" title="8">    <span class="op">&lt;</span>h1 className<span class="op">={</span><span class="va">styles</span>.<span class="at">heading</span><span class="op">}&gt;</span>Heading A&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb365-9" title="9">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb365-10" title="10"><span class="op">}</span></a>
<a class="sourceLine" id="cb365-11" title="11"></a>
<a class="sourceLine" id="cb365-12" title="12"><span class="im">export</span> <span class="im">default</span> HeadingA<span class="op">;</span></a></code></pre></div>
<div class="sourceCode" id="cb366"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb366-1" title="1"><span class="co">/* ./src/css-modules/HeadingA.module.css */</span></a>
<a class="sourceLine" id="cb366-2" title="2"></a>
<a class="sourceLine" id="cb366-3" title="3"><span class="fu">.heading</span> {</a>
<a class="sourceLine" id="cb366-4" title="4">  <span class="kw">color</span>: <span class="cn">green</span><span class="op">;</span></a>
<a class="sourceLine" id="cb366-5" title="5">}</a></code></pre></div>
<div class="sourceCode" id="cb367"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb367-1" title="1"><span class="co">// ./src/css-modules/HeadingB.js</span></a>
<a class="sourceLine" id="cb367-2" title="2"></a>
<a class="sourceLine" id="cb367-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb367-4" title="4"><span class="im">import</span> styles <span class="im">from</span> <span class="st">&#39;./HeadingB.module.css&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb367-5" title="5"></a>
<a class="sourceLine" id="cb367-6" title="6"><span class="kw">function</span> <span class="at">HeadingB</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb367-7" title="7">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb367-8" title="8">    <span class="op">&lt;</span>h1 className<span class="op">={</span><span class="va">styles</span>.<span class="at">heading</span><span class="op">}&gt;</span>Heading B&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb367-9" title="9">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb367-10" title="10"><span class="op">}</span></a>
<a class="sourceLine" id="cb367-11" title="11"></a>
<a class="sourceLine" id="cb367-12" title="12"><span class="im">export</span> <span class="im">default</span> HeadingB<span class="op">;</span></a></code></pre></div>
<div class="sourceCode" id="cb368"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb368-1" title="1"><span class="co">/* ./src/css-modules/HeadingB.module.css */</span></a>
<a class="sourceLine" id="cb368-2" title="2"></a>
<a class="sourceLine" id="cb368-3" title="3"><span class="fu">.heading</span> {</a>
<a class="sourceLine" id="cb368-4" title="4">  <span class="kw">color</span>: <span class="cn">red</span><span class="op">;</span></a>
<a class="sourceLine" id="cb368-5" title="5">}</a></code></pre></div>
<p>Notice how the <code>.heading</code> CSS class name is being used within each component to set the color of the <code>&lt;h1&gt;</code> element. For the <code>HeadingA</code> component, the color is <code>green</code>, and for the <code>HeadingB</code> component, the color is <code>red</code>. Using the file naming convention <code>[name].module.css</code> let’s Create React App know that we want these stylesheets to be processed as CSS Modules. Using CSS Modules allows the <code>.heading</code> class name to be reused across components without any issue.</p>
<p>To see this feature in action, update your <code>App</code> component to render both of your new components:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb369-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb369-2" title="2"><span class="im">import</span> HeadingA <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingA&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb369-3" title="3"><span class="im">import</span> HeadingB <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingB&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb369-4" title="4"></a>
<a class="sourceLine" id="cb369-5" title="5"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb369-6" title="6">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb369-7" title="7">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb369-8" title="8">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Exploring React Builds&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb369-9" title="9">      <span class="op">&lt;</span>HeadingA /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb369-10" title="10">      <span class="op">&lt;</span>HeadingB /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb369-11" title="11">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb369-12" title="12">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb369-13" title="13"><span class="op">}</span></a>
<a class="sourceLine" id="cb369-14" title="14"></a>
<a class="sourceLine" id="cb369-15" title="15"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>Then run your application (<code>npm start</code>) to see “Heading A” and “Heading B” displayed respectively in green and red. If you use the browser’s developer tools to inspect “Heading A”, you’ll see that the <code>.heading</code> class name has been modified so that it’s unique to the <code>HeadingA</code> component:</p>
<figure>
<img src="images/react-builds-css-modules.png" alt="react builds css modules" /><figcaption>react builds css modules</figcaption>
</figure>
<p>CSS Modules is an example of how a front-end build process can be used to modify code to enable a feature that’s not natively supported by browsers.</p>
<h2 id="phase-2-using-an-image-in-a-component">Phase 2: Using an image in a component</h2>
<p>Create React App configures webpack with support for loading images (as well as CSS, fonts, and other file types). What this means, for you as the developer, is that you can add an image file to your project, import it directly into a module, and render it in a React component.</p>
<p>Download any image of off the Web or <a href="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-builds/assets/react-builds-cat.png">click here</a> to download the below image.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-builds/assets/react-builds-cat.png" alt="react builds cat" /><figcaption>react builds cat</figcaption>
</figure>
<p>Then within the <code>src</code> folder add a new folder named <code>image</code>. Within that folder add a new component file named <code>Image.js</code>. Also add your downloaded image file to the <code>image</code> folder (so it’s a sibling to the <code>Image.js</code> file).</p>
<p>Update the contents of the <code>Image.js</code> file to this:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb370-1" title="1"><span class="co">// ./src/image/Image.js</span></a>
<a class="sourceLine" id="cb370-2" title="2"></a>
<a class="sourceLine" id="cb370-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb370-4" title="4"><span class="im">import</span> cat <span class="im">from</span> <span class="st">&#39;./react-builds-cat.png&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb370-5" title="5"></a>
<a class="sourceLine" id="cb370-6" title="6"><span class="va">console</span>.<span class="at">log</span>(cat)<span class="op">;</span> <span class="co">// /static/media/react-builds-cat.45f7f4d2.png</span></a>
<a class="sourceLine" id="cb370-7" title="7"></a>
<a class="sourceLine" id="cb370-8" title="8"><span class="kw">function</span> <span class="at">Image</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb370-9" title="9">  <span class="co">// Import result is the URL of your image.</span></a>
<a class="sourceLine" id="cb370-10" title="10">  <span class="cf">return</span> <span class="op">&lt;</span>img src<span class="op">={</span>cat<span class="op">}</span> alt<span class="op">=</span><span class="st">&quot;images/images/Cat&quot;</span> /&gt;<span class="op">;</span></a>
<a class="sourceLine" id="cb370-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb370-12" title="12"></a>
<a class="sourceLine" id="cb370-13" title="13"><span class="im">export</span> <span class="im">default</span> Image<span class="op">;</span></a></code></pre></div>
<p>You can import an image into a component using the <code>import</code> keyword. This tells webpack to include the image in the build. Notice that when you import an image into a module, you’ll get a path to the image’s location within the build. You can use this path to set the <code>src</code> attribute on an <code>&lt;img&gt;</code> element.</p>
<blockquote>
<p>Be sure to update the image <code>import</code> statement to the correct file name if you’re using your own image!</p>
</blockquote>
<p>Now update the <code>App</code> component to import and render the <code>Image</code> component:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb371-1" title="1"><span class="co">// ./src/App.js</span></a>
<a class="sourceLine" id="cb371-2" title="2"></a>
<a class="sourceLine" id="cb371-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb371-4" title="4"><span class="im">import</span> HeadingA <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingA&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb371-5" title="5"><span class="im">import</span> HeadingB <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingB&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb371-6" title="6"><span class="im">import</span> Image <span class="im">from</span> <span class="st">&#39;./image/Image&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb371-7" title="7"></a>
<a class="sourceLine" id="cb371-8" title="8"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb371-9" title="9">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb371-10" title="10">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb371-11" title="11">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Exploring React Builds&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb371-12" title="12">      <span class="op">&lt;</span>HeadingA /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb371-13" title="13">      <span class="op">&lt;</span>HeadingB /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb371-14" title="14">      <span class="op">&lt;</span>Image /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb371-15" title="15">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb371-16" title="16">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb371-17" title="17"><span class="op">}</span></a>
<a class="sourceLine" id="cb371-18" title="18"></a>
<a class="sourceLine" id="cb371-19" title="19"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>If you run your application (<code>npm start</code>) you’ll see your image displayed on the page! You can also open your browser’s developer tools and view the “Sources” for the current page. If you can expand the <code>localhost:3000</code> &gt; <code>static</code> &gt; <code>media</code> node on the left, you can see the image file that webpack copied to your build.</p>
<figure>
<img src="images/react-builds-dev-tools-image.png" alt="react builds dev tools image" /><figcaption>react builds dev tools image</figcaption>
</figure>
<h3 id="images-in-stylesheets">Images in stylesheets</h3>
<p>You can also reference images in your CSS files too. Add a CSS file named <code>Image.css</code> to the <code>./src/image</code> folder and update its contents to this:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb372-1" title="1"><span class="co">/* ./src/image/Image.css */</span></a>
<a class="sourceLine" id="cb372-2" title="2"></a>
<a class="sourceLine" id="cb372-3" title="3"><span class="fu">.cat</span> {</a>
<a class="sourceLine" id="cb372-4" title="4">  <span class="kw">background-image</span>: <span class="fu">url(</span><span class="st">./react-builds-cat.png</span><span class="fu">)</span><span class="op">;</span></a>
<a class="sourceLine" id="cb372-5" title="5">  <span class="kw">width</span>: <span class="dv">400</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb372-6" title="6">  <span class="kw">height</span>: <span class="dv">400</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb372-7" title="7">}</a></code></pre></div>
<p>Then update the <code>Image</code> component to this:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb373-1" title="1"><span class="co">// ./src/image/Image.js</span></a>
<a class="sourceLine" id="cb373-2" title="2"></a>
<a class="sourceLine" id="cb373-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb373-4" title="4"><span class="im">import</span> <span class="st">&#39;./Image.css&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb373-5" title="5"><span class="im">import</span> cat <span class="im">from</span> <span class="st">&#39;./react-builds-cat.png&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb373-6" title="6"></a>
<a class="sourceLine" id="cb373-7" title="7"><span class="va">console</span>.<span class="at">log</span>(cat)<span class="op">;</span> <span class="co">// /static/media/react-builds-cat.45f7f4d2.png</span></a>
<a class="sourceLine" id="cb373-8" title="8"></a>
<a class="sourceLine" id="cb373-9" title="9"><span class="kw">function</span> <span class="at">Image</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb373-10" title="10">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb373-11" title="11">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb373-12" title="12">      <span class="op">{</span><span class="co">/* Import result is the URL of your image. */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb373-13" title="13">      <span class="op">&lt;</span>img src<span class="op">={</span>cat<span class="op">}</span> alt<span class="op">=</span><span class="st">&quot;Cat&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb373-14" title="14">      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&#39;cat&#39;</span><span class="op">&gt;</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb373-15" title="15">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb373-16" title="16">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb373-17" title="17"><span class="op">}</span></a>
<a class="sourceLine" id="cb373-18" title="18"></a>
<a class="sourceLine" id="cb373-19" title="19"><span class="im">export</span> <span class="im">default</span> Image<span class="op">;</span></a></code></pre></div>
<p>Now you’ll see the image displayed twice on the page!</p>
<h2 id="phase-3-updating-the-supported-browsers-and-its-affect-on-code-transpilation">Phase 3: Updating the supported browsers (and its affect on code transpilation)</h2>
<p>Earlier you learned about the <code>browerslist</code> setting in the <code>package.json</code> file and now adjusting these targets affect how your code will be transpiled:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb374-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb374-2" title="2">  <span class="dt">&quot;browserslist&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb374-3" title="3">    <span class="dt">&quot;production&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb374-4" title="4">      <span class="st">&quot;&gt;0.2%&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb374-5" title="5">      <span class="st">&quot;not dead&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb374-6" title="6">      <span class="st">&quot;not op_mini all&quot;</span></a>
<a class="sourceLine" id="cb374-7" title="7">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb374-8" title="8">    <span class="dt">&quot;development&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb374-9" title="9">      <span class="st">&quot;last 1 chrome version&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb374-10" title="10">      <span class="st">&quot;last 1 firefox version&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb374-11" title="11">      <span class="st">&quot;last 1 safari version&quot;</span></a>
<a class="sourceLine" id="cb374-12" title="12">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb374-13" title="13">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb374-14" title="14"><span class="fu">}</span></a></code></pre></div>
<p>The <code>production</code> list specifies the browsers to target when creating a production build and the <code>development</code> list specifics the browsers to target when running the application using <code>npm start</code>. Currently, you’re targeting relatively recent versions of the major browsers when creating a development build. Targeting older browser versions results in your code being transpiled to an older version of JavaScript.</p>
<p>To experiment with this configuration option, let’s add a class component to the project. Add a new folder named <code>class-component</code> to the <code>src</code> folder. Within that folder, add a file named <code>ClassComponent.js</code> containing the following code:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb375-1" title="1"><span class="co">// ./src/class-component/ClassComponent.js</span></a>
<a class="sourceLine" id="cb375-2" title="2"></a>
<a class="sourceLine" id="cb375-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb375-4" title="4"></a>
<a class="sourceLine" id="cb375-5" title="5"><span class="kw">class</span> ClassComponent <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb375-6" title="6">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb375-7" title="7">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb375-8" title="8">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Class Component&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb375-9" title="9">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb375-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb375-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb375-12" title="12"></a>
<a class="sourceLine" id="cb375-13" title="13"><span class="im">export</span> <span class="im">default</span> ClassComponent<span class="op">;</span></a></code></pre></div>
<p>Don’t forget to update your <code>App</code> component to render the new component:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb376-1" title="1"><span class="co">// ./src/App.js</span></a>
<a class="sourceLine" id="cb376-2" title="2"></a>
<a class="sourceLine" id="cb376-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb376-4" title="4"><span class="im">import</span> HeadingA <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingA&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb376-5" title="5"><span class="im">import</span> HeadingB <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingB&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb376-6" title="6"><span class="im">import</span> Image <span class="im">from</span> <span class="st">&#39;./image/Image&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb376-7" title="7"><span class="im">import</span> ClassComponent <span class="im">from</span> <span class="st">&#39;./class-component/ClassComponent&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb376-8" title="8"></a>
<a class="sourceLine" id="cb376-9" title="9"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb376-10" title="10">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb376-11" title="11">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb376-12" title="12">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Exploring React Builds&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb376-13" title="13">      <span class="op">&lt;</span>HeadingA /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb376-14" title="14">      <span class="op">&lt;</span>HeadingB /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb376-15" title="15">      <span class="op">&lt;</span>Image /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb376-16" title="16">      <span class="op">&lt;</span>ClassComponent /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb376-17" title="17">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb376-18" title="18">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb376-19" title="19"><span class="op">}</span></a>
<a class="sourceLine" id="cb376-20" title="20"></a>
<a class="sourceLine" id="cb376-21" title="21"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>Now run your application using <code>npm start</code>. Open your browser’s developer tools and view the “Sources” for the current page. Expand the <code>localhost:3000</code> &gt; <code>static</code> &gt; <code>js</code> node on the left and select the <code>main.chunk.js</code> file. Press <code>CMD+F</code> on macOS or <code>CTRL+F</code> on Windows to search the file for “Class Component”. Here’s what the transpiled code looks like for the <code>ClassComponent</code> class:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb377-1" title="1"><span class="kw">class</span> ClassComponent <span class="kw">extends</span> <span class="va">react__WEBPACK_IMPORTED_MODULE_0___default</span>.<span class="va">a</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb377-2" title="2">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb377-3" title="3">    <span class="cf">return</span> <span class="co">/*#__PURE__*/</span><span class="va">react__WEBPACK_IMPORTED_MODULE_0___default</span>.<span class="va">a</span>.<span class="at">createElement</span>(<span class="st">&quot;h1&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb377-4" title="4">      <span class="dt">__self</span><span class="op">:</span> <span class="kw">this</span><span class="op">,</span></a>
<a class="sourceLine" id="cb377-5" title="5">      <span class="dt">__source</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb377-6" title="6">        <span class="dt">fileName</span><span class="op">:</span> _jsxFileName<span class="op">,</span></a>
<a class="sourceLine" id="cb377-7" title="7">        <span class="dt">lineNumber</span><span class="op">:</span> <span class="dv">7</span><span class="op">,</span></a>
<a class="sourceLine" id="cb377-8" title="8">        <span class="dt">columnNumber</span><span class="op">:</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb377-9" title="9">      <span class="op">}</span></a>
<a class="sourceLine" id="cb377-10" title="10">    <span class="op">},</span> <span class="st">&quot;Class Component&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb377-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb377-12" title="12"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>Have you wondered yet why you need to use the developer tools to view the bundles generated by Create React App? Remember that when you run <code>npm start</code>, Create React App builds your application using <a href="https://webpack.js.org/configuration/dev-server/"><code>webpack-dev-server</code></a>. To keep things as performant as possible, the bundles generated by <a href="https://webpack.js.org/configuration/dev-server/"><code>webpack-dev-server</code></a> are stored in memory instead of writing them to the file system.</p>
</blockquote>
<p>The JSX in the component’s <code>render</code> method has been converted to JavaScript but the <code>ClassComponent</code> ES2015 class is left alone. This makes sense though as JSX isn’t natively supported by any browser while ES2015 classes have been natively supported by browsers for awhile now.</p>
<p>But what if you need to target a version of a browser that doesn’t support ES2015 classes? You can use the <a href="https://caniuse.com/#feat=es6-class">“Can I use…”</a> website to see when browsers started supporting ES2105 (or ES6) classes. Starting with version 49, Chrome natively supported classes. But imagine that you need to support Chrome going back to version 30, a version of Chrome that doesn’t support classes.</p>
<p>Change the <code>browserslist.development</code> property in the <code>package.json</code> file to this:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb378-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb378-2" title="2">  <span class="dt">&quot;browserslist&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb378-3" title="3">    <span class="dt">&quot;production&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb378-4" title="4">      <span class="st">&quot;&gt;0.2%&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb378-5" title="5">      <span class="st">&quot;not dead&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb378-6" title="6">      <span class="st">&quot;not op_mini all&quot;</span></a>
<a class="sourceLine" id="cb378-7" title="7">    <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb378-8" title="8">    <span class="dt">&quot;development&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb378-9" title="9">      <span class="st">&quot;chrome &gt;= 30&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb378-10" title="10">      <span class="st">&quot;last 1 firefox version&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb378-11" title="11">      <span class="st">&quot;last 1 safari version&quot;</span></a>
<a class="sourceLine" id="cb378-12" title="12">    <span class="ot">]</span></a>
<a class="sourceLine" id="cb378-13" title="13">  <span class="fu">}</span></a>
<a class="sourceLine" id="cb378-14" title="14"><span class="fu">}</span></a></code></pre></div>
<p>The query <code>chrome &gt;= 30</code> specifies that you want to target Chrome version 30 or newer.</p>
<blockquote>
<p>The <a href="https://browserl.ist">browserl.ist</a> website can be used to see the browsers supported by your configured <code>browserslist</code>.</p>
</blockquote>
<p>Stop your application if it’s currently running. Delete the <code>./node_modules/.cache</code> folder and run <code>npm start</code> again. Then view the <code>main.chunk.js</code> bundle again in the developer tools:</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-builds/assets/react-builds-transpilation.png" alt="react builds transpilation" /><figcaption>react builds transpilation</figcaption>
</figure>
<p>Now your ES2015 class component is being converted to a constructor function! Here’s the transpiled code for reference:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb379-1" title="1"><span class="kw">var</span> ClassComponent <span class="op">=</span> <span class="co">/*#__PURE__*/</span><span class="kw">function</span> (_React$Component) <span class="op">{</span></a>
<a class="sourceLine" id="cb379-2" title="2">  <span class="at">Object</span>(_Users_jameschurchill_Documents_GitHub_Modular_Curriculum_content_react_redux_topics_react_builds_projects_exploring_react_builds_solution_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__[<span class="st">&quot;default&quot;</span>])(ClassComponent<span class="op">,</span> _React$Component)<span class="op">;</span></a>
<a class="sourceLine" id="cb379-3" title="3"></a>
<a class="sourceLine" id="cb379-4" title="4">  <span class="kw">var</span> _super <span class="op">=</span> <span class="at">Object</span>(_Users_jameschurchill_Documents_GitHub_Modular_Curriculum_content_react_redux_topics_react_builds_projects_exploring_react_builds_solution_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__[<span class="st">&quot;default&quot;</span>])(ClassComponent)<span class="op">;</span></a>
<a class="sourceLine" id="cb379-5" title="5"></a>
<a class="sourceLine" id="cb379-6" title="6">  <span class="kw">function</span> <span class="at">ClassComponent</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb379-7" title="7">    <span class="at">Object</span>(_Users_jameschurchill_Documents_GitHub_Modular_Curriculum_content_react_redux_topics_react_builds_projects_exploring_react_builds_solution_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__[<span class="st">&quot;default&quot;</span>])(<span class="kw">this</span><span class="op">,</span> ClassComponent)<span class="op">;</span></a>
<a class="sourceLine" id="cb379-8" title="8"></a>
<a class="sourceLine" id="cb379-9" title="9">    <span class="cf">return</span> <span class="va">_super</span>.<span class="at">apply</span>(<span class="kw">this</span><span class="op">,</span> <span class="kw">arguments</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb379-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb379-11" title="11"></a>
<a class="sourceLine" id="cb379-12" title="12">  <span class="at">Object</span>(_Users_jameschurchill_Documents_GitHub_Modular_Curriculum_content_react_redux_topics_react_builds_projects_exploring_react_builds_solution_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__[<span class="st">&quot;default&quot;</span>])(ClassComponent<span class="op">,</span> [<span class="op">{</span></a>
<a class="sourceLine" id="cb379-13" title="13">    <span class="dt">key</span><span class="op">:</span> <span class="st">&quot;render&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb379-14" title="14">    <span class="dt">value</span><span class="op">:</span> <span class="kw">function</span> <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb379-15" title="15">      <span class="cf">return</span> <span class="co">/*#__PURE__*/</span><span class="va">react__WEBPACK_IMPORTED_MODULE_4___default</span>.<span class="va">a</span>.<span class="at">createElement</span>(<span class="st">&quot;h1&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb379-16" title="16">        <span class="dt">__self</span><span class="op">:</span> <span class="kw">this</span><span class="op">,</span></a>
<a class="sourceLine" id="cb379-17" title="17">        <span class="dt">__source</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb379-18" title="18">          <span class="dt">fileName</span><span class="op">:</span> _jsxFileName<span class="op">,</span></a>
<a class="sourceLine" id="cb379-19" title="19">          <span class="dt">lineNumber</span><span class="op">:</span> <span class="dv">7</span><span class="op">,</span></a>
<a class="sourceLine" id="cb379-20" title="20">          <span class="dt">columnNumber</span><span class="op">:</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb379-21" title="21">        <span class="op">}</span></a>
<a class="sourceLine" id="cb379-22" title="22">      <span class="op">},</span> <span class="st">&quot;Class Component&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb379-23" title="23">    <span class="op">}</span></a>
<a class="sourceLine" id="cb379-24" title="24">  <span class="op">}</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb379-25" title="25"></a>
<a class="sourceLine" id="cb379-26" title="26">  <span class="cf">return</span> ClassComponent<span class="op">;</span></a>
<a class="sourceLine" id="cb379-27" title="27"><span class="op">}</span>(<span class="va">react__WEBPACK_IMPORTED_MODULE_4___default</span>.<span class="va">a</span>.<span class="at">Component</span>)<span class="op">;</span></a></code></pre></div>
<p>Luckily it’s very rare that you’ll need to read the code in your generated bundles. webpack, by default, is configured to generate sourcemaps. Sourcemaps are a mapping of the code in a generated file, like a bundle file, to the original source code. This gives you access to your original source code in the browser’s developer tools:</p>
<figure>
<img src="images/react-builds-sourcemaps.png" alt="react builds sourcemaps" /><figcaption>react builds sourcemaps</figcaption>
</figure>
<p>You can even set a breakpoint in your source within the developer tools to stop execution on a specific line of code!</p>
<h2 id="phase-4-adding-environment-variables">Phase 4: Adding environment variables</h2>
<p>Earlier you learned that Create React App supports defining environment variables in an <code>.env</code> file. This gives you a convenient way to avoid hard coding values that vary across environments.</p>
<p>Let’s experiment with this feature so that you can see how the Create React App build process embeds environment variables into your HTML, CSS, and JavaScript bundles.</p>
<p>Add an <code>.env</code> file to the root of your Create React App project. Define an environment variable named <code>REACT_APP_TITLE</code>:</p>
<pre><code>REACT_APP_TITLE=Exploring React Builds</code></pre>
<p>Remember that environment variables need to be prefixed with <code>REACT_APP_</code> for Create React App to process them. After defining your environment variable, you can refer to it within JSX using an expression and <code>process.env</code>:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb381-1" title="1"><span class="co">// ./src/App.js</span></a>
<a class="sourceLine" id="cb381-2" title="2"></a>
<a class="sourceLine" id="cb381-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb381-4" title="4"><span class="im">import</span> HeadingA <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingA&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb381-5" title="5"><span class="im">import</span> HeadingB <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingB&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb381-6" title="6"><span class="im">import</span> Image <span class="im">from</span> <span class="st">&#39;./image/Image&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb381-7" title="7"><span class="im">import</span> ClassComponent <span class="im">from</span> <span class="st">&#39;./class-component/ClassComponent&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb381-8" title="8"></a>
<a class="sourceLine" id="cb381-9" title="9"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb381-10" title="10">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb381-11" title="11">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb381-12" title="12">      <span class="op">&lt;</span>h1<span class="op">&gt;{</span><span class="va">process</span>.<span class="va">env</span>.<span class="at">REACT_APP_TITLE</span><span class="op">}</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb381-13" title="13">      <span class="op">&lt;</span>HeadingA /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb381-14" title="14">      <span class="op">&lt;</span>HeadingB /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb381-15" title="15">      <span class="op">&lt;</span>Image /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb381-16" title="16">      <span class="op">&lt;</span>ClassComponent /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb381-17" title="17">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb381-18" title="18">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb381-19" title="19"><span class="op">}</span></a>
<a class="sourceLine" id="cb381-20" title="20"></a>
<a class="sourceLine" id="cb381-21" title="21"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>Environment variables can also be referred to in regular JavaScript code:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb382-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">process</span>.<span class="va">env</span>.<span class="at">REACT_APP_TITLE</span>)<span class="op">;</span></a></code></pre></div>
<p>You can also reference environment variables in your <code>./public/index.html</code> file like this:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb383-1" title="1"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb383-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb383-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb383-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb383-5" title="5">    <span class="kw">&lt;title&gt;</span>%REACT_APP_TITLE%<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb383-6" title="6">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb383-7" title="7">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb383-8" title="8">    <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;root&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></a>
<a class="sourceLine" id="cb383-9" title="9">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb383-10" title="10"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<p>Run your application again using <code>npm start</code>. Open your browser’s developer tools and view the “Sources” for the current page. Expand the <code>localhost:3000</code> node on the left and select <code>(index)</code>. Notice that the text <code>%REACT_APP_TITLE%</code> within the <code>&lt;title&gt;</code> element has been converted to the text literal <code>Exploring React Builds</code>:</p>
<figure>
<img src="images/react-builds-index-html.png" alt="react builds index html" /><figcaption>react builds index html</figcaption>
</figure>
<p>If you expand the <code>localhost:3000</code> &gt; <code>static</code> &gt; <code>js</code> node on the left and select the <code>main.chunk.js</code> file, you can see how the <code>App</code> component’s JSX has been converted to JavaScript:</p>
<figure>
<img src="images/react-builds-component-env-var.png" alt="react builds component env var" /><figcaption>react builds component env var</figcaption>
</figure>
<p>Here’s a closer look at the relevant <code>React.createElement</code> method call:</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb384-1" title="1"><span class="co">/*#__PURE__*/</span><span class="va">react__WEBPACK_IMPORTED_MODULE_0___default</span>.<span class="va">a</span>.<span class="at">createElement</span>(<span class="st">&quot;h1&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb384-2" title="2">    <span class="dt">__self</span><span class="op">:</span> <span class="kw">this</span><span class="op">,</span></a>
<a class="sourceLine" id="cb384-3" title="3">    <span class="dt">__source</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb384-4" title="4">      <span class="dt">fileName</span><span class="op">:</span> _jsxFileName<span class="op">,</span></a>
<a class="sourceLine" id="cb384-5" title="5">      <span class="dt">lineNumber</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></a>
<a class="sourceLine" id="cb384-6" title="6">      <span class="dt">columnNumber</span><span class="op">:</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb384-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb384-8" title="8">  <span class="op">},</span> <span class="st">&quot;Exploring React Builds&quot;</span>)</a></code></pre></div>
<p>Again, notice how the environment variable has been replaced with a text literal. This has important security implications for you to consider. Because environment variables are embedded into your HTML, CSS, and JavaScript bundles during the build process, it’s <em>very important</em> to not store any secrets, like API keys, in your environment variables. Remember, anyone can view your bundled code in the browser by inspecting your files!</p>
<h2 id="phase-5-deploying-a-production-build">Phase 5: Deploying a production build</h2>
<p>In the last phase of this project, let’s add routing to the React application, create a production build, and deploy the build to an Express application!</p>
<h3 id="adding-routing">Adding routing</h3>
<p>To add React Router to the application, start by installing the <code>react-router-dom</code> npm package:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb385-1" title="1"><span class="ex">npm</span> install react-router-dom@^5.0.0</a></code></pre></div>
<p>Then update the <code>App</code> component to this code:</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb386-1" title="1"><span class="co">// ./src/App.js</span></a>
<a class="sourceLine" id="cb386-2" title="2"></a>
<a class="sourceLine" id="cb386-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb386-4" title="4"><span class="im">import</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb386-5" title="5">  BrowserRouter<span class="op">,</span></a>
<a class="sourceLine" id="cb386-6" title="6">  Switch<span class="op">,</span></a>
<a class="sourceLine" id="cb386-7" title="7">  Route<span class="op">,</span></a>
<a class="sourceLine" id="cb386-8" title="8">  Link</a>
<a class="sourceLine" id="cb386-9" title="9"><span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb386-10" title="10"><span class="im">import</span> HeadingA <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingA&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb386-11" title="11"><span class="im">import</span> HeadingB <span class="im">from</span> <span class="st">&#39;./css-modules/HeadingB&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb386-12" title="12"><span class="im">import</span> Image <span class="im">from</span> <span class="st">&#39;./image/Image&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb386-13" title="13"><span class="im">import</span> ClassComponent <span class="im">from</span> <span class="st">&#39;./class-component/ClassComponent&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb386-14" title="14"></a>
<a class="sourceLine" id="cb386-15" title="15"><span class="kw">function</span> <span class="at">App</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb386-16" title="16">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb386-17" title="17">    <span class="op">&lt;</span>BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-18" title="18">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-19" title="19">        <span class="op">&lt;</span>h1<span class="op">&gt;{</span><span class="va">process</span>.<span class="va">env</span>.<span class="at">REACT_APP_TITLE</span><span class="op">}</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-20" title="20">        <span class="op">&lt;</span>nav<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-21" title="21">          <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-22" title="22">            <span class="op">&lt;</span>li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-23" title="23">              <span class="op">&lt;</span>Link to<span class="op">=</span><span class="st">&quot;/&quot;</span><span class="op">&gt;</span>Home&lt;/Link<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-24" title="24">            &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-25" title="25">            <span class="op">&lt;</span>li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-26" title="26">              <span class="op">&lt;</span>Link to<span class="op">=</span><span class="st">&quot;/image&quot;</span><span class="op">&gt;</span>Image&lt;/Link<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-27" title="27">            &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-28" title="28">            <span class="op">&lt;</span>li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-29" title="29">              <span class="op">&lt;</span>Link to<span class="op">=</span><span class="st">&quot;/class-component&quot;</span><span class="op">&gt;</span>Class Component&lt;/Link<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-30" title="30">            &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-31" title="31">          &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-32" title="32">        &lt;/nav<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-33" title="33">        <span class="op">&lt;</span>Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-34" title="34">          <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&quot;/image&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-35" title="35">            <span class="op">&lt;</span>Image /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-36" title="36">          &lt;/Route<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-37" title="37">          <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&quot;/class-component&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-38" title="38">            <span class="op">&lt;</span>ClassComponent /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-39" title="39">          &lt;/Route<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-40" title="40">          <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&quot;/&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-41" title="41">            <span class="op">&lt;</span>HeadingA /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-42" title="42">            <span class="op">&lt;</span>HeadingB /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-43" title="43">          &lt;/Route<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-44" title="44">        &lt;/Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-45" title="45">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-46" title="46">    &lt;/BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb386-47" title="47">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb386-48" title="48"><span class="op">}</span></a>
<a class="sourceLine" id="cb386-49" title="49"></a>
<a class="sourceLine" id="cb386-50" title="50"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>Be sure to run and test your application to ensure that the defined routes work as expected:</p>
<ul>
<li><code>/</code> - Should display the <code>HeadingA</code> and <code>HeadingB</code> components;</li>
<li><code>/image</code> - Should display the <code>Image</code> component; and</li>
<li><code>/class-component</code> - Should display the <code>ClassComponent</code> component.</li>
</ul>
<h3 id="creating-a-production-build-1">Creating a production build</h3>
<p>To create a production build, run the command <code>npm run build</code> from the root of your project. The output in the terminal should look something like this:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb387-1" title="1"><span class="op">&gt;</span> <span class="ex">solution@0.1.0</span> build [absolute path to your project]</a>
<a class="sourceLine" id="cb387-2" title="2"><span class="op">&gt;</span> <span class="ex">react-scripts</span> build</a>
<a class="sourceLine" id="cb387-3" title="3"></a>
<a class="sourceLine" id="cb387-4" title="4"><span class="ex">Creating</span> an optimized production build...</a>
<a class="sourceLine" id="cb387-5" title="5"><span class="ex">Compiled</span> successfully.</a>
<a class="sourceLine" id="cb387-6" title="6"></a>
<a class="sourceLine" id="cb387-7" title="7"><span class="ex">File</span> sizes after gzip:</a>
<a class="sourceLine" id="cb387-8" title="8"></a>
<a class="sourceLine" id="cb387-9" title="9">  <span class="ex">47.83</span> KB  build/static/js/2.722c16c4.chunk.js</a>
<a class="sourceLine" id="cb387-10" title="10">  <span class="ex">773</span> B     build/static/js/runtime-main.b7d1e5ee.js</a>
<a class="sourceLine" id="cb387-11" title="11">  <span class="ex">745</span> B     build/static/js/main.12299197.chunk.js</a>
<a class="sourceLine" id="cb387-12" title="12">  <span class="ex">197</span> B     build/static/css/main.e9a0d1f8.chunk.css</a>
<a class="sourceLine" id="cb387-13" title="13"></a>
<a class="sourceLine" id="cb387-14" title="14"><span class="ex">The</span> project was built assuming it is hosted at /.</a>
<a class="sourceLine" id="cb387-15" title="15"><span class="ex">You</span> can control this with the homepage field in your package.json.</a>
<a class="sourceLine" id="cb387-16" title="16"></a>
<a class="sourceLine" id="cb387-17" title="17"><span class="ex">The</span> build folder is ready to be deployed.</a>
<a class="sourceLine" id="cb387-18" title="18"><span class="ex">You</span> may serve it with a static server:</a>
<a class="sourceLine" id="cb387-19" title="19"></a>
<a class="sourceLine" id="cb387-20" title="20">  <span class="ex">npm</span> install -g serve</a>
<a class="sourceLine" id="cb387-21" title="21">  <span class="ex">serve</span> -s build</a>
<a class="sourceLine" id="cb387-22" title="22"></a>
<a class="sourceLine" id="cb387-23" title="23"><span class="ex">Find</span> out more about deployment here:</a>
<a class="sourceLine" id="cb387-24" title="24"></a>
<a class="sourceLine" id="cb387-25" title="25">  <span class="ex">bit.ly/CRA-deploy</span></a></code></pre></div>
<p><strong>Ignore the comments about using <code>serve</code> to deploy your application (i.e. <code>npm install -g serve</code> and <code>serve -s build</code>).</strong> In the next step, you’ll create a simple Express application to server your React application.</p>
<h3 id="serving-a-react-application-using-express">Serving a React application using Express</h3>
<p>Create a new folder for your Express application outside of the Create React App project folder.</p>
<blockquote>
<p>For example, from the root of your project, use <code>cd ..</code> to go up a level and then create a new folder named <code>express-server</code> by running the command <code>mkdir express-server</code>. This makes the <code>express-server</code> folder a sibling to your Create React App project folder.</p>
</blockquote>
<p>Browse into the <code>express-server</code> folder and initialize it to use npm (i.e. <code>npm init -y</code>). Then install Express by running the command <code>npm install express@^4.0.0</code>.</p>
<p>App a file named <code>app.js</code> with the following contents:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb388-1" title="1"><span class="co">// ./app.js</span></a>
<a class="sourceLine" id="cb388-2" title="2"></a>
<a class="sourceLine" id="cb388-3" title="3"><span class="kw">const</span> express <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;express&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb388-4" title="4"><span class="kw">const</span> path <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb388-5" title="5"></a>
<a class="sourceLine" id="cb388-6" title="6"><span class="kw">const</span> app <span class="op">=</span> <span class="at">express</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb388-7" title="7"></a>
<a class="sourceLine" id="cb388-8" title="8"><span class="va">app</span>.<span class="at">use</span>(<span class="va">express</span>.<span class="at">static</span>(<span class="va">path</span>.<span class="at">join</span>(__dirname<span class="op">,</span> <span class="st">&#39;public&#39;</span>)))<span class="op">;</span></a>
<a class="sourceLine" id="cb388-9" title="9"></a>
<a class="sourceLine" id="cb388-10" title="10"><span class="va">app</span>.<span class="at">get</span>(<span class="st">&#39;*&#39;</span><span class="op">,</span> <span class="kw">function</span>(req<span class="op">,</span> res) <span class="op">{</span></a>
<a class="sourceLine" id="cb388-11" title="11">  <span class="va">res</span>.<span class="at">sendFile</span>(<span class="va">path</span>.<span class="at">join</span>(__dirname<span class="op">,</span> <span class="st">&#39;public&#39;</span><span class="op">,</span> <span class="st">&#39;index.html&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb388-12" title="12"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb388-13" title="13"></a>
<a class="sourceLine" id="cb388-14" title="14"><span class="kw">const</span> port <span class="op">=</span> <span class="dv">9000</span><span class="op">;</span></a>
<a class="sourceLine" id="cb388-15" title="15"></a>
<a class="sourceLine" id="cb388-16" title="16"><span class="va">app</span>.<span class="at">listen</span>(port<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="vs">`Listening on port </span><span class="sc">${</span>port<span class="sc">}</span><span class="vs">...`</span>))<span class="op">;</span></a></code></pre></div>
<p>This simple Express application will:</p>
<ul>
<li>Attempt to match incoming requests to static files located in the <code>public</code> folder; and</li>
<li>If a matching static file isn’t found, then the <code>./public/index.html</code> file will be served for all other requests.</li>
</ul>
<p>Now add a folder named <code>public</code> to the root of your Express project. Copy the files from the <code>build</code> folder in your Create React App project to the <code>public</code> folder in the Express application project. Then run your application using the command <code>node app.js</code>.</p>
<p>Open a browser and browse to the URL <code>http://localhost:9000/</code>. You should see your React application served from your Express application! Be sure to click the navigation links to verify that all of your configured routes work as expected.</p>
<p>Also, because you configured Express to serve the <code>./public/index.html</code> file for any request that doesn’t match a static file, you can “deep link” to any of your React application’s routes:</p>
<ul>
<li><a href="http://localhost:9000/image">http://localhost:9000/image</a></li>
<li><a href="http://localhost:9000/class-component">http://localhost:9000/class-component</a></li>
</ul>
<hr />
<h1 id="week-14-day-5-react-context" data-ignore="true">WEEK-14 DAY-5<br><em>React Context</em></h1>
<hr />
<h1 id="react-context-learning-objectives">React Context Learning Objectives</h1>
<p>You’ve been using a component’s state and props to manage the information rendered in your React applications. However, applications generally use global state to share the same information across multiple components. After reading and practicing how to use React Context, you should be able to manage application-wide data by:</p>
<ul>
<li>Use Context to share and manage global information within a React application</li>
<li>Create a wrapper component with <code>Context.Provider</code> to set a component’s default context</li>
<li>Create a wrapper component with <code>Context.Consumer</code> to share the global context through render props</li>
<li>Create and pass a method through Context to update the global state from a nested component</li>
</ul>
<hr />
<h1 id="react-context">React Context</h1>
<p>At this point, you know how to manage a component’s state and pass information down an application’s component tree by threading props from parent components to child components. Think of how tedious it could be to pass down information, like current user data or a UI theme, to every component in an application. Instead of threading the information as props from a parent component to its children and grandchildren, you can share information with any of your application’s components by using React Context!</p>
<p><a href="https://reactjs.org/docs/context.html">React Context</a> gives you a way to pass data through the component tree without having to manually thread props. Context gives developers a convenient way to share and update “global” data across a React application. Now it’s time to dive into application-wide data management!</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Use React Context to pass down global information</li>
<li>Create a Provider wrapper component to set a default context</li>
<li>Create a Consumer wrapper component to allow child components to subscribe to a global context</li>
<li>Use the <code>static contextType</code> property to access the global context</li>
<li>Update the global context from a nested component</li>
</ul>
<blockquote>
<p>In a future lesson, you’ll learn about Redux, a common approach for managing global state in React applications. The React Context can be thought of as a lightweight alternative to using Redux.</p>
</blockquote>
<h2 id="using-context">Using Context</h2>
<p>In this demo, you’ll create a simple React app that uses Context to allow users to choose what images/images/images/images/puppy picture to render.</p>
<p>Begin by cloning this starter React app with a folder of <code>pups</code> photos!</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb389-1" title="1"><span class="fu">git</span> clone https://github.com/appacademy-starters/react-context-pups-starter.git</a></code></pre></div>
<p>Now let’s import the pup photos into your <code>App.js</code> file and render the <code>speedy</code> pup:</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb390-1" title="1"><span class="co">// App.js</span></a>
<a class="sourceLine" id="cb390-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb390-3" title="3"><span class="im">import</span> speedy <span class="im">from</span> <span class="st">&#39;./pups/speedy-pup.jpg&#39;</span></a>
<a class="sourceLine" id="cb390-4" title="4"><span class="im">import</span> banana <span class="im">from</span> <span class="st">&#39;./pups/banana-pup.jpg&#39;</span></a>
<a class="sourceLine" id="cb390-5" title="5"><span class="im">import</span> sleepy <span class="im">from</span> <span class="st">&#39;./pups/sleepy-pup.jpg&#39;</span></a>
<a class="sourceLine" id="cb390-6" title="6"></a>
<a class="sourceLine" id="cb390-7" title="7"><span class="kw">const</span> App <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb390-8" title="8">  <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">&quot;app&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb390-9" title="9">    <span class="op">&lt;</span>img src<span class="op">={</span>speedy<span class="op">}</span> alt<span class="op">=</span><span class="st">&quot;pup&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb390-10" title="10">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb390-11" title="11">)<span class="op">;</span></a>
<a class="sourceLine" id="cb390-12" title="12"></a>
<a class="sourceLine" id="cb390-13" title="13"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>Start your application is you’ll see a huge and super happy pup that’s running! Take a moment to update your <code>index.css</code> file so that your pup photo isn’t so large:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb391-1" title="1"><span class="co">/* index.css */</span></a>
<a class="sourceLine" id="cb391-2" title="2">body {</a>
<a class="sourceLine" id="cb391-3" title="3">  <span class="kw">padding</span>: <span class="dv">50</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb391-4" title="4">}</a>
<a class="sourceLine" id="cb391-5" title="5"></a>
<a class="sourceLine" id="cb391-6" title="6"><span class="pp">#app</span> {</a>
<a class="sourceLine" id="cb391-7" title="7">  <span class="kw">display</span>: flex<span class="op">;</span></a>
<a class="sourceLine" id="cb391-8" title="8">  <span class="kw">flex-direction</span>: column<span class="op">;</span></a>
<a class="sourceLine" id="cb391-9" title="9">  <span class="kw">width</span>: <span class="dv">500</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb391-10" title="10">}</a>
<a class="sourceLine" id="cb391-11" title="11"></a>
<a class="sourceLine" id="cb391-12" title="12">img {</a>
<a class="sourceLine" id="cb391-13" title="13">  <span class="kw">width</span>: <span class="dv">500</span><span class="dt">px</span><span class="op">;</span></a>
<a class="sourceLine" id="cb391-14" title="14">}</a></code></pre></div>
<p>Being able to render a pup photo is great, but what about giving your users the chance to select a pup photo to render? Let’s allow your users to select a pup photo through a form by passing information through Context!</p>
<h3 id="creating-a-context">Creating a Context</h3>
<p>You can use the <a href="https://reactjs.org/docs/context.html#reactcreatecontext">React.createContext</a> method to create a <code>PupContext</code>. In order to create a context, you can simply import the <code>createContext()</code> function from <code>react</code>, invoke the function to create a Context object, and export the Context!</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb392-1" title="1"><span class="co">// PupContext.js</span></a>
<a class="sourceLine" id="cb392-2" title="2"><span class="im">import</span> <span class="op">{</span> createContext <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb392-3" title="3"></a>
<a class="sourceLine" id="cb392-4" title="4"><span class="kw">const</span> PupContext <span class="op">=</span> <span class="at">createContext</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb392-5" title="5"></a>
<a class="sourceLine" id="cb392-6" title="6"><span class="im">export</span> <span class="im">default</span> PupContext<span class="op">;</span></a></code></pre></div>
<p>Note that if you invoke the <code>createContext</code> method with arguments, those arguments will be set as the default context. In the next step, you’ll set up a component’s state to use as the default context.</p>
<h3 id="adding-a-provider-to-the-app-component">Adding a Provider to the App component</h3>
<p>The <em>Provider</em> component expects <code>value</code> prop to set the context information passed throughout your application. You need to wrap your child components with provider component tags to give them access to the context. The context <code>value</code> will include information to pass to child components by using context <em>Consumer</em> components. As a reminder, Consumer components must always be nested under Provider components because the Provider must render first (parent components always render before children components).</p>
<pre class="jsx"><code>&lt;MyContext.Provider value={/* some value */}&gt;
  &lt;ChildComponent /&gt;
&lt;/MyContext.Provider&gt;</code></pre>
<p>Now you’ll use <a href="https://reactjs.org/docs/context.html#contextprovider">Context.Provider</a> to create a wrapper component to set the <code>value</code> of your <code>PupContext</code>! Let’s go into your <code>App.js</code> file to create an <code>AppWithContext</code> wrapper component that will pass a <code>puppyType</code> prop to determine what image your <code>App</code> component renders.</p>
<p>Your wrapper component should set up a default <code>puppyType</code> state in its constructor. Choose one of your imported pup photos (<code>banana</code>, <code>sleepy</code>, or <code>speedy</code>) to set as the default state.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb394-1" title="1"><span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb394-2" title="2">  <span class="dt">puppyType</span><span class="op">:</span> speedy<span class="op">,</span></a>
<a class="sourceLine" id="cb394-3" title="3"><span class="op">};</span></a></code></pre></div>
<p>Note that you should set the <code>puppyType</code> as <code>speedy</code> instead of <code>"speedy"</code> (without quotations), or else you’d be setting a string to be the default state, instead of a default pup photo to be rendered.</p>
<p>Now let’s visit the <code>AppWithContext</code> component’s <code>render()</code> method! You’ll want to render the <code>App</code> component wrapped with <code>&lt;PupContext.Provider&gt;</code> tags to give <code>App</code> and all of its children components access to the <code>PupContext</code>:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb395-1" title="1"><span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb395-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb395-3" title="3">    <span class="op">&lt;</span><span class="va">PupContext</span>.<span class="at">Provider</span> value<span class="op">={}&gt;</span></a>
<a class="sourceLine" id="cb395-4" title="4">      <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb395-5" title="5">    &lt;/<span class="va">PupContext</span>.<span class="at">Provider</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb395-6" title="6">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb395-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>Remember that provider components expect to receive a <code>value</code> prop. The <code>value</code> prop will hold the context information that will be passed throughout the application. Set the provider component’s <code>value</code> prop to be the <code>state</code> of your <code>AppWithContext</code> component. As you know, a component re-renders when its state is updated. This is how you’ll update an application’s context from nested components. Your <code>AppWithContext</code> component’s <code>render()</code> method should look something like this:</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb396-1" title="1"><span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb396-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb396-3" title="3">    <span class="op">&lt;</span><span class="va">PupContext</span>.<span class="at">Provider</span> value<span class="op">={</span><span class="kw">this</span>.<span class="at">state</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb396-4" title="4">      <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb396-5" title="5">    &lt;/<span class="va">PupContext</span>.<span class="at">Provider</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb396-6" title="6">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb396-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>Since you are rendering the pup image from <code>App</code>, you can pass in the wrapper component’s <code>puppyType</code> state as a prop:</p>
<pre class="jsx"><code>&lt;App puppyType={this.state.puppyType} /&gt;</code></pre>
<p>Now you can refactor your <code>App</code> component to use its <code>puppyType</code> prop to render a specific pup photo!</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb398-1" title="1"><span class="kw">const</span> App <span class="op">=</span> (<span class="op">{</span> puppyType <span class="op">}</span>) <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb398-2" title="2">  <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">&quot;app&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb398-3" title="3">    <span class="op">&lt;</span>PupForm /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb398-4" title="4">    <span class="op">&lt;</span>img src<span class="op">={</span>puppyType<span class="op">}</span> alt<span class="op">=</span><span class="st">&quot;pup&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb398-5" title="5">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb398-6" title="6">)<span class="op">;</span></a></code></pre></div>
<p>Don’t forget to update the <code>export</code> statement at the bottom of your <code>App.js</code> file. You’ll want to export the <code>AppWithContext</code> component instead of the <code>App</code> component. Don’t worry about changing the <code>App</code> import statement in your <code>index.js</code> file. Since you are using <code>export default</code>, only the component explicitly specified in your file’s export statement will be exported from the file. At this point, your full <code>App.js</code> file should look something like this:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb399-1" title="1"><span class="co">// App.js</span></a>
<a class="sourceLine" id="cb399-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb399-3" title="3"><span class="im">import</span> PupContext <span class="im">from</span> <span class="st">&#39;./PupContext&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb399-4" title="4"><span class="im">import</span> banana <span class="im">from</span> <span class="st">&#39;./pups/banana-pup.jpg&#39;</span></a>
<a class="sourceLine" id="cb399-5" title="5"><span class="im">import</span> sleepy <span class="im">from</span> <span class="st">&#39;./pups/sleepy-pup.jpg&#39;</span></a>
<a class="sourceLine" id="cb399-6" title="6"><span class="im">import</span> speedy <span class="im">from</span> <span class="st">&#39;./pups/speedy-pup.jpg&#39;</span></a>
<a class="sourceLine" id="cb399-7" title="7"></a>
<a class="sourceLine" id="cb399-8" title="8"><span class="kw">const</span> App <span class="op">=</span> (<span class="op">{</span> puppyType <span class="op">}</span>) <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb399-9" title="9">  <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">&quot;app&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb399-10" title="10">    <span class="op">&lt;</span>img src<span class="op">={</span>puppyType<span class="op">}</span> alt<span class="op">=</span><span class="st">&quot;pup&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb399-11" title="11">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb399-12" title="12">)<span class="op">;</span></a>
<a class="sourceLine" id="cb399-13" title="13"></a>
<a class="sourceLine" id="cb399-14" title="14"><span class="kw">class</span> AppWithContext <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb399-15" title="15">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb399-16" title="16">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb399-17" title="17">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb399-18" title="18">      <span class="dt">puppyType</span><span class="op">:</span> speedy<span class="op">,</span></a>
<a class="sourceLine" id="cb399-19" title="19">    <span class="op">};</span></a>
<a class="sourceLine" id="cb399-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb399-21" title="21"></a>
<a class="sourceLine" id="cb399-22" title="22">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb399-23" title="23">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb399-24" title="24">      <span class="op">&lt;</span><span class="va">PupContext</span>.<span class="at">Provider</span> value<span class="op">={</span><span class="kw">this</span>.<span class="at">state</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb399-25" title="25">        <span class="op">&lt;</span>App puppyType<span class="op">={</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">puppyType</span><span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb399-26" title="26">      &lt;/<span class="va">PupContext</span>.<span class="at">Provider</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb399-27" title="27">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb399-28" title="28">  <span class="op">}</span></a>
<a class="sourceLine" id="cb399-29" title="29"><span class="op">}</span></a>
<a class="sourceLine" id="cb399-30" title="30"></a>
<a class="sourceLine" id="cb399-31" title="31"><span class="im">export</span> <span class="im">default</span> AppWithContext<span class="op">;</span></a></code></pre></div>
<p>Now start your server and make sure that your cute pup photo is rendering!</p>
<h3 id="adding-a-consumer-to-a-nested-component">Adding a Consumer to a nested component</h3>
<p>Before setting up a consumer, let’s create a nested child component that will consume your <code>PupContext</code>! Create a <code>PupForm</code> component that will be be rendered as a child of your <code>App</code> component. Begin by rendering a dropdown menu for users to choose which pup photo to render in the app. Feel free to use the <code>PupForm</code> component defined below:</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb400-1" title="1"><span class="co">// PupForm.js</span></a>
<a class="sourceLine" id="cb400-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb400-3" title="3"><span class="im">import</span> banana <span class="im">from</span> <span class="st">&#39;./pups/banana-pup.jpg&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb400-4" title="4"><span class="im">import</span> sleepy <span class="im">from</span> <span class="st">&#39;./pups/sleepy-pup.jpg&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb400-5" title="5"><span class="im">import</span> speedy <span class="im">from</span> <span class="st">&#39;./pups/speedy-pup.jpg&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb400-6" title="6"></a>
<a class="sourceLine" id="cb400-7" title="7"><span class="kw">class</span> PupForm <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb400-8" title="8">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb400-9" title="9">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb400-10" title="10">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb400-11" title="11">      <span class="dt">selectedPup</span><span class="op">:</span> <span class="st">&#39;select&#39;</span><span class="op">,</span> <span class="co">// Set the default select option</span></a>
<a class="sourceLine" id="cb400-12" title="12">    <span class="op">};</span></a>
<a class="sourceLine" id="cb400-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb400-14" title="14"></a>
<a class="sourceLine" id="cb400-15" title="15">  <span class="co">// Update state with the user&#39;s dropdown selection</span></a>
<a class="sourceLine" id="cb400-16" title="16">  updateSelection <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb400-17" title="17">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">selectedPup</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb400-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb400-19" title="19"></a>
<a class="sourceLine" id="cb400-20" title="20">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb400-21" title="21">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb400-22" title="22">      <span class="op">&lt;</span>form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb400-23" title="23">        <span class="op">&lt;</span>select</a>
<a class="sourceLine" id="cb400-24" title="24">          name<span class="op">=</span><span class="st">&quot;pup&quot;</span></a>
<a class="sourceLine" id="cb400-25" title="25">          onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">updateSelection</span><span class="op">}</span></a>
<a class="sourceLine" id="cb400-26" title="26">          value<span class="op">={</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">selectedPup</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb400-27" title="27"></a>
<a class="sourceLine" id="cb400-28" title="28">          <span class="op">&lt;</span>option value<span class="op">=</span><span class="st">&quot;select&quot;</span><span class="op">&gt;</span>Select a pup<span class="op">!</span>&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb400-29" title="29">          <span class="op">&lt;</span>option value<span class="op">={</span>speedy<span class="op">}&gt;</span>Speedy Pup&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb400-30" title="30">          <span class="op">&lt;</span>option value<span class="op">={</span>banana<span class="op">}&gt;</span>Banana Pup&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb400-31" title="31">          <span class="op">&lt;</span>option value<span class="op">={</span>sleepy<span class="op">}&gt;</span>Sleepy Pup&lt;/option<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb400-32" title="32">        &lt;/select<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb400-33" title="33">        <span class="op">&lt;</span>button onClick<span class="op">={</span><span class="co">/* </span><span class="al">TODO</span><span class="co">: Set up the click handler */</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb400-34" title="34">          Submit</a>
<a class="sourceLine" id="cb400-35" title="35">        &lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb400-36" title="36">      &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb400-37" title="37">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb400-38" title="38">  <span class="op">}</span></a>
<a class="sourceLine" id="cb400-39" title="39"><span class="op">}</span></a></code></pre></div>
<p>As you can see, the <code>PupForm</code> has a default <code>selectedPup</code> state that will set the default select option to be “Select a pup!”. There is also an <code>updateSelection</code> method that listens for change events in the dropdown menu to update the <code>selectedPup</code> slice of state. Now that you have a basic dropdown menu set up, it’s time to create a consumer wrapper so that the <code>PupForm</code> component can have access to the <code>PupContext</code>!</p>
<p>You’ll want to use a <a href="https://reactjs.org/docs/context.html#contextconsumer">Context.Consumer</a> component to wrap your <code>PupForm</code> component, this way the wrapped component can subscribe to context changes. Note that the <code>Context.Consumer</code> component expects a function as a child:</p>
<pre class="jsx"><code>&lt;MyContext.Consumer&gt;
  {(value) =&gt; &lt;Component value={value} /&gt;}
&lt;/MyContext.Consumer&gt;</code></pre>
<p>The function has access to the <code>value</code> prop passed into the <code>Context.Provider</code>. The <code>value</code> prop can then be passed as a render prop into the wrapped component.</p>
<p>Import your <code>PupContext</code> into your <code>PupForm.js</code> file and use the <code>Context.Consumer</code> component to create a wrapper for your <code>PupForm</code> component like so:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb402-1" title="1"><span class="kw">const</span> PupFormWithContext <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb402-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb402-3" title="3">    <span class="op">&lt;</span><span class="va">PupContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb402-4" title="4">      <span class="op">{</span>(value) <span class="kw">=&gt;</span> <span class="op">&lt;</span>PupForm value<span class="op">={</span>value<span class="op">}</span> /&gt;<span class="op">}</span></a>
<a class="sourceLine" id="cb402-5" title="5">    &lt;/<span class="va">PupContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb402-6" title="6">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb402-7" title="7"><span class="op">};</span></a></code></pre></div>
<p>Just as you did with your <code>AppWithContext</code> component, you’ll want to export the <code>PupFormWithContext</code> wrapper component in your <code>PupForm.js</code> file.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb403-1" title="1"><span class="im">export</span> <span class="im">default</span> PupFormWithContext<span class="op">;</span></a></code></pre></div>
<p>Now update your <code>App</code> component to render the <code>PupFormWithContext</code> component:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb404-1" title="1"><span class="kw">const</span> App <span class="op">=</span> (<span class="op">{</span> puppyType <span class="op">}</span>) <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb404-2" title="2">  <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">&quot;app&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb404-3" title="3">    <span class="op">&lt;</span>PupFormWithContext /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb404-4" title="4">    <span class="op">&lt;</span>img src<span class="op">={</span>puppyType<span class="op">}</span> alt<span class="op">=</span><span class="st">&quot;pup&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb404-5" title="5">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb404-6" title="6">)<span class="op">;</span></a></code></pre></div>
<p>Take a moment to create a <code>handleClick</code> function for your submit button’s <code>onClick</code> listener. For now, simply prevent the default re-render of the submitted form and console log your component’s props so that you can examine the <code>value</code> prop passed into the <code>PupForm</code> component:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb405-1" title="1">handleClick <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb405-2" title="2">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb405-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="at">props</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb405-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>Open up your developer tools and click the submit button! You should see the context <code>value</code> prop logged in your console:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb406-1" title="1">{<span class="ex">value</span>: <span class="dt">{...}</span>}</a></code></pre></div>
<p>If you expand the prop, you’ll then see the <code>puppyType</code>, which is the default context set by your <code>AppWithContext</code> component’s state!</p>
<p>Note that you can also use the <code>static contextType</code> property to access context value in class components. Take a moment to set the <code>contextType</code> property to your <code>PupContext</code> in the <code>PupForm</code> class component:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb407-1" title="1"><span class="co">// Rest of file not shown</span></a>
<a class="sourceLine" id="cb407-2" title="2"><span class="kw">class</span> PupForm <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb407-3" title="3">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb407-4" title="4">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb407-5" title="5">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb407-6" title="6">      <span class="dt">selectedPup</span><span class="op">:</span> <span class="st">&#39;select&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb407-7" title="7">    <span class="op">};</span></a>
<a class="sourceLine" id="cb407-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb407-9" title="9"></a>
<a class="sourceLine" id="cb407-10" title="10">  <span class="kw">static</span> contextType <span class="op">=</span> PupContext<span class="op">;</span></a>
<a class="sourceLine" id="cb407-11" title="11"><span class="co">// Rest of file not shown</span></a></code></pre></div>
<p>Now update your <code>handleClick</code> method to console log <code>this.context</code> instead of <code>this.props</code>:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb408-1" title="1">handleClick <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb408-2" title="2">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb408-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="at">context</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb408-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>Click the submit button to fire your <code>handleClick</code> method and you should see the context <code>value</code> object logged in your console:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb409-1" title="1">{<span class="ex">puppyType</span>: <span class="st">&quot;/static/media/speedy-pup.d706601f.jpg&quot;</span>}</a></code></pre></div>
<p>Note that the <code>static contextType</code> property only works for class components. Because of this, you’ll focus on using <code>Context.Consumer</code> components to manually pass render props.</p>
<h2 id="updating-the-context-from-a-nested-component">Updating the Context from a nested component</h2>
<p>Now you can access the context value, but what about updating the context value? It’s a common need to update the global context from a child consumer component. For example, if your Context is providing the UI theme or language, you might have a child component that consumes the context and allows a user to select their preferred theme or language.</p>
<p>Once a user makes a selection, your application will need a way to update the context value. From the context update fired from the child component, your application will re-render all of the nested components that depend on that data.</p>
<p>Let’s define an <code>updateContext</code> method in your <code>AppWithContext</code> component! This method will take care of updating the <code>puppyType</code> slice of state:</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb410-1" title="1">updateContext <span class="op">=</span> (puppyType) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb410-2" title="2">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> puppyType <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb410-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>You’ll then set a reference to the method in the state so that a nested component (with access to context) can invoke the <code>updateContext</code> method to update the <code>AppWithContext</code> state (and therefore the global context)!</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb411-1" title="1"><span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb411-2" title="2">  <span class="dt">puppyType</span><span class="op">:</span> speedy<span class="op">,</span></a>
<a class="sourceLine" id="cb411-3" title="3">  <span class="dt">updateContext</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">updateContext</span><span class="op">,</span></a>
<a class="sourceLine" id="cb411-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>At this point, your complete <code>AppWithContext</code> component should look something like this:</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb412-1" title="1"><span class="kw">class</span> AppWithContext <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb412-2" title="2">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb412-3" title="3">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb412-4" title="4">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb412-5" title="5">      <span class="dt">puppyType</span><span class="op">:</span> speedy<span class="op">,</span></a>
<a class="sourceLine" id="cb412-6" title="6">      <span class="dt">updateContext</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">updateContext</span><span class="op">,</span></a>
<a class="sourceLine" id="cb412-7" title="7">    <span class="op">};</span></a>
<a class="sourceLine" id="cb412-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb412-9" title="9"></a>
<a class="sourceLine" id="cb412-10" title="10">  updateContext <span class="op">=</span> (puppyType) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb412-11" title="11">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> puppyType <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb412-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb412-13" title="13"></a>
<a class="sourceLine" id="cb412-14" title="14">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb412-15" title="15">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb412-16" title="16">      <span class="op">&lt;</span><span class="va">PupContext</span>.<span class="at">Provider</span> value<span class="op">={</span><span class="kw">this</span>.<span class="at">state</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb412-17" title="17">        <span class="op">&lt;</span>App puppyType<span class="op">={</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">puppyType</span><span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb412-18" title="18">      &lt;/<span class="va">PupContext</span>.<span class="at">Provider</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb412-19" title="19">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb412-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb412-21" title="21"><span class="op">}</span></a></code></pre></div>
<p>Since your <code>value</code> prop is taking in the component’s <code>state</code>, this means that your <code>updateContext</code> method is also available to any components with access to context. Let’s revisit the <code>PupFormWithContext</code> component! Update the wrapper component to pass the <code>updateContext</code> method as a render prop to the <code>PupForm</code>:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb413-1" title="1"><span class="kw">const</span> PupFormWithContext <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb413-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb413-3" title="3">    <span class="op">&lt;</span><span class="va">PupContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb413-4" title="4">      <span class="op">{</span>(value) <span class="kw">=&gt;</span> <span class="op">&lt;</span>PupForm updateContext<span class="op">={</span><span class="va">value</span>.<span class="at">updateContext</span><span class="op">}</span> /&gt;<span class="op">}</span></a>
<a class="sourceLine" id="cb413-5" title="5">    &lt;/<span class="va">PupContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb413-6" title="6">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb413-7" title="7"><span class="op">};</span></a></code></pre></div>
<p>Now if you update your <code>handleClick</code> method to console log both <code>this.props</code> and <code>this.context</code>, you’ll see the <code>updateContext</code> method you just created and passed down!</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb414-1" title="1">handleClick <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb414-2" title="2">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb414-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="at">props</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb414-4" title="4">  <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="at">context</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb414-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>This means that you can invoke either <code>this.props.value.updateContext</code> or <code>this.context.updateContext</code> to update the global context. Take a moment to refactor your <code>handleClick</code> method to invoke the <code>updateContext</code> method by passing in the <code>selectedPup</code> from the <code>PupForm</code> state:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb415-1" title="1">handleClick <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb415-2" title="2">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb415-3" title="3">  <span class="kw">this</span>.<span class="va">props</span>.<span class="va">value</span>.<span class="at">updateContext</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="at">selectedPup</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb415-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>Now you should be able to use the dropdown menu to select a pup photo to render! Congratulations, you now know how to use React Context to share and update global information across your application!</p>
<h2 id="what-you-learned-10">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Create a Context to share global information with an application; and</li>
<li>Use the <code>Context.Provider</code> to create a wrapper and set the default context; and</li>
<li>Use the <code>Context.Consumer</code> to create a wrapper that shares the global context through render props; and</li>
<li>Access the global context through the <code>contextType</code> property; and</li>
<li>Pass a method to a nested component to update the global context.</li>
</ul>
<hr />
<h1 id="react-context-to-do-list-project">React Context To-do List Project</h1>
<p>Today you’ll be building a to-do list application with React and local storage. Instead of threading props from a parent to its children and grandchildren, you’ll use Context to share information with any of your application’s components!</p>
<p>As a reminder, Context gives you a convenient way to pass data through the component tree without having to manually thread props. This project will also give you a better understanding of how to share and update “global” data across a React application.</p>
<p>In this project, you will:</p>
<ul>
<li>Create and use a <code>TodoContext</code> to share global information</li>
<li>Create an <code>AppWithContext</code> wrapper component that uses <code>Provider</code> to set the default value of <code>TodoContext</code> in your application</li>
<li>Create a <code>TodoFormWithContext</code> wrapper component that uses <code>Consumer</code> to allow child components to subscribe to the application’s global <code>TodoContext</code></li>
<li>Use the <code>static contextType</code> property to access the global <code>TodoContext</code> in a class component</li>
<li>Update the global value of the <code>TodoContext</code> from a nested component</li>
<li>Use a <code>debugger</code> to investigate the context value from nested component</li>
</ul>
<h2 id="phase-1-set-up-your-project">Phase 1: Set up your project</h2>
<p>Begin by using the <code>create-react-app</code> package to create a React application:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb416-1" title="1"><span class="ex">npx</span> create-react-app context-to-do-list --template @appacademy/simple</a></code></pre></div>
<p>Next, set up your application file structure based on the file tree below. To begin, you’ll want two subdirectories within <code>src</code>: <code>components</code> and <code>contexts</code>.</p>
<pre><code>├── package-lock.json
├── package.json
├── public
│   └── index.html
└── src
    ├── App.js
    ├── AppWithContext.js
    ├── components
    │   ├── Task.js
    │   ├── TodoForm.js
    │   └── TodoList.js
    ├── contexts
    │   └── TodoContext.js
    └── index.js</code></pre>
<p>Within your <code>components</code> directory, you’ll want a <code>Task</code> component:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb418-1" title="1"><span class="co">// ./src/components/Task.js</span></a>
<a class="sourceLine" id="cb418-2" title="2"></a>
<a class="sourceLine" id="cb418-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb418-4" title="4"></a>
<a class="sourceLine" id="cb418-5" title="5"><span class="kw">const</span> Task <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb418-6" title="6">  <span class="kw">const</span> handleClick <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb418-7" title="7">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Delete task</span></a>
<a class="sourceLine" id="cb418-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb418-9" title="9">  </a>
<a class="sourceLine" id="cb418-10" title="10">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb418-11" title="11">    <span class="op">&lt;</span>li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb418-12" title="12">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hi<span class="op">,</span> I<span class="st">&#39;m a task in your to-do list!&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb418-13" title="13">      <span class="op">&lt;</span>button onClick<span class="op">={</span>handleClick<span class="op">}&gt;</span>Delete Task&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb418-14" title="14">    &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb418-15" title="15">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb418-16" title="16"><span class="op">}</span></a>
<a class="sourceLine" id="cb418-17" title="17"></a>
<a class="sourceLine" id="cb418-18" title="18"><span class="im">export</span> <span class="im">default</span> Task<span class="op">;</span></a></code></pre></div>
<p>You’ll also want a <code>TodoList</code> component:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb419-1" title="1"><span class="co">// ./src/components/TodoList.js</span></a>
<a class="sourceLine" id="cb419-2" title="2"></a>
<a class="sourceLine" id="cb419-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb419-4" title="4"><span class="co">// import Task from &#39;./Task&#39;;</span></a>
<a class="sourceLine" id="cb419-5" title="5"><span class="co">// </span><span class="al">TODO</span><span class="co">: Import context</span></a>
<a class="sourceLine" id="cb419-6" title="6"></a>
<a class="sourceLine" id="cb419-7" title="7"><span class="kw">class</span> TodoList <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb419-8" title="8">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Access context</span></a>
<a class="sourceLine" id="cb419-9" title="9"></a>
<a class="sourceLine" id="cb419-10" title="10">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb419-11" title="11">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb419-12" title="12">      <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb419-13" title="13">        <span class="op">{</span><span class="co">/* </span><span class="al">TODO</span><span class="co">: Render a `Task` component for each of the `tasks` stored in context */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb419-14" title="14">      &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb419-15" title="15">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb419-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb419-17" title="17"><span class="op">}</span> </a>
<a class="sourceLine" id="cb419-18" title="18"></a>
<a class="sourceLine" id="cb419-19" title="19"><span class="im">export</span> <span class="im">default</span> TodoList<span class="op">;</span></a></code></pre></div>
<p>You’ll also want a <code>TodoForm</code> component:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb420-1" title="1"><span class="co">// ./src/components/TodoForm.js</span></a>
<a class="sourceLine" id="cb420-2" title="2"></a>
<a class="sourceLine" id="cb420-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb420-4" title="4"><span class="co">// </span><span class="al">TODO</span><span class="co">: Import TodoContext</span></a>
<a class="sourceLine" id="cb420-5" title="5"></a>
<a class="sourceLine" id="cb420-6" title="6"><span class="kw">class</span> TodoForm <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb420-7" title="7">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb420-8" title="8">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb420-9" title="9">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set default `inputValue` state</span></a>
<a class="sourceLine" id="cb420-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb420-11" title="11"></a>
<a class="sourceLine" id="cb420-12" title="12">  handleInputChange <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb420-13" title="13">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Update `inputValue` state</span></a>
<a class="sourceLine" id="cb420-14" title="14">  <span class="op">}</span></a>
<a class="sourceLine" id="cb420-15" title="15">  </a>
<a class="sourceLine" id="cb420-16" title="16">  handleSubmit <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb420-17" title="17">    <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb420-18" title="18">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Create a task based on the `inputValue`</span></a>
<a class="sourceLine" id="cb420-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb420-20" title="20"></a>
<a class="sourceLine" id="cb420-21" title="21">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb420-22" title="22">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb420-23" title="23">      <span class="op">&lt;</span>form onSubmit<span class="op">={</span><span class="kw">this</span>.<span class="at">handleSubmit</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb420-24" title="24">        <span class="op">&lt;</span>input</a>
<a class="sourceLine" id="cb420-25" title="25">          type<span class="op">=</span><span class="st">&quot;text&quot;</span></a>
<a class="sourceLine" id="cb420-26" title="26">          placeholder<span class="op">=</span><span class="st">&quot;Add a todo&quot;</span></a>
<a class="sourceLine" id="cb420-27" title="27">          value<span class="op">={</span><span class="co">/* </span><span class="al">TODO</span><span class="co">: Set the `inputValue` state as the input&#39;s value */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb420-28" title="28">          onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">handleInputChange</span><span class="op">}</span></a>
<a class="sourceLine" id="cb420-29" title="29">        /&gt;</a>
<a class="sourceLine" id="cb420-30" title="30">      &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb420-31" title="31">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb420-32" title="32">  <span class="op">}</span></a>
<a class="sourceLine" id="cb420-33" title="33"><span class="op">}</span></a>
<a class="sourceLine" id="cb420-34" title="34"></a>
<a class="sourceLine" id="cb420-35" title="35"><span class="kw">const</span> TodoFormWithContext <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb420-36" title="36">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Use a Consumer component to wrap the TodoForm</span></a>
<a class="sourceLine" id="cb420-37" title="37">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Pass the `createTask` method stored in the context value as a prop to TodoForm</span></a>
<a class="sourceLine" id="cb420-38" title="38">)<span class="op">;</span></a>
<a class="sourceLine" id="cb420-39" title="39"></a>
<a class="sourceLine" id="cb420-40" title="40"><span class="im">export</span> <span class="im">default</span> TodoFormWithContext<span class="op">;</span></a></code></pre></div>
<p>Now you’ll update your <code>App</code> component to render the <code>TodoForm</code> and <code>TodoList</code> components, along with a “To-do List” header.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb421-1" title="1"><span class="co">// ./src/App.js</span></a>
<a class="sourceLine" id="cb421-2" title="2"></a>
<a class="sourceLine" id="cb421-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb421-4" title="4"><span class="im">import</span> TodoForm <span class="im">from</span> <span class="st">&#39;./components/TodoForm&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb421-5" title="5"><span class="im">import</span> TodoList <span class="im">from</span> <span class="st">&#39;./components/TodoList&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb421-6" title="6"></a>
<a class="sourceLine" id="cb421-7" title="7"><span class="kw">const</span> App <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb421-8" title="8">  <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb421-9" title="9">    <span class="op">&lt;</span>h1<span class="op">&gt;</span>To<span class="op">-</span><span class="cf">do</span> List&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb421-10" title="10">    <span class="op">&lt;</span>TodoForm /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb421-11" title="11">    <span class="op">&lt;</span>TodoList /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb421-12" title="12">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb421-13" title="13">)<span class="op">;</span></a>
<a class="sourceLine" id="cb421-14" title="14"></a>
<a class="sourceLine" id="cb421-15" title="15"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<h3 id="create-a-context">Create a context</h3>
<p>Let’s get started on creating the <code>TodoContext</code> that will store your to-do list application’s global information! Within your <code>contexts</code> directory, you’ll set up the <code>TodoContext.js</code> file. Create and export a <code>TodoContext</code> by using the <code>createContext()</code> method, like so:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb422-1" title="1"><span class="co">// ./src/contexts/TodoContext.js</span></a>
<a class="sourceLine" id="cb422-2" title="2"></a>
<a class="sourceLine" id="cb422-3" title="3"><span class="im">import</span> <span class="op">{</span> createContext <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb422-4" title="4"></a>
<a class="sourceLine" id="cb422-5" title="5"><span class="kw">const</span> TodoContext <span class="op">=</span> <span class="at">createContext</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb422-6" title="6"></a>
<a class="sourceLine" id="cb422-7" title="7"><span class="im">export</span> <span class="im">default</span> TodoContext<span class="op">;</span></a></code></pre></div>
<p>Now that you have a <code>TodoContext</code> set up, you can work on providing the context value from a parent <code>TodoContext.Provider</code> component. In the next phase, you’ll create an <code>AppWithContext</code> to wrap your <code>App</code> component with a parent <code>TodoContext.Provider</code> component. This will provide the context <code>value</code> to the <code>App</code> component and any of its child or grandchildren components.</p>
<h2 id="phase-2-provider-wrapper-component">Phase 2: Provider wrapper component</h2>
<p>Create a <code>AppWithContext</code> wrapper component. This wrapper component will take care of <em>providing</em> the context value. Start off with this code skeleton of the <code>AppWithContext</code> component:</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb423-1" title="1"><span class="co">// ./src/AppWithContext.js</span></a>
<a class="sourceLine" id="cb423-2" title="2"></a>
<a class="sourceLine" id="cb423-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb423-4" title="4"><span class="co">// </span><span class="al">TODO</span><span class="co">: Import TodoContext</span></a>
<a class="sourceLine" id="cb423-5" title="5"><span class="co">// </span><span class="al">TODO</span><span class="co">: Import App</span></a>
<a class="sourceLine" id="cb423-6" title="6"></a>
<a class="sourceLine" id="cb423-7" title="7"><span class="kw">class</span> AppWithContext <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb423-8" title="8">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb423-9" title="9">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb423-10" title="10">    <span class="kw">const</span> storedTasks <span class="op">=</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="va">localStorage</span>.<span class="at">getItem</span>(<span class="st">&#39;tasks&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb423-11" title="11">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up default state (tasks, createTask, deleteTask)</span></a>
<a class="sourceLine" id="cb423-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb423-13" title="13"></a>
<a class="sourceLine" id="cb423-14" title="14">  createTask <span class="op">=</span> (task) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb423-15" title="15">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Use the built-in Date `getTime` method to generate the `nextTaskId` for the `newTask`</span></a>
<a class="sourceLine" id="cb423-16" title="16">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Generate a `newTask` object, structured with proper &quot;state shape&quot;</span></a>
<a class="sourceLine" id="cb423-17" title="17">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Update the `tasks` state</span></a>
<a class="sourceLine" id="cb423-18" title="18">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Invoke the `updateLocalStorageTasks` method</span></a>
<a class="sourceLine" id="cb423-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb423-20" title="20">  </a>
<a class="sourceLine" id="cb423-21" title="21">  deleteTask <span class="op">=</span> (id) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb423-22" title="22">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Delete the task based on the task `id`</span></a>
<a class="sourceLine" id="cb423-23" title="23">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Update the `tasks` state</span></a>
<a class="sourceLine" id="cb423-24" title="24">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Invoke the `updateLocalStorageTasks` method</span></a>
<a class="sourceLine" id="cb423-25" title="25">  <span class="op">}</span></a>
<a class="sourceLine" id="cb423-26" title="26"></a>
<a class="sourceLine" id="cb423-27" title="27">  updateLocalStorageTasks <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb423-28" title="28">    <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="at">tasks</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb423-29" title="29">    <span class="kw">const</span> jsonTasks <span class="op">=</span> <span class="va">JSON</span>.<span class="at">stringify</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="at">tasks</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb423-30" title="30">    <span class="va">localStorage</span>.<span class="at">setItem</span>(<span class="st">&#39;tasks&#39;</span><span class="op">,</span> jsonTasks)<span class="op">;</span></a>
<a class="sourceLine" id="cb423-31" title="31">  <span class="op">}</span></a>
<a class="sourceLine" id="cb423-32" title="32">  </a>
<a class="sourceLine" id="cb423-33" title="33">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb423-34" title="34">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb423-35" title="35">      <span class="co">// </span><span class="al">TODO</span><span class="co">: Use a Provider component to wrap the App component</span></a>
<a class="sourceLine" id="cb423-36" title="36">      <span class="co">// </span><span class="al">TODO</span><span class="co">: Use the AppWithContext state as the Provider component&#39;s `value`</span></a>
<a class="sourceLine" id="cb423-37" title="37">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb423-38" title="38">  <span class="op">}</span></a>
<a class="sourceLine" id="cb423-39" title="39"><span class="op">}</span></a>
<a class="sourceLine" id="cb423-40" title="40"></a>
<a class="sourceLine" id="cb423-41" title="41"><span class="im">export</span> <span class="im">default</span> AppWithContext<span class="op">;</span></a></code></pre></div>
<p>Begin by importing the <code>TodoContext</code> and <code>App</code> component. Next, you’ll want to set up a default state with <code>tasks</code>, <code>createTask</code>, <code>deleteTask</code>.</p>
<h3 id="set-default-state">Set default state</h3>
<p>Set the value of the <code>tasks</code> state to the <code>storedTasks</code>, <em>or</em> an empty object (<code>{}</code>) if <code>storedTasks</code> is null. Notice how <code>storedTasks</code> is simply accessing the local storage item with a name of <code>tasks</code>, and parsing the JSON string back to JavaScript.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb424-1" title="1"><span class="kw">const</span> storedTasks <span class="op">=</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="va">localStorage</span>.<span class="at">getItem</span>(<span class="st">&#39;tasks&#39;</span>))<span class="op">;</span></a></code></pre></div>
<p>For the <code>createTask</code> state and <code>deleteTask</code> state, you’ll want to set the state values to their prospective methods, like so:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb425-1" title="1">createTask<span class="op">:</span> <span class="kw">this</span>.<span class="at">createTask</span><span class="op">,</span></a>
<a class="sourceLine" id="cb425-2" title="2">deleteTask<span class="op">:</span> <span class="kw">this</span>.<span class="at">deleteTask</span><span class="op">,</span></a></code></pre></div>
<h3 id="create-a-task">Create a task</h3>
<p>Now you’ll define the <code>createTask</code> method. Use the built-in Date <code>getTime</code> method to generate the <code>nextTaskId</code> for the <code>newTask</code>. You’ll also want to generate a <code>newTask</code> object. You can use square brackets around the <code>nextTaskId</code> to use the generated integer as a key:</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb426-1" title="1"><span class="kw">const</span> newTask <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb426-2" title="2">  [nextTaskId]<span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb426-3" title="3">    <span class="dt">id</span><span class="op">:</span> nextTaskId<span class="op">,</span></a>
<a class="sourceLine" id="cb426-4" title="4">    <span class="dt">message</span><span class="op">:</span> task<span class="op">,</span></a>
<a class="sourceLine" id="cb426-5" title="5">  <span class="op">},</span></a>
<a class="sourceLine" id="cb426-6" title="6"><span class="op">};</span></a></code></pre></div>
<p>As you might remember, the <code>tasks</code> state is set to the <code>storedTasks</code>, <em>or</em> an empty object (<code>{}</code>) as default. You might be wondering why you are using an object instead of an array. You are being prepared to work with <a href="https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape/#designing-a-normalized-state">normalized state shape</a>! The <code>byId</code> slice of state in the Redux documentation’s example illustrates the state format you will be building today. Similarly to how each post has its ID as a key, each task will have its ID as a key, as well as <code>id</code> and <code>message</code> properties.</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb427-1" title="1">byId <span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb427-2" title="2">  <span class="st">&quot;post1&quot;</span> <span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb427-3" title="3">    <span class="dt">id </span><span class="op">:</span> <span class="st">&quot;post1&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb427-4" title="4">    <span class="dt">author </span><span class="op">:</span> <span class="st">&quot;user1&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb427-5" title="5">    <span class="dt">body </span><span class="op">:</span> <span class="st">&quot;......&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb427-6" title="6">    <span class="dt">comments </span><span class="op">:</span> [<span class="st">&quot;comment1&quot;</span><span class="op">,</span> <span class="st">&quot;comment2&quot;</span>]</a>
<a class="sourceLine" id="cb427-7" title="7">  <span class="op">},</span></a>
<a class="sourceLine" id="cb427-8" title="8">  <span class="st">&quot;post2&quot;</span> <span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb427-9" title="9">    <span class="dt">id </span><span class="op">:</span> <span class="st">&quot;post2&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb427-10" title="10">    <span class="dt">author </span><span class="op">:</span> <span class="st">&quot;user2&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb427-11" title="11">    <span class="dt">body </span><span class="op">:</span> <span class="st">&quot;......&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb427-12" title="12">    <span class="dt">comments </span><span class="op">:</span> [<span class="st">&quot;comment3&quot;</span><span class="op">,</span> <span class="st">&quot;comment4&quot;</span><span class="op">,</span> <span class="st">&quot;comment5&quot;</span>]</a>
<a class="sourceLine" id="cb427-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb427-14" title="14"><span class="op">},</span></a></code></pre></div>
<p>In the future, you’ll be working with Redux and will manage much more data. Feel free to view the <a href="https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape/#normalizing-state-shape">nested state shape with an array</a> and read more about how using normalized state shape is an improvement. The documentation explains how “compared to the original nested format, this is an improvement in several ways.”</p>
<p>After generating a <code>newTask</code> object, you’ll want to update the <code>tasks</code> state with the new object and then update the tasks stored in local storage. First, let’s take a closer look at the <code>updateLocalStorageTasks</code> method. You’ll see that it takes care of logging the tasks to your DevTools console, converting the JavaScript <code>tasks</code> object into a JSON string, and then storing the tasks in local storage, under the name <code>tasks</code>.</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb428-1" title="1">updateLocalStorageTasks <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb428-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="at">tasks</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb428-3" title="3">  <span class="kw">const</span> jsonTasks <span class="op">=</span> <span class="va">JSON</span>.<span class="at">stringify</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="at">tasks</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb428-4" title="4">  <span class="va">localStorage</span>.<span class="at">setItem</span>(<span class="st">&#39;tasks&#39;</span><span class="op">,</span> jsonTasks)<span class="op">;</span></a>
<a class="sourceLine" id="cb428-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>You can spread the <code>tasks</code> slice of state and the attributes of the <code>newTask</code> to generate a collection of updated tasks. When a state update depends on a previous state value, you need to <a href="https://reactjs.org/docs/state-and-lifecycle.html#state-updates-may-be-asynchronous">pass a function</a> into the <code>setState</code> method to reliably get the previous state value. Since your <code>createTask</code> method relies on the previous state to produce the next state, the method’s <code>setState</code> invocation will look something like this:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb429-1" title="1"><span class="kw">this</span>.<span class="at">setState</span>((state<span class="op">,</span> props) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb429-2" title="2">  <span class="dt">tasks</span><span class="op">:</span> <span class="op">{</span> ...<span class="va">state</span>.<span class="at">tasks</span><span class="op">,</span> ...<span class="at">newTask</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb429-3" title="3"><span class="op">}</span>))<span class="op">;</span></a></code></pre></div>
<p>After the <code>tasks</code> slice of state has been updated, you’ll want to update the tasks stored in local storage by invoking the <code>updateLocalStorageTasks</code> method. The <code>setState()</code> method takes an optional callback as its second parameter so that you can have asynchronous behavior with <code>setState()</code>. Note that you can’t <code>await</code> on a <code>setState()</code> method since it doesn’t return a promise!</p>
<p>Invoke <code>setState</code> with a callback that invokes the <code>updateLocalStorageTasks</code> method, so that the method is invoked after the state is set:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb430-1" title="1"><span class="kw">this</span>.<span class="at">setState</span>((state<span class="op">,</span> props) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb430-2" title="2">  <span class="dt">tasks</span><span class="op">:</span> <span class="op">{</span> ...<span class="va">state</span>.<span class="at">tasks</span><span class="op">,</span> ...<span class="at">newTask</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb430-3" title="3"><span class="op">}</span>)<span class="op">,</span> () <span class="kw">=&gt;</span> <span class="kw">this</span>.<span class="at">updateLocalStorageTasks</span>())<span class="op">;</span></a></code></pre></div>
<h3 id="delete-a-task">Delete a task</h3>
<p>Delete a task based on the task’s <code>id</code>. Since your <code>tasks</code> state is structured as an object, you can use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete">delete operator</a> to delete a specific task. Although you can delete a specific tasks directly from the <code>tasks</code> slice of state, it’s best practice not to do so.</p>
<p>It’s best practice to maintain immutable state, meaning that you should not directly delete a task from the <code>tasks</code> slice of state with the delete operator. You can maintain immutable state by making a copy of the <code>tasks</code> slice of state with spread syntax, and then using the delete operator to delete a specific task within the <code>setState</code> method.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb431-1" title="1"><span class="kw">this</span>.<span class="at">setState</span>((state<span class="op">,</span> props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb431-2" title="2">  <span class="kw">const</span> tasksWithDeletion <span class="op">=</span> <span class="op">{</span> ...<span class="va">state</span>.<span class="at">tasks</span> <span class="op">};</span></a>
<a class="sourceLine" id="cb431-3" title="3">  <span class="kw">delete</span> tasksWithDeletion[id]<span class="op">;</span></a>
<a class="sourceLine" id="cb431-4" title="4">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb431-5" title="5">    <span class="dt">tasks</span><span class="op">:</span> tasksWithDeletion<span class="op">,</span></a>
<a class="sourceLine" id="cb431-6" title="6">  <span class="op">};</span></a>
<a class="sourceLine" id="cb431-7" title="7"><span class="op">}</span>))<span class="op">;</span></a></code></pre></div>
<blockquote>
<p><strong>Reminder:</strong> when a state update depends on a previous state value, you need to pass a function into the <code>setState</code> method to reliably access the previous state.</p>
</blockquote>
<p>Just like how you used an optional callback to invoke the <code>updateLocalStorageTasks</code> method asynchronously within the <code>createTask</code> method, you’ll do the same for task deletion.</p>
<h3 id="use-a-provider-component">Use a provider component</h3>
<p>Now it’s time to provide context to your application. Use a <code>Provider</code> component (<code>&lt;TodoContext.Provider&gt;</code>) to wrap the <code>App</code> component in the <code>render</code> method. You’ll use the <code>AppWithContext</code> state as the Provider component’s <code>value</code>.</p>
<p>As a reminder, rendering the <code>Provider</code> component and nesting the <code>App</code> component as a child within the <code>Provider</code> component will provide the context <code>value</code> (global state of the application) to your application. The <code>App</code> component and any of its child or grandchildren components will then be able to access any information stored within the context <code>value</code>. Since your <code>App</code> component renders the rest of your application’s components, the context value will be provided to any of its child components as well - even if they were not directly rendered as a child component of <code>&lt;TodoContext.Provider&gt;</code>!</p>
<p>Lastly, take a moment to update your <code>index.js</code> to render your new <code>AppWithContext</code> component instead of the <code>App</code> component. This will not result in any breaking changes, as you have simply replaced the <code>App</code> component with another component that wraps and renders it.</p>
<h2 id="phase-3-consumer-wrapper-component">Phase 3: Consumer wrapper component</h2>
<p>It’s time to set up a consumer wrapper component to allow the <code>TodoForm</code> component to <em>consume</em> the <code>TodoContext</code>. Begin by importing <code>TodoContext</code> into the file and updating the return of the <code>TodoFormWithContext</code>. Within the <code>TodoFormWithContext</code>, you use a <code>Consumer</code> component (<code>&lt;TodoContext.Consumer&gt;</code>) to wrap the <code>TodoForm</code> and pass render props.</p>
<p>Pass the <code>createTask</code> method stored in the context <code>value</code> as a prop to the <code>TodoForm</code>. Since you set the <code>AppWithContext</code> state as the <code>value</code> in the <code>&lt;TodoContext.Provider&gt;</code>, you can access anything stored in the <code>AppWithContext</code> state through the <code>value</code> prop referenced within the <code>&lt;TodoContext.Consumer&gt;</code>:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb432-1" title="1"><span class="op">&lt;</span><span class="va">TodoContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb432-2" title="2">  <span class="op">{</span>value <span class="kw">=&gt;</span> <span class="co">/* </span><span class="al">TODO</span><span class="co">: Pass the `createTask` method as a prop to TodoForm */</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb432-3" title="3">&lt;/<span class="va">TodoContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a></code></pre></div>
<p>Now that you have the consumer wrapper component set up, it’s time to work on the <code>TodoForm</code> component. Set the default <code>inputValue</code> state to an empty string and update <code>inputValue</code> state within the <code>handleInputChange</code> method. You’ll also want to set the <code>inputValue</code> state as the form input’s value so that the input is a <a href="https://reactjs.org/docs/forms.html#controlled-components">controlled component</a>.</p>
<p>On form submission, you’ll want to create a task based on the <code>inputValue</code> by invoking the <code>createTask</code> prop passed from the context consumer. As a reminder, the <code>createTask</code> method updates the <code>tasks</code> stored in the <code>AppWithContext</code> state. This means that whenever the <code>createTask</code> method is invoked, the global <code>tasks</code> state will update and any components that subscribe to the context (via a <code>Consumer</code> component or <code>static contextType</code>) will have access to the updated tasks.</p>
<p>Before moving onto the next phase, use a <code>debugger</code> to investigate what actions happen when you submit the <code>TodoForm</code>. Set two <code>debugger</code> statements: one in the <code>handleSubmit</code> method defined in <code>TodoForm</code> and another in the <code>createTask</code> method defined in <code>AppWithContext</code>. With these two debugger statements, you can trace whether invoking <code>this.props.createTask</code> really invokes the <code>createTask</code> method in the <code>AppWithContext</code> component.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-context/assets/debugger-createTask.gif" alt="debugger-createTask" /><figcaption>debugger-createTask</figcaption>
</figure>
<h2 id="phase-4-access-context-through-contexttype">Phase 4: Access context through contextType</h2>
<p>Now you’ll access context by using the <code>static contextType</code> property instead of setting up a consumer wrapper component. Uncomment the import statement for <code>Task</code> and import the <code>TodoContext</code> into your <code>TodoList.js</code> file. Set the <code>TodoList</code> component’s <code>static contextType</code> property to the <code>TodoContext</code>. By setting the <code>contextType</code> property, the <code>TodoList</code> component gains access to the context value via <code>this.context</code>. As a reminder, you can use a <code>debugger</code> statement to investigate <code>this.context</code> to view everything stored as the context value before moving forward.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-context/assets/debugger-context.gif" alt="debugger-context" /><figcaption>debugger-context</figcaption>
</figure>
<p>Access the <code>tasks</code> and <code>deleteTask</code> method stored within the context value. Map over each of the <code>tasks</code> and render a <code>Task</code> component for each task. Since your tasks are currently formatted as an object, you’ll need to convert the object to an iterable array before mapping over them. You can use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values">Object.values</a> method to access an array containing the object’s property values.</p>
<p>You’ll want to set a task ID <code>key</code> for each of the tasks, as well as pass the task as a prop for each <code>Task</code> component rendered. In order to keep the <code>Task</code> component as a function component, you’ll pass the <code>deleteTask</code> method from context as a prop into each rendered <code>Task</code> as well. As a reminder, the <code>static contextType</code> property can only be used in class components.</p>
<p>Now have the <code>Task</code> component take in the props. Then update the click handler to invoke the <code>deleteTask</code> prop with the task’s ID. You’ll also want to replace the “Hi, I’m a task in your to-do list!” message with the task’s message.</p>
<p>Congratulations! You have just built a to-do list application with React Context! You used a context provider to set a global context value, used a context consumer to pass render props into a consuming component, and used the <code>static contextType</code> property to give a class component access to the context value. In the next Context project, you’ll work on using Context to store a user’s login session information.</p>
<hr />
<h1 id="react-twitter-lite-project">React Twitter Lite Project</h1>
<p>A few weeks ago, you set up an Express API for tweets and created a client-side application to render Pug views. Today you’ll build a client-side application with React to render a single-page application that interacts with your backend Tweets API!</p>
<p>In this project, you’ll build a frontend client to render React components. You’ll use React Context to keep track of a user’s login state to protect tweet resources from unauthenticated users. You’ll also use React Router to create your application’s routes and navigation bar.</p>
<p>When you have finished today’s project, your application should have the following features:</p>
<ol type="1">
<li>A frontend user registration</li>
<li>A <code>UserContext</code> to keep track of the current user</li>
<li>A protected and authenticated routes</li>
<li>A frontend user log-in</li>
<li>A home page with protected tweet resources</li>
<li>A user profile page</li>
</ol>
<h2 id="phase-1-set-up-your-project-1">Phase 1: Set up your project</h2>
<p>Begin by cloning the tweets API you built with Express a few weeks ago:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb433-1" title="1"><span class="fu">git</span> clone https://github.com/appacademy-starters/react-twitter-revisited-starter.git</a></code></pre></div>
<p>Now go into your backend directory and install all of the application’s packages:</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb434-1" title="1"><span class="ex">npm</span> install</a></code></pre></div>
<p>Now take a moment to create a database and database user by opening <code>psql</code> and running the following SQL statements:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb435-1" title="1"><span class="kw">create</span> <span class="kw">database</span> twitter_lite;</a>
<a class="sourceLine" id="cb435-2" title="2"><span class="kw">create</span> <span class="fu">user</span> twitter_lite_app <span class="kw">with</span> <span class="kw">password</span> <span class="st">&#39;«a strong password for the user»&#39;</span>;</a>
<a class="sourceLine" id="cb435-3" title="3"><span class="kw">grant</span> <span class="kw">all</span> <span class="kw">privileges</span> <span class="kw">on</span> <span class="kw">database</span> twitter_lite <span class="kw">to</span> twitter_lite_app;</a></code></pre></div>
<p>Now you’ll need to by set your environment variables. Remember you can refer to the <code>.env.example</code> file to remember what environment variables to set. After you have set up your database and environment variables, migrate and seed your database:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb436-1" title="1"><span class="ex">npx</span> dotenv sequelize db:migrate</a>
<a class="sourceLine" id="cb436-2" title="2"><span class="ex">npx</span> dotenv sequelize db:seed:all</a></code></pre></div>
<p>Take a moment to start your backend server and verify that everything is working by navigating to <code>http://localhost:8080</code> and ensuring that you see your API’s <code>index root</code> response. Now you are ready to create a React frontend for your backend tweets API!</p>
<p>Change out of your backend directory. Now use the command below to generate a simple React template. You should be generating a sibling <code>twitter-front-end</code> directory to your <code>twitter-back-end</code> directory.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb437-1" title="1"><span class="ex">npx</span> create-react-app twitter-front-end --template @appacademy/simple</a></code></pre></div>
<p>Since you’ll be make fetch requests from your frontend client to your backend API, you’ll want to set up a proxy to make your frontend client act like it is being served on a different server. The idea is to follow the same pattern that you used in Express.</p>
<p>Here are the docs for setting up <a href="https://create-react-app.dev/docs/proxying-api-requests-in-development/"><code>create-react-app</code> proxying in development</a>.</p>
<p>To set up the proxy, you need to add the following line to the <code>package.json</code> in your <code>twitter-front-end</code> project.</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb438-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb438-2" title="2">  <span class="dt">&quot;proxy&quot;</span><span class="fu">:</span> <span class="st">&quot;http://localhost:8080&quot;</span></a>
<a class="sourceLine" id="cb438-3" title="3"><span class="fu">}</span></a></code></pre></div>
<p>This will set up the frontend client’s development environment to act like it is served on <code>http://localhost:8080</code> (your backend Express server’s port is <code>8080</code>) instead of <code>http://localhost:3000</code> (<code>create-react-app</code>’s default frontend server port is <code>3000</code>).</p>
<p>You can append url paths to your proxy URL whenever you need to make a request to help clean up your code! For example:</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb439-1" title="1"><span class="co">// With proxy</span></a>
<a class="sourceLine" id="cb439-2" title="2"><span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(<span class="vs">`/tweets`</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb439-3" title="3">  <span class="dt">method</span><span class="op">:</span> <span class="st">&quot;POST&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb439-4" title="4">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb439-5" title="5">    <span class="st">&quot;Content-Type&quot;</span><span class="op">:</span> <span class="st">&quot;application/json&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb439-6" title="6">  <span class="op">},</span></a>
<a class="sourceLine" id="cb439-7" title="7"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb439-8" title="8"></a>
<a class="sourceLine" id="cb439-9" title="9"><span class="co">// Without proxy</span></a>
<a class="sourceLine" id="cb439-10" title="10"><span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(<span class="vs">`http://localhost:8080/tweets`</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb439-11" title="11">  <span class="dt">method</span><span class="op">:</span> <span class="st">&quot;POST&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb439-12" title="12">  <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb439-13" title="13">    <span class="st">&quot;Content-Type&quot;</span><span class="op">:</span> <span class="st">&quot;application/json&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb439-14" title="14">  <span class="op">},</span></a>
<a class="sourceLine" id="cb439-15" title="15"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Your backend server is already set up to accept all requests from <code>http://localhost:3000</code> using <code>cors</code>:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb440-1" title="1"><span class="co">// in twitter-back-end/app.js</span></a>
<a class="sourceLine" id="cb440-2" title="2"><span class="va">app</span>.<span class="at">use</span>(<span class="at">cors</span>(<span class="op">{</span> <span class="dt">origin</span><span class="op">:</span> <span class="st">&quot;http://localhost:3000&quot;</span> <span class="op">}</span>))<span class="op">;</span></a></code></pre></div>
<p>Before moving onto the second phase, start your frontend server and make sure that your backend server is still up and running!</p>
<h2 id="phase-2-user-registration-form">Phase 2: User registration form</h2>
<p>Now it’s time to create the user registration form! Begin by creating a <code>components</code> directory to hold all your components in your frontend application’s <code>src</code> directory. Then create a <code>session</code> directory within your <code>components</code> directory. This folder will hold your registration form component and login form component. These extra directories are just to help organize your components. They’re not necessary. But, as the number of components that you has grows, it helps to have them organized like this.</p>
<p>Create a <code>RegistrationForm.js</code> file to render a user sign-up form. You’ll be setting up a default state for your component’s input fields, so make <code>RegistrationForm</code> a class component:</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb441-1" title="1"><span class="co">// ./twitter-front-end/src/components/session/RegistrationForm.js</span></a>
<a class="sourceLine" id="cb441-2" title="2"></a>
<a class="sourceLine" id="cb441-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb441-4" title="4"></a>
<a class="sourceLine" id="cb441-5" title="5"><span class="kw">class</span> RegistrationForm <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb441-6" title="6">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb441-7" title="7">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb441-8" title="8">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up default state</span></a>
<a class="sourceLine" id="cb441-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{};</span></a>
<a class="sourceLine" id="cb441-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb441-11" title="11"></a>
<a class="sourceLine" id="cb441-12" title="12">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb441-13" title="13">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Render registration form</span></a>
<a class="sourceLine" id="cb441-14" title="14">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb441-15" title="15">      <span class="op">&lt;</span>form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb441-16" title="16">      &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb441-17" title="17">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb441-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb441-19" title="19"><span class="op">}</span></a>
<a class="sourceLine" id="cb441-20" title="20"></a>
<a class="sourceLine" id="cb441-21" title="21"><span class="im">export</span> <span class="im">default</span> RegistrationForm<span class="op">;</span></a></code></pre></div>
<p>Take a moment to update your <code>App.js</code> file so that it renders your <code>RegistrationForm</code> with a “Twitter Lite” title:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb442-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb442-2" title="2"><span class="im">import</span> RegistrationForm <span class="im">from</span> <span class="st">&#39;./components/session/RegistrationForm&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb442-3" title="3"></a>
<a class="sourceLine" id="cb442-4" title="4"><span class="kw">const</span> App <span class="op">=</span> () <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb442-5" title="5">  <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb442-6" title="6">    <span class="op">&lt;</span>h1<span class="op">&gt;</span>Twitter Lite&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb442-7" title="7">    <span class="op">&lt;</span>RegistrationForm /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb442-8" title="8">  &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb442-9" title="9">)<span class="op">;</span></a>
<a class="sourceLine" id="cb442-10" title="10"></a>
<a class="sourceLine" id="cb442-11" title="11"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>As you might remember from creating your initial frontend client for your tweets application, you used scripts with event listeners to handle sign up requests.</p>
<p>Instead of using scripts to handle your sign up requests, you’ll define an <code>onChange</code> event handler method to set your component’s <code>state</code> to the value of user input fields. Then you’ll create a <code>registerUser</code> method that will house the logic to use your <code>state</code> and make a POST request to create a user with the Fetch API.</p>
<p>Begin by setting your <code>RegistrationForm</code> component’s default <code>username</code>, <code>email</code>, and <code>password</code> state to empty strings. Now let’s move forward to rendering the form!</p>
<h3 id="rendering-the-form">Rendering the form</h3>
<p>Return a <code>&lt;form&gt;</code> element within your <code>render()</code> method. Within the form, render an <code>&lt;h2&gt;</code> with the content “Register”, three input fields, and a submit button. You’ll want to create a <code>text</code> type field for your user to input a username. Set the <code>name</code> of this field to be “username” and the <code>placeholder</code> to be “Enter Username”. You’ll also want to set the <code>value</code> of this field to be your component’s <code>username</code> state.</p>
<p>If you try to type in your “username” field right now, you’ll notice that you are unable to. This is because you are setting the value of the field to be <code>this.state.username</code>, which will always be an empty string unless you update that slice of state. Note that you can have your render method destructure the state into all the variables you need before you return the JSX:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb443-1" title="1"><span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb443-2" title="2">  <span class="kw">const</span> <span class="op">{</span> username<span class="op">,</span> email<span class="op">,</span> password <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb443-3" title="3">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb443-4" title="4">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Render form</span></a>
<a class="sourceLine" id="cb443-5" title="5">  )</a>
<a class="sourceLine" id="cb443-6" title="6"><span class="op">}</span></a></code></pre></div>
<h3 id="updating-state-1">Updating state</h3>
<p>This is where creating <code>onChange</code> event handler methods to update state come into play! You’ll want to add an <code>onChange</code> listener to update state with the user input. Begin by creating an <code>updateUsername</code> method:</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb444-1" title="1">updateUsername <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb444-2" title="2">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">username</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb444-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Now update your username input field to have an <code>onChange</code> handler:</p>
<pre class="jsx"><code>&lt;input
  type=&quot;text&quot;
  value={username}
  onChange={this.updateUsername}
  name=&quot;username&quot;
  placeholder=&quot;Enter Username&quot;
/&gt;</code></pre>
<p>Follow the same pattern to create your email and password fields with their prospective <code>onChange</code> handler methods to update state. Remember that HTML inputs have different type attributes (i.e. <code>type="email"</code> and <code>type="password"</code>). JSX input fields also have access to those different type attributes.</p>
<p>Now start your server and test your controlled input fields. You should be able to type and erase within your fields. However if you try submitting the form, nothing will happen. This is because you haven’t added an <code>onSubmit</code> event listener to your form! Add an <code>onSubmit</code> handler to your form to invoke a <code>registerUser</code> method that you will define. Your form’s opening tag should look something like this:</p>
<pre class="jsx"><code>&lt;form onSubmit={this.registerUser}&gt;</code></pre>
<p>Alternatively, you could define an <code>onClick</code> event listener to your form’s submit button like so:</p>
<pre class="jsx"><code>&lt;button type=&quot;submit&quot; onClick={this.registerUser}&gt;
  Sign Up
&lt;/button&gt;</code></pre>
<p>In this case, your component would simply be listening for a <em>click</em> event from the submit button, instead of a <em>submit</em> event from the form.</p>
<h3 id="registering-a-user">Registering a user</h3>
<p>Now let’s define a <code>registerUser</code> method for your <code>onSubmit</code> listener! As you have learned in the event handling readings, remember that <code>submit</code> events automatically prompt a GET request to re-render the page. Make sure to prevent the form from re-rendering by using <code>e.preventDefault()</code> at the beginning of your submit event listener. (If you handled the button’s click event, you’d want to do the same, prevent the default action from occurring.)</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb448-1" title="1">registerUser <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb448-2" title="2">  <span class="va">e</span>.<span class="at">preventDefault</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb448-3" title="3">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Send a POST request to create a user</span></a>
<a class="sourceLine" id="cb448-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>In your <code>registerUser</code> method, use the Fetch API to create a user. You can do so by making a POST request to your backend API. As a reminder, a fetch call takes in the following parameters: an endpoint URL to make a request and an options object to specify a fetch call’s method, body, and headers. Feel free to reference the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#Supplying_request_options">Fetch API docs</a> for more reminders.</p>
<p>Use the Fetch API to make a POST request to <code>/users</code>. Remember that you can make use of proxy to make a request to <code>/users</code> instead of <code>http://localhost:8080/users</code>.</p>
<p>You’ll want to use the user’s username, email, and password entries as the body of the request. You can do so by transforming your component’s <code>state</code> into JSON and setting it as the <code>body</code> property of the fetch call’s options object. Since you are making a POST request with a JSON string body, don’t forget to set your call’s <code>headers</code> option to include <code>"Content-Type": "application/json"</code>.</p>
<p>Since you’ll want to await your fetch call, make your <code>registerUser</code> method an asynchronous function to do so. Wrap your fetch call in a <code>try/catch</code> statement. Now remember that the Fetch API does not throw errors, so you’ll need to manually check whether fetch response is valid and throw the response if it is not:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb449-1" title="1"><span class="cf">if</span> (<span class="op">!</span><span class="va">res</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb449-2" title="2">  <span class="cf">throw</span> res<span class="op">;</span></a>
<a class="sourceLine" id="cb449-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Don’t forget about catching your errors. In the future, you’ll use your application’s global state to keep track of and render errors. For now, just console error the caught error responses in the <code>catch</code> block. You’ll see these errors as the full fetch response thrown from the <code>!res.ok</code> statement.</p>
<p>You’ll also want to sign in your users as soon as they register. Take a moment to remember that you have set up a JSON web token in the backend routes to manage your user sessions. Remember that you can access the <code>token</code> and <code>user.id</code> from your fetch response, once it is parsed in JSON. In a later phase, you’ll use <a href="https://reactjs.org/docs/context.html">React Context</a> with cookies to share these values across different components.</p>
<p>For now, test your <code>registerUser</code> method by console logging the <code>token</code> and <code>user.id</code> from your fetch response. Make sure that you have parsed your response in JSON. Upon a successful user registration, you should see a JSON web token and a user ID in your frontend console!</p>
<p>Now let’s set up your frontend routes!</p>
<h2 id="phase-3-set-up-routes">Phase 3: Set up routes</h2>
<p>Take a moment to install <code>react-router-dom</code>:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb450-1" title="1"><span class="ex">npm</span> install react-router-dom@^5.0.0</a></code></pre></div>
<p>Now set up <code>BrowserRouter</code> in your entry file by wrapping your rendered <code>App</code> component. Then set up the following skeleton files for your <code>LoginForm</code>, <code>Home</code>, and <code>Profile</code> components. Your <code>Home</code> and <code>Profile</code> components should live in your <code>components</code> directory, while your <code>LoginForm</code> should live with your <code>RegistrationForm</code> in the <code>session</code> directory.</p>
<h3 id="loginform">LoginForm</h3>
<div class="sourceCode" id="cb451"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb451-1" title="1"><span class="co">// ./twitter-front-end/src/components/session/LoginForm.js</span></a>
<a class="sourceLine" id="cb451-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb451-3" title="3"></a>
<a class="sourceLine" id="cb451-4" title="4"><span class="kw">class</span> LoginForm <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb451-5" title="5">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb451-6" title="6">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb451-7" title="7">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up default state</span></a>
<a class="sourceLine" id="cb451-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb451-9" title="9"></a>
<a class="sourceLine" id="cb451-10" title="10">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb451-11" title="11">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb451-12" title="12">      <span class="op">&lt;</span>form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb451-13" title="13">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Log In&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb451-14" title="14">      &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb451-15" title="15">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb451-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb451-17" title="17"><span class="op">};</span></a>
<a class="sourceLine" id="cb451-18" title="18"></a>
<a class="sourceLine" id="cb451-19" title="19"><span class="im">export</span> <span class="im">default</span> LoginForm<span class="op">;</span></a></code></pre></div>
<h3 id="home">Home</h3>
<div class="sourceCode" id="cb452"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb452-1" title="1"><span class="co">// ./twitter-front-end/src/components/Home.js</span></a>
<a class="sourceLine" id="cb452-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb452-3" title="3"></a>
<a class="sourceLine" id="cb452-4" title="4"><span class="kw">class</span> Home <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb452-5" title="5">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb452-6" title="6">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb452-7" title="7">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up default state</span></a>
<a class="sourceLine" id="cb452-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb452-9" title="9"></a>
<a class="sourceLine" id="cb452-10" title="10">  <span class="kw">async</span> <span class="at">componentDidMount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb452-11" title="11">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Fetch tweets</span></a>
<a class="sourceLine" id="cb452-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb452-13" title="13"></a>
<a class="sourceLine" id="cb452-14" title="14">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb452-15" title="15">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb452-16" title="16">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb452-17" title="17">        <span class="op">&lt;</span>h1<span class="op">&gt;</span>Home Page&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb452-18" title="18">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb452-19" title="19">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb452-20" title="20">  <span class="op">}</span></a>
<a class="sourceLine" id="cb452-21" title="21"><span class="op">};</span></a>
<a class="sourceLine" id="cb452-22" title="22"></a>
<a class="sourceLine" id="cb452-23" title="23"><span class="im">export</span> <span class="im">default</span> Home<span class="op">;</span></a></code></pre></div>
<h3 id="profile">Profile</h3>
<div class="sourceCode" id="cb453"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb453-1" title="1"><span class="co">// ./twitter-front-end/src/components/Profile.js</span></a>
<a class="sourceLine" id="cb453-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb453-3" title="3"></a>
<a class="sourceLine" id="cb453-4" title="4"><span class="kw">class</span> Profile <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb453-5" title="5">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb453-6" title="6">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb453-7" title="7">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up default state</span></a>
<a class="sourceLine" id="cb453-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb453-9" title="9"></a>
<a class="sourceLine" id="cb453-10" title="10">  <span class="kw">async</span> <span class="at">componentDidMount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb453-11" title="11">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Fetch user and their tweets</span></a>
<a class="sourceLine" id="cb453-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb453-13" title="13"></a>
<a class="sourceLine" id="cb453-14" title="14">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb453-15" title="15">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb453-16" title="16">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Profile Page&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb453-17" title="17">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb453-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb453-19" title="19"><span class="op">};</span></a>
<a class="sourceLine" id="cb453-20" title="20"></a>
<a class="sourceLine" id="cb453-21" title="21"><span class="im">export</span> <span class="im">default</span> Profile<span class="op">;</span></a></code></pre></div>
<p>Create the following routes within a <code>&lt;Switch&gt;</code> component in your <code>App.js</code> file:</p>
<table>
<thead>
<tr class="header">
<th>URL Path</th>
<th>Components</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>/</code></td>
<td><code>Home</code></td>
</tr>
<tr class="even">
<td><code>/register</code></td>
<td><code>RegistrationForm</code></td>
</tr>
<tr class="odd">
<td><code>/login</code></td>
<td><code>LoginForm</code></td>
</tr>
<tr class="even">
<td><code>/users/:userId</code></td>
<td><code>Profile</code></td>
</tr>
</tbody>
</table>
<p>Now that you have your routes set up, take a moment to create a <code>&lt;nav&gt;</code> bar to render your “Register”, “Login”, and “Home” navigation links. Note that you won’t be creating a link for the current user’s profile <em>yet</em>. Use <code>&lt;NavLink&gt;</code> components to create your links so that you can style active links. Create an <code>.active</code> class in your <code>index.css</code> file to style your active links to be bold.</p>
<p>Now you’re going to create a <code>ProtectedRoute</code> as a higher order component (a component that takes in another component as an argument) to ensure that only logged users can view the <code>Profile</code> and <code>Home</code> pages. Your <code>&lt;ProtectedRoute&gt;</code> will use your current user context to determine whether your user is logged in. If the user is not logged in, the route will render a <code>&lt;Redirect&gt;</code> component to redirect the user to the login page.</p>
<p>You’ll use a <code>currentUserId</code> prop to determine whether a route’s component or a <code>&lt;Redirect&gt;</code> is rendered. In the next phase, you’ll create a <code>UserContext</code> that will pass the <code>currentUserId</code> information as a prop into your <code>App</code> component. Then you can check whether the <code>currentUserId</code> is <em>truthy</em> or <em>falsey</em> to determine whether your <code>ProtectedRoute</code> renders a protected component (i.e. <code>Home</code>) or redirects users to the <code>/login</code> path.</p>
<p>Make a new <code>Routes.js</code> file in your <code>src</code> directory. Think of what you’ll need to import to create routes with redirection. Just like how you can use <code>window.location.href</code> into redirect a user upon an unsuccessful login, you can use a <code>&lt;ProtectedRoute&gt;</code> component to wrap your <code>&lt;Route&gt;</code> components to redirect users.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb454-1" title="1"><span class="co">// Excerpt from login script file for previous Twitter frontend client</span></a>
<a class="sourceLine" id="cb454-2" title="2"><span class="cf">if</span> (<span class="va">res</span>.<span class="at">status</span> <span class="op">===</span> <span class="dv">401</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb454-3" title="3">  <span class="va">window</span>.<span class="va">location</span>.<span class="at">href</span> <span class="op">=</span> <span class="st">&quot;/log-in&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb454-4" title="4">  <span class="cf">return</span><span class="op">;</span></a>
<a class="sourceLine" id="cb454-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>The <code>ProtectedRoute</code> below destructures and distributes its props to the <code>Route</code> component it returns. Note that the <code>ProtectedRoute</code> will expect to receive route props (<code>component</code>, <code>path</code>, and <code>exact</code>) as well as an additional <code>currentUserId</code> prop.</p>
<p>Just like how a <code>Route</code> component references its <code>component</code>, <code>path</code>, and <code>exact</code> flag props to create a front-end route, the <code>ProtectedRoute</code> will use the same props to create a protected front-end route as well as check whether its <code>currentUserId</code> prop is valid. The route’s <code>component</code> will be conditionally rendered based on whether there is a valid <code>currentUserId</code> prop.</p>
<p>Since it is standard to capitalize components, the route below uses the syntax <code>component: Component</code> to rename the <code>component</code> prop as <code>Component</code>. If the <code>currentUserId</code> is <em>falsey</em>, then the route would redirect to the <code>/login</code> path instead of rendering the <code>Component</code>.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb455-1" title="1"><span class="im">export</span> <span class="kw">const</span> ProtectedRoute <span class="op">=</span> (<span class="op">{</span> <span class="dt">component</span><span class="op">:</span> Component<span class="op">,</span> path<span class="op">,</span> currentUserId<span class="op">,</span> exact <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb455-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb455-3" title="3">    <span class="op">&lt;</span>Route</a>
<a class="sourceLine" id="cb455-4" title="4">      path<span class="op">={</span>path<span class="op">}</span></a>
<a class="sourceLine" id="cb455-5" title="5">      exact<span class="op">={</span>exact<span class="op">}</span></a>
<a class="sourceLine" id="cb455-6" title="6">      render<span class="op">={</span>(props) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb455-7" title="7">        currentUserId <span class="op">?</span> <span class="op">&lt;</span>Component <span class="op">{</span>...<span class="at">props</span><span class="op">}</span> /&gt; : <span class="op">&lt;</span>Redirect to<span class="op">=</span><span class="st">&quot;/login&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb455-8" title="8">      <span class="op">}</span></a>
<a class="sourceLine" id="cb455-9" title="9">    /&gt;</a>
<a class="sourceLine" id="cb455-10" title="10">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb455-11" title="11"><span class="op">};</span></a></code></pre></div>
<p>On another note, you also don’t want your logged in users to be able to view the login or registration forms. You can prevent them from viewing the session forms by creating <code>AuthRoute</code> components that do the opposite of your <code>ProtectedRoute</code> components. Your <code>AuthRoute</code> will redirect logged in users to the home page (<code>"/"</code>) if they try to navigate to the authentication routes (<code>"/login"</code> or <code>"/register"</code>). Your <code>AuthRoute</code> will also take care of redirecting users to the home page once they’re logged in.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb456-1" title="1"><span class="im">export</span> <span class="kw">const</span> AuthRoute <span class="op">=</span> (<span class="op">{</span> <span class="dt">component</span><span class="op">:</span> Component<span class="op">,</span> path<span class="op">,</span> currentUserId<span class="op">,</span> exact <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb456-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb456-3" title="3">    <span class="op">&lt;</span>Route</a>
<a class="sourceLine" id="cb456-4" title="4">      path<span class="op">={</span>path<span class="op">}</span></a>
<a class="sourceLine" id="cb456-5" title="5">      exact<span class="op">={</span>exact<span class="op">}</span></a>
<a class="sourceLine" id="cb456-6" title="6">      render<span class="op">={</span>(props) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb456-7" title="7">        currentUserId <span class="op">?</span> <span class="op">&lt;</span>Redirect to<span class="op">=</span><span class="st">&quot;/&quot;</span> /&gt; : <span class="op">&lt;</span>Component <span class="op">{</span>...<span class="at">props</span><span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb456-8" title="8">      <span class="op">}</span></a>
<a class="sourceLine" id="cb456-9" title="9">    /&gt;</a>
<a class="sourceLine" id="cb456-10" title="10">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb456-11" title="11"><span class="op">};</span></a></code></pre></div>
<p>Notice how both your <code>ProtectedRoute</code> and <code>AuthRoute</code> simply deconstruct the props that they receive to return a new <code>&lt;Route&gt;</code> that either renders a specified component (with props) or a <code>&lt;Redirect&gt;</code> to a specified path.</p>
<p>Now that you have created your <code>ProtectedRoute</code> and <code>AuthRoute</code> components, take a moment to refactor your routes! Import your route wrapper components into your <code>App.js</code> file. Think of which routes you want to protect and which routes you want to hide from authenticated users. For example, you would use your <code>ProtectedRoute</code> to prevent your home page from being viewed by unauthenticated users:</p>
<pre class="jsx"><code>&lt;ProtectedRoute exact path=&quot;/&quot; component={Home} /&gt;</code></pre>
<p>Lastly, think of how might you want to order your routes within the <code>&lt;Switch&gt;</code> tags.</p>
<p>Try navigating to your <code>Home</code> route. If you’ve set up your routes correctly, you should be redirected to the <code>/login</code> route. This is because the route’s <code>currentUserId</code> prop is null, meaning that a <code>&lt;Redirect&gt;</code> will be rendered instead of the <code>&lt;Home&gt;</code> component!</p>
<h2 id="phase-4-use-react-context">Phase 4: Use React Context</h2>
<p>Now that you have your <code>ProtectedRoute</code> and <code>AuthRoute</code> set up, you should easily be able to tell if your context on a current user’s login state is properly shared across the application. Users will be redirected to the <code>"/login"</code> page if they aren’t logged in, or redirected to the home <code>"/"</code> page if they are. Let’s begin by setting up a <code>UserContext</code>!</p>
<p>Creating a <code>contexts</code> directory in your <code>src</code> directory. This folder will house the current user context. Create a <code>UserContext.js</code> file and use the <code>createContext()</code> method to generate a current user context, like so:</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb458-1" title="1"><span class="co">// ./twitter-front-end/src/contexts/UserContext.js</span></a>
<a class="sourceLine" id="cb458-2" title="2"><span class="im">import</span> <span class="op">{</span> createContext <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb458-3" title="3"></a>
<a class="sourceLine" id="cb458-4" title="4"><span class="kw">const</span> UserContext <span class="op">=</span> <span class="at">createContext</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb458-5" title="5"></a>
<a class="sourceLine" id="cb458-6" title="6"><span class="im">export</span> <span class="im">default</span> UserContext<span class="op">;</span></a></code></pre></div>
<p>Now that you’ve set up a <code>UserContext</code>, you’ll need to assign components that <em>provide</em> the context and components that <em>consume</em> the context. You can do so by wrapping your components in a similar way that you wrapped your routes to create <code>AuthRoute</code> and <code>ProtectedRoute</code> components.</p>
<h3 id="setting-up-the-parent-provider">Setting up the parent provider</h3>
<p>Since you want your entire application to have access to whether a current user is logged in, create a wrapper component with <a href="https://reactjs.org/docs/context.html#contextprovider">Context.Provider</a> for your <code>App</code> component.</p>
<p>Create an <code>AppWithContext.js</code> file as a sibling to your <code>App.js</code> file. You’ll be using React, the <code>UserContext</code>, and <code>App</code> component, so be sure to import each of these.</p>
<p>Now create a new class component named <code>AppWithContext</code>:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb459-1" title="1"><span class="kw">class</span> AppWithContext <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb459-2" title="2">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb459-3" title="3">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb459-4" title="4">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set default context</span></a>
<a class="sourceLine" id="cb459-5" title="5">  <span class="op">}</span></a>
<a class="sourceLine" id="cb459-6" title="6"></a>
<a class="sourceLine" id="cb459-7" title="7">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb459-8" title="8">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Render wrapper component</span></a>
<a class="sourceLine" id="cb459-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb459-10" title="10"><span class="op">}</span></a></code></pre></div>
<p>Be sure to export the <code>AppWithContext</code> class as the default export for the <code>AppWithContext</code> module!</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb460-1" title="1"><span class="im">export</span> <span class="im">default</span> AppWithContext<span class="op">;</span></a></code></pre></div>
<p>Start by setting up the component’s default state, which will also be the default context. You’ll update this state with the <code>token</code> and user <code>id</code> from the registration and login fetch responses. Since you’ll be storing the <code>authToken</code> and <code>currentUserId</code> in the the cookie named <code>token</code>, you can persist user login by having the default state read and decode the cookie.</p>
<p>First, <code>npm install</code> the cookie parsing package <code>js-cookie</code> in your frontend folder. Then import it at the top of your <code>AppWithContext.js</code> file:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb461-1" title="1"><span class="im">import</span> Cookies <span class="im">from</span> <span class="st">&#39;js-cookie&#39;</span><span class="op">;</span></a></code></pre></div>
<p>In your initial state, get the user id from the token if the token exists:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb462-1" title="1"><span class="kw">let</span> authToken <span class="op">=</span> <span class="va">Cookies</span>.<span class="at">get</span>(<span class="st">&#39;token&#39;</span>)<span class="op">;</span> <span class="co">// get the cookie with the name of &#39;token&#39;</span></a>
<a class="sourceLine" id="cb462-2" title="2"><span class="kw">let</span> currentUserId <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></a>
<a class="sourceLine" id="cb462-3" title="3"><span class="cf">if</span> (authToken) <span class="op">{</span></a>
<a class="sourceLine" id="cb462-4" title="4">  <span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb462-5" title="5">    <span class="kw">const</span> payload <span class="op">=</span> <span class="va">authToken</span>.<span class="at">split</span>(<span class="st">&quot;.&quot;</span>)[<span class="dv">1</span>]<span class="op">;</span> <span class="co">// payload of a JWT is after the first period in the token string</span></a>
<a class="sourceLine" id="cb462-6" title="6">    <span class="kw">const</span> decodedPayload <span class="op">=</span> <span class="at">atob</span>(payload)<span class="op">;</span> <span class="co">// payload needs to be decoded using the built-in function `atob`</span></a>
<a class="sourceLine" id="cb462-7" title="7">    <span class="kw">const</span> payloadObj <span class="op">=</span> <span class="va">JSON</span>.<span class="at">parse</span>(decodedPayload)<span class="op">;</span> <span class="co">// convert the decoded payload into a POJO from a JSON string</span></a>
<a class="sourceLine" id="cb462-8" title="8">    <span class="kw">const</span> <span class="op">{</span> <span class="dt">data</span><span class="op">:</span> <span class="op">{</span> id <span class="op">}}</span> <span class="op">=</span> payloadObj<span class="op">;</span> </a>
<a class="sourceLine" id="cb462-9" title="9">    <span class="co">/* payloadObj will look like:</span></a>
<a class="sourceLine" id="cb462-10" title="10"><span class="co">    payloadObj = {</span></a>
<a class="sourceLine" id="cb462-11" title="11"><span class="co">      data: { id: ..., email: ... }</span></a>
<a class="sourceLine" id="cb462-12" title="12"><span class="co">    }</span></a>
<a class="sourceLine" id="cb462-13" title="13"><span class="co">    */</span></a>
<a class="sourceLine" id="cb462-14" title="14">    currentUserId <span class="op">=</span> id<span class="op">;</span> <span class="co">// set currentUserId equal to the payload&#39;s user id</span></a>
<a class="sourceLine" id="cb462-15" title="15">  <span class="op">}</span> <span class="cf">catch</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb462-16" title="16">    <span class="co">// if there is an error parsing the token, then remove the &#39;token&#39; cookie</span></a>
<a class="sourceLine" id="cb462-17" title="17">    authToken <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></a>
<a class="sourceLine" id="cb462-18" title="18">    <span class="va">Cookies</span>.<span class="at">remove</span>(<span class="st">&#39;token&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb462-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb462-20" title="20"><span class="op">}</span></a>
<a class="sourceLine" id="cb462-21" title="21"><span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb462-22" title="22">  <span class="dt">authToken</span><span class="op">:</span> authToken <span class="op">||</span> <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb462-23" title="23">  <span class="dt">currentUserId</span><span class="op">:</span> currentUserId<span class="op">,</span></a>
<a class="sourceLine" id="cb462-24" title="24"><span class="op">};</span></a></code></pre></div>
<p>This means that if there is an <code>authToken</code> or <code>currentUserId</code> stored in your browser’s cookie, those values will be set as the default state. If your browser’s cookie does not have an <code>authToken</code> or a <code>currentUserId</code>, then the default state will be set to <code>null</code>.</p>
<p>Now take a moment to render your <code>&lt;App&gt;</code> component wrapped in <code>&lt;UserContext.Provider&gt;</code> tags so that your <code>UserContext</code> will be <em>provided</em> to your application:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb463-1" title="1"><span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb463-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb463-3" title="3">    <span class="op">&lt;</span><span class="va">UserContext</span>.<span class="at">Provider</span> value<span class="op">={}&gt;</span></a>
<a class="sourceLine" id="cb463-4" title="4">      <span class="op">&lt;</span>App/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb463-5" title="5">    &lt;/<span class="va">UserContext</span>.<span class="at">Provider</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb463-6" title="6">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb463-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>As a reminder, your <code>&lt;UserContext.Provider&gt;</code> component expects a <code>value</code> prop to pass to the application as context. You’ll manually pass this prop into your child components when creating the <em>consumer</em> wrapper components. Take a moment to update your <code>&lt;UserContext.Provider&gt;</code> to take in the component’s <code>state</code> as its <code>value</code> prop:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb464-1" title="1"><span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb464-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb464-3" title="3">    <span class="op">&lt;</span><span class="va">UserContext</span>.<span class="at">Provider</span> value<span class="op">={</span><span class="kw">this</span>.<span class="at">state</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb464-4" title="4">      <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb464-5" title="5">    &lt;/<span class="va">UserContext</span>.<span class="at">Provider</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb464-6" title="6">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb464-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>Now you have successfully set up the default context that can be provided to your application! However, think of where your user login and registration logic lives. The logic lives in the <code>RegistrationForm</code> and <code>LoginForm</code> components themselves. Remember that your fetch request returns a <code>token</code> and current user <code>id</code> in the response. How do you supply your application’s <code>UserContext</code> with information from the fetch response?</p>
<p>You can set the <code>AppWithContext</code> component’s state (and therefore the <code>UserContext</code>) from your <code>RegistrationForm</code> and <code>LoginForm</code> components by passing in a method to the context value. This method will take care of updating the <code>AppWithContext</code> component’s state, which will then update the context. Since your <code>value</code> prop is set to the <code>AppWithContext</code> component’s state, updating the component’s state will update the entire application’s context.</p>
<p>Define an <code>updateContext</code> method that takes in an <code>authToken</code> and <code>currentUserId</code>. You’ll use the method’s arguments to update the state of <code>AppWithContext</code>.</p>
<p>The <code>setState()</code> method takes an optional callback as its second parameter so that you can have asynchronous behavior with <code>setState()</code>. Note that you can’t <code>await</code> on a <code>setState()</code> method since it doesn’t return a promise!</p>
<p>Set an arrow function to console log <code>this.state</code> as the <code>setState()</code> method’s second parameter. This way, you can verify whether your <code>AppWithContext</code> state is actually being set when your <code>updateContext</code> method is called from a consumer component.</p>
<p>Your <code>updateContext</code> method should look something like this:</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb465-1" title="1">updateContext <span class="op">=</span> (authToken<span class="op">,</span> currentUserId) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb465-2" title="2">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> authToken<span class="op">,</span> currentUserId <span class="op">},</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb465-3" title="3">    <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="at">state</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb465-4" title="4">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb465-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>Now whenever your <code>updateContext</code> method is called, you should see the <code>token</code> and <code>id</code> from your fetch response console logged as the state of <code>AppWithContext</code>!</p>
<p>Registering or logging in a user will set the <code>token</code> cookie on your browser so you should be logged in upon refreshing the browser if you set the default state of <code>AppWithContext</code> correctly to extract the <code>token</code> and user’s <code>id</code> from the cookie properly. But you will only see those changes on a refresh because only the initial state reads from the cookie. That’s why the <code>updateContext</code> method is necessary so that we don’t need to force a refresh to see a user logged in right away.</p>
<p>Take a moment to update your default state to include include your <code>updateContext</code> method, like so:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb466-1" title="1"><span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb466-2" title="2">  <span class="dt">authToken</span><span class="op">:</span> authToken <span class="op">||</span> <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb466-3" title="3">  currentUserId<span class="op">,</span></a>
<a class="sourceLine" id="cb466-4" title="4">  <span class="dt">updateContext</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">updateContext</span></a>
<a class="sourceLine" id="cb466-5" title="5"><span class="op">};</span></a></code></pre></div>
<p>Great! Now your <code>AppWithContext</code> wrapper component is all set up. In your <code>index.js</code> file, replace your rendered <code>&lt;App /&gt;</code> component with the <code>&lt;AppWithContext /&gt;</code> wrapper component you just created.</p>
<h3 id="setting-up-the-child-consumers">Setting up the child consumers</h3>
<p>Now it’s time to create a wrapper component with <a href="https://reactjs.org/docs/context.html#contextconsumer">Context.Consumer</a> so that your <code>RegistrationForm</code> component will receive context information. In your <code>RegistrationForm.js</code> file, you’ll create a <code>RegistrationFormWithContext</code> wrapper component. Begin by importing the <code>UserContext</code> into the file.</p>
<p>Create a <code>RegistrationFormWithContext</code> component that takes in props and returns your <code>RegistrationForm</code> wrapped with <code>&lt;UserContext.Consumer&gt;</code> tags. Remember that you passed in a <code>value</code> prop to your <code>&lt;UserContext.Provider&gt;</code> component in your <code>AppWithContext.js</code> file. <code>Context.Consumer</code> components receive this <code>value</code> prop to distribute into their rendered child components. As a reminder, <code>Context.Consumer</code> components require a <a href="https://reactjs.org/docs/render-props.html#using-props-other-than-render">function as a child</a> to pass a provided <code>value</code> prop as a <a href="https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce">render prop</a>:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb467-1" title="1"><span class="co">// MyContext.Consumer example from ReactJS docs:</span></a>
<a class="sourceLine" id="cb467-2" title="2"></a>
<a class="sourceLine" id="cb467-3" title="3"><span class="op">&lt;</span><span class="va">MyContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb467-4" title="4">  <span class="op">{</span>value <span class="kw">=&gt;</span> <span class="co">/* render something based on the context value */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb467-5" title="5">&lt;/<span class="va">MyContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a></code></pre></div>
<p>In your <code>RegistrationFormWithContext</code> wrapper, you will render the <code>RegistrationForm</code> component with the <code>value.updateContext</code> method passed as an <code>updateContext</code> prop:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb468-1" title="1"><span class="op">&lt;</span><span class="va">UserContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb468-2" title="2">  <span class="op">{</span>value <span class="kw">=&gt;</span> <span class="op">&lt;</span>RegistrationForm <span class="co">/* </span><span class="al">TODO</span><span class="co">: Pass props */</span> /&gt;<span class="op">}</span></a>
<a class="sourceLine" id="cb468-3" title="3">&lt;/<span class="va">UserContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a></code></pre></div>
<p>Don’t forget to also spread and pass in props received by the wrapper component (<code>{...props}</code>)! Make sure to update the <code>export default</code> statement to export the <code>RegistrationFormWithContext</code> instead of the <code>RegistrationForm</code>. Since you are using <code>export default</code>, you won’t need to manually rename component references in import statements. If a component is exported with <code>export default</code>, then that component is the only component that is actually exported from the file, no matter what their import reference is named.</p>
<p>This means that if you use <code>export default RegistrationFormWithContext</code> instead of <code>export default RegistrationForm</code>, your <code>import RegistrationForm from './components/session/RegistrationForm'</code> statement in <code>App.js</code> will actually be importing your <code>RegistrationFormWithContext</code> component. By updating the export statement, your route will render your <code>RegistrationFormWithContext</code> wrapper component instead of the <code>RegistrationForm</code> component.</p>
<p>Because you passed an <code>updateContext</code> prop in your wrapper component, you can now update the state of <code>AppWithContext</code> from within your <code>RegistrationForm</code> component by simply invoking <code>this.props.updateContext</code> with arguments from the fetch response (<code>token</code> and user <code>id</code>)!</p>
<h3 id="updating-context">Updating context</h3>
<p>Now let’s revisit the <code>registerUser</code> method in your <code>RegistrationForm</code> component. As you might remember, you last left off on accessing the <code>token</code> and <code>user.id</code> of your fetch response (after parsing it to JSON):</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb469-1" title="1"><span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb469-2" title="2">  token<span class="op">,</span></a>
<a class="sourceLine" id="cb469-3" title="3">  <span class="dt">user</span><span class="op">:</span> <span class="op">{</span> id <span class="op">},</span></a>
<a class="sourceLine" id="cb469-4" title="4"><span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="va">res</span>.<span class="at">json</span>()<span class="op">;</span></a></code></pre></div>
<p>Now, you’ll invoke the <code>updateContext</code> method passed as a prop to update the state of <code>AppWithContext</code> so that your entire app knows that a user has been logged in.</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb470-1" title="1"><span class="kw">this</span>.<span class="va">props</span>.<span class="at">updateContext</span>(token<span class="op">,</span> id)<span class="op">;</span></a></code></pre></div>
<p>Congratulations, you just set up a connection between the <code>App</code> and <code>RegistrationForm</code> components by using React Context! Now let’s share the <code>currentUserId</code> context with your routes so that you can test your user registration.</p>
<h3 id="sharing-currentuserid-context-with-the-routes">Sharing currentUserId context with the routes</h3>
<p>Let’s review the routes in your <code>App.js</code> file. At this point, your routes should either be <code>AuthRoute</code> or <code>ProtectedRoute</code> components, each with a <code>path</code> prop and a <code>component</code> prop. You’ll notice that your <code>AuthRoute</code> and <code>ProtectedRoute</code> wrapper routes expect a <code>currentUserId</code> prop. But where does this <code>currentUserId</code> prop come from? Let’s revisit your <code>AppWithContext.js</code> file to pass the <code>currentUserId</code> into <code>App</code>.</p>
<p>Since your routes need access to the updated <code>currentUserId</code>, pass the <code>currentUserId</code> state (from your <code>AppWithContext</code> wrapper component) as a prop to your <code>App</code> component. This way your routes can simply reference <code>props.currentUserId</code> to know whether there is a <em>truthy</em> or <em>falsey</em> current user! Lastly, update your rendered routes to take in a <code>currentUserId</code> prop set to the value of the <code>App</code> component’s <code>currentUserId</code> prop.</p>
<p>Now you can navigate to http://localhost:3000/register and create a new user. Upon successfully creating a user, you should receive a <code>201</code> status response in your backend terminal and be redirected to the home page!</p>
<h2 id="phase-5-user-login-form">Phase 5: User login form</h2>
<p>Creating your login form will be very similar to creating your registration form. You’ll want to render a <code>&lt;form&gt;</code> with a <code>&lt;h2&gt;</code> title of “Log In”, two input fields (email and password), and a <code>&lt;submit&gt;</code> button. You’ll also want to define the default <code>email</code> and <code>password</code> slices of state and create <code>onChange</code> handlers to set the state with input value from your login form. As a reminder, you can destructure your state into the <code>email</code> and <code>password</code> variables you need in the <code>render()</code> method:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb471-1" title="1"><span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb471-2" title="2">  <span class="kw">const</span> <span class="op">{</span> email<span class="op">,</span> password <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb471-3" title="3">  <span class="cf">return</span>(</a>
<a class="sourceLine" id="cb471-4" title="4">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Render form</span></a>
<a class="sourceLine" id="cb471-5" title="5">  )</a>
<a class="sourceLine" id="cb471-6" title="6"><span class="op">}</span></a></code></pre></div>
<h3 id="updating-state-2">Updating state</h3>
<p>Instead of creating two different methods to update specific slices of state, you can use interpolation with the event target’s name (<code>[e.target.name]</code>) to dynamically set the slice of state you want to update. Since you are referencing both the <code>name</code> and <code>value</code> of your event target, you can destructure those values to update state. For example, you could define and reuse the following method for all your input <code>onChange</code> handlers:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb472-1" title="1">update <span class="op">=</span> (e) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb472-2" title="2">  <span class="kw">const</span> <span class="op">{</span> name<span class="op">,</span> value <span class="op">}</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">target</span><span class="op">;</span></a>
<a class="sourceLine" id="cb472-3" title="3">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> [name]<span class="op">:</span> value <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb472-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>Now each input field’s <code>onChange</code> prop should look something like this:</p>
<pre class="jsx"><code>&lt;input
  type=&quot;text&quot;
  value={this.state.email}
  onChange={this.update}
  name=&quot;email&quot;
  placeholder=&quot;Enter email&quot;
/&gt;</code></pre>
<p>Feel free to refactor your <code>onChange</code> handlers in your <code>RegistrationForm</code> component as well! Remember that you need to add an <code>onSubmit</code> handler to your form to invoke a <code>loginUser</code> method (like your registration form’s <code>registerUser</code> method).</p>
<h3 id="logging-in-a-user">Logging in a user</h3>
<p>In your <code>loginUser</code> method, make a fetch request to log in a user. You’ll do so by making a POST request to <code>/users/token</code>. You’ll use the component’s <code>email</code> and <code>password</code> state as a JSON string for your fetch request <code>body</code>. Since you’re sending a JSON string in your POST request, don’t forget to set your fetch request <code>headers</code> option to include <code>"Content-Type": "application/json"</code>.</p>
<p>Remember that you’ll be awaiting your fetch call, so you need to make your <code>loginUser</code> method an asynchronous function. Then wrap your fetch call in a <code>try/catch</code> statement. You’ll need to throw an error within the <code>try</code> block if your response is unsuccessful (<code>!res.ok</code>). Like in your registration form, you’ll console error any unsuccessful fetch responses that were caught as errors in the <code>catch</code> block.</p>
<p>To iterate, normally you would use your application’s global state to keep track of and render your application’s errors. But for today, you’ll simply console error any unsuccessful fetch requests.</p>
<p>Remember that you want to use the JSON web <code>token</code> and current user <code>id</code> from your fetch response to update the <code>UserContext</code>. Take a moment to create a <code>LoginFormWithContext</code> wrapper to access <code>value</code>, the render prop of your <code>UserContext.Consumer</code> component. Make sure to spread and pass in the <code>props</code> it receives, as well as pass an <code>updateContext</code> prop with the <code>updateContext</code> method from the context <code>value</code>. Lastly, don’t forget to update the export statement in your <code>LoginForm.js</code> file.</p>
<p>Now let’s return to your <code>loginUser</code> method. Begin by parsing your fetch response in JSON. Next you’ll want to access the <code>token</code> and <code>user.id</code> from your JSON response. Remember that you have passed an <code>updateContext</code> prop into the <code>LoginForm</code> through the <code>LoginFormWithContext</code> wrapper.</p>
<p>You can now update the <code>UserContext</code> by invoking the <code>updateContext</code> prop with the <code>token</code> and <code>user.id</code> from the fetch response. Invoking the method will set the state of the <code>AppWithContext</code> component (so that these values can be shared across your application).</p>
<p>Now it’s time to test your user login! Create a new user and return to the login form to verify that the login process works. You should have received a <code>200</code> status response in your backend terminal and have been redirected to the home page!</p>
<h3 id="creating-login-and-logout-methods">Creating login and logout methods</h3>
<p>Now that you have a successful user login through the <code>updateContext</code> method, let’s rename the method to <code>login</code> to give the method a more descriptive name. As a reminder, you can use <code>cmd + shift + f</code> to search through all of your project directory for whenever you use the <code>updateContext</code> method. Take a moment to refactor so that the <code>updateContext</code> method is renamed to be your <code>login</code> method.</p>
<p>Now test your user login to ensure that your refactorization didn’t create any bugs. Once you have a working <code>login</code> method, you can easily create a <code>logout</code> method with similar logic! Instead of setting <code>authToken</code> and <code>currentUserId</code> values, you can reset them to be <code>null</code>. Make sure to also remove the token cookie once the setting of the state is complete (use the <code>Cookies.remove</code> method from the <code>js-cookie</code> package):</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb474-1" title="1">logout <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb474-2" title="2">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">authToken</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="dt">currentUserId</span><span class="op">:</span> <span class="kw">null</span> <span class="op">},</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb474-3" title="3">    <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="at">state</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb474-4" title="4">    <span class="va">Cookies</span>.<span class="at">remove</span>(<span class="st">&#39;token&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb474-5" title="5">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb474-6" title="6"><span class="op">}</span></a></code></pre></div>
<p>Take a moment to set your <code>logout</code> method in the <code>AppWithContext</code> state to pass the method into the <code>UserContext</code> value. In the next phase, you’ll build more functionality in your home page by rendering a button that logs out a user upon click and rendering a tweets index.</p>
<h2 id="phase-6-authenticated-home-page">Phase 6: Authenticated home page</h2>
<p>When a user is redirected to the home page after logging in, a fetch request for all tweets should be made in the <code>componentDidMount()</code> method to update the <code>Home</code> component’s <code>tweets</code> state. Notice how your <code>componentDidMount()</code> is prefaced by the <code>async</code> keyword. This is to explicitly identify your code within the life cycle method to be asynchronous. Now take a moment to set the default <code>tweets</code> state to an empty array.</p>
<h3 id="accessing-context-through-contexttype">Accessing context through contextType</h3>
<p>Remember that you have created a <code>logout</code> method in your <code>AppWithContext</code> component and passed it into the <code>UserContext</code> through setting the method in the <code>AppWithContext</code> state. You also set the <code>authToken</code> as a slice of state in your <code>AppWithContext</code> component. This means that you should be able to receive the <code>logout</code> method and the <code>authToken</code> through the <code>UserContext</code>!</p>
<p>You created wrapper components for your <code>RegistrationForm</code> and <code>LoginForm</code> components to access context. For your home page component, you’ll use the <code>static contextType</code> property to make a <code>this.context</code> object available to the class component.</p>
<p>In your <code>Home</code> component, set the component’s context type to be the <code>UserContext</code> with the <code>static contextType</code> property:</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb475-1" title="1"><span class="co">// ./twitter-front-end/src/components/Home.js</span></a>
<a class="sourceLine" id="cb475-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb475-3" title="3"><span class="im">import</span> UserContext <span class="im">from</span> <span class="st">&#39;../contexts/UserContext&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb475-4" title="4"></a>
<a class="sourceLine" id="cb475-5" title="5"><span class="kw">class</span> Home <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb475-6" title="6">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb475-7" title="7">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb475-8" title="8">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb475-9" title="9">      <span class="dt">tweets</span><span class="op">:</span> []<span class="op">,</span></a>
<a class="sourceLine" id="cb475-10" title="10">    <span class="op">}</span></a>
<a class="sourceLine" id="cb475-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb475-12" title="12"></a>
<a class="sourceLine" id="cb475-13" title="13">  <span class="kw">static</span> contextType <span class="op">=</span> UserContext<span class="op">;</span></a>
<a class="sourceLine" id="cb475-14" title="14"></a>
<a class="sourceLine" id="cb475-15" title="15">  <span class="kw">async</span> <span class="at">componentDidMount</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb475-16" title="16">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Fetch tweets</span></a>
<a class="sourceLine" id="cb475-17" title="17">  <span class="op">}</span></a>
<a class="sourceLine" id="cb475-18" title="18"></a>
<a class="sourceLine" id="cb475-19" title="19">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb475-20" title="20">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb475-21" title="21">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb475-22" title="22">        <span class="op">&lt;</span>h1<span class="op">&gt;</span>Home Page&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb475-23" title="23">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb475-24" title="24">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb475-25" title="25">  <span class="op">}</span></a>
<a class="sourceLine" id="cb475-26" title="26"><span class="op">};</span></a>
<a class="sourceLine" id="cb475-27" title="27"></a>
<a class="sourceLine" id="cb475-28" title="28"><span class="im">export</span> <span class="im">default</span> Home<span class="op">;</span></a></code></pre></div>
<p>In your <code>componentDidMount()</code> method, try console logging <code>this.context</code> to see what is available in the component’s context object. You should see <code>authToken</code> and <code>logout</code>. You’ll use the <code>authToken</code> in your fetch request’s authorization header and the <code>logout</code> method to log out users upon click of a button!</p>
<p>Note that using the <code>static contextType</code> property is an alternative way to access context. It is still important to know how to manually pass render props through <code>Context.Consumer</code> components, as the <code>static contextType</code> property is only available for class components.</p>
<h3 id="fetching-home-page-tweets">Fetching home page tweets</h3>
<p>Write a <code>fetchTweets</code> method that will be invoked in your <code>componentDidMount()</code> method! If you simply made a fetch request to <code>/tweets</code> without setting request headers, the fetch call would would fail even though a current user is logged in. This is because your fetch call doesn’t know if your current user is logged in unless you explicitly set an authorization header.</p>
<p>Think of how you can access the <code>authToken</code> from your application’s <code>UserContext</code> and set the authorization header. Set the <code>Authorization</code> header to the JSON web token that was stored in your <code>UserContext</code>, like so:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb476-1" title="1"><span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(<span class="vs">`/tweets`</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="rendering-home-page-tweets">Rendering home page tweets</h3>
<p>Upon a successful fetch, parse the response in JSON and return the <code>tweets</code> from the response. Then you can invoke and await the response of your <code>fetchTweets</code> method to set your component’s <code>tweets</code> state in your asynchronous <code>componentDidMount()</code>. Remember that setting the component’s <code>tweets</code> state will update the state before triggering a re-render. Now you can use the updated <code>tweets</code> state to render an unordered list of tweets! You should map over the <code>tweets</code> from <code>state</code> to generate the list of tweets, like so:</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb477-1" title="1"><span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb477-2" title="2">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb477-3" title="3">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb477-4" title="4">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Home Page&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb477-5" title="5">      <span class="op">&lt;</span>ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb477-6" title="6">        <span class="op">{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="va">tweets</span>.<span class="at">map</span>((tweet) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb477-7" title="7">          <span class="kw">const</span> <span class="op">{</span> id<span class="op">,</span> message<span class="op">,</span> <span class="dt">user</span><span class="op">:</span> <span class="op">{</span> username <span class="op">}}</span> <span class="op">=</span> tweet<span class="op">;</span></a>
<a class="sourceLine" id="cb477-8" title="8">          <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb477-9" title="9">            <span class="op">&lt;</span>li key<span class="op">={</span>id<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb477-10" title="10">              <span class="op">&lt;</span>h3<span class="op">&gt;{</span>username<span class="op">}</span>&lt;/h3<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb477-11" title="11">              <span class="op">&lt;</span>p<span class="op">&gt;{</span>message<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb477-12" title="12">            &lt;/li<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb477-13" title="13">        )<span class="op">}</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb477-14" title="14">      &lt;/ul<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb477-15" title="15">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb477-16" title="16">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb477-17" title="17"><span class="op">}</span></a></code></pre></div>
<p>Think of how you would handle errors for unsuccessful fetch responses. Remember that you’ll need to manually throw responses, as the Fetch API does not throw errors of unsuccessful requests. For now, you can use <code>console.error()</code> to log any error responses. Think of what you might return in your <code>fetchTweets</code> method’s <code>catch</code> block to indicate that there were no tweets fetched.</p>
<h3 id="logging-out-a-user">Logging out a user</h3>
<p>Now it’s time to render a logout button! Have your application render a <code>&lt;button&gt;</code> underneath the “Home Page” header. Add an <code>onClick</code> event listener to the button. Upon a user’s click, your component should invoke the <code>this.context.logout</code> method.</p>
<p>Once you have a logout button set up, test your application’s user login and logout flow! Once you are logged in, you should see an list of fetched tweets. Take a moment to also notice how your application does not allow you to browse to the <code>/login</code> and <code>/register</code> routes when you are logged in. This is due to the <code>AuthRoute</code> components you created to wrap those routes!</p>
<h2 id="phase-7-user-profile-page">Phase 7: User profile page</h2>
<p>In the profile page, you’ll want to see a user’s username as well as tweets they have written. Since you’ll be fetching information to render within a component, you’ll want to use <code>state</code>. Set a default <code>user</code> state to an empty object literal and a default <code>tweets</code> state to an empty array. Now create a wrapper component for your <code>Profile</code> component to access the <code>UserContext</code>. Make a fetch request to <code>/users/:userId/tweets</code> to fetch a specific user’s tweets. Since you’ll need authorization to make successful fetch requests for a current user and their tweets, pass the <code>authToken</code> and <code>currentUserId</code> from your context as props.</p>
<p>In your <code>Profile</code> component, you’ll define a method to fetch the current user from the database. You’ll invoke your fetch request in the asynchronous <code>componentDidMount()</code> method. Remember that you can use the <code>match</code> prop to access your router’s <code>params</code> and receive the value of the <code>:userId</code> parameter from the <code>/users/:userId</code> URL. Then you could use the <code>:userId</code> parameter to make a fetch request to the correct route.</p>
<p>For today, use the <code>currentUserId</code> passed from your context so that a logged in user can only see their personal profile. Make sure to include an <code>Authorization</code> header that uses the <code>authToken</code> prop passed from the <code>AppWithContext</code> wrapper component.</p>
<p>Once you have successfully fetched the current user, you’ll want to save the user as a slice of state and render the user’s <code>username</code> in <code>&lt;h1&gt;</code> tags. The next step is to fetch all of the tweets that belong to the user. Think of how you might structure your asynchronous <code>componentDidMount()</code> method to make multiple fetch calls before updating state. You’ll want to fetch a user’s tweets only after successfully fetching a user from the database.</p>
<p>Before moving onto the bonus phase, check that your user profile correctly fetching the current user’s data from the backend API! Console log the <code>Profile</code> component’s state as the second optional callback in the <code>this.setState()</code> call in your <code>componentDidMount()</code>:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb478-1" title="1"><span class="kw">this</span>.<span class="at">setState</span>(</a>
<a class="sourceLine" id="cb478-2" title="2">  <span class="op">{</span> user<span class="op">,</span> tweets <span class="op">},</span></a>
<a class="sourceLine" id="cb478-3" title="3">  () <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="kw">this</span>.<span class="at">state</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb478-4" title="4">)<span class="op">;</span></a></code></pre></div>
<p>Once you have a <code>user</code> slice of state with fetched data successfully logged in your developer tools console, move forward to the bonus phase where you will set up a way to create and delete tweets!</p>
<h2 id="bonus-creating-and-deleting-tweets">Bonus: Creating and deleting tweets</h2>
<p>Great! Now after successfully fetching your current user’s tweets, you can render the tweets in an unordered list like in your <code>Home</code> component. But what about creating and deleting tweets?</p>
<p>Create a method to make <code>createTweet</code> requests from your <code>Home</code> component. Below your home page’s navigation bar, render a form create a tweet. Think how what headers you might need to set to create tweets (hint: you’ll need not one, but two headers). The endpoint for creating a tweet is <code>/tweets</code>.</p>
<p>After implementing tweet creation, create a method to make <code>deleteTweet</code> requests from your <code>Profile</code> component. Have your <code>Profile</code> component render a delete <code>&lt;button&gt;</code> for each tweet rendered. The endpoint for deleting a tweet is <code>/tweets/:tweetId</code>.</p>
<p>Think of how you might update your <code>tweets</code> state upon tweet creation and deletion. What might you render if a home page or profile has no fetched tweets? After you have rendered your user profile, add a navigation link titled “My Profile” to the <code>/users/${currentUserId}</code> path. Only have the navigation link render if there is a valid current user logged in!</p>
<p>Now test your tweet creation and deletion. The update to your <code>tweets</code> slice of state should be rendered to the <code>Profile</code> page without a manual browser refresh.</p>
<h2 id="bonus-higher-order-components">Bonus: Higher order components</h2>
<p>As a brief introduction, <a href="https://reactjs.org/docs/higher-order-components.html">higher order components (HOC)</a> are a pattern for reusing component logic. Ultimately, higher order components allow you to dynamically generate wrapper components. Your <code>ProtectedRoute</code> and <code>AuthRoute</code> components are higher order components that used a function to return a new wrapped <code>Route</code> component. A higher order component is just a component that takes another component as an argument.</p>
<p>Take a moment to think of how you could refactor your context wrapper components by using the following <code>withContext</code> higher order component below:</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb479-1" title="1"><span class="co">// ./twitter-front-end/src/contexts/withContext.js</span></a>
<a class="sourceLine" id="cb479-2" title="2"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb479-3" title="3"><span class="im">import</span> UserContext <span class="im">from</span> <span class="st">&#39;./UserContext&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb479-4" title="4"></a>
<a class="sourceLine" id="cb479-5" title="5"><span class="kw">const</span> withContext <span class="op">=</span> (Component) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb479-6" title="6">  <span class="cf">return</span> <span class="kw">function</span> <span class="at">ContextComponent</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb479-7" title="7">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb479-8" title="8">      <span class="op">&lt;</span><span class="va">UserContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb479-9" title="9">        <span class="op">{</span>value <span class="kw">=&gt;</span> <span class="op">&lt;</span>Component <span class="op">{</span>...<span class="at">props</span><span class="op">}</span> value<span class="op">={</span>value<span class="op">}</span> /&gt;<span class="op">}</span></a>
<a class="sourceLine" id="cb479-10" title="10">      &lt;/<span class="va">UserContext</span>.<span class="at">Consumer</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb479-11" title="11">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb479-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb479-13" title="13"><span class="op">}</span></a>
<a class="sourceLine" id="cb479-14" title="14"></a>
<a class="sourceLine" id="cb479-15" title="15"><span class="im">export</span> <span class="im">default</span> withContext<span class="op">;</span></a></code></pre></div>
<p>As you learn about implementing Redux with React, you’ll see more design patterns like higher order components. For example, you’ll become familiar with Redux’s <a href="https://github.com/reduxjs/react-redux/blob/master/docs/api/connect.md#connect">connect()</a> function that wraps functions to connect with your application’s Redux store.</p>
