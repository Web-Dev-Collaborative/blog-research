<h1 id="context-menu-copy-link-with-types">Context menu: Copy link with types</h1>
<p>This example adds a context menu item to every link that copies the URL to the clipboard, as plain text and as rich HTML.</p>
<h2 id="what-it-does">What it does</h2>
<p>This extension includes:</p>
<ul>
<li>a background script that:
<ul>
<li>Registers a context menu item for every link.</li>
<li>Upon click, it invokes the function to copy text and HTML to the clipboard.</li>
</ul></li>
<li>a helper script, “clipboard-helper.js” that provides the copy-to-clipboard functionality. In the example, this script is run as a content script, but the actual functionality can also be used in visible extension pages such as extension button popups or extension tabs.</li>
<li>a page, “preview.html” for testing the effect of copying to the clipboard. This page does not need to be part of the extension, and can directly be opened in the browser.</li>
</ul>
<p>To test the extension, right-click on any link to open a context menu, and choose the “Copy link to clipboard” option. Then open preview.html and paste the clipboard content in the two displayed boxes. The first box will display “This is text: …” and the second box will display “This is HTML: …”.</p>
<p>Note: since the add-on relies on a content script for copying the text, the copy operation will only succeed if the add-on is allowed to run scripts in the current page. If you wish to successfully copy the text even if the current page cannot be scripted, then you can open an (extension) page in a new tab as a fallback.</p>
<h2 id="what-it-shows">What it shows</h2>
<ul>
<li>how to put data on the <a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard">clipboard</a> with custom types (“text/plain” and “text/html” in the example).</li>
<li>how to safely construct HTML from given text.</li>
<li>how to safely create JavaScript code to run as a dynamic content script.</li>
<li>how to dynamically run a static content script only once.</li>
</ul>
