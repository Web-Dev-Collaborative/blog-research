<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>View Source</title>
  <link rel="canonical" href="https://nickguner.atlassian.net/wiki/pages/viewpage.action?pageId=$action.page.id">
  <script>
    window.WRM = window.WRM || {};
    window.WRM._unparsedData = window.WRM._unparsedData || {};
    window.WRM._unparsedErrors = window.WRM._unparsedErrors || {};
    WRM._unparsedData[ "com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path" ] =
      "\"/wiki\"";
    WRM._unparsedData[ "com.atlassian.plugins.atlassian-plugins-webresource-rest:curl.cross-origin-resources" ] =
      "false";
    if ( window.WRM._dataArrived ) window.WRM._dataArrived();
  </script>
  <link type="text/css" rel="stylesheet" href="./View Source_files/aui-reset.css" data-wrm-external=""
    data-wrm-key="com.atlassian.auiplugin:aui-reset" data-wrm-batch-type="resource" media="all">
  <link type="text/css" rel="stylesheet" href="./View Source_files/aui-page-typography.css" data-wrm-external=""
    data-wrm-key="com.atlassian.auiplugin:aui-page-typography" data-wrm-batch-type="resource" media="all">
  <link type="text/css" rel="stylesheet" href="./View Source_files/batch.css" data-wrm-key="_super"
    data-wrm-batch-type="context" media="all">
  <link type="text/css" rel="stylesheet" href="./View Source_files/batch(1).css"
    data-wrm-key="plugin.viewsource,-_super" data-wrm-batch-type="context" media="all">
  <link type="text/css" rel="stylesheet" href="./View Source_files/batch(2).css" data-wrm-key="page,-_super"
    data-wrm-batch-type="context" media="all">
  <link type="text/css" rel="stylesheet" href="./View Source_files/batch(3).css" media="print"
    data-wrm-key="page,-_super" data-wrm-batch-type="context">
  <link type="text/css" rel="stylesheet" href="./View Source_files/batch(4).css" data-wrm-key="editor-content,-_super"
    data-wrm-batch-type="context" media="all">
  <!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="//d2cyaw4z41y1zi.cloudfront.net/nickguner.atlassian.net/wiki/s/d41d8cd98f00b204e9800998ecf8427e-CDN/264105304/h/d4e4e19c4669223aa75450869203638e/_/download/contextbatch/css/editor-content,-_super/batch.css?conditionalComment=lte+IE+9&amp;confluence.table.resizable=true&amp;externals=__local-default__&amp;relative-url=true" data-wrm-key="editor-content,-_super" data-wrm-batch-type="context" media="all">
<![endif]-->
  <link type="text/css" rel="stylesheet" href="./View Source_files/colors.css" media="all">

</head>

<body class="mceContentBody aui-theme-default wiki-content fullsize">
  <p>&nbsp;</p>
  <h1>Entity Relationships</h1>
  <h2>One-to-many relationship</h2>
  <p>We have a company which manages multiple software projects. We hire people and assign them to projects.
    Consequently, each project will have several people working on it. From this statement, it is easy to observe that
    project-to-workers constitute a&nbsp;<code>one-to-many</code>&nbsp;relationship, i.e. multiple people work on one
    project.</p>
  <p>Note that in this relationship, we are assuming that one person may not work on more than one project.</p>
  <p>If we had to represent a&nbsp;<code>one-to-many</code>&nbsp;relationship in the relational database, it would do it
    like this:</p><img class="confluence-embedded-image image-center"
    src="./View Source_files/image-20201125-180326.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-180326.png?version=1&amp;modificationDate=1606327407901&amp;cacheVersion=1&amp;api=v2"
    data-height="388" data-width="608" data-unresolved-comment-count="0" data-linked-resource-id="932642817"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-180326.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="694dcd14-04bb-4d7f-95aa-a6120fc5a6d4"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-180326.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-180326.png" data-image-height="349"
    data-image-width="547">
  <p>Notes:</p>
  <ol>
    <li>
      <p>We only included a minimum set of fields to demonstrate the point of the current topic.</p>
    </li>
  </ol>
  <p>Let us analyze this design.</p>
  <p>Each table&nbsp;<strong>must</strong>&nbsp;have a unique primary key. In both EMPLOYEE table and PROJECT tables,
    this field is named "ID". There are times when the primary key is made up of multiple keys, referred to as
    "composite key", however, we will not consider this case here.</p>
  <p>For the EMPLOYEE&nbsp;table, we could have designated the SSN as the primary key since we know that the Social
    Security number would be unique. This would not be a great idea for at least two reasons:</p>
  <ol>
    <li>
      <p>We may hire some foreign workers who do not have a Social Security number and whatever unique ID they may have,
        will likely not conform to the SSN format - "xxx-xx-xxxx".</p>
    </li>
    <li>
      <p>If we chose SSN to be the primary key, its datatype&nbsp; would be STRING. Primary keys are used for joining
        data from multiple tables. Joining on a field whose type is INTEGER is a lot faster than if its type were
        STRING.</p>
    </li>
  </ol>
  <p>All databases have a SEQUENCE GENERATOR. We can designate the primary key as a SEQUENCE GENERATED key and the
    database will created it for us. Thus, when we try to insert our first employee into the PEOPLE table, it's ID will
    be 1.</p>
  <p>From EMPLOYEE and PROJECT tables above we can see that both have a primary key named "ID".</p>
  <p>To express the&nbsp;<code>one-to-many</code>&nbsp;relationship, the EMPLOYEE table also has a key named
    "PROJECT_ID". The PROJECT_ID is a&nbsp;<code>foreign</code>&nbsp;key. A&nbsp;<code>foreign</code>&nbsp;key is the
    primary key of another table, in this case table PROJECT.</p>
  <p>From the demonstration above, we can see that people whose IDs are 1 &amp; 2 work for project ID=1, people with IDs
    3, 4, and 5 work for project ID=2, etc.</p>
  <p>The&nbsp;<code>one-to-many</code>&nbsp;(or&nbsp;<code>many-to-one</code>) relationships are incredibly
    common.&nbsp;</p>
  <p>Consider another situation where we want to store information about each employee. In addition to the obvious
    fields such as "First Name", "Last Name", "SSN", each employee also has a phone number, email address, and residence
    address. However, many employees will have more than one phone number, email address, and may have multiple
    residences. The only logical way to represent this would be with a&nbsp;<code>one-to-many</code>&nbsp;relationship:
  </p><img class="confluence-embedded-image image-center" src="./View Source_files/image-20201125-180420.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-180420.png?version=1&amp;modificationDate=1606327462151&amp;cacheVersion=1&amp;api=v2"
    data-height="252" data-width="889" data-unresolved-comment-count="0" data-linked-resource-id="932610051"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-180420.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="cb477dd9-dbf3-4e51-9a09-d5ec94218037"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-180420.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-180420.png" data-image-height="227"
    data-image-width="800">
  <h2>One-to-one relationship</h2>
  <p><code>One-to-on</code>e relationships are less common than&nbsp;<code>many-to-one</code>&nbsp;but they are still
    used very extensively. Lets go back to the task of storing data for each employee. In addition to storing employee's
    name, phone-numbers, etc., we also want to store employee's salary, start and end date (end data would be set to
    null for current employees), and other sensitive information. SSN field may also be considered sensitive data. While
    many applications will need access to employee's general information, such as name, department number, title, etc.,
    only HR applications that are entrusted to few employees should have access to sensitive data, such as employee's
    salary.&nbsp;</p>
  <p>Each database table can have associated privileges indicating who can see and modify data. Thus, we can create
    other tables for storing employee's sensitive data and assign privileges to this table to select few.</p>
  <p>The&nbsp;<code>one-to-one</code>&nbsp;relationships are represented the same as
    the<code>&nbsp;many-to-many</code>&nbsp;relationships, that is with a&nbsp;<code>foreign</code>&nbsp;key.</p><img
    class="confluence-embedded-image image-center" src="./View Source_files/image-20201125-180454.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-180454.png?version=1&amp;modificationDate=1606327495623&amp;cacheVersion=1&amp;api=v2"
    data-height="217" data-width="629" data-unresolved-comment-count="0" data-linked-resource-id="932806657"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-180454.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="a73a2c1f-fd46-4dfa-8bfc-363b849e649d"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-180454.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-180454.png" data-image-height="195"
    data-image-width="566">
  <p>Note:</p>
  <ol>
    <li>
      <p>EMPLOYEE_ID in EMPLOYEE_HR table is the foreign key. It contains values from <a
          href="http://employee.id/">EMPLOYEE.ID</a> field.</p>
    </li>
    <li>
      <p>Unlike the primary key, a foreign need need not (and usually will not) be unique and it may be null.</p>
    </li>
    <li>
      <p>In the case of a&nbsp;<code>one-to-one</code>&nbsp;relationship, we could have placed the "foreign" key in
        either table.</p>
    </li>
  </ol>
  <p>For example, our design could look like this, where we place the foreign key - EMPLOYEE_HR_ID in the EMPLOYEE
    table.</p><img class="confluence-embedded-image image-center" src="./View Source_files/image-20201125-180521.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-180521.png?version=1&amp;modificationDate=1606327523320&amp;cacheVersion=1&amp;api=v2"
    data-height="217" data-width="616" data-unresolved-comment-count="0" data-linked-resource-id="932577286"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-180521.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="c6755857-8da6-40ad-8eff-89399d9f6897"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-180521.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-180521.png" data-image-height="195"
    data-image-width="554">
  <p>However, since most people in the organization will be privy to data in the EMPLOYEE table, and only people who
    work in HR will be able to see the EMPLOYEE_HR table, it is better to place the foreign key into
    the&nbsp;EMPLOYEE_HR table so that those who examine contents of the EMPLOYEE table would not even know that
    EMPLOYEE_HR table exists.</p>
  <p>There are other reasons to create&nbsp;<code>one-to-one</code>&nbsp;relationships.</p>
  <p>Let's say we also want to store a single hobby for our employees. The description of a hobby may contain many
    fields. Most employees are very boring and do not have any hobbies. If we added Hobby fields to the EMPLOYEE table,
    most records would contain "holes", i.e. empty values. Thus, we can make a decision to define a HOBBY table and link
    it to EMPLOYEE with a&nbsp;<code>one-to-one</code>&nbsp;relationship.</p>
  <h2>Many-to-many relationship</h2>
  <p>Next, we expand our original definition by allowing one person to work on many projects. For example, some person
    may dedicate 60% of his time working on project&nbsp;#1 and 40% working on project #2. Any one person may work on
    more than two projects. Following this rule, we progress from a&nbsp;<code>one-to-many</code>&nbsp;relationship to
    a&nbsp;<code>many-to-many</code>&nbsp;relationship. In this&nbsp;<code>many-to-many</code>&nbsp;relationship, we
    have many people working on one project and each person may work on many projects. To support the many-to-many
    relationship, we need to introduce a new "MAPPING" table.</p><img class="confluence-embedded-image image-center"
    src="./View Source_files/image-20201125-180600.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-180600.png?version=1&amp;modificationDate=1606327562445&amp;cacheVersion=1&amp;api=v2"
    data-height="300" data-width="847" data-unresolved-comment-count="0" data-linked-resource-id="932577292"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-180600.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="b1e73f04-aab8-4a93-ae26-468a66c23484"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-180600.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-180600.png" data-image-height="270"
    data-image-width="762">
  <p>Note that table PROJECT_WORKER_MAP, maps Projects to Employees (Workers). For example,</p><img
    class="confluence-embedded-image image-center" src="./View Source_files/image-20201125-180629.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-180629.png?version=1&amp;modificationDate=1606327590783&amp;cacheVersion=1&amp;api=v2"
    data-height="387" data-width="687" data-unresolved-comment-count="0" data-linked-resource-id="932642824"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-180629.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="b22ca8fd-2902-43f7-a4ab-fb0630448ad2"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-180629.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-180629.png" data-image-height="348"
    data-image-width="618">
  <p>From the PROJECT_EMPLOYEE_MAP table we can see that employees with IDs 1 and 2 work on project 1, employee with IDs
    2, 4, and 5 work on project 2, employees with IDs 1, 7, and 8 work on project 3, etc. We can also observe that
    employee with ID 2 works on projects 1 and 2, employee with ID 1 works on projects 1 and 3.</p>
  <p>With&nbsp;<code>many-to-many</code>&nbsp;relationships, it is quite possible to have some employees who do not work
    on any projects, let's say that an active employee goes on a sabbatical and will not be involved on any project. It
    is also possible to have a project that does not have any employees, for example, an upstart project that is still
    in the research phase. In cases where employees are not assigned to any projects or project do not have any
    employees, the PROJECT_EMPLOYEE_MAP table will not have a row for associating employee to a project.</p>
  <p>Note that in the example above, no employee is assigned to project ID=5 and Employee ID=9 does not work on any
    projects.</p>
  <h1>Database Commands - DDL and DML</h1>
  <p>All databases support two types of commands: DDL that stands for Data Definition Language and DML that stands for
    Data Manipulation Language.</p>
  <h2>DDL Commands</h2>
  <p>The list of DDL commands is exhaustive. You use DDL commands to created and alter tables and indexes, drop (i.e.
    delete) tables, manage privileges, and much-much more.</p>
  <h3>Create Table</h3>
  <p>Before we can execute any database commands we need to create required tables and populate them with data. Let us
    examine the CREATE TABLE command:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="625d9ed3-0ecb-4d25-90e9-06c2c069ed0d"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>create table worker (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id integer not&nbsp;null,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;created_by varchar(255),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in_utc timestamp not&nbsp;null,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last_modified_by varchar(255),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out_utc timestamp,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audit_id varchar(255),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compensation&nbsp;double&nbsp;not&nbsp;null,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;worker_code varchar(255),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;worker_name varchar(255),
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;primary key (id)
);</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>The WORKER table in our real project has following fields:</p><img class="confluence-embedded-image image-center"
    src="./View Source_files/image-20201125-180709.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-180709.png?version=1&amp;modificationDate=1606327631285&amp;cacheVersion=1&amp;api=v2"
    data-height="122" data-width="987" data-unresolved-comment-count="0" data-linked-resource-id="932839427"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-180709.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="2082af5a-35e4-40b4-ace7-1006432f1173"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-180709.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-180709.png" data-image-height="110"
    data-image-width="888">
  <p>Each field is listed along with its datatype. For STRING fields (i.e. varchar) we also need to specify maximum
    length.</p>
  <p>Some fields may require a value, i.e. may not contain nulls. For example,&nbsp;<code>"compensation double not
      null"</code></p>
  <p>One or more fields must be designated as primary. (<code>primary key (id)</code>). A Primary key in unique and
    non-nullable by definition.</p>
  <h3>Indices and Unique Indices</h3>
  <p>Databases support many types of indices and we can't cover this topic exhaustively. Let's first discuss an index in
    a general sense.</p>
  <p>Suppose we have an ORDERS table with 1,000,000 rows. We may want to perform certain types of operations on the
    ORDERS table very frequently. For example, find order where SELLER_NAME is "One First". With 1M rows, we would have
    to check 1M records in the worst case (order O(n)).</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="cd74bdd5-16b4-41c8-a5e0-357ae4fb0c6a"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>SELECT *
FROM ORDERS
WHERE SELLER_NAME =&nbsp;'One First'</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>However, if we create an index for field SELLER_NAME, we would be able to locate this record in almost constant
    time (O(1)).</p>
  <p>The DDL command to create an index may look like this:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="f88f6df0-0c92-4560-bb0c-f6eac9925e7d"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>CREATE INDEX INDEX_SELLER_NAME
ON ORDERS(SELLER_NAME)</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>One of the common interview questions goes something like this:</p>
  <p>"You work on your application and test it continuously in your dev (development) environment. Everything works
    great so you decide to deploy it to the production environment. However, in production, your application's
    performance becomes very sluggish. Why is that?"</p>
  <p>Your answer may be as follows:</p>
  <p>"It is quite possible that the dev database has been property tuned with required indices and it is therefore
    performant. However, production environments uses a different database and it is possible that it does not have all
    the required indices".</p>
  <p>In addition to a simple index, databases support a notion of a&nbsp;<code>unique index</code>.</p>
  <p>Let's say that we want our database to enforce business rules and one of our business rules is that the combination
    of values in&nbsp;<code>audit_id</code>&nbsp;and&nbsp;<code>out_utc</code>&nbsp;fields must be unique. Thus, it
    would be an error if two records had same values in
    both&nbsp;<code>audit_id</code>&nbsp;and&nbsp;<code>out_utc</code>&nbsp;fields. The DDL command for a unique index
    would look like this:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="a3624008-696f-4886-b3df-f87c582003f6"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>create unique index UKbe6uin1lttt8dh3oddmrb6g6d on worker (audit_id, out_utc);</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>The name of the index ("<code>UKbe6uin1lttt8dh3oddmrb6g6d</code>" in the example above) was randomly generated and
    the name itself is not important. The only thing that is important is to identify a set&nbsp; of fields that must be
    unique.</p>
  <h3>Constraints</h3>
  <p>Let's go back to our&nbsp;<code>many-to-many</code>&nbsp;illustration and consider what would happen if someone
    decided to delete an employee with ID=1</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="37384b34-d93f-4138-8fe1-8f5a4efae8f9"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>delete from employee where id =&nbsp;1</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>We would be left with records in table PROJECT_EMPLOYEE_MAP that would not make sense. (See records with ID 1 and 6
    where the EMPLOYEE_ID is 1 which was deleted)</p><img class="confluence-embedded-image image-center"
    src="./View Source_files/image-20201125-180812.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-180812.png?version=1&amp;modificationDate=1606327693971&amp;cacheVersion=1&amp;api=v2"
    data-height="398" data-width="708" data-unresolved-comment-count="0" data-linked-resource-id="932839433"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-180812.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="5f86647e-67e0-4ebe-9ddd-aec17527f5eb"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-180812.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-180812.png" data-image-height="358"
    data-image-width="637">
  <p>We can still delete employee with ID=1, however, we first need to delete records from the&nbsp;PROJECT_EMPLOYEE_MAP
    table that associate employee ID=1 with projects. This constraint can be enforced with command:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="8828a87d-0e23-486b-b559-a8baa6b70820"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>alter table project_worker_map add constraint FK6baomleyjvq2jkfy8n5tscn0l foreign key (worker_id) references worker;</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>There are too many DDL commands and it is not important to know them all, only to know that they exist and can be
    easily discovered. Most of the common DDL commands affect tables and indices, such as:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="2625ab64-387a-4431-a938-3cdae36e947a"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>create table ...
alter table ...
drop table ...
create index ...
create unique index ...
drop index ...</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <h3>Privileges</h3>
  <p>We had mentioned earlier the need for a one-to-one relationship. In that example, we decided to store sensitive
    employee information inside EMPLOYEE_HR table, accessible to HR staff only. For people working in HR who do need
    this access, we can assign them to a user (or group) with a special name, i.e. USER_HR. Then, we can execute the
    following command:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="463e382b-ece7-477c-a82e-d7a426cb6753"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>GRANT ALL ON TABLE EMPLOYEE_HR TO USER USER_HR</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>One may think that knowing the syntax of this command might allow you to peek at other employee's salary. However,
    only database admins, or other users with special privileges, would be able to execute the GRANT command.</p>
  <h2>DML Commands</h2>
  <p>The good news about Data manipulation commands (DML) is that they comprise only four commands: INSERT, UPDATE,
    DELETE, and SELECT. In the industry, these are often referred to as CRUD commands for Create, Read, Update, Delete.
  </p>
  <p>The bad news is that some of these commands, particularly SELECT could get very complex. In this document we will
    only cover the basics.</p>
  <h3>INSERT Command</h3>
  <p>Most of the INSERT commands are very simple.</p>
  <p>For example:</p>
  <table data-layout="full-width" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="ee863f45-72fa-45d2-b73e-13f0a4ee76f3"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>INSERT INTO WORKER(ID, AUDIT_ID, IN_UTC, OUT_UTC, WORKER_CODE, WORKER_NAME, COMPENSATION, CREATED_BY, LAST_MODIFIED_BY)
VALUES(1,&nbsp;'00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP - CURRENT_TIMEZONE,&nbsp;'9999-12-31',&nbsp;'CODE-1',&nbsp;'One First',&nbsp;120000.00,&nbsp;'unknown',&nbsp;'unknown');</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>This example could also be written like this:</p>
  <table data-layout="full-width" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="8c7543b4-38c9-465e-9ac1-465232d6c89f"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>INSERT INTO WORKER VALUES(1,&nbsp;'00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP - CURRENT_TIMEZONE,&nbsp;'9999-12-31',&nbsp;'CODE-1',&nbsp;'One First',&nbsp;120000.00,&nbsp;'unknown',&nbsp;'unknown');</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>The reason why the above syntax would work is because we are populating every single field in the WORKER table. If
    we only wanted to populate some of the fields, we would need to list them, as in:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="15499e49-fa69-4ab5-bc4b-1f8aa1e70e38"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>INSERT INTO WORKER(ID, AUDIT_ID, WORKER_CODE, WORKER_NAME, COMPENSATION)
VALUES(1,&nbsp;'00000000-0000-0000-0000-000000000001',&nbsp;'CODE-1',&nbsp;'One First',&nbsp;120000.00);</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Note that if you don't specify a field inside the INSERT statement, that field must be nullable.</p>
  <h3>UPDATE Command</h3>
  <p>To change values in an existing record we can do this:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="d1d314bb-a5fe-430c-a386-01ab86212f21"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>update worker
set compensation =&nbsp;200000,
worker_code =&nbsp;'CODE-X'
where id =&nbsp;3</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Naturally, this syntax could get a lot more complex and we will return to this command later.</p>
  <h3>DELETE Command</h3>
  <p>The simplest delete command looks like this:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td data-highlight-colour="initial" class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="c64e155d-9ac6-459f-a924-cbcada0130b0"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>delete from worker</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>This command will delete all records from table WORKER.&nbsp;</p>
  <p>One of the common interview questions it to ask about the difference of this&nbsp;<code>delete</code>&nbsp;command
    and the&nbsp;<code>drop table</code>&nbsp;command:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 340.0px;">
      <col style="width: 340.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>DELETE</p>
        </th>
        <th class="confluenceTh">
          <p>DROP</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="2d111b0e-c0b3-4112-8c10-07ed037f5cbb"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>delete from worker</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6c87d682-911a-44ff-910c-99f333995184"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>drop table worker</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>When you use the&nbsp;<code>delete</code>&nbsp;command, the table still exists but contains no records. When
    you&nbsp;<code>drop</code>&nbsp;the table, the table is destroyed and you would need to create it again if you
    decide to add records to it.</p>
  <p>More often than not, we will add a condition to the delete command, for example:</p>
  <table data-layout="wide" class="confluenceTable">
    <colgroup>
      <col style="width: 648.0px;">
      <col style="width: 312.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Command</p>
        </th>
        <th class="confluenceTh">
          <p>Description</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="0d88e79c-40f5-48bf-ab44-3d61b9e2ef20"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>delete from worker where compensation &lt; 100000</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <p>Delete workers who make less than 100,000</p>
        </td>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="9090ce55-507f-411e-b5fd-59b29b65f2bb"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>delete from worker where worker_code in ('CODE-1', 'CODE-2')</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <p>Delete workers with WORKER_CODE CODE-1 and CODE-2</p>
        </td>
      </tr>
    </tbody>
  </table>
  <h3>SELECT Command</h3>
  <p>This is where all the fun is. Many books and PhD decertations are dedicated to this topic. Let us start simple:</p>
  <img class="confluence-embedded-image image-center" src="./View Source_files/image-20201125-181044.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-181044.png?version=1&amp;modificationDate=1606327845796&amp;cacheVersion=1&amp;api=v2"
    data-height="516" data-width="800" data-unresolved-comment-count="0" data-linked-resource-id="932872195"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-181044.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="108c3c66-d552-4c6e-8183-6633cd0883ce"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-181044.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-181044.png" data-image-height="464"
    data-image-width="720"><img class="confluence-embedded-image image-center"
    src="./View Source_files/image-20201125-181101.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-181101.png?version=1&amp;modificationDate=1606327862773&amp;cacheVersion=1&amp;api=v2"
    data-height="307" data-width="801" data-unresolved-comment-count="0" data-linked-resource-id="932839439"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-181101.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="10318896-2b5d-48db-b0ff-25998ae1ae23"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-181101.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-181101.png" data-image-height="276"
    data-image-width="721">
  <p>Note:</p>
  <ol>
    <li>
      <p>To select all fields use "<code>select * ...</code>"</p>
    </li>
    <li>
      <p>We use "<code>where</code>" to filter records to be displayed. Multiple expressions may be strung together
        with&nbsp;<code>and, or, in,</code>&nbsp;and other operators.</p>
    </li>
    <li>
      <p>Note the usage of&nbsp;&nbsp;<code>like</code>&nbsp;operator</p>
    </li>
    <li>
      <p>Aliases are often used with SELECT commands.</p>
    </li>
  </ol>
  <h4>GROUP BY and HAVING Clauses</h4>
  <p>Another powerful feature of SELECT is to aggregate records via GROUP BY. Let's start with example. We would like to
    find out how many people work on each project. We use the PROJECT_WORKER_MAP table to map workers to projects:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 340.0px;">
      <col style="width: 340.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
        <th class="confluenceTh">
          <p>Response</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="50118ebe-a255-430d-9050-bb191109253a"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select project_id, count(worker_id) as WorkerCount
from project_worker_map
group by project_id</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="fbbd8403-c25c-4519-b3a3-805928c61391"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>PROJECT_ID&nbsp;&nbsp; WORKERCOUNT&nbsp;
--------------------------
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Suppose we are interested in seeing only those projects where the worker count is greater than 2</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 340.0px;">
      <col style="width: 340.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
        <th class="confluenceTh">
          <p>Response</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="69b57d60-ce8f-4d1c-a0ee-e25fea38fb5b"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select project_id, count(worker_id) as Worker_Count
from project_worker_map
group by project_id
having count(worker_id) &gt; 2</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="b523ea71-8b56-42c2-ae43-c79b8ebcc561"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>PROJECT_ID&nbsp;&nbsp; WORKER_COUNT&nbsp;
---------------------------
3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Note:</p>
  <p><code>having</code>&nbsp;to&nbsp;<code>group by</code>&nbsp;is what&nbsp;<code>where</code>&nbsp;is
    to&nbsp;<code>select</code></p>
  <p>Above command is incredibly useful and you should store it somewhere in your memory bank. Often you run a process
    which will populate rows in some table. It may be an error to have records with a duplicate value in some field.
    Thus, you would execute the following query to check:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="cb63914c-f3ac-49f9-9245-e80ba6f4be29"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select some_field
from some_table
group by some_field
having count(some_field) &gt; 1</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <h3>Joining Tables</h3>
  <p>Let us take a leap into something more interesting. We would like to determine the total compensations for each
    project. The compensation is specified in the WORKER table, so we need to join WORKER and PROJECT_WORKER_MAP tables.
  </p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 340.0px;">
      <col style="width: 340.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
        <th class="confluenceTh">
          <p>Result</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="161addd8-bab1-4758-abf9-5d01a1a50ed2"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select p.project_id, sum(w.compensation) as TotalComp
from worker w, project_worker_map p
where  = p.worker_id
group by project_id</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="94f4d9da-4282-4b70-a5c5-d3002df3adf9"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>PROJECT_ID&nbsp;&nbsp; TOTALCOMP
----------------------
1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;310000.0
2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;425000.0
3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;735000.0</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Let us observe several things from above command:</p>
  <p>In group by selects, fields that are listed on the select clause must match fields that appear in the group by
    clause. However, the select clause may also specify aggregate operations such as SUM, AVG, and others.</p>
  <p>As a slight variation to above, let's say we only want to see projects whose total compensation is greater than
    500,000.</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 340.0px;">
      <col style="width: 340.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
        <th class="confluenceTh">
          <p>Result</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="890f4003-aad6-4b26-9499-734d7784aa6d"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select p.project_id, sum(w.compensation) as TotalComp
from worker w, project_worker_map p
where  = p.worker_id
group by project_id
having sum(w.compensation) &gt; 500000</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="a9da6746-24c7-4e35-bc79-5df2cc1fd3d7"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>PROJECT_ID&nbsp;&nbsp; TOTALCOMP
----------------------
3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;735000.0</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Notes:</p>
  <p>In the previous query, I used alias w for worker and p for project_worker_map. If I had not used aliases, I would
    need to type the full name of the table, as in:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 680.0px;">
    </colgroup>
    <tbody>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="e031aa4b-9777-44db-aa91-f011c744f253"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select project_worker_map.project_id, sum(worker.compensation)
from worker, project_worker_map
where worker = project_worker_map.worker_id
group by project_id
having sum(worker.compensation) &gt; 500000</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <h4>Min and Max</h4>
  <p>These examples will be provided without explanations:</p>
  <table data-layout="default" class="confluenceTable">
    <colgroup>
      <col style="width: 340.0px;">
      <col style="width: 340.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
        <th class="confluenceTh">
          <p>Response</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6074ed9f-5f6d-498a-82e5-ddf6c95fdb8b"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select max(compensation) as Max
from worker</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="6fc24a56-98cf-43fa-9311-8c13862d8d2d"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>MAX&nbsp;&nbsp;&nbsp;&nbsp;
--------
240000.0</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="9475f06b-f750-4235-8adb-dbcd841ccf4d"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select min(compensation) as Min
from worker</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="45211c31-0c04-4e63-93ae-f87ee15da4ad"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>MIN&nbsp;&nbsp;&nbsp;
-------
40000.0</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <h4>Subqueries</h4>
  <p>Suppose we only have information on WORKER_CODE, i.e. 'CODE-1' and 'CODE-2' and we would like to find out what
    projects they are working on. To join table WORKER to table WORKER_PROJECT_MAP we need to have <a
      href="http://worker.id/">WORKER.ID</a> and&nbsp;WORKER_PROJECT_MAP.WORKER_ID. However, we do not know values for
    <a href="http://worker.id/">WORKER.ID</a>, we only know WORKER_CODE.
  </p>
  <p>Before we accomplish our final task, let's perform some intermediate steps, like joining three tables: PROJECT,
    WORKER, and PROJECT_WORKER_MAP.</p><img class="confluence-embedded-image image-center"
    src="./View Source_files/image-20201125-181300.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-181300.png?version=1&amp;modificationDate=1606327982306&amp;cacheVersion=1&amp;api=v2"
    data-height="569" data-width="657" data-unresolved-comment-count="0" data-linked-resource-id="932642837"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-181300.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="9f7840b5-5322-4116-b71f-6148f63da02f"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-181300.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-181300.png" data-image-height="512"
    data-image-width="591">
  <p>Note:</p>
  <p>Second command uses&nbsp;<code>order by</code>&nbsp;clause to sort results
    by&nbsp;<code>worker_name</code>&nbsp;field.</p>
  <p>However, for our current task, we don't have IDs of workers, we have&nbsp;<code>worker_code</code>. Thus, we need
    to use the worker_code to get to the <a href="http://worker.id/">WORKER.ID</a>.</p>
  <table data-layout="wide" class="confluenceTable">
    <colgroup>
      <col style="width: 644.0px;">
      <col style="width: 316.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
        <th class="confluenceTh">
          <p>Result</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="3f28fe1f-4a37-4972-9d78-11f0ccfce582"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select p.project_name, w.worker_name
from project p, worker w, project_worker_map m
where m.project_id = p.id
and m.worker_id = w.id
and m.worker_id in (
&nbsp;&nbsp;&nbsp;&nbsp;select id from worker where worker_code in('CODE-1',&nbsp;'CODE-2')
&nbsp;&nbsp;&nbsp;&nbsp;)</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="f2a98548-0846-4bc5-8a01-9d11a552799a"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>PROJECT_NAME&nbsp; WORKER_NAME
-------------------------
P-1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;One First&nbsp;
P-2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Two Second
P-3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;One First&nbsp;
P-3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Two Second</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Note:</p>
  <p>We need to join three tables and define the filtering criteria</p>
  <p>We can combine this result with GROUP BY clause to determine the total compensation for these projects:</p>
  <table data-layout="wide" class="confluenceTable">
    <colgroup>
      <col style="width: 602.0px;">
      <col style="width: 356.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
        <th class="confluenceTh">
          <p>Result</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="a3b54d90-00a1-48b7-a06e-8afc7fb6bdfd"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select p.project_name, sum(w.compensation) as TotalComp
from project p, worker w, project_worker_map m
where m.project_id = p.id
and m.worker_id = w.id
and m.worker_id in (
&nbsp;&nbsp;&nbsp;&nbsp;select id from worker where worker_code in('CODE-1',&nbsp;'CODE-2')
&nbsp;&nbsp;&nbsp;&nbsp;)
group by p.project_name</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="de8d9b6d-3e70-47d8-8f4a-f8e4e48de833"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>PROJECT_NAME&nbsp; TOTALCOMP
-----------------------
P-1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;120000.0
P-2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;240000.0
P-3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;360000.0</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <h1>Next Steps</h1>
  <p>The information presented so far does not even scratch the surface. There are things that you need to be aware of
    even though they are not demonstrated in this document.</p>
  <h2>SQL Standards</h2>
  <p>Like everything else, SQL went through a lot of iterations over many years. The SQL presented here follows the
    original SQL-86 format. I believe the latest is called SQL:2003. The syntax for SELECT commands has changed,
    however, the original syntax is still supported. Some operations differ by database providers. For example, to
    perform a left outer join (discussed shortly), you will need to adhere to the format of the database provider such
    as Oracle, Sybase, Postgres, DB2, etc.</p>
  <p>The main point is to understand what capabilities are possible. It is easy to find the syntax for a specific
    command on the internet.</p>
  <h2>LEFT and RIGHT OUTER JOINS</h2>
  <p>So far, the examples provided here used a standard, or "INNER" join. For example, we can join multiple tables using
    INNER join to see all projects and people who are assigned to them. Some projects may not have any people assigned.
    Suppose we want to see all projects. If people are assigned to them, we will see person name in the WORKER column.
    If a project has no workers assigned, that project will not appear in the response. Often, we want to see projects
    and workers assigned to them and also projects that have no workers. This is the job for a LEFT OUTER join. If no
    one is assigned&nbsp; to some project, the project will still appear but the value in the WORKER column will be
    null. RIGHT OUTER join is similar to LEFT OUTER join but works in the right-to-left order.</p>
  <h2>SELF JOIN</h2>
  <p>Here is one of the most common problems for a SELF JOIN. Let's say we have a table of employees, along with their
    salaries and ID of the manager. Let's say our fictitious table looks like this:</p><img
    class="confluence-embedded-image image-center" src="./View Source_files/image-20201125-181453.png"
    data-image-src="https://nickguner.atlassian.net/wiki/download/attachments/932544513/image-20201125-181453.png?version=1&amp;modificationDate=1606328094917&amp;cacheVersion=1&amp;api=v2"
    data-height="288" data-width="381" data-unresolved-comment-count="0" data-linked-resource-id="932872205"
    data-linked-resource-version="1" data-linked-resource-type="attachment"
    data-linked-resource-default-alias="image-20201125-181453.png" data-base-url="https://nickguner.atlassian.net/wiki"
    data-linked-resource-content-type="image/png" data-linked-resource-container-id="932544513"
    data-linked-resource-container-version="1" data-media-id="46f6ac14-5898-4d08-a39d-a8fa7e2d732e"
    data-media-type="file" title="DevOps &gt; Database Primer &gt; image-20201125-181453.png"
    data-location="DevOps &gt; Database Primer &gt; image-20201125-181453.png" data-image-height="259"
    data-image-width="343">
  <p></p>
  <p>We need to answer following question: "Provide a list on employees who make more money than their manager." From
    table's data we can observe that Employee IDs 1, 2 3, 4 all report to employee whose ID is 5. Only employee ID=4
    makes more money than his manager.</p>
  <p>This question comes up so often at interviews that I owe you a demonstration.</p>
  <p>Let's create a new table with data as shown above:</p>
  <table data-layout="wide" class="confluenceTable">
    <colgroup>
      <col style="width: 158.0px;">
      <col style="width: 802.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Create Table</p>
        </th>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="8d769cec-fc76-4b40-a5bc-b9c6ea9945e0"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>create table workerX (id integer not null, name varchar(255), compensation double not null, manager_id integer not null)</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
      <tr>
        <th class="confluenceTh">
          <p>Populate</p>
        </th>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="e1018af8-e938-4e16-b13c-c30745a38dcc"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>insert into workerX (id, name, compensation, manager_id) values (1, 'One First', 50000, 5)
insert into workerX (id, name, compensation, manager_id) values (2, 'Two Second', 70000, 5)
insert into workerX (id, name, compensation, manager_id) values (3, 'Three Third', 90000, 5)
insert into workerX (id, name, compensation, manager_id) values (4, 'Four Fourth', 180000, 5)
insert into workerX (id, name, compensation, manager_id) values (5, 'Five Fifth', 160000, 9)</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Now we can execute a query to find all employees who make more money than their managers:</p>
  <table data-layout="wide" class="confluenceTable">
    <colgroup>
      <col style="width: 540.0px;">
      <col style="width: 418.0px;">
    </colgroup>
    <tbody>
      <tr>
        <th class="confluenceTh">
          <p>Query</p>
        </th>
        <th class="confluenceTh">
          <p>Result</p>
        </th>
      </tr>
      <tr>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="f73c4d0f-4d71-4680-99a8-49e46f116f25"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>select employee.*
from workerX employee, workerX manager
where employee.manager_id = 
and employee.compensation &gt; manager.compensation</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
        <td class="confluenceTd">
          <table class="wysiwyg-macro" data-macro-name="code" data-macro-id="e2f595d0-4aa5-4e57-bf4b-997af9c0928b"
            data-macro-schema-version="1"
            style="background-image: url(https://nickguner.atlassian.net/wiki/plugins/servlet/confluence/placeholder/macro-heading?definition=e2NvZGV9&amp;locale=en_US&amp;version=2); background-repeat: no-repeat;"
            data-macro-body-type="PLAIN_TEXT">
            <tbody>
              <tr>
                <td class="wysiwyg-macro-body">
                  <pre>ID NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMPENSATION&nbsp; MANAGER_ID
----------------------------------------
4&nbsp;&nbsp;Four Fourth&nbsp;&nbsp;180000.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <p>Note how use of aliases, employee and manager, were absolutely essential for a SELF JOIN query.</p>
  <h2>UNIONS</h2>
  <p>There may be times when we would like to combine results from multiple tables. Our SELECT clause identifies fields
    and they datatype. As long as the fields in the SELECT clause match, data from multiple tables may be combined with
    a UNION command.</p>
  <h2>Stored Procedures, Triggers, and Temporary Tables</h2>
  <p>SELECT command is extremely powerful and provides many clauses to wield incredible power. In addition to standard
    features of the SQL, each database provide furnishes a library of functions to works with strings, dates, and just
    about anything else. However, sometimes all this power is still not enough. There may be times when it would be
    useful to create intermediate results and stored them in the&nbsp;<code>temp</code>&nbsp;table. Next, subsequent
    commands can me used in combination with data in the temp table to produce more elaborate answers.</p>
  <p>For anything that can't be done with SQL, there are stored procedures. Each database provider has its own
    programming language to interact with databases. A program written in this language is called the stored procedure.
    Some companies build their entire applications with stored procedures. In my view, this is a terrible idea but it
    may be justified for certain types of projects. One of the problems if stored procedures is that they can't be
    debugged. You may need tp place results of some intermediate computation into a table for debugging purposes.</p>
  <p>It is also important to realize that a stored procedure is often composed to several SQL statements without
    resorting to any other programming aspects. To support transactions, you will need to place your SQL commands inside
    the stored procedure.</p>
  <p>A Trigger is a stored procedure. It is triggered when a certain action occurs, such as inserting a new row or
    updating it. Some time ago, triggers where relied on very heavily, however, over the years they usefulness has
    diminished.</p>
  <h2>Transactions and RollBacks</h2>
  <p>Let's say we have a site for taking customer orders. When the order is placed we need to update ORDERS table,
    INVENTORY table, and possible CUSTOMERS table to keep track of all the money they had spent on our crap.</p>
  <p>Say we update the ORDERS table first and then try to update the INVERTORY table, but that update fails. Now we have
    a system in an inconsistent state. To prevent this inconsistent state we need to ROLL-BACK our transaction. Thus,
    either all commands complete successfully or none at all.</p>
  <p>Failure to update the INVERNTORY table may happen for many diffident reasons, for example, the table may run out of
    storage space that was allocated for it.</p>
  <p>&nbsp;</p>



  <div id="recorder_overlay"
    style="position: fixed; width: 100%; height: 100%; top: 0; display: none; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.5); z-index: 9999999; cursor: pointer; "
    onclick="this.style.display=&#39;none&#39;"></div>
</body>

</html>
